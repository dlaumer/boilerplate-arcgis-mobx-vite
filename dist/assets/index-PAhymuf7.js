const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-Cscpjfh7.js","assets/substitute-Cp5tRue2.js","assets/pe-wasm-Co3DzcyP.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/statsWorker-D-yHg47G.js","assets/utils-D_SnCRx-.js","assets/quantizationUtils-BGKUE1Kx.js","assets/utils-D615TF1y.js","assets/utils-hSE5r_SA.js","assets/ClassBreaksDefinition-CbxUFveV.js","assets/geometryEngineWorker-CA-tZxOm.js","assets/geometryEngineJSON-Bvf5zUh7.js","assets/geometryEngineBase-B0ZyeKAX.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-CYofRzAv.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeature-DL1f172u.js","assets/memoryEstimations-CsRDpl56.js","assets/executeQueryForSnapping-B6Cp6xTp.js","assets/queryUtils-ENA1BF09.js","assets/QueryEngine-Ccc13jex.js","assets/featureConversionUtils-Vb99EY1i.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/WhereClauseCache-BOgKODpj.js","assets/WhereClause-C8KlKOoq.js","assets/TimeOnly-aF9Tn6fb.js","assets/timeSupport-CtKNpu9m.js","assets/QueryEngineCapabilities-B_pTbIiR.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-Dsia34av.js","assets/FeatureStore-C9yCy_VG.js","assets/BoundsStore-Bi0tS0u5.js","assets/PooledRBush-BsvBK0UB.js","assets/optimizedFeatureQueryEngineAdapter-ENYwZtfX.js","assets/number-VWTMPRAN.js","assets/clientSideDefaults-Dn0sYs4w.js","assets/EdgeProcessingWorker-CpJOvq9C.js","assets/workerHelper-CA62F0jk.js","assets/InterleavedLayout-DWQ6OWlR.js","assets/BufferView-awvNx3mQ.js","assets/types-D0PSWh4d.js","assets/edgeProcessing-RkMl9iEa.js","assets/deduplicate-DCvw-vao.js","assets/Indices-C1swA4S1.js","assets/VertexAttribute-Cq4MnHjR.js","assets/glUtil-DYJMkRt0.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-Cu8v_usF.js","assets/ElevationSamplerWorker-iQaUIEEG.js","assets/MeshLocalVertexSpace-aGD1Jvpd.js","assets/vertexSpaceConversion-BZ0okncT.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-Dk4dwAN8.js","assets/spatialReferenceEllipsoidUtils-BRwsGK5b.js","assets/computeTranslationToOriginAndRotation-BVJ7Zor1.js","assets/projectPointToVector-DqO91lag.js","assets/meshVertexSpaceUtils-CokAnjc7.js","assets/vec3-Ce6alyLL.js","assets/vec4-Bwx8dFS_.js","assets/FeatureServiceSnappingSourceWorker-Cn3XU-3l.js","assets/symbologySnappingCandidates-s6trbkfV.js","assets/pbfQueryUtils-D842wqNf.js","assets/pbf-25DHRTyK.js","assets/query-Yb9Hiaro.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/GeoJSONSourceWorker-C4L8cjPi.js","assets/geojson-BHIsT5DG.js","assets/sourceUtils-B1n6evIf.js","assets/MemorySourceWorker-Cvi2UQLz.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-DBxZRghg.js","assets/dehydratedFeatures-fylz02Nc.js","assets/FeaturePipelineWorker-DAEmKWWT.js","assets/AttributeStore-DWwffkGQ.js","assets/Utils-DtRohgPC.js","assets/UpdateTracking2D-BS25WV3Y.js","assets/BidiEngine-QXap_35O.js","assets/GeometryUtils-CuW9bgOs.js","assets/rasterizingUtils-FxQLLY1x.js","assets/floatRGBA-C0EmisXz.js","assets/Rect-CUzevAry.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-DGzWIDwY.js","assets/TechniqueType-uMFRS8dR.js","assets/PieChartMeshWriter-CWVqumg5.js","assets/TurboLine-CHySo9WB.js","assets/utils-BEfU09lB.js","assets/earcut-D9gy186-.js","assets/grouping-C7BHKvP7.js","assets/QueueProcessor-B6mF9TCR.js","assets/operatorGeodeticDensify-DQAwhubH.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-BCl9gXoV.js","assets/ogcFeatureUtils-sFIgPjAT.js","assets/parquet-CCasdmiW.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-B1q7wyQS.js","assets/PointCloudWorker-B-QGZgZW.js","assets/quat-Bp-Tc0ki.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-Dd7JNF5k.js","assets/I3SBinaryReader-DtHYVax0.js","assets/orientedBoundingBox-DSGiR4p9.js","assets/plane-6MWJhUeE.js","assets/RasterWorker-COAVNxth.js","assets/dataUtils-BKff62va.js","assets/RasterSymbolizer-9qKSka45.js","assets/colorUtils-BopbNhpe.js","assets/rasterFunctionHelper-NeXSnoAP.js","assets/rasterProjectionHelper-CzlgCX-p.js","assets/PolynomialTransform-DXkUnFsp.js","assets/SceneLayerSnappingSourceWorker-SSvO8ceO.js","assets/lineSegment-BPkfw3cc.js","assets/sphere-B6kQjYN0.js","assets/Octree-BK6u9q7v.js","assets/SceneLayerWorker-B9qhNWwN.js","assets/projectVectorToVector-Bu2TUdcC.js","assets/I3SUtil-C6auRPb4.js","assets/edgeUtils-DhDDQ05F.js","assets/NormalAttribute.glsl-XNXn53h7.js","assets/glsl-BH37Aalp.js","assets/ShaderOutput-DnYY5J1_.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-CP9JfyKf.js","assets/wfsUtils-rVKET31K.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-BudjIasZ.js","assets/enums-BRzLM11V.js","assets/config-BOD8--da.js","assets/StyleDefinition-CsMx6hLz.js","assets/SourceLayerData-CvxJy5bH.js","assets/StyleRepository-BBYhgOdZ.js","assets/Feature3DPipelineWorker-C5eoSiJ7.js","assets/HUDMaterial.glsl-B7ctpIYG.js","assets/Geometry-Cyy4Gw1h.js","assets/renderState-CsLtUR7R.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-CNkelB5M.js","assets/requestImageUtils-t62LgKJN.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-CNGLIFeB.js","assets/HUDMaterial-C9cW7Cad.js","assets/VertexArrayObject-BHI5OGAl.js","assets/dehydratedFeatureUtils-SW-UPQ-U.js","assets/doublePrecisionUtils-B0owpBza.js","assets/hydratedFeatures-BIGPm2-E.js","assets/ShaderBuilder-DRbVcowp.js","assets/IntersectorInterfaces-CmNINbyF.js","assets/DefaultMaterial-ugtIj8Il.js","assets/LodResources-K2_cBxxX.js","assets/TextureCompressionWorker-Bbstcnjc.js","assets/Popup-C0NBTO3Y.js","assets/unitFormatUtils-KDOT5eyL.js","assets/quantityUtils-BBcTW5Al.js","assets/AttachmentInfo-BlV51GdG.js","assets/featureUtils-B202xmHY.js","assets/utils-Drzin8x5.js","assets/cimSymbolUtils-BlcBc1Uq.js","assets/executeQueryJSON-DDhq7xqd.js","assets/shared-DSTySu3K.js","assets/ReactiveSet-BNxw6e_W.js","assets/layerViewUtils-D3aZgJT5.js","assets/ElevationLayer-doL5OcLe.js","assets/ArcGISCachedService-BtCoJPK6.js","assets/TileInfoTilemapCache-C_qH15LB.js","assets/TilemapCache-3a4Cmgc2.js","assets/WorkerHandle-BUstWbVr.js","assets/layersCreator-Cchii-zJ.js","assets/loadUtils-Br26zuLN.js","assets/fetchService-Dpb6ud5h.js","assets/associatedFeatureServiceUtils-xU6BzFwL.js","assets/lazyLayerLoader-DZEjwOcQ.js","assets/portalLayers-CK7Rr80-.js","assets/arcgisLayers-C_ThBKgd.js","assets/arcadeUtils-CVjqHQnc.js","assets/arcade-Cv-PGDme.js","assets/unitConversion-CHFZcIRj.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webStyleSymbolUtils-eOKnt7Sa.js","assets/devEnvironmentUtils-CnNDiFMM.js","assets/webStyleAcceptedFormats-CG7ZQ6BV.js","assets/webglDeps-CgGSnfMr.js","assets/FramebufferObject-CYuJ3rTt.js","assets/ProgramTemplate-LJYnLUf1.js","assets/NestedMap-GuqgquCN.js","assets/mapViewDeps-G1XEDaxQ.js","assets/FeatureCommandQueue-C4iDzwLi.js","assets/GraphShaderModule-D7-m9YCf.js","assets/WGLContainer-PaIHHyP7.js","assets/Container-_57wgcmQ.js","assets/SDFHelper-CiQE5395.js","assets/OverrideHelper-DzGsjn-D.js","assets/GridShader-CPnQn3sZ.js","assets/testSVGPremultipliedAlpha-Q-3pTURc.js","assets/RenderingContext-CSMvvuzp.js","assets/CIMResourceManager-BuvPwROp.js","assets/utils-CA0lnNFH.js","assets/VertexStream-DsOl1Zsw.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-CI7u0jns.js","assets/GraphicContainer-DJf2hCaL.js","assets/AGraphicContainer-CBLsw2-9.js","assets/TechniqueInstance-CehT1Tl2.js","assets/TileContainer-B9BvOzaj.js","assets/gridUtils-QzXt0NEL.js","assets/geodesicUtils-CA9kvbPX.js","assets/TileLayerView2D-DDuAQUOR.js","assets/imageUtils-KU7RjLE6.js","assets/BitmapTechnique-BgSryPxQ.js","assets/LayerView-CedF8oPM.js","assets/HighlightGraphicContainer-BtDUGqRs.js","assets/RefreshableLayerView-DCWLIxCn.js","assets/MapServiceLayerViewHelper-CxjmUoqp.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/drapedUtils--kuSDohN.js","assets/sublayerUtils-BcHYaT5t.js","assets/popupUtils-DfEHGcWP.js","assets/FeatureLayerView2D-HL1aZ2bW.js","assets/timeSupport-th3zs9Wi.js","assets/AttributeBinsFeatureSet-bWK34oeJ.js","assets/AttributeBinsQuery-C17wyF6T.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-D0-DmkfU.js","assets/BitmapContainer-CLaOnKpO.js","assets/ExportStrategy-C3UaN4eZ.js","assets/CatalogLayerView2D-fYGm5nYN.js","assets/CatalogDynamicGroupLayerView2D-CMB0Z87M.js","assets/CatalogFootprintLayerView2D-CMbgK5gO.js","assets/GeoRSSLayerView2D-B3JgAwo8.js","assets/GraphicsLayerView2D-DFlvVzL4.js","assets/GroupLayerView2D-CWCEHo3o.js","assets/ImageryLayerView2D-BGNSeAPI.js","assets/RasterVFDisplayObject-CSx5_3QR.js","assets/ImageryTileLayerView2D-tgpstXxS.js","assets/rasterFieldUtils-DlRF7DLd.js","assets/rasterUtils-wSwwhk1G.js","assets/RawBlockCache-Bq-4vAMY.js","assets/KMLLayerView2D-DBfkaG8r.js","assets/kmlUtils-CCYzb_r_.js","assets/KnowledgeGraphLayerView2D-D0l6bOsM.js","assets/MapImageLayerView2D-Dk20UdrD.js","assets/ExportImageParameters-DxTRlWzM.js","assets/MapNotesLayerView2D-Cy_p4hx0.js","assets/MediaLayerView2D-BB21RNtP.js","assets/mediaLayerUtils-qmxwIrm0.js","assets/OverlayContainer-ESmq4yRj.js","assets/OGCFeatureLayerView2D-Cp2oy1z0.js","assets/RouteLayerView2D-Dtlk8M4m.js","assets/Stop-DX9HZ9r-.js","assets/networkEnums-RoVYJsQa.js","assets/StreamLayerView2D-C3e2JcFo.js","assets/SubtypeGroupLayerView2D-DgwKz2Ij.js","assets/VectorTileLayerView2D-B6c3By6p.js","assets/VideoLayerView2D-BRM0PTfp.js","assets/GraphicsLayer-DDBqgihS.js","assets/TelemetryDisplay-DWVtq7m6.js","assets/WMSLayerView2D-Bej5Y6Pm.js","assets/ExportWMSImageParameters-DqBH9gqR.js","assets/WMTSLayerView2D-CPeef8aV.js","assets/apng-WmvM-sRy.js","assets/index-Csm_Ojc8.js","assets/index-DgD4qMFb.js","assets/guid-ejniuQmw.js","assets/useT9n-CLwIWSIu.js","assets/index-DjQ328HM.js","assets/dom-BMWJYfMU.js","assets/observers-BgSsKPOv.js","assets/ref-MWYWQRb2.js","assets/static-DI9UI3Ec.js","assets/form-BoAOhBA6.js","assets/interactive-DDcotXhj.js","assets/label-81ge4K9f.js","assets/loadable-DsOhka6r.js","assets/component-CmUvBy7Z.js","assets/webdocSaveUtils-CsMCcAV5.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/basemapUtils-DsKHfUw6.js","assets/resourceUtils-DYEgyS3b.js","assets/resourceUtils-CHnQ8dhZ.js","assets/saveUtils-BvcHalgi.js","assets/layersLoader-bhMteads.js","assets/featureLayerUtils-D6afCrky.js","assets/utils-DEfCoSW4.js","assets/FeatureLayerSource-BdBeUIzC.js","assets/External-sXC_Vxdg.js","assets/MeshTransform-bTSFrTxj.js","assets/axisAngleDegrees-B8ToOXOf.js","assets/editingSupport-CIkjNP0b.js","assets/QueryTask-IKJSzGze.js","assets/executeForIds-D4QPFm6K.js","assets/queryAssociations-DKjpSX3_.js","assets/Association-CNih-uhb.js","assets/synthesizeAssociationGeometries-Ym-1Z6lS.js"])))=>i.map(i=>d[i]);
var Gse=Object.defineProperty;var Bse=(e,t,r)=>t in e?Gse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var S6=(e,t,r)=>Bse(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function ZB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var AO={exports:{}},sv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T6;function qse(){if(T6)return sv;T6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,n,s){var o=null;if(s!==void 0&&(o=""+s),n.key!==void 0&&(o=""+n.key),"key"in n){s={};for(var l in n)l!=="key"&&(s[l]=n[l])}else s=n;return n=s.ref,{$$typeof:e,type:i,key:o,ref:n!==void 0?n:null,props:s}}return sv.Fragment=t,sv.jsx=r,sv.jsxs=r,sv}var E6;function Hse(){return E6||(E6=1,AO.exports=qse()),AO.exports}var _u=Hse(),MO={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $6;function Wse(){if($6)return st;$6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function x(j,ue,Ie){this.props=j,this.context=ue,this.refs=E,this.updater=Ie||S}x.prototype.isReactComponent={},x.prototype.setState=function(j,ue){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ue,"setState")},x.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function O(){}O.prototype=x.prototype;function C(j,ue,Ie){this.props=j,this.context=ue,this.refs=E,this.updater=Ie||S}var I=C.prototype=new O;I.constructor=C,T(I,x.prototype),I.isPureReactComponent=!0;var P=Array.isArray,k={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function H(j,ue,Ie,Le,we,et){return Ie=et.ref,{$$typeof:e,type:j,key:ue,ref:Ie!==void 0?Ie:null,props:et}}function re(j,ue){return H(j.type,ue,void 0,void 0,void 0,j.props)}function K(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function ie(j){var ue={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Ie){return ue[Ie]})}var fe=/\/+/g;function ve(j,ue){return typeof j=="object"&&j!==null&&j.key!=null?ie(""+j.key):ue.toString(36)}function $e(){}function _e(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then($e,$e):(j.status="pending",j.then(function(ue){j.status==="pending"&&(j.status="fulfilled",j.value=ue)},function(ue){j.status==="pending"&&(j.status="rejected",j.reason=ue)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function it(j,ue,Ie,Le,we){var et=typeof j;(et==="undefined"||et==="boolean")&&(j=null);var Be=!1;if(j===null)Be=!0;else switch(et){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(j.$$typeof){case e:case t:Be=!0;break;case g:return Be=j._init,it(Be(j._payload),ue,Ie,Le,we)}}if(Be)return we=we(j),Be=Le===""?"."+ve(j,0):Le,P(we)?(Ie="",Be!=null&&(Ie=Be.replace(fe,"$&/")+"/"),it(we,ue,Ie,"",function(bt){return bt})):we!=null&&(K(we)&&(we=re(we,Ie+(we.key==null||j&&j.key===we.key?"":(""+we.key).replace(fe,"$&/")+"/")+Be)),ue.push(we)),1;Be=0;var Jt=Le===""?".":Le+":";if(P(j))for(var nt=0;nt<j.length;nt++)Le=j[nt],et=Jt+ve(Le,nt),Be+=it(Le,ue,Ie,et,we);else if(nt=b(j),typeof nt=="function")for(j=nt.call(j),nt=0;!(Le=j.next()).done;)Le=Le.value,et=Jt+ve(Le,nt++),Be+=it(Le,ue,Ie,et,we);else if(et==="object"){if(typeof j.then=="function")return it(_e(j),ue,Ie,Le,we);throw ue=String(j),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Be}function pe(j,ue,Ie){if(j==null)return j;var Le=[],we=0;return it(j,Le,"","",function(et){return ue.call(Ie,et,we++)}),Le}function me(j){if(j._status===-1){var ue=j._result;ue=ue(),ue.then(function(Ie){(j._status===0||j._status===-1)&&(j._status=1,j._result=Ie)},function(Ie){(j._status===0||j._status===-1)&&(j._status=2,j._result=Ie)}),j._status===-1&&(j._status=0,j._result=ue)}if(j._status===1)return j._result.default;throw j._result}var ye=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Ve(){}return st.Children={map:pe,forEach:function(j,ue,Ie){pe(j,function(){ue.apply(this,arguments)},Ie)},count:function(j){var ue=0;return pe(j,function(){ue++}),ue},toArray:function(j){return pe(j,function(ue){return ue})||[]},only:function(j){if(!K(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},st.Component=x,st.Fragment=r,st.Profiler=n,st.PureComponent=C,st.StrictMode=i,st.Suspense=d,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,st.act=function(){throw Error("act(...) is not supported in production builds of React.")},st.cache=function(j){return function(){return j.apply(null,arguments)}},st.cloneElement=function(j,ue,Ie){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Le=T({},j.props),we=j.key,et=void 0;if(ue!=null)for(Be in ue.ref!==void 0&&(et=void 0),ue.key!==void 0&&(we=""+ue.key),ue)!D.call(ue,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ue.ref===void 0||(Le[Be]=ue[Be]);var Be=arguments.length-2;if(Be===1)Le.children=Ie;else if(1<Be){for(var Jt=Array(Be),nt=0;nt<Be;nt++)Jt[nt]=arguments[nt+2];Le.children=Jt}return H(j.type,we,void 0,void 0,et,Le)},st.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:s,_context:j},j},st.createElement=function(j,ue,Ie){var Le,we={},et=null;if(ue!=null)for(Le in ue.key!==void 0&&(et=""+ue.key),ue)D.call(ue,Le)&&Le!=="key"&&Le!=="__self"&&Le!=="__source"&&(we[Le]=ue[Le]);var Be=arguments.length-2;if(Be===1)we.children=Ie;else if(1<Be){for(var Jt=Array(Be),nt=0;nt<Be;nt++)Jt[nt]=arguments[nt+2];we.children=Jt}if(j&&j.defaultProps)for(Le in Be=j.defaultProps,Be)we[Le]===void 0&&(we[Le]=Be[Le]);return H(j,et,void 0,void 0,null,we)},st.createRef=function(){return{current:null}},st.forwardRef=function(j){return{$$typeof:l,render:j}},st.isValidElement=K,st.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:me}},st.memo=function(j,ue){return{$$typeof:f,type:j,compare:ue===void 0?null:ue}},st.startTransition=function(j){var ue=k.T,Ie={};k.T=Ie;try{var Le=j(),we=k.S;we!==null&&we(Ie,Le),typeof Le=="object"&&Le!==null&&typeof Le.then=="function"&&Le.then(Ve,ye)}catch(et){ye(et)}finally{k.T=ue}},st.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},st.use=function(j){return k.H.use(j)},st.useActionState=function(j,ue,Ie){return k.H.useActionState(j,ue,Ie)},st.useCallback=function(j,ue){return k.H.useCallback(j,ue)},st.useContext=function(j){return k.H.useContext(j)},st.useDebugValue=function(){},st.useDeferredValue=function(j,ue){return k.H.useDeferredValue(j,ue)},st.useEffect=function(j,ue){return k.H.useEffect(j,ue)},st.useId=function(){return k.H.useId()},st.useImperativeHandle=function(j,ue,Ie){return k.H.useImperativeHandle(j,ue,Ie)},st.useInsertionEffect=function(j,ue){return k.H.useInsertionEffect(j,ue)},st.useLayoutEffect=function(j,ue){return k.H.useLayoutEffect(j,ue)},st.useMemo=function(j,ue){return k.H.useMemo(j,ue)},st.useOptimistic=function(j,ue){return k.H.useOptimistic(j,ue)},st.useReducer=function(j,ue,Ie){return k.H.useReducer(j,ue,Ie)},st.useRef=function(j){return k.H.useRef(j)},st.useState=function(j){return k.H.useState(j)},st.useSyncExternalStore=function(j,ue,Ie){return k.H.useSyncExternalStore(j,ue,Ie)},st.useTransition=function(){return k.H.useTransition()},st.version="19.0.0",st}var x6;function I$(){return x6||(x6=1,MO.exports=Wse()),MO.exports}var Dn=I$();const Js=ZB(Dn);var OO={exports:{}},ov={},RO={exports:{}},CO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A6;function Zse(){return A6||(A6=1,function(e){function t(pe,me){var ye=pe.length;pe.push(me);e:for(;0<ye;){var Ve=ye-1>>>1,j=pe[Ve];if(0<n(j,me))pe[Ve]=me,pe[ye]=j,ye=Ve;else break e}}function r(pe){return pe.length===0?null:pe[0]}function i(pe){if(pe.length===0)return null;var me=pe[0],ye=pe.pop();if(ye!==me){pe[0]=ye;e:for(var Ve=0,j=pe.length,ue=j>>>1;Ve<ue;){var Ie=2*(Ve+1)-1,Le=pe[Ie],we=Ie+1,et=pe[we];if(0>n(Le,ye))we<j&&0>n(et,Le)?(pe[Ve]=et,pe[we]=ye,Ve=we):(pe[Ve]=Le,pe[Ie]=ye,Ve=Ie);else if(we<j&&0>n(et,ye))pe[Ve]=et,pe[we]=ye,Ve=we;else break e}}return me}function n(pe,me){var ye=pe.sortIndex-me.sortIndex;return ye!==0?ye:pe.id-me.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],f=[],g=1,v=null,b=3,S=!1,T=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function I(pe){for(var me=r(f);me!==null;){if(me.callback===null)i(f);else if(me.startTime<=pe)i(f),me.sortIndex=me.expirationTime,t(d,me);else break;me=r(f)}}function P(pe){if(E=!1,I(pe),!T)if(r(d)!==null)T=!0,_e();else{var me=r(f);me!==null&&it(P,me.startTime-pe)}}var k=!1,D=-1,H=5,re=-1;function K(){return!(e.unstable_now()-re<H)}function ie(){if(k){var pe=e.unstable_now();re=pe;var me=!0;try{e:{T=!1,E&&(E=!1,O(D),D=-1),S=!0;var ye=b;try{t:{for(I(pe),v=r(d);v!==null&&!(v.expirationTime>pe&&K());){var Ve=v.callback;if(typeof Ve=="function"){v.callback=null,b=v.priorityLevel;var j=Ve(v.expirationTime<=pe);if(pe=e.unstable_now(),typeof j=="function"){v.callback=j,I(pe),me=!0;break t}v===r(d)&&i(d),I(pe)}else i(d);v=r(d)}if(v!==null)me=!0;else{var ue=r(f);ue!==null&&it(P,ue.startTime-pe),me=!1}}break e}finally{v=null,b=ye,S=!1}me=void 0}}finally{me?fe():k=!1}}}var fe;if(typeof C=="function")fe=function(){C(ie)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,$e=ve.port2;ve.port1.onmessage=ie,fe=function(){$e.postMessage(null)}}else fe=function(){x(ie,0)};function _e(){k||(k=!0,fe())}function it(pe,me){D=x(function(){pe(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(pe){pe.callback=null},e.unstable_continueExecution=function(){T||S||(T=!0,_e())},e.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<pe?Math.floor(1e3/pe):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(pe){switch(b){case 1:case 2:case 3:var me=3;break;default:me=b}var ye=b;b=me;try{return pe()}finally{b=ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(pe,me){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var ye=b;b=pe;try{return me()}finally{b=ye}},e.unstable_scheduleCallback=function(pe,me,ye){var Ve=e.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ve+ye:Ve):ye=Ve,pe){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ye+j,pe={id:g++,callback:me,priorityLevel:pe,startTime:ye,expirationTime:j,sortIndex:-1},ye>Ve?(pe.sortIndex=ye,t(f,pe),r(d)===null&&pe===r(f)&&(E?(O(D),D=-1):E=!0,it(P,ye-Ve))):(pe.sortIndex=j,t(d,pe),T||S||(T=!0,_e())),pe},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(pe){var me=b;return function(){var ye=b;b=me;try{return pe.apply(this,arguments)}finally{b=ye}}}}(CO)),CO}var M6;function Yse(){return M6||(M6=1,RO.exports=Zse()),RO.exports}var IO={exports:{}},ki={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O6;function Jse(){if(O6)return ki;O6=1;var e=I$();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function s(d,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:v==null?null:""+v,children:d,containerInfo:f,implementation:g}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ki.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(d,f,null,g)},ki.flushSync=function(d){var f=o.T,g=i.p;try{if(o.T=null,i.p=2,d)return d()}finally{o.T=f,i.p=g,i.d.f()}},ki.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ki.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ki.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,v=l(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:S}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:b,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ki.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=l(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ki.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=l(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ki.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=l(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ki.requestFormReset=function(d){i.d.r(d)},ki.unstable_batchedUpdates=function(d,f){return d(f)},ki.useFormState=function(d,f,g){return o.H.useFormState(d,f,g)},ki.useFormStatus=function(){return o.H.useHostTransitionStatus()},ki.version="19.0.0",ki}var R6;function YB(){if(R6)return IO.exports;R6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),IO.exports=Jse(),IO.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C6;function Xse(){if(C6)return ov;C6=1;var e=Yse(),t=I$(),r=YB();function i(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}var s=Symbol.for("react.element"),o=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function D(a){return a===null||typeof a!="object"?null:(a=k&&a[k]||a["@@iterator"],typeof a=="function"?a:null)}var H=Symbol.for("react.client.reference");function re(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===H?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case d:return"Fragment";case l:return"Portal";case g:return"Profiler";case f:return"StrictMode";case E:return"Suspense";case x:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case S:return(a.displayName||"Context")+".Provider";case b:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return c=a.displayName||null,c!==null?c:re(a.type)||"Memo";case C:c=a._payload,a=a._init;try{return re(a(c))}catch{}}return null}var K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=Object.assign,fe,ve;function $e(a){if(fe===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);fe=c&&c[1]||"",ve=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+a+ve}var _e=!1;function it(a,c){if(!a||_e)return"";_e=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ee){var J=ee}Reflect.construct(a,[],de)}else{try{de.call()}catch(ee){J=ee}a.call(de.prototype)}}else{try{throw Error()}catch(ee){J=ee}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),$=w[0],R=w[1];if($&&R){var L=$.split(`
`),G=R.split(`
`);for(_=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;_<G.length&&!G[_].includes("DetermineComponentFrameRoot");)_++;if(m===L.length||_===G.length)for(m=L.length-1,_=G.length-1;1<=m&&0<=_&&L[m]!==G[_];)_--;for(;1<=m&&0<=_;m--,_--)if(L[m]!==G[_]){if(m!==1||_!==1)do if(m--,_--,0>_||L[m]!==G[_]){var te=`
`+L[m].replace(" at new "," at ");return a.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",a.displayName)),te}while(1<=m&&0<=_);break}}}finally{_e=!1,Error.prepareStackTrace=p}return(p=a?a.displayName||a.name:"")?$e(p):""}function pe(a){switch(a.tag){case 26:case 27:case 5:return $e(a.type);case 16:return $e("Lazy");case 13:return $e("Suspense");case 19:return $e("SuspenseList");case 0:case 15:return a=it(a.type,!1),a;case 11:return a=it(a.type.render,!1),a;case 1:return a=it(a.type,!0),a;default:return""}}function me(a){try{var c="";do c+=pe(a),a=a.return;while(a);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ye(a){var c=a,p=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(p=c.return),a=c.return;while(a)}return c.tag===3?p:null}function Ve(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function j(a){if(ye(a)!==a)throw Error(i(188))}function ue(a){var c=a.alternate;if(!c){if(c=ye(a),c===null)throw Error(i(188));return c!==a?null:a}for(var p=a,m=c;;){var _=p.return;if(_===null)break;var w=_.alternate;if(w===null){if(m=_.return,m!==null){p=m;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===p)return j(_),a;if(w===m)return j(_),c;w=w.sibling}throw Error(i(188))}if(p.return!==m.return)p=_,m=w;else{for(var $=!1,R=_.child;R;){if(R===p){$=!0,p=_,m=w;break}if(R===m){$=!0,m=_,p=w;break}R=R.sibling}if(!$){for(R=w.child;R;){if(R===p){$=!0,p=w,m=_;break}if(R===m){$=!0,m=w,p=_;break}R=R.sibling}if(!$)throw Error(i(189))}}if(p.alternate!==m)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?a:c}function Ie(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=Ie(a),c!==null)return c;a=a.sibling}return null}var Le=Array.isArray,we=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},Be=[],Jt=-1;function nt(a){return{current:a}}function bt(a){0>Jt||(a.current=Be[Jt],Be[Jt]=null,Jt--)}function _t(a,c){Jt++,Be[Jt]=a.current,a.current=c}var Pr=nt(null),Zr=nt(null),Gn=nt(null),dl=nt(null);function hl(a,c){switch(_t(Gn,c),_t(Zr,a),_t(Pr,null),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)&&(c=c.namespaceURI)?XF(c):0;break;default:if(a=a===8?c.parentNode:c,c=a.tagName,a=a.namespaceURI)a=XF(a),c=KF(a,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}bt(Pr),_t(Pr,c)}function fo(){bt(Pr),bt(Zr),bt(Gn)}function Bu(a){a.memoizedState!==null&&_t(dl,a);var c=Pr.current,p=KF(c,a.type);c!==p&&(_t(Zr,a),_t(Pr,p))}function pl(a){Zr.current===a&&(bt(Pr),bt(Zr)),dl.current===a&&(bt(dl),ev._currentValue=et)}var qu=Object.prototype.hasOwnProperty,Hu=e.unstable_scheduleCallback,fl=e.unstable_cancelCallback,sh=e.unstable_shouldYield,Bn=e.unstable_requestPaint,en=e.unstable_now,Cf=e.unstable_getCurrentPriorityLevel,oh=e.unstable_ImmediatePriority,ah=e.unstable_UserBlockingPriority,If=e.unstable_NormalPriority,fA=e.unstable_LowPriority,Yw=e.unstable_IdlePriority,yA=e.log,mA=e.unstable_setDisableYieldValue,lh=null,tn=null;function gA(a){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(lh,a,void 0,(a.current.flags&128)===128)}catch{}}function da(a){if(typeof yA=="function"&&mA(a),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(lh,a)}catch{}}var rn=Math.clz32?Math.clz32:_A,vA=Math.log,bA=Math.LN2;function _A(a){return a>>>=0,a===0?32:31-(vA(a)/bA|0)|0}var Nf=128,Pf=4194304;function yl(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Lf(a,c){var p=a.pendingLanes;if(p===0)return 0;var m=0,_=a.suspendedLanes,w=a.pingedLanes,$=a.warmLanes;a=a.finishedLanes!==0;var R=p&134217727;return R!==0?(p=R&~_,p!==0?m=yl(p):(w&=R,w!==0?m=yl(w):a||($=R&~$,$!==0&&(m=yl($))))):(R=p&~_,R!==0?m=yl(R):w!==0?m=yl(w):a||($=p&~$,$!==0&&(m=yl($)))),m===0?0:c!==0&&c!==m&&(c&_)===0&&(_=m&-m,$=c&-c,_>=$||_===32&&($&4194176)!==0)?c:m}function uh(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function wA(a,c){switch(a){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jw(){var a=Nf;return Nf<<=1,(Nf&4194176)===0&&(Nf=128),a}function Xw(){var a=Pf;return Pf<<=1,(Pf&62914560)===0&&(Pf=4194304),a}function X(a){for(var c=[],p=0;31>p;p++)c.push(a);return c}function Ct(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Wu(a,c,p,m,_,w){var $=a.pendingLanes;a.pendingLanes=p,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=p,a.entangledLanes&=p,a.errorRecoveryDisabledLanes&=p,a.shellSuspendCounter=0;var R=a.entanglements,L=a.expirationTimes,G=a.hiddenUpdates;for(p=$&~p;0<p;){var te=31-rn(p),de=1<<te;R[te]=0,L[te]=-1;var J=G[te];if(J!==null)for(G[te]=null,te=0;te<J.length;te++){var ee=J[te];ee!==null&&(ee.lane&=-536870913)}p&=~de}m!==0&&bn(a,m,0),w!==0&&_===0&&a.tag!==0&&(a.suspendedLanes|=w&~($&~c))}function bn(a,c,p){a.pendingLanes|=c,a.suspendedLanes&=~c;var m=31-rn(c);a.entangledLanes|=c,a.entanglements[m]=a.entanglements[m]|1073741824|p&4194218}function ch(a,c){var p=a.entangledLanes|=c;for(a=a.entanglements;p;){var m=31-rn(p),_=1<<m;_&c|a[m]&c&&(a[m]|=c),p&=~_}}function Re(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function dh(){var a=we.p;return a!==0?a:(a=window.event,a===void 0?32:m6(a.type))}function Lr(a,c){var p=we.p;try{return we.p=a,c()}finally{we.p=p}}var _n=Math.random().toString(36).slice(2),ui="__reactFiber$"+_n,or="__reactProps$"+_n,ml="__reactContainer$"+_n,kf="__reactEvents$"+_n,Je="__reactListeners$"+_n,SA="__reactHandles$"+_n,d0="__reactResources$"+_n,hh="__reactMarker$"+_n;function h0(a){delete a[ui],delete a[or],delete a[kf],delete a[Je],delete a[SA]}function yo(a){var c=a[ui];if(c)return c;for(var p=a.parentNode;p;){if(c=p[ml]||p[ui]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(a=t6(a);a!==null;){if(p=a[ui])return p;a=t6(a)}return c}a=p,p=a.parentNode}return null}function Zu(a){if(a=a[ui]||a[ml]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function gl(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(i(33))}function Xt(a){var c=a[d0];return c||(c=a[d0]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function kr(a){a[hh]=!0}var p0=new Set,Kw={};function vl(a,c){Yu(a,c),Yu(a+"Capture",c)}function Yu(a,c){for(Kw[a]=c,a=0;a<c.length;a++)p0.add(c[a])}var mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),TA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nn={},Qw={};function EA(a){return qu.call(Qw,a)?!0:qu.call(nn,a)?!1:TA.test(a)?Qw[a]=!0:(nn[a]=!0,!1)}function N(a,c,p){if(EA(c))if(p===null)a.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+p)}}function Q(a,c,p){if(p===null)a.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+p)}}function ce(a,c,p,m){if(m===null)a.removeAttribute(p);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(p);return}a.setAttributeNS(c,p,""+m)}}function Ne(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function It(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ar(a){var c=It(a)?"checked":"value",p=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),m=""+a[c];if(!a.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var _=p.get,w=p.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return _.call(this)},set:function($){m=""+$,w.call(this,$)}}),Object.defineProperty(a,c,{enumerable:p.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function lr(a){a._valueTracker||(a._valueTracker=ar(a))}function Ti(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var p=c.getValue(),m="";return a&&(m=It(a)?a.checked?"true":"false":a.value),a=m,a!==p?(c.setValue(a),!0):!1}function e1(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Fie=/[\n"\\]/g;function _s(a){return a.replace(Fie,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function $A(a,c,p,m,_,w,$,R){a.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?a.type=$:a.removeAttribute("type"),c!=null?$==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Ne(c)):a.value!==""+Ne(c)&&(a.value=""+Ne(c)):$!=="submit"&&$!=="reset"||a.removeAttribute("value"),c!=null?xA(a,$,Ne(c)):p!=null?xA(a,$,Ne(p)):m!=null&&a.removeAttribute("value"),_==null&&w!=null&&(a.defaultChecked=!!w),_!=null&&(a.checked=_&&typeof _!="function"&&typeof _!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?a.name=""+Ne(R):a.removeAttribute("name")}function r4(a,c,p,m,_,w,$,R){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),c!=null||p!=null){if(!(w!=="submit"&&w!=="reset"||c!=null))return;p=p!=null?""+Ne(p):"",c=c!=null?""+Ne(c):p,R||c===a.value||(a.value=c),a.defaultValue=c}m=m??_,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=R?a.checked:!!m,a.defaultChecked=!!m,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(a.name=$)}function xA(a,c,p){c==="number"&&e1(a.ownerDocument)===a||a.defaultValue===""+p||(a.defaultValue=""+p)}function Df(a,c,p,m){if(a=a.options,c){c={};for(var _=0;_<p.length;_++)c["$"+p[_]]=!0;for(p=0;p<a.length;p++)_=c.hasOwnProperty("$"+a[p].value),a[p].selected!==_&&(a[p].selected=_),_&&m&&(a[p].defaultSelected=!0)}else{for(p=""+Ne(p),c=null,_=0;_<a.length;_++){if(a[_].value===p){a[_].selected=!0,m&&(a[_].defaultSelected=!0);return}c!==null||a[_].disabled||(c=a[_])}c!==null&&(c.selected=!0)}}function i4(a,c,p){if(c!=null&&(c=""+Ne(c),c!==a.value&&(a.value=c),p==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=p!=null?""+Ne(p):""}function n4(a,c,p,m){if(c==null){if(m!=null){if(p!=null)throw Error(i(92));if(Le(m)){if(1<m.length)throw Error(i(93));m=m[0]}p=m}p==null&&(p=""),c=p}p=Ne(c),a.defaultValue=p,m=a.textContent,m===p&&m!==""&&m!==null&&(a.value=m)}function jf(a,c){if(c){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=c;return}}a.textContent=c}var Uie=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function s4(a,c,p){var m=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?m?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":m?a.setProperty(c,p):typeof p!="number"||p===0||Uie.has(c)?c==="float"?a.cssFloat=p:a[c]=(""+p).trim():a[c]=p+"px"}function o4(a,c,p){if(c!=null&&typeof c!="object")throw Error(i(62));if(a=a.style,p!=null){for(var m in p)!p.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var _ in c)m=c[_],c.hasOwnProperty(_)&&p[_]!==m&&s4(a,_,m)}else for(var w in c)c.hasOwnProperty(w)&&s4(a,w,c[w])}function AA(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vie=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zie=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function t1(a){return zie.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var MA=null;function OA(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ff=null,Uf=null;function a4(a){var c=Zu(a);if(c&&(a=c.stateNode)){var p=a[or]||null;e:switch(a=c.stateNode,c.type){case"input":if($A(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+_s(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var m=p[c];if(m!==a&&m.form===a.form){var _=m[or]||null;if(!_)throw Error(i(90));$A(m,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(c=0;c<p.length;c++)m=p[c],m.form===a.form&&Ti(m)}break e;case"textarea":i4(a,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Df(a,!!p.multiple,c,!1)}}}var RA=!1;function l4(a,c,p){if(RA)return a(c,p);RA=!0;try{var m=a(c);return m}finally{if(RA=!1,(Ff!==null||Uf!==null)&&(j1(),Ff&&(c=Ff,a=Uf,Uf=Ff=null,a4(c),a)))for(c=0;c<a.length;c++)a4(a[c])}}function f0(a,c){var p=a.stateNode;if(p===null)return null;var m=p[or]||null;if(m===null)return null;p=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(i(231,c,typeof p));return p}var CA=!1;if(mo)try{var y0={};Object.defineProperty(y0,"passive",{get:function(){CA=!0}}),window.addEventListener("test",y0,y0),window.removeEventListener("test",y0,y0)}catch{CA=!1}var Ju=null,IA=null,r1=null;function u4(){if(r1)return r1;var a,c=IA,p=c.length,m,_="value"in Ju?Ju.value:Ju.textContent,w=_.length;for(a=0;a<p&&c[a]===_[a];a++);var $=p-a;for(m=1;m<=$&&c[p-m]===_[w-m];m++);return r1=_.slice(a,1<m?1-m:void 0)}function i1(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function n1(){return!0}function c4(){return!1}function wn(a){function c(p,m,_,w,$){this._reactName=p,this._targetInst=_,this.type=m,this.nativeEvent=w,this.target=$,this.currentTarget=null;for(var R in a)a.hasOwnProperty(R)&&(p=a[R],this[R]=p?p(w):w[R]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?n1:c4,this.isPropagationStopped=c4,this}return ie(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=n1)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=n1)},persist:function(){},isPersistent:n1}),c}var ph={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s1=wn(ph),m0=ie({},ph,{view:0,detail:0}),Gie=wn(m0),NA,PA,g0,o1=ie({},m0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kA,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==g0&&(g0&&a.type==="mousemove"?(NA=a.screenX-g0.screenX,PA=a.screenY-g0.screenY):PA=NA=0,g0=a),NA)},movementY:function(a){return"movementY"in a?a.movementY:PA}}),d4=wn(o1),Bie=ie({},o1,{dataTransfer:0}),qie=wn(Bie),Hie=ie({},m0,{relatedTarget:0}),LA=wn(Hie),Wie=ie({},ph,{animationName:0,elapsedTime:0,pseudoElement:0}),Zie=wn(Wie),Yie=ie({},ph,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jie=wn(Yie),Xie=ie({},ph,{data:0}),h4=wn(Xie),Kie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ene={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tne(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=ene[a])?!!c[a]:!1}function kA(){return tne}var rne=ie({},m0,{key:function(a){if(a.key){var c=Kie[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=i1(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Qie[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kA,charCode:function(a){return a.type==="keypress"?i1(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?i1(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ine=wn(rne),nne=ie({},o1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p4=wn(nne),sne=ie({},m0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kA}),one=wn(sne),ane=ie({},ph,{propertyName:0,elapsedTime:0,pseudoElement:0}),lne=wn(ane),une=ie({},o1,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),cne=wn(une),dne=ie({},ph,{newState:0,oldState:0}),hne=wn(dne),pne=[9,13,27,32],DA=mo&&"CompositionEvent"in window,v0=null;mo&&"documentMode"in document&&(v0=document.documentMode);var fne=mo&&"TextEvent"in window&&!v0,f4=mo&&(!DA||v0&&8<v0&&11>=v0),y4=" ",m4=!1;function g4(a,c){switch(a){case"keyup":return pne.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v4(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Vf=!1;function yne(a,c){switch(a){case"compositionend":return v4(c);case"keypress":return c.which!==32?null:(m4=!0,y4);case"textInput":return a=c.data,a===y4&&m4?null:a;default:return null}}function mne(a,c){if(Vf)return a==="compositionend"||!DA&&g4(a,c)?(a=u4(),r1=IA=Ju=null,Vf=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return f4&&c.locale!=="ko"?null:c.data;default:return null}}var gne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b4(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!gne[a.type]:c==="textarea"}function _4(a,c,p,m){Ff?Uf?Uf.push(m):Uf=[m]:Ff=m,c=G1(c,"onChange"),0<c.length&&(p=new s1("onChange","change",null,p,m),a.push({event:p,listeners:c}))}var b0=null,_0=null;function vne(a){HF(a,0)}function a1(a){var c=gl(a);if(Ti(c))return a}function w4(a,c){if(a==="change")return c}var S4=!1;if(mo){var jA;if(mo){var FA="oninput"in document;if(!FA){var T4=document.createElement("div");T4.setAttribute("oninput","return;"),FA=typeof T4.oninput=="function"}jA=FA}else jA=!1;S4=jA&&(!document.documentMode||9<document.documentMode)}function E4(){b0&&(b0.detachEvent("onpropertychange",$4),_0=b0=null)}function $4(a){if(a.propertyName==="value"&&a1(_0)){var c=[];_4(c,_0,a,OA(a)),l4(vne,c)}}function bne(a,c,p){a==="focusin"?(E4(),b0=c,_0=p,b0.attachEvent("onpropertychange",$4)):a==="focusout"&&E4()}function _ne(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return a1(_0)}function wne(a,c){if(a==="click")return a1(c)}function Sne(a,c){if(a==="input"||a==="change")return a1(c)}function Tne(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var qn=typeof Object.is=="function"?Object.is:Tne;function w0(a,c){if(qn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var p=Object.keys(a),m=Object.keys(c);if(p.length!==m.length)return!1;for(m=0;m<p.length;m++){var _=p[m];if(!qu.call(c,_)||!qn(a[_],c[_]))return!1}return!0}function x4(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function A4(a,c){var p=x4(a);a=0;for(var m;p;){if(p.nodeType===3){if(m=a+p.textContent.length,a<=c&&m>=c)return{node:p,offset:c-a};a=m}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=x4(p)}}function M4(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?M4(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function O4(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=e1(a.document);c instanceof a.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)a=c.contentWindow;else break;c=e1(a.document)}return c}function UA(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function Ene(a,c){var p=O4(c);c=a.focusedElem;var m=a.selectionRange;if(p!==c&&c&&c.ownerDocument&&M4(c.ownerDocument.documentElement,c)){if(m!==null&&UA(c)){if(a=m.start,p=m.end,p===void 0&&(p=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(p,c.value.length);else if(p=(a=c.ownerDocument||document)&&a.defaultView||window,p.getSelection){p=p.getSelection();var _=c.textContent.length,w=Math.min(m.start,_);m=m.end===void 0?w:Math.min(m.end,_),!p.extend&&w>m&&(_=m,m=w,w=_),_=A4(c,w);var $=A4(c,m);_&&$&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==$.node||p.focusOffset!==$.offset)&&(a=a.createRange(),a.setStart(_.node,_.offset),p.removeAllRanges(),w>m?(p.addRange(a),p.extend($.node,$.offset)):(a.setEnd($.node,$.offset),p.addRange(a)))}}for(a=[],p=c;p=p.parentNode;)p.nodeType===1&&a.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)p=a[c],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var $ne=mo&&"documentMode"in document&&11>=document.documentMode,zf=null,VA=null,S0=null,zA=!1;function R4(a,c,p){var m=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;zA||zf==null||zf!==e1(m)||(m=zf,"selectionStart"in m&&UA(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),S0&&w0(S0,m)||(S0=m,m=G1(VA,"onSelect"),0<m.length&&(c=new s1("onSelect","select",null,c,p),a.push({event:c,listeners:m}),c.target=zf)))}function fh(a,c){var p={};return p[a.toLowerCase()]=c.toLowerCase(),p["Webkit"+a]="webkit"+c,p["Moz"+a]="moz"+c,p}var Gf={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionrun:fh("Transition","TransitionRun"),transitionstart:fh("Transition","TransitionStart"),transitioncancel:fh("Transition","TransitionCancel"),transitionend:fh("Transition","TransitionEnd")},GA={},C4={};mo&&(C4=document.createElement("div").style,"AnimationEvent"in window||(delete Gf.animationend.animation,delete Gf.animationiteration.animation,delete Gf.animationstart.animation),"TransitionEvent"in window||delete Gf.transitionend.transition);function yh(a){if(GA[a])return GA[a];if(!Gf[a])return a;var c=Gf[a],p;for(p in c)if(c.hasOwnProperty(p)&&p in C4)return GA[a]=c[p];return a}var I4=yh("animationend"),N4=yh("animationiteration"),P4=yh("animationstart"),xne=yh("transitionrun"),Ane=yh("transitionstart"),Mne=yh("transitioncancel"),L4=yh("transitionend"),k4=new Map,D4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function go(a,c){k4.set(a,c),vl(c,[a])}var ws=[],Bf=0,BA=0;function l1(){for(var a=Bf,c=BA=Bf=0;c<a;){var p=ws[c];ws[c++]=null;var m=ws[c];ws[c++]=null;var _=ws[c];ws[c++]=null;var w=ws[c];if(ws[c++]=null,m!==null&&_!==null){var $=m.pending;$===null?_.next=_:(_.next=$.next,$.next=_),m.pending=_}w!==0&&j4(p,_,w)}}function u1(a,c,p,m){ws[Bf++]=a,ws[Bf++]=c,ws[Bf++]=p,ws[Bf++]=m,BA|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function qA(a,c,p,m){return u1(a,c,p,m),c1(a)}function Xu(a,c){return u1(a,null,null,c),c1(a)}function j4(a,c,p){a.lanes|=p;var m=a.alternate;m!==null&&(m.lanes|=p);for(var _=!1,w=a.return;w!==null;)w.childLanes|=p,m=w.alternate,m!==null&&(m.childLanes|=p),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(_=!0)),a=w,w=w.return;_&&c!==null&&a.tag===3&&(w=a.stateNode,_=31-rn(p),w=w.hiddenUpdates,a=w[_],a===null?w[_]=[c]:a.push(c),c.lane=p|536870912)}function c1(a){if(50<W0)throw W0=0,XM=null,Error(i(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var qf={},F4=new WeakMap;function Ss(a,c){if(typeof a=="object"&&a!==null){var p=F4.get(a);return p!==void 0?p:(c={value:a,source:c,stack:me(c)},F4.set(a,c),c)}return{value:a,source:c,stack:me(c)}}var Hf=[],Wf=0,d1=null,h1=0,Ts=[],Es=0,mh=null,bl=1,_l="";function gh(a,c){Hf[Wf++]=h1,Hf[Wf++]=d1,d1=a,h1=c}function U4(a,c,p){Ts[Es++]=bl,Ts[Es++]=_l,Ts[Es++]=mh,mh=a;var m=bl;a=_l;var _=32-rn(m)-1;m&=~(1<<_),p+=1;var w=32-rn(c)+_;if(30<w){var $=_-_%5;w=(m&(1<<$)-1).toString(32),m>>=$,_-=$,bl=1<<32-rn(c)+_|p<<_|m,_l=w+a}else bl=1<<w|p<<_|m,_l=a}function HA(a){a.return!==null&&(gh(a,1),U4(a,1,0))}function WA(a){for(;a===d1;)d1=Hf[--Wf],Hf[Wf]=null,h1=Hf[--Wf],Hf[Wf]=null;for(;a===mh;)mh=Ts[--Es],Ts[Es]=null,_l=Ts[--Es],Ts[Es]=null,bl=Ts[--Es],Ts[Es]=null}var sn=null,Ei=null,Tt=!1,vo=null,ha=!1,ZA=Error(i(519));function vh(a){var c=Error(i(418,""));throw $0(Ss(c,a)),ZA}function V4(a){var c=a.stateNode,p=a.type,m=a.memoizedProps;switch(c[ui]=a,c[or]=m,p){case"dialog":yt("cancel",c),yt("close",c);break;case"iframe":case"object":case"embed":yt("load",c);break;case"video":case"audio":for(p=0;p<Y0.length;p++)yt(Y0[p],c);break;case"source":yt("error",c);break;case"img":case"image":case"link":yt("error",c),yt("load",c);break;case"details":yt("toggle",c);break;case"input":yt("invalid",c),r4(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),lr(c);break;case"select":yt("invalid",c);break;case"textarea":yt("invalid",c),n4(c,m.value,m.defaultValue,m.children),lr(c)}p=m.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||m.suppressHydrationWarning===!0||JF(c.textContent,p)?(m.popover!=null&&(yt("beforetoggle",c),yt("toggle",c)),m.onScroll!=null&&yt("scroll",c),m.onScrollEnd!=null&&yt("scrollend",c),m.onClick!=null&&(c.onclick=B1),c=!0):c=!1,c||vh(a)}function z4(a){for(sn=a.return;sn;)switch(sn.tag){case 3:case 27:ha=!0;return;case 5:case 13:ha=!1;return;default:sn=sn.return}}function T0(a){if(a!==sn)return!1;if(!Tt)return z4(a),Tt=!0,!1;var c=!1,p;if((p=a.tag!==3&&a.tag!==27)&&((p=a.tag===5)&&(p=a.type,p=!(p!=="form"&&p!=="button")||fO(a.type,a.memoizedProps)),p=!p),p&&(c=!0),c&&Ei&&vh(a),z4(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(p=a.data,p==="/$"){if(c===0){Ei=_o(a.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;a=a.nextSibling}Ei=null}}else Ei=sn?_o(a.stateNode.nextSibling):null;return!0}function E0(){Ei=sn=null,Tt=!1}function $0(a){vo===null?vo=[a]:vo.push(a)}var x0=Error(i(460)),G4=Error(i(474)),YA={then:function(){}};function B4(a){return a=a.status,a==="fulfilled"||a==="rejected"}function p1(){}function q4(a,c,p){switch(p=a[p],p===void 0?a.push(c):p!==c&&(c.then(p1,p1),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,a===x0?Error(i(483)):a;default:if(typeof c.status=="string")c.then(p1,p1);else{if(a=Gt,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=c,a.status="pending",a.then(function(m){if(c.status==="pending"){var _=c;_.status="fulfilled",_.value=m}},function(m){if(c.status==="pending"){var _=c;_.status="rejected",_.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,a===x0?Error(i(483)):a}throw A0=c,x0}}var A0=null;function H4(){if(A0===null)throw Error(i(459));var a=A0;return A0=null,a}var Zf=null,M0=0;function f1(a){var c=M0;return M0+=1,Zf===null&&(Zf=[]),q4(Zf,a,c)}function O0(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function y1(a,c){throw c.$$typeof===s?Error(i(525)):(a=Object.prototype.toString.call(c),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function W4(a){var c=a._init;return c(a._payload)}function Z4(a){function c(q,z){if(a){var Y=q.deletions;Y===null?(q.deletions=[z],q.flags|=16):Y.push(z)}}function p(q,z){if(!a)return null;for(;z!==null;)c(q,z),z=z.sibling;return null}function m(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function _(q,z){return q=uc(q,z),q.index=0,q.sibling=null,q}function w(q,z,Y){return q.index=Y,a?(Y=q.alternate,Y!==null?(Y=Y.index,Y<z?(q.flags|=33554434,z):Y):(q.flags|=33554434,z)):(q.flags|=1048576,z)}function $(q){return a&&q.alternate===null&&(q.flags|=33554434),q}function R(q,z,Y,oe){return z===null||z.tag!==6?(z=GM(Y,q.mode,oe),z.return=q,z):(z=_(z,Y),z.return=q,z)}function L(q,z,Y,oe){var Ce=Y.type;return Ce===d?te(q,z,Y.props.children,oe,Y.key):z!==null&&(z.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===C&&W4(Ce)===z.type)?(z=_(z,Y.props),O0(z,Y),z.return=q,z):(z=N1(Y.type,Y.key,Y.props,null,q.mode,oe),O0(z,Y),z.return=q,z)}function G(q,z,Y,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=BM(Y,q.mode,oe),z.return=q,z):(z=_(z,Y.children||[]),z.return=q,z)}function te(q,z,Y,oe,Ce){return z===null||z.tag!==7?(z=Mh(Y,q.mode,oe,Ce),z.return=q,z):(z=_(z,Y),z.return=q,z)}function de(q,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=GM(""+z,q.mode,Y),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case o:return Y=N1(z.type,z.key,z.props,null,q.mode,Y),O0(Y,z),Y.return=q,Y;case l:return z=BM(z,q.mode,Y),z.return=q,z;case C:var oe=z._init;return z=oe(z._payload),de(q,z,Y)}if(Le(z)||D(z))return z=Mh(z,q.mode,Y,null),z.return=q,z;if(typeof z.then=="function")return de(q,f1(z),Y);if(z.$$typeof===S)return de(q,R1(q,z),Y);y1(q,z)}return null}function J(q,z,Y,oe){var Ce=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ce!==null?null:R(q,z,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case o:return Y.key===Ce?L(q,z,Y,oe):null;case l:return Y.key===Ce?G(q,z,Y,oe):null;case C:return Ce=Y._init,Y=Ce(Y._payload),J(q,z,Y,oe)}if(Le(Y)||D(Y))return Ce!==null?null:te(q,z,Y,oe,null);if(typeof Y.then=="function")return J(q,z,f1(Y),oe);if(Y.$$typeof===S)return J(q,z,R1(q,Y),oe);y1(q,Y)}return null}function ee(q,z,Y,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return q=q.get(Y)||null,R(z,q,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case o:return q=q.get(oe.key===null?Y:oe.key)||null,L(z,q,oe,Ce);case l:return q=q.get(oe.key===null?Y:oe.key)||null,G(z,q,oe,Ce);case C:var dt=oe._init;return oe=dt(oe._payload),ee(q,z,Y,oe,Ce)}if(Le(oe)||D(oe))return q=q.get(Y)||null,te(z,q,oe,Ce,null);if(typeof oe.then=="function")return ee(q,z,Y,f1(oe),Ce);if(oe.$$typeof===S)return ee(q,z,Y,R1(z,oe),Ce);y1(z,oe)}return null}function ke(q,z,Y,oe){for(var Ce=null,dt=null,Ue=z,qe=z=0,hi=null;Ue!==null&&qe<Y.length;qe++){Ue.index>qe?(hi=Ue,Ue=null):hi=Ue.sibling;var Et=J(q,Ue,Y[qe],oe);if(Et===null){Ue===null&&(Ue=hi);break}a&&Ue&&Et.alternate===null&&c(q,Ue),z=w(Et,z,qe),dt===null?Ce=Et:dt.sibling=Et,dt=Et,Ue=hi}if(qe===Y.length)return p(q,Ue),Tt&&gh(q,qe),Ce;if(Ue===null){for(;qe<Y.length;qe++)Ue=de(q,Y[qe],oe),Ue!==null&&(z=w(Ue,z,qe),dt===null?Ce=Ue:dt.sibling=Ue,dt=Ue);return Tt&&gh(q,qe),Ce}for(Ue=m(Ue);qe<Y.length;qe++)hi=ee(Ue,q,qe,Y[qe],oe),hi!==null&&(a&&hi.alternate!==null&&Ue.delete(hi.key===null?qe:hi.key),z=w(hi,z,qe),dt===null?Ce=hi:dt.sibling=hi,dt=hi);return a&&Ue.forEach(function(mc){return c(q,mc)}),Tt&&gh(q,qe),Ce}function tt(q,z,Y,oe){if(Y==null)throw Error(i(151));for(var Ce=null,dt=null,Ue=z,qe=z=0,hi=null,Et=Y.next();Ue!==null&&!Et.done;qe++,Et=Y.next()){Ue.index>qe?(hi=Ue,Ue=null):hi=Ue.sibling;var mc=J(q,Ue,Et.value,oe);if(mc===null){Ue===null&&(Ue=hi);break}a&&Ue&&mc.alternate===null&&c(q,Ue),z=w(mc,z,qe),dt===null?Ce=mc:dt.sibling=mc,dt=mc,Ue=hi}if(Et.done)return p(q,Ue),Tt&&gh(q,qe),Ce;if(Ue===null){for(;!Et.done;qe++,Et=Y.next())Et=de(q,Et.value,oe),Et!==null&&(z=w(Et,z,qe),dt===null?Ce=Et:dt.sibling=Et,dt=Et);return Tt&&gh(q,qe),Ce}for(Ue=m(Ue);!Et.done;qe++,Et=Y.next())Et=ee(Ue,q,qe,Et.value,oe),Et!==null&&(a&&Et.alternate!==null&&Ue.delete(Et.key===null?qe:Et.key),z=w(Et,z,qe),dt===null?Ce=Et:dt.sibling=Et,dt=Et);return a&&Ue.forEach(function(zse){return c(q,zse)}),Tt&&gh(q,qe),Ce}function wr(q,z,Y,oe){if(typeof Y=="object"&&Y!==null&&Y.type===d&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case o:e:{for(var Ce=Y.key;z!==null;){if(z.key===Ce){if(Ce=Y.type,Ce===d){if(z.tag===7){p(q,z.sibling),oe=_(z,Y.props.children),oe.return=q,q=oe;break e}}else if(z.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===C&&W4(Ce)===z.type){p(q,z.sibling),oe=_(z,Y.props),O0(oe,Y),oe.return=q,q=oe;break e}p(q,z);break}else c(q,z);z=z.sibling}Y.type===d?(oe=Mh(Y.props.children,q.mode,oe,Y.key),oe.return=q,q=oe):(oe=N1(Y.type,Y.key,Y.props,null,q.mode,oe),O0(oe,Y),oe.return=q,q=oe)}return $(q);case l:e:{for(Ce=Y.key;z!==null;){if(z.key===Ce)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){p(q,z.sibling),oe=_(z,Y.children||[]),oe.return=q,q=oe;break e}else{p(q,z);break}else c(q,z);z=z.sibling}oe=BM(Y,q.mode,oe),oe.return=q,q=oe}return $(q);case C:return Ce=Y._init,Y=Ce(Y._payload),wr(q,z,Y,oe)}if(Le(Y))return ke(q,z,Y,oe);if(D(Y)){if(Ce=D(Y),typeof Ce!="function")throw Error(i(150));return Y=Ce.call(Y),tt(q,z,Y,oe)}if(typeof Y.then=="function")return wr(q,z,f1(Y),oe);if(Y.$$typeof===S)return wr(q,z,R1(q,Y),oe);y1(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,z!==null&&z.tag===6?(p(q,z.sibling),oe=_(z,Y),oe.return=q,q=oe):(p(q,z),oe=GM(Y,q.mode,oe),oe.return=q,q=oe),$(q)):p(q,z)}return function(q,z,Y,oe){try{M0=0;var Ce=wr(q,z,Y,oe);return Zf=null,Ce}catch(Ue){if(Ue===x0)throw Ue;var dt=Ms(29,Ue,null,q.mode);return dt.lanes=oe,dt.return=q,dt}finally{}}}var bh=Z4(!0),Y4=Z4(!1),Yf=nt(null),m1=nt(0);function J4(a,c){a=Cl,_t(m1,a),_t(Yf,c),Cl=a|c.baseLanes}function JA(){_t(m1,Cl),_t(Yf,Yf.current)}function XA(){Cl=m1.current,bt(Yf),bt(m1)}var $s=nt(null),pa=null;function Ku(a){var c=a.alternate;_t(Yr,Yr.current&1),_t($s,a),pa===null&&(c===null||Yf.current!==null||c.memoizedState!==null)&&(pa=a)}function X4(a){if(a.tag===22){if(_t(Yr,Yr.current),_t($s,a),pa===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(pa=a)}}else Qu()}function Qu(){_t(Yr,Yr.current),_t($s,$s.current)}function wl(a){bt($s),pa===a&&(pa=null),bt(Yr)}var Yr=nt(0);function g1(a){for(var c=a;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var One=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(p,m){a.push(m)}};this.abort=function(){c.aborted=!0,a.forEach(function(p){return p()})}},Rne=e.unstable_scheduleCallback,Cne=e.unstable_NormalPriority,Jr={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function KA(){return{controller:new One,data:new Map,refCount:0}}function R0(a){a.refCount--,a.refCount===0&&Rne(Cne,function(){a.controller.abort()})}var C0=null,QA=0,Jf=0,Xf=null;function Ine(a,c){if(C0===null){var p=C0=[];QA=0,Jf=sO(),Xf={status:"pending",value:void 0,then:function(m){p.push(m)}}}return QA++,c.then(K4,K4),c}function K4(){if(--QA===0&&C0!==null){Xf!==null&&(Xf.status="fulfilled");var a=C0;C0=null,Jf=0,Xf=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function Nne(a,c){var p=[],m={status:"pending",value:null,reason:null,then:function(_){p.push(_)}};return a.then(function(){m.status="fulfilled",m.value=c;for(var _=0;_<p.length;_++)(0,p[_])(c)},function(_){for(m.status="rejected",m.reason=_,_=0;_<p.length;_++)(0,p[_])(void 0)}),m}var Q4=K.S;K.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Ine(a,c),Q4!==null&&Q4(a,c)};var _h=nt(null);function eM(){var a=_h.current;return a!==null?a:Gt.pooledCache}function v1(a,c){c===null?_t(_h,_h.current):_t(_h,c.pool)}function ej(){var a=eM();return a===null?null:{parent:Jr._currentValue,pool:a}}var ec=0,ut=null,Dt=null,Dr=null,b1=!1,Kf=!1,wh=!1,_1=0,I0=0,Qf=null,Pne=0;function Rr(){throw Error(i(321))}function tM(a,c){if(c===null)return!1;for(var p=0;p<c.length&&p<a.length;p++)if(!qn(a[p],c[p]))return!1;return!0}function rM(a,c,p,m,_,w){return ec=w,ut=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,K.H=a===null||a.memoizedState===null?Sh:tc,wh=!1,w=p(m,_),wh=!1,Kf&&(w=rj(c,p,m,_)),tj(a),w}function tj(a){K.H=fa;var c=Dt!==null&&Dt.next!==null;if(ec=0,Dr=Dt=ut=null,b1=!1,I0=0,Qf=null,c)throw Error(i(300));a===null||ci||(a=a.dependencies,a!==null&&O1(a)&&(ci=!0))}function rj(a,c,p,m){ut=a;var _=0;do{if(Kf&&(Qf=null),I0=0,Kf=!1,25<=_)throw Error(i(301));if(_+=1,Dr=Dt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}K.H=Th,w=c(p,m)}while(Kf);return w}function Lne(){var a=K.H,c=a.useState()[0];return c=typeof c.then=="function"?N0(c):c,a=a.useState()[0],(Dt!==null?Dt.memoizedState:null)!==a&&(ut.flags|=1024),c}function iM(){var a=_1!==0;return _1=0,a}function nM(a,c,p){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~p}function sM(a){if(b1){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}b1=!1}ec=0,Dr=Dt=ut=null,Kf=!1,I0=_1=0,Qf=null}function Sn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?ut.memoizedState=Dr=a:Dr=Dr.next=a,Dr}function jr(){if(Dt===null){var a=ut.alternate;a=a!==null?a.memoizedState:null}else a=Dt.next;var c=Dr===null?ut.memoizedState:Dr.next;if(c!==null)Dr=c,Dt=a;else{if(a===null)throw ut.alternate===null?Error(i(467)):Error(i(310));Dt=a,a={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Dr===null?ut.memoizedState=Dr=a:Dr=Dr.next=a}return Dr}var w1;w1=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function N0(a){var c=I0;return I0+=1,Qf===null&&(Qf=[]),a=q4(Qf,a,c),c=ut,(Dr===null?c.memoizedState:Dr.next)===null&&(c=c.alternate,K.H=c===null||c.memoizedState===null?Sh:tc),a}function S1(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return N0(a);if(a.$$typeof===S)return Li(a)}throw Error(i(438,String(a)))}function oM(a){var c=null,p=ut.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var m=ut.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(_){return _.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=w1(),ut.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(a),m=0;m<a;m++)p[m]=P;return c.index++,p}function Sl(a,c){return typeof c=="function"?c(a):c}function T1(a){var c=jr();return aM(c,Dt,a)}function aM(a,c,p){var m=a.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=p;var _=a.baseQueue,w=m.pending;if(w!==null){if(_!==null){var $=_.next;_.next=w.next,w.next=$}c.baseQueue=_=w,m.pending=null}if(w=a.baseState,_===null)a.memoizedState=w;else{c=_.next;var R=$=null,L=null,G=c,te=!1;do{var de=G.lane&-536870913;if(de!==G.lane?(gt&de)===de:(ec&de)===de){var J=G.revertLane;if(J===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),de===Jf&&(te=!0);else if((ec&J)===J){G=G.next,J===Jf&&(te=!0);continue}else de={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},L===null?(R=L=de,$=w):L=L.next=de,ut.lanes|=J,cc|=J;de=G.action,wh&&p(w,de),w=G.hasEagerState?G.eagerState:p(w,de)}else J={lane:de,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},L===null?(R=L=J,$=w):L=L.next=J,ut.lanes|=de,cc|=de;G=G.next}while(G!==null&&G!==c);if(L===null?$=w:L.next=R,!qn(w,a.memoizedState)&&(ci=!0,te&&(p=Xf,p!==null)))throw p;a.memoizedState=w,a.baseState=$,a.baseQueue=L,m.lastRenderedState=w}return _===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function lM(a){var c=jr(),p=c.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=a;var m=p.dispatch,_=p.pending,w=c.memoizedState;if(_!==null){p.pending=null;var $=_=_.next;do w=a(w,$.action),$=$.next;while($!==_);qn(w,c.memoizedState)||(ci=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),p.lastRenderedState=w}return[w,m]}function ij(a,c,p){var m=ut,_=jr(),w=Tt;if(w){if(p===void 0)throw Error(i(407));p=p()}else p=c();var $=!qn((Dt||_).memoizedState,p);if($&&(_.memoizedState=p,ci=!0),_=_.queue,dM(oj.bind(null,m,_,a),[a]),_.getSnapshot!==c||$||Dr!==null&&Dr.memoizedState.tag&1){if(m.flags|=2048,ey(9,sj.bind(null,m,_,p,c),{destroy:void 0},null),Gt===null)throw Error(i(349));w||(ec&60)!==0||nj(m,c,p)}return p}function nj(a,c,p){a.flags|=16384,a={getSnapshot:c,value:p},c=ut.updateQueue,c===null?(c=w1(),ut.updateQueue=c,c.stores=[a]):(p=c.stores,p===null?c.stores=[a]:p.push(a))}function sj(a,c,p,m){c.value=p,c.getSnapshot=m,aj(c)&&lj(a)}function oj(a,c,p){return p(function(){aj(c)&&lj(a)})}function aj(a){var c=a.getSnapshot;a=a.value;try{var p=c();return!qn(a,p)}catch{return!0}}function lj(a){var c=Xu(a,2);c!==null&&on(c,a,2)}function uM(a){var c=Sn();if(typeof a=="function"){var p=a;if(a=p(),wh){da(!0);try{p()}finally{da(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:a},c}function uj(a,c,p,m){return a.baseState=p,aM(a,Dt,typeof m=="function"?m:Sl)}function kne(a,c,p,m,_){if(x1(a))throw Error(i(485));if(a=c.action,a!==null){var w={payload:_,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){w.listeners.push($)}};K.T!==null?p(!0):w.isTransition=!1,m(w),p=c.pending,p===null?(w.next=c.pending=w,cj(c,w)):(w.next=p.next,c.pending=p.next=w)}}function cj(a,c){var p=c.action,m=c.payload,_=a.state;if(c.isTransition){var w=K.T,$={};K.T=$;try{var R=p(_,m),L=K.S;L!==null&&L($,R),dj(a,c,R)}catch(G){cM(a,c,G)}finally{K.T=w}}else try{w=p(_,m),dj(a,c,w)}catch(G){cM(a,c,G)}}function dj(a,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(m){hj(a,c,m)},function(m){return cM(a,c,m)}):hj(a,c,p)}function hj(a,c,p){c.status="fulfilled",c.value=p,pj(c),a.state=p,c=a.pending,c!==null&&(p=c.next,p===c?a.pending=null:(p=p.next,c.next=p,cj(a,p)))}function cM(a,c,p){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=p,pj(c),c=c.next;while(c!==m)}a.action=null}function pj(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function fj(a,c){return c}function yj(a,c){if(Tt){var p=Gt.formState;if(p!==null){e:{var m=ut;if(Tt){if(Ei){t:{for(var _=Ei,w=ha;_.nodeType!==8;){if(!w){_=null;break t}if(_=_o(_.nextSibling),_===null){_=null;break t}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){Ei=_o(_.nextSibling),m=_.data==="F!";break e}}vh(m)}m=!1}m&&(c=p[0])}}return p=Sn(),p.memoizedState=p.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fj,lastRenderedState:c},p.queue=m,p=Nj.bind(null,ut,m),m.dispatch=p,m=uM(!1),w=mM.bind(null,ut,!1,m.queue),m=Sn(),_={state:c,dispatch:null,action:a,pending:null},m.queue=_,p=kne.bind(null,ut,_,w,p),_.dispatch=p,m.memoizedState=a,[c,p,!1]}function mj(a){var c=jr();return gj(c,Dt,a)}function gj(a,c,p){c=aM(a,c,fj)[0],a=T1(Sl)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?N0(c):c;var m=jr(),_=m.queue,w=_.dispatch;return p!==m.memoizedState&&(ut.flags|=2048,ey(9,Dne.bind(null,_,p),{destroy:void 0},null)),[c,w,a]}function Dne(a,c){a.action=c}function vj(a){var c=jr(),p=Dt;if(p!==null)return gj(c,p,a);jr(),c=c.memoizedState,p=jr();var m=p.queue.dispatch;return p.memoizedState=a,[c,m,!1]}function ey(a,c,p,m){return a={tag:a,create:c,inst:p,deps:m,next:null},c=ut.updateQueue,c===null&&(c=w1(),ut.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=a.next=a:(m=p.next,p.next=a,a.next=m,c.lastEffect=a),a}function bj(){return jr().memoizedState}function E1(a,c,p,m){var _=Sn();ut.flags|=a,_.memoizedState=ey(1|c,p,{destroy:void 0},m===void 0?null:m)}function $1(a,c,p,m){var _=jr();m=m===void 0?null:m;var w=_.memoizedState.inst;Dt!==null&&m!==null&&tM(m,Dt.memoizedState.deps)?_.memoizedState=ey(c,p,w,m):(ut.flags|=a,_.memoizedState=ey(1|c,p,w,m))}function _j(a,c){E1(8390656,8,a,c)}function dM(a,c){$1(2048,8,a,c)}function wj(a,c){return $1(4,2,a,c)}function Sj(a,c){return $1(4,4,a,c)}function Tj(a,c){if(typeof c=="function"){a=a();var p=c(a);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Ej(a,c,p){p=p!=null?p.concat([a]):null,$1(4,4,Tj.bind(null,c,a),p)}function hM(){}function $j(a,c){var p=jr();c=c===void 0?null:c;var m=p.memoizedState;return c!==null&&tM(c,m[1])?m[0]:(p.memoizedState=[a,c],a)}function xj(a,c){var p=jr();c=c===void 0?null:c;var m=p.memoizedState;if(c!==null&&tM(c,m[1]))return m[0];if(m=a(),wh){da(!0);try{a()}finally{da(!1)}}return p.memoizedState=[m,c],m}function pM(a,c,p){return p===void 0||(ec&1073741824)!==0?a.memoizedState=c:(a.memoizedState=p,a=MF(),ut.lanes|=a,cc|=a,p)}function Aj(a,c,p,m){return qn(p,c)?p:Yf.current!==null?(a=pM(a,p,m),qn(a,c)||(ci=!0),a):(ec&42)===0?(ci=!0,a.memoizedState=p):(a=MF(),ut.lanes|=a,cc|=a,c)}function Mj(a,c,p,m,_){var w=we.p;we.p=w!==0&&8>w?w:8;var $=K.T,R={};K.T=R,mM(a,!1,c,p);try{var L=_(),G=K.S;if(G!==null&&G(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=Nne(L,m);P0(a,c,te,Yn(a))}else P0(a,c,m,Yn(a))}catch(de){P0(a,c,{then:function(){},status:"rejected",reason:de},Yn())}finally{we.p=w,K.T=$}}function jne(){}function fM(a,c,p,m){if(a.tag!==5)throw Error(i(476));var _=Oj(a).queue;Mj(a,_,c,et,p===null?jne:function(){return Rj(a),p(m)})}function Oj(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:et},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:p},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function Rj(a){var c=Oj(a).next.queue;P0(a,c,{},Yn())}function yM(){return Li(ev)}function Cj(){return jr().memoizedState}function Ij(){return jr().memoizedState}function Fne(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var p=Yn();a=nc(p);var m=sc(c,a,p);m!==null&&(on(m,c,p),D0(m,c,p)),c={cache:KA()},a.payload=c;return}c=c.return}}function Une(a,c,p){var m=Yn();p={lane:m,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},x1(a)?Pj(c,p):(p=qA(a,c,p,m),p!==null&&(on(p,a,m),Lj(p,c,m)))}function Nj(a,c,p){var m=Yn();P0(a,c,p,m)}function P0(a,c,p,m){var _={lane:m,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(x1(a))Pj(c,_);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var $=c.lastRenderedState,R=w($,p);if(_.hasEagerState=!0,_.eagerState=R,qn(R,$))return u1(a,c,_,0),Gt===null&&l1(),!1}catch{}finally{}if(p=qA(a,c,_,m),p!==null)return on(p,a,m),Lj(p,c,m),!0}return!1}function mM(a,c,p,m){if(m={lane:2,revertLane:sO(),action:m,hasEagerState:!1,eagerState:null,next:null},x1(a)){if(c)throw Error(i(479))}else c=qA(a,p,m,2),c!==null&&on(c,a,2)}function x1(a){var c=a.alternate;return a===ut||c!==null&&c===ut}function Pj(a,c){Kf=b1=!0;var p=a.pending;p===null?c.next=c:(c.next=p.next,p.next=c),a.pending=c}function Lj(a,c,p){if((p&4194176)!==0){var m=c.lanes;m&=a.pendingLanes,p|=m,c.lanes=p,ch(a,p)}}var fa={readContext:Li,use:S1,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useLayoutEffect:Rr,useInsertionEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useSyncExternalStore:Rr,useId:Rr};fa.useCacheRefresh=Rr,fa.useMemoCache=Rr,fa.useHostTransitionStatus=Rr,fa.useFormState=Rr,fa.useActionState=Rr,fa.useOptimistic=Rr;var Sh={readContext:Li,use:S1,useCallback:function(a,c){return Sn().memoizedState=[a,c===void 0?null:c],a},useContext:Li,useEffect:_j,useImperativeHandle:function(a,c,p){p=p!=null?p.concat([a]):null,E1(4194308,4,Tj.bind(null,c,a),p)},useLayoutEffect:function(a,c){return E1(4194308,4,a,c)},useInsertionEffect:function(a,c){E1(4,2,a,c)},useMemo:function(a,c){var p=Sn();c=c===void 0?null:c;var m=a();if(wh){da(!0);try{a()}finally{da(!1)}}return p.memoizedState=[m,c],m},useReducer:function(a,c,p){var m=Sn();if(p!==void 0){var _=p(c);if(wh){da(!0);try{p(c)}finally{da(!1)}}}else _=c;return m.memoizedState=m.baseState=_,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:_},m.queue=a,a=a.dispatch=Une.bind(null,ut,a),[m.memoizedState,a]},useRef:function(a){var c=Sn();return a={current:a},c.memoizedState=a},useState:function(a){a=uM(a);var c=a.queue,p=Nj.bind(null,ut,c);return c.dispatch=p,[a.memoizedState,p]},useDebugValue:hM,useDeferredValue:function(a,c){var p=Sn();return pM(p,a,c)},useTransition:function(){var a=uM(!1);return a=Mj.bind(null,ut,a.queue,!0,!1),Sn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,p){var m=ut,_=Sn();if(Tt){if(p===void 0)throw Error(i(407));p=p()}else{if(p=c(),Gt===null)throw Error(i(349));(gt&60)!==0||nj(m,c,p)}_.memoizedState=p;var w={value:p,getSnapshot:c};return _.queue=w,_j(oj.bind(null,m,w,a),[a]),m.flags|=2048,ey(9,sj.bind(null,m,w,p,c),{destroy:void 0},null),p},useId:function(){var a=Sn(),c=Gt.identifierPrefix;if(Tt){var p=_l,m=bl;p=(m&~(1<<32-rn(m)-1)).toString(32)+p,c=":"+c+"R"+p,p=_1++,0<p&&(c+="H"+p.toString(32)),c+=":"}else p=Pne++,c=":"+c+"r"+p.toString(32)+":";return a.memoizedState=c},useCacheRefresh:function(){return Sn().memoizedState=Fne.bind(null,ut)}};Sh.useMemoCache=oM,Sh.useHostTransitionStatus=yM,Sh.useFormState=yj,Sh.useActionState=yj,Sh.useOptimistic=function(a){var c=Sn();c.memoizedState=c.baseState=a;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=mM.bind(null,ut,!0,p),p.dispatch=c,[a,c]};var tc={readContext:Li,use:S1,useCallback:$j,useContext:Li,useEffect:dM,useImperativeHandle:Ej,useInsertionEffect:wj,useLayoutEffect:Sj,useMemo:xj,useReducer:T1,useRef:bj,useState:function(){return T1(Sl)},useDebugValue:hM,useDeferredValue:function(a,c){var p=jr();return Aj(p,Dt.memoizedState,a,c)},useTransition:function(){var a=T1(Sl)[0],c=jr().memoizedState;return[typeof a=="boolean"?a:N0(a),c]},useSyncExternalStore:ij,useId:Cj};tc.useCacheRefresh=Ij,tc.useMemoCache=oM,tc.useHostTransitionStatus=yM,tc.useFormState=mj,tc.useActionState=mj,tc.useOptimistic=function(a,c){var p=jr();return uj(p,Dt,a,c)};var Th={readContext:Li,use:S1,useCallback:$j,useContext:Li,useEffect:dM,useImperativeHandle:Ej,useInsertionEffect:wj,useLayoutEffect:Sj,useMemo:xj,useReducer:lM,useRef:bj,useState:function(){return lM(Sl)},useDebugValue:hM,useDeferredValue:function(a,c){var p=jr();return Dt===null?pM(p,a,c):Aj(p,Dt.memoizedState,a,c)},useTransition:function(){var a=lM(Sl)[0],c=jr().memoizedState;return[typeof a=="boolean"?a:N0(a),c]},useSyncExternalStore:ij,useId:Cj};Th.useCacheRefresh=Ij,Th.useMemoCache=oM,Th.useHostTransitionStatus=yM,Th.useFormState=vj,Th.useActionState=vj,Th.useOptimistic=function(a,c){var p=jr();return Dt!==null?uj(p,Dt,a,c):(p.baseState=a,[a,p.queue.dispatch])};function gM(a,c,p,m){c=a.memoizedState,p=p(m,c),p=p==null?c:ie({},c,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var vM={isMounted:function(a){return(a=a._reactInternals)?ye(a)===a:!1},enqueueSetState:function(a,c,p){a=a._reactInternals;var m=Yn(),_=nc(m);_.payload=c,p!=null&&(_.callback=p),c=sc(a,_,m),c!==null&&(on(c,a,m),D0(c,a,m))},enqueueReplaceState:function(a,c,p){a=a._reactInternals;var m=Yn(),_=nc(m);_.tag=1,_.payload=c,p!=null&&(_.callback=p),c=sc(a,_,m),c!==null&&(on(c,a,m),D0(c,a,m))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var p=Yn(),m=nc(p);m.tag=2,c!=null&&(m.callback=c),c=sc(a,m,p),c!==null&&(on(c,a,p),D0(c,a,p))}};function kj(a,c,p,m,_,w,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,w,$):c.prototype&&c.prototype.isPureReactComponent?!w0(p,m)||!w0(_,w):!0}function Dj(a,c,p,m){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,m),c.state!==a&&vM.enqueueReplaceState(c,c.state,null)}function Eh(a,c){var p=c;if("ref"in c){p={};for(var m in c)m!=="ref"&&(p[m]=c[m])}if(a=a.defaultProps){p===c&&(p=ie({},p));for(var _ in a)p[_]===void 0&&(p[_]=a[_])}return p}var A1=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function jj(a){A1(a)}function Fj(a){console.error(a)}function Uj(a){A1(a)}function M1(a,c){try{var p=a.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function Vj(a,c,p){try{var m=a.onCaughtError;m(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function bM(a,c,p){return p=nc(p),p.tag=3,p.payload={element:null},p.callback=function(){M1(a,c)},p}function zj(a){return a=nc(a),a.tag=3,a}function Gj(a,c,p,m){var _=p.type.getDerivedStateFromError;if(typeof _=="function"){var w=m.value;a.payload=function(){return _(w)},a.callback=function(){Vj(c,p,m)}}var $=p.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(a.callback=function(){Vj(c,p,m),typeof _!="function"&&(dc===null?dc=new Set([this]):dc.add(this));var R=m.stack;this.componentDidCatch(m.value,{componentStack:R!==null?R:""})})}function Vne(a,c,p,m,_){if(p.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=p.alternate,c!==null&&k0(c,p,_,!0),p=$s.current,p!==null){switch(p.tag){case 13:return pa===null?eO():p.alternate===null&&_r===0&&(_r=3),p.flags&=-257,p.flags|=65536,p.lanes=_,m===YA?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([m]):c.add(m),rO(a,m,_)),!1;case 22:return p.flags|=65536,m===YA?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([m]):p.add(m)),rO(a,m,_)),!1}throw Error(i(435,p.tag))}return rO(a,m,_),eO(),!1}if(Tt)return c=$s.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=_,m!==ZA&&(a=Error(i(422),{cause:m}),$0(Ss(a,p)))):(m!==ZA&&(c=Error(i(423),{cause:m}),$0(Ss(c,p))),a=a.current.alternate,a.flags|=65536,_&=-_,a.lanes|=_,m=Ss(m,p),_=bM(a.stateNode,m,_),PM(a,_),_r!==4&&(_r=2)),!1;var w=Error(i(520),{cause:m});if(w=Ss(w,p),q0===null?q0=[w]:q0.push(w),_r!==4&&(_r=2),c===null)return!0;m=Ss(m,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,a=_&-_,p.lanes|=a,a=bM(p.stateNode,m,a),PM(p,a),!1;case 1:if(c=p.type,w=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(dc===null||!dc.has(w))))return p.flags|=65536,_&=-_,p.lanes|=_,_=zj(_),Gj(_,a,p,m),PM(p,_),!1}p=p.return}while(p!==null);return!1}var Bj=Error(i(461)),ci=!1;function $i(a,c,p,m){c.child=a===null?Y4(c,null,p,m):bh(c,a.child,p,m)}function qj(a,c,p,m,_){p=p.render;var w=c.ref;if("ref"in m){var $={};for(var R in m)R!=="ref"&&($[R]=m[R])}else $=m;return xh(c),m=rM(a,c,p,$,w,_),R=iM(),a!==null&&!ci?(nM(a,c,_),Tl(a,c,_)):(Tt&&R&&HA(c),c.flags|=1,$i(a,c,m,_),c.child)}function Hj(a,c,p,m,_){if(a===null){var w=p.type;return typeof w=="function"&&!zM(w)&&w.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=w,Wj(a,c,w,m,_)):(a=N1(p.type,null,m,c,c.mode,_),a.ref=c.ref,a.return=c,c.child=a)}if(w=a.child,!MM(a,_)){var $=w.memoizedProps;if(p=p.compare,p=p!==null?p:w0,p($,m)&&a.ref===c.ref)return Tl(a,c,_)}return c.flags|=1,a=uc(w,m),a.ref=c.ref,a.return=c,c.child=a}function Wj(a,c,p,m,_){if(a!==null){var w=a.memoizedProps;if(w0(w,m)&&a.ref===c.ref)if(ci=!1,c.pendingProps=m=w,MM(a,_))(a.flags&131072)!==0&&(ci=!0);else return c.lanes=a.lanes,Tl(a,c,_)}return _M(a,c,p,m,_)}function Zj(a,c,p){var m=c.pendingProps,_=m.children,w=(c.stateNode._pendingVisibility&2)!==0,$=a!==null?a.memoizedState:null;if(L0(a,c),m.mode==="hidden"||w){if((c.flags&128)!==0){if(m=$!==null?$.baseLanes|p:p,a!==null){for(_=c.child=a.child,w=0;_!==null;)w=w|_.lanes|_.childLanes,_=_.sibling;c.childLanes=w&~m}else c.childLanes=0,c.child=null;return Yj(a,c,m,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&v1(c,$!==null?$.cachePool:null),$!==null?J4(c,$):JA(),X4(c);else return c.lanes=c.childLanes=536870912,Yj(a,c,$!==null?$.baseLanes|p:p,p)}else $!==null?(v1(c,$.cachePool),J4(c,$),Qu(),c.memoizedState=null):(a!==null&&v1(c,null),JA(),Qu());return $i(a,c,_,p),c.child}function Yj(a,c,p,m){var _=eM();return _=_===null?null:{parent:Jr._currentValue,pool:_},c.memoizedState={baseLanes:p,cachePool:_},a!==null&&v1(c,null),JA(),X4(c),a!==null&&k0(a,c,m,!0),null}function L0(a,c){var p=c.ref;if(p===null)a!==null&&a.ref!==null&&(c.flags|=2097664);else{if(typeof p!="function"&&typeof p!="object")throw Error(i(284));(a===null||a.ref!==p)&&(c.flags|=2097664)}}function _M(a,c,p,m,_){return xh(c),p=rM(a,c,p,m,void 0,_),m=iM(),a!==null&&!ci?(nM(a,c,_),Tl(a,c,_)):(Tt&&m&&HA(c),c.flags|=1,$i(a,c,p,_),c.child)}function Jj(a,c,p,m,_,w){return xh(c),c.updateQueue=null,p=rj(c,m,p,_),tj(a),m=iM(),a!==null&&!ci?(nM(a,c,w),Tl(a,c,w)):(Tt&&m&&HA(c),c.flags|=1,$i(a,c,p,w),c.child)}function Xj(a,c,p,m,_){if(xh(c),c.stateNode===null){var w=qf,$=p.contextType;typeof $=="object"&&$!==null&&(w=Li($)),w=new p(m,w),c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=vM,c.stateNode=w,w._reactInternals=c,w=c.stateNode,w.props=m,w.state=c.memoizedState,w.refs={},IM(c),$=p.contextType,w.context=typeof $=="object"&&$!==null?Li($):qf,w.state=c.memoizedState,$=p.getDerivedStateFromProps,typeof $=="function"&&(gM(c,p,$,m),w.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||($=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),$!==w.state&&vM.enqueueReplaceState(w,w.state,null),F0(c,m,w,_),j0(),w.state=c.memoizedState),typeof w.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(a===null){w=c.stateNode;var R=c.memoizedProps,L=Eh(p,R);w.props=L;var G=w.context,te=p.contextType;$=qf,typeof te=="object"&&te!==null&&($=Li(te));var de=p.getDerivedStateFromProps;te=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function",R=c.pendingProps!==R,te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R||G!==$)&&Dj(c,w,m,$),ic=!1;var J=c.memoizedState;w.state=J,F0(c,m,w,_),j0(),G=c.memoizedState,R||J!==G||ic?(typeof de=="function"&&(gM(c,p,de,m),G=c.memoizedState),(L=ic||kj(c,p,L,m,J,G,$))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(c.flags|=4194308)):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=G),w.props=m,w.state=G,w.context=$,m=L):(typeof w.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{w=c.stateNode,NM(a,c),$=c.memoizedProps,te=Eh(p,$),w.props=te,de=c.pendingProps,J=w.context,G=p.contextType,L=qf,typeof G=="object"&&G!==null&&(L=Li(G)),R=p.getDerivedStateFromProps,(G=typeof R=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||($!==de||J!==L)&&Dj(c,w,m,L),ic=!1,J=c.memoizedState,w.state=J,F0(c,m,w,_),j0();var ee=c.memoizedState;$!==de||J!==ee||ic||a!==null&&a.dependencies!==null&&O1(a.dependencies)?(typeof R=="function"&&(gM(c,p,R,m),ee=c.memoizedState),(te=ic||kj(c,p,te,m,J,ee,L)||a!==null&&a.dependencies!==null&&O1(a.dependencies))?(G||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,ee,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,ee,L)),typeof w.componentDidUpdate=="function"&&(c.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof w.componentDidUpdate!="function"||$===a.memoizedProps&&J===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&J===a.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=ee),w.props=m,w.state=ee,w.context=L,m=te):(typeof w.componentDidUpdate!="function"||$===a.memoizedProps&&J===a.memoizedState||(c.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&J===a.memoizedState||(c.flags|=1024),m=!1)}return w=m,L0(a,c),m=(c.flags&128)!==0,w||m?(w=c.stateNode,p=m&&typeof p.getDerivedStateFromError!="function"?null:w.render(),c.flags|=1,a!==null&&m?(c.child=bh(c,a.child,null,_),c.child=bh(c,null,p,_)):$i(a,c,p,_),c.memoizedState=w.state,a=c.child):a=Tl(a,c,_),a}function Kj(a,c,p,m){return E0(),c.flags|=256,$i(a,c,p,m),c.child}var wM={dehydrated:null,treeContext:null,retryLane:0};function SM(a){return{baseLanes:a,cachePool:ej()}}function TM(a,c,p){return a=a!==null?a.childLanes&~p:0,c&&(a|=Os),a}function Qj(a,c,p){var m=c.pendingProps,_=!1,w=(c.flags&128)!==0,$;if(($=w)||($=a!==null&&a.memoizedState===null?!1:(Yr.current&2)!==0),$&&(_=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,a===null){if(Tt){if(_?Ku(c):Qu(),Tt){var R=Ei,L;if(L=R){e:{for(L=R,R=ha;L.nodeType!==8;){if(!R){R=null;break e}if(L=_o(L.nextSibling),L===null){R=null;break e}}R=L}R!==null?(c.memoizedState={dehydrated:R,treeContext:mh!==null?{id:bl,overflow:_l}:null,retryLane:536870912},L=Ms(18,null,null,0),L.stateNode=R,L.return=c,c.child=L,sn=c,Ei=null,L=!0):L=!1}L||vh(c)}if(R=c.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return R.data==="$!"?c.lanes=16:c.lanes=536870912,null;wl(c)}return R=m.children,m=m.fallback,_?(Qu(),_=c.mode,R=$M({mode:"hidden",children:R},_),m=Mh(m,_,p,null),R.return=c,m.return=c,R.sibling=m,c.child=R,_=c.child,_.memoizedState=SM(p),_.childLanes=TM(a,$,p),c.memoizedState=wM,m):(Ku(c),EM(c,R))}if(L=a.memoizedState,L!==null&&(R=L.dehydrated,R!==null)){if(w)c.flags&256?(Ku(c),c.flags&=-257,c=xM(a,c,p)):c.memoizedState!==null?(Qu(),c.child=a.child,c.flags|=128,c=null):(Qu(),_=m.fallback,R=c.mode,m=$M({mode:"visible",children:m.children},R),_=Mh(_,R,p,null),_.flags|=2,m.return=c,_.return=c,m.sibling=_,c.child=m,bh(c,a.child,null,p),m=c.child,m.memoizedState=SM(p),m.childLanes=TM(a,$,p),c.memoizedState=wM,c=_);else if(Ku(c),R.data==="$!"){if($=R.nextSibling&&R.nextSibling.dataset,$)var G=$.dgst;$=G,m=Error(i(419)),m.stack="",m.digest=$,$0({value:m,source:null,stack:null}),c=xM(a,c,p)}else if(ci||k0(a,c,p,!1),$=(p&a.childLanes)!==0,ci||$){if($=Gt,$!==null){if(m=p&-p,(m&42)!==0)m=1;else switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=64;break;case 268435456:m=134217728;break;default:m=0}if(m=(m&($.suspendedLanes|p))!==0?0:m,m!==0&&m!==L.retryLane)throw L.retryLane=m,Xu(a,m),on($,a,m),Bj}R.data==="$?"||eO(),c=xM(a,c,p)}else R.data==="$?"?(c.flags|=128,c.child=a.child,c=rse.bind(null,a),R._reactRetry=c,c=null):(a=L.treeContext,Ei=_o(R.nextSibling),sn=c,Tt=!0,vo=null,ha=!1,a!==null&&(Ts[Es++]=bl,Ts[Es++]=_l,Ts[Es++]=mh,bl=a.id,_l=a.overflow,mh=c),c=EM(c,m.children),c.flags|=4096);return c}return _?(Qu(),_=m.fallback,R=c.mode,L=a.child,G=L.sibling,m=uc(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&31457280,G!==null?_=uc(G,_):(_=Mh(_,R,p,null),_.flags|=2),_.return=c,m.return=c,m.sibling=_,c.child=m,m=_,_=c.child,R=a.child.memoizedState,R===null?R=SM(p):(L=R.cachePool,L!==null?(G=Jr._currentValue,L=L.parent!==G?{parent:G,pool:G}:L):L=ej(),R={baseLanes:R.baseLanes|p,cachePool:L}),_.memoizedState=R,_.childLanes=TM(a,$,p),c.memoizedState=wM,m):(Ku(c),p=a.child,a=p.sibling,p=uc(p,{mode:"visible",children:m.children}),p.return=c,p.sibling=null,a!==null&&($=c.deletions,$===null?(c.deletions=[a],c.flags|=16):$.push(a)),c.child=p,c.memoizedState=null,p)}function EM(a,c){return c=$M({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function $M(a,c){return $F(a,c,0,null)}function xM(a,c,p){return bh(c,a.child,null,p),a=EM(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function eF(a,c,p){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c),RM(a.return,c,p)}function AM(a,c,p,m,_){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:p,tailMode:_}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=p,w.tailMode=_)}function tF(a,c,p){var m=c.pendingProps,_=m.revealOrder,w=m.tail;if($i(a,c,m.children,p),m=Yr.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&eF(a,p,c);else if(a.tag===19)eF(a,p,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(_t(Yr,m),_){case"forwards":for(p=c.child,_=null;p!==null;)a=p.alternate,a!==null&&g1(a)===null&&(_=p),p=p.sibling;p=_,p===null?(_=c.child,c.child=null):(_=p.sibling,p.sibling=null),AM(c,!1,_,p,w);break;case"backwards":for(p=null,_=c.child,c.child=null;_!==null;){if(a=_.alternate,a!==null&&g1(a)===null){c.child=_;break}a=_.sibling,_.sibling=p,p=_,_=a}AM(c,!0,p,null,w);break;case"together":AM(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Tl(a,c,p){if(a!==null&&(c.dependencies=a.dependencies),cc|=c.lanes,(p&c.childLanes)===0)if(a!==null){if(k0(a,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(i(153));if(c.child!==null){for(a=c.child,p=uc(a,a.pendingProps),c.child=p,p.return=c;a.sibling!==null;)a=a.sibling,p=p.sibling=uc(a,a.pendingProps),p.return=c;p.sibling=null}return c.child}function MM(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&O1(a)))}function zne(a,c,p){switch(c.tag){case 3:hl(c,c.stateNode.containerInfo),rc(c,Jr,a.memoizedState.cache),E0();break;case 27:case 5:Bu(c);break;case 4:hl(c,c.stateNode.containerInfo);break;case 10:rc(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Ku(c),c.flags|=128,null):(p&c.child.childLanes)!==0?Qj(a,c,p):(Ku(c),a=Tl(a,c,p),a!==null?a.sibling:null);Ku(c);break;case 19:var _=(a.flags&128)!==0;if(m=(p&c.childLanes)!==0,m||(k0(a,c,p,!1),m=(p&c.childLanes)!==0),_){if(m)return tF(a,c,p);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),_t(Yr,Yr.current),m)break;return null;case 22:case 23:return c.lanes=0,Zj(a,c,p);case 24:rc(c,Jr,a.memoizedState.cache)}return Tl(a,c,p)}function rF(a,c,p){if(a!==null)if(a.memoizedProps!==c.pendingProps)ci=!0;else{if(!MM(a,p)&&(c.flags&128)===0)return ci=!1,zne(a,c,p);ci=(a.flags&131072)!==0}else ci=!1,Tt&&(c.flags&1048576)!==0&&U4(c,h1,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var m=c.elementType,_=m._init;if(m=_(m._payload),c.type=m,typeof m=="function")zM(m)?(a=Eh(m,a),c.tag=1,c=Xj(null,c,m,a,p)):(c.tag=0,c=_M(null,c,m,a,p));else{if(m!=null){if(_=m.$$typeof,_===T){c.tag=11,c=qj(null,c,m,a,p);break e}else if(_===O){c.tag=14,c=Hj(null,c,m,a,p);break e}}throw c=re(m)||m,Error(i(306,c,""))}}return c;case 0:return _M(a,c,c.type,c.pendingProps,p);case 1:return m=c.type,_=Eh(m,c.pendingProps),Xj(a,c,m,_,p);case 3:e:{if(hl(c,c.stateNode.containerInfo),a===null)throw Error(i(387));var w=c.pendingProps;_=c.memoizedState,m=_.element,NM(a,c),F0(c,w,null,p);var $=c.memoizedState;if(w=$.cache,rc(c,Jr,w),w!==_.cache&&CM(c,[Jr],p,!0),j0(),w=$.element,_.isDehydrated)if(_={element:w,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){c=Kj(a,c,w,p);break e}else if(w!==m){m=Ss(Error(i(424)),c),$0(m),c=Kj(a,c,w,p);break e}else for(Ei=_o(c.stateNode.containerInfo.firstChild),sn=c,Tt=!0,vo=null,ha=!0,p=Y4(c,null,w,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(E0(),w===m){c=Tl(a,c,p);break e}$i(a,c,w,p)}c=c.child}return c;case 26:return L0(a,c),a===null?(p=s6(c.type,null,c.pendingProps,null))?c.memoizedState=p:Tt||(p=c.type,a=c.pendingProps,m=q1(Gn.current).createElement(p),m[ui]=c,m[or]=a,xi(m,p,a),kr(m),c.stateNode=m):c.memoizedState=s6(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Bu(c),a===null&&Tt&&(m=c.stateNode=r6(c.type,c.pendingProps,Gn.current),sn=c,ha=!0,Ei=_o(m.firstChild)),m=c.pendingProps.children,a!==null||Tt?$i(a,c,m,p):c.child=bh(c,null,m,p),L0(a,c),c.child;case 5:return a===null&&Tt&&((_=m=Ei)&&(m=vse(m,c.type,c.pendingProps,ha),m!==null?(c.stateNode=m,sn=c,Ei=_o(m.firstChild),ha=!1,_=!0):_=!1),_||vh(c)),Bu(c),_=c.type,w=c.pendingProps,$=a!==null?a.memoizedProps:null,m=w.children,fO(_,w)?m=null:$!==null&&fO(_,$)&&(c.flags|=32),c.memoizedState!==null&&(_=rM(a,c,Lne,null,null,p),ev._currentValue=_),L0(a,c),$i(a,c,m,p),c.child;case 6:return a===null&&Tt&&((a=p=Ei)&&(p=bse(p,c.pendingProps,ha),p!==null?(c.stateNode=p,sn=c,Ei=null,a=!0):a=!1),a||vh(c)),null;case 13:return Qj(a,c,p);case 4:return hl(c,c.stateNode.containerInfo),m=c.pendingProps,a===null?c.child=bh(c,null,m,p):$i(a,c,m,p),c.child;case 11:return qj(a,c,c.type,c.pendingProps,p);case 7:return $i(a,c,c.pendingProps,p),c.child;case 8:return $i(a,c,c.pendingProps.children,p),c.child;case 12:return $i(a,c,c.pendingProps.children,p),c.child;case 10:return m=c.pendingProps,rc(c,c.type,m.value),$i(a,c,m.children,p),c.child;case 9:return _=c.type._context,m=c.pendingProps.children,xh(c),_=Li(_),m=m(_),c.flags|=1,$i(a,c,m,p),c.child;case 14:return Hj(a,c,c.type,c.pendingProps,p);case 15:return Wj(a,c,c.type,c.pendingProps,p);case 19:return tF(a,c,p);case 22:return Zj(a,c,p);case 24:return xh(c),m=Li(Jr),a===null?(_=eM(),_===null&&(_=Gt,w=KA(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=p),_=w),c.memoizedState={parent:m,cache:_},IM(c),rc(c,Jr,_)):((a.lanes&p)!==0&&(NM(a,c),F0(c,null,null,p),j0()),_=a.memoizedState,w=c.memoizedState,_.parent!==m?(_={parent:m,cache:m},c.memoizedState=_,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=_),rc(c,Jr,m)):(m=w.cache,rc(c,Jr,m),m!==_.cache&&CM(c,[Jr],p,!0))),$i(a,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}var OM=nt(null),$h=null,El=null;function rc(a,c,p){_t(OM,c._currentValue),c._currentValue=p}function $l(a){a._currentValue=OM.current,bt(OM)}function RM(a,c,p){for(;a!==null;){var m=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),a===p)break;a=a.return}}function CM(a,c,p,m){var _=a.child;for(_!==null&&(_.return=a);_!==null;){var w=_.dependencies;if(w!==null){var $=_.child;w=w.firstContext;e:for(;w!==null;){var R=w;w=_;for(var L=0;L<c.length;L++)if(R.context===c[L]){w.lanes|=p,R=w.alternate,R!==null&&(R.lanes|=p),RM(w.return,p,a),m||($=null);break e}w=R.next}}else if(_.tag===18){if($=_.return,$===null)throw Error(i(341));$.lanes|=p,w=$.alternate,w!==null&&(w.lanes|=p),RM($,p,a),$=null}else $=_.child;if($!==null)$.return=_;else for($=_;$!==null;){if($===a){$=null;break}if(_=$.sibling,_!==null){_.return=$.return,$=_;break}$=$.return}_=$}}function k0(a,c,p,m){a=null;for(var _=c,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var $=_.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var R=_.type;qn(_.pendingProps.value,$.value)||(a!==null?a.push(R):a=[R])}}else if(_===dl.current){if($=_.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(a!==null?a.push(ev):a=[ev])}_=_.return}a!==null&&CM(c,a,p,m),c.flags|=262144}function O1(a){for(a=a.firstContext;a!==null;){if(!qn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function xh(a){$h=a,El=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Li(a){return iF($h,a)}function R1(a,c){return $h===null&&xh(a),iF(a,c)}function iF(a,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},El===null){if(a===null)throw Error(i(308));El=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else El=El.next=c;return p}var ic=!1;function IM(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function NM(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function nc(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function sc(a,c,p){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(fr&2)!==0){var _=m.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),m.pending=c,c=c1(a),j4(a,null,p),c}return u1(a,m,c,p),c1(a)}function D0(a,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194176)!==0)){var m=c.lanes;m&=a.pendingLanes,p|=m,c.lanes=p,ch(a,p)}}function PM(a,c){var p=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,p===m)){var _=null,w=null;if(p=p.firstBaseUpdate,p!==null){do{var $={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};w===null?_=w=$:w=w.next=$,p=p.next}while(p!==null);w===null?_=w=c:w=w.next=c}else _=w=c;p={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=c}var LM=!1;function j0(){if(LM){var a=Xf;if(a!==null)throw a}}function F0(a,c,p,m){LM=!1;var _=a.updateQueue;ic=!1;var w=_.firstBaseUpdate,$=_.lastBaseUpdate,R=_.shared.pending;if(R!==null){_.shared.pending=null;var L=R,G=L.next;L.next=null,$===null?w=G:$.next=G,$=L;var te=a.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==$&&(R===null?te.firstBaseUpdate=G:R.next=G,te.lastBaseUpdate=L))}if(w!==null){var de=_.baseState;$=0,te=G=L=null,R=w;do{var J=R.lane&-536870913,ee=J!==R.lane;if(ee?(gt&J)===J:(m&J)===J){J!==0&&J===Jf&&(LM=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ke=a,tt=R;J=c;var wr=p;switch(tt.tag){case 1:if(ke=tt.payload,typeof ke=="function"){de=ke.call(wr,de,J);break e}de=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=tt.payload,J=typeof ke=="function"?ke.call(wr,de,J):ke,J==null)break e;de=ie({},de,J);break e;case 2:ic=!0}}J=R.callback,J!==null&&(a.flags|=64,ee&&(a.flags|=8192),ee=_.callbacks,ee===null?_.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(G=te=ee,L=de):te=te.next=ee,$|=J;if(R=R.next,R===null){if(R=_.shared.pending,R===null)break;ee=R,R=ee.next,ee.next=null,_.lastBaseUpdate=ee,_.shared.pending=null}}while(!0);te===null&&(L=de),_.baseState=L,_.firstBaseUpdate=G,_.lastBaseUpdate=te,w===null&&(_.shared.lanes=0),cc|=$,a.lanes=$,a.memoizedState=de}}function nF(a,c){if(typeof a!="function")throw Error(i(191,a));a.call(c)}function sF(a,c){var p=a.callbacks;if(p!==null)for(a.callbacks=null,a=0;a<p.length;a++)nF(p[a],c)}function U0(a,c){try{var p=c.updateQueue,m=p!==null?p.lastEffect:null;if(m!==null){var _=m.next;p=_;do{if((p.tag&a)===a){m=void 0;var w=p.create,$=p.inst;m=w(),$.destroy=m}p=p.next}while(p!==_)}}catch(R){Vt(c,c.return,R)}}function oc(a,c,p){try{var m=c.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var w=_.next;m=w;do{if((m.tag&a)===a){var $=m.inst,R=$.destroy;if(R!==void 0){$.destroy=void 0,_=c;var L=p;try{R()}catch(G){Vt(_,L,G)}}}m=m.next}while(m!==w)}}catch(G){Vt(c,c.return,G)}}function oF(a){var c=a.updateQueue;if(c!==null){var p=a.stateNode;try{sF(c,p)}catch(m){Vt(a,a.return,m)}}}function aF(a,c,p){p.props=Eh(a.type,a.memoizedProps),p.state=a.memoizedState;try{p.componentWillUnmount()}catch(m){Vt(a,c,m)}}function Ah(a,c){try{var p=a.ref;if(p!==null){var m=a.stateNode;switch(a.tag){case 26:case 27:case 5:var _=m;break;default:_=m}typeof p=="function"?a.refCleanup=p(_):p.current=_}}catch(w){Vt(a,c,w)}}function Hn(a,c){var p=a.ref,m=a.refCleanup;if(p!==null)if(typeof m=="function")try{m()}catch(_){Vt(a,c,_)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(_){Vt(a,c,_)}else p.current=null}function lF(a){var c=a.type,p=a.memoizedProps,m=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&m.focus();break e;case"img":p.src?m.src=p.src:p.srcSet&&(m.srcset=p.srcSet)}}catch(_){Vt(a,a.return,_)}}function uF(a,c,p){try{var m=a.stateNode;pse(m,a.type,p,c),m[or]=c}catch(_){Vt(a,a.return,_)}}function cF(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27||a.tag===4}function kM(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||cF(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==27&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function DM(a,c,p){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?p.nodeType===8?p.parentNode.insertBefore(a,c):p.insertBefore(a,c):(p.nodeType===8?(c=p.parentNode,c.insertBefore(a,p)):(c=p,c.appendChild(a)),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=B1));else if(m!==4&&m!==27&&(a=a.child,a!==null))for(DM(a,c,p),a=a.sibling;a!==null;)DM(a,c,p),a=a.sibling}function C1(a,c,p){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?p.insertBefore(a,c):p.appendChild(a);else if(m!==4&&m!==27&&(a=a.child,a!==null))for(C1(a,c,p),a=a.sibling;a!==null;)C1(a,c,p),a=a.sibling}var xl=!1,br=!1,jM=!1,dF=typeof WeakSet=="function"?WeakSet:Set,di=null,hF=!1;function Gne(a,c){if(a=a.containerInfo,hO=X1,a=O4(a),UA(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var m=p.getSelection&&p.getSelection();if(m&&m.rangeCount!==0){p=m.anchorNode;var _=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{p.nodeType,w.nodeType}catch{p=null;break e}var $=0,R=-1,L=-1,G=0,te=0,de=a,J=null;t:for(;;){for(var ee;de!==p||_!==0&&de.nodeType!==3||(R=$+_),de!==w||m!==0&&de.nodeType!==3||(L=$+m),de.nodeType===3&&($+=de.nodeValue.length),(ee=de.firstChild)!==null;)J=de,de=ee;for(;;){if(de===a)break t;if(J===p&&++G===_&&(R=$),J===w&&++te===m&&(L=$),(ee=de.nextSibling)!==null)break;de=J,J=de.parentNode}de=ee}p=R===-1||L===-1?null:{start:R,end:L}}else p=null}p=p||{start:0,end:0}}else p=null;for(pO={focusedElem:a,selectionRange:p},X1=!1,di=c;di!==null;)if(c=di,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,di=a;else for(;di!==null;){switch(c=di,w=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,p=c,_=w.memoizedProps,w=w.memoizedState,m=p.stateNode;try{var ke=Eh(p.type,_,p.elementType===p.type);a=m.getSnapshotBeforeUpdate(ke,w),m.__reactInternalSnapshotBeforeUpdate=a}catch(tt){Vt(p,p.return,tt)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,p=a.nodeType,p===9)gO(a);else if(p===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":gO(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=c.sibling,a!==null){a.return=c.return,di=a;break}di=c.return}return ke=hF,hF=!1,ke}function pF(a,c,p){var m=p.flags;switch(p.tag){case 0:case 11:case 15:Ml(a,p),m&4&&U0(5,p);break;case 1:if(Ml(a,p),m&4)if(a=p.stateNode,c===null)try{a.componentDidMount()}catch(R){Vt(p,p.return,R)}else{var _=Eh(p.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(_,c,a.__reactInternalSnapshotBeforeUpdate)}catch(R){Vt(p,p.return,R)}}m&64&&oF(p),m&512&&Ah(p,p.return);break;case 3:if(Ml(a,p),m&64&&(m=p.updateQueue,m!==null)){if(a=null,p.child!==null)switch(p.child.tag){case 27:case 5:a=p.child.stateNode;break;case 1:a=p.child.stateNode}try{sF(m,a)}catch(R){Vt(p,p.return,R)}}break;case 26:Ml(a,p),m&512&&Ah(p,p.return);break;case 27:case 5:Ml(a,p),c===null&&m&4&&lF(p),m&512&&Ah(p,p.return);break;case 12:Ml(a,p);break;case 13:Ml(a,p),m&4&&mF(a,p);break;case 22:if(_=p.memoizedState!==null||xl,!_){c=c!==null&&c.memoizedState!==null||br;var w=xl,$=br;xl=_,(br=c)&&!$?ac(a,p,(p.subtreeFlags&8772)!==0):Ml(a,p),xl=w,br=$}m&512&&(p.memoizedProps.mode==="manual"?Ah(p,p.return):Hn(p,p.return));break;default:Ml(a,p)}}function fF(a){var c=a.alternate;c!==null&&(a.alternate=null,fF(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&h0(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Fr=null,Wn=!1;function Al(a,c,p){for(p=p.child;p!==null;)yF(a,c,p),p=p.sibling}function yF(a,c,p){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(lh,p)}catch{}switch(p.tag){case 26:br||Hn(p,c),Al(a,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:br||Hn(p,c);var m=Fr,_=Wn;for(Fr=p.stateNode,Al(a,c,p),p=p.stateNode,c=p.attributes;c.length;)p.removeAttributeNode(c[0]);h0(p),Fr=m,Wn=_;break;case 5:br||Hn(p,c);case 6:_=Fr;var w=Wn;if(Fr=null,Al(a,c,p),Fr=_,Wn=w,Fr!==null)if(Wn)try{a=Fr,m=p.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)}catch($){Vt(p,c,$)}else try{Fr.removeChild(p.stateNode)}catch($){Vt(p,c,$)}break;case 18:Fr!==null&&(Wn?(c=Fr,p=p.stateNode,c.nodeType===8?mO(c.parentNode,p):c.nodeType===1&&mO(c,p),nv(c)):mO(Fr,p.stateNode));break;case 4:m=Fr,_=Wn,Fr=p.stateNode.containerInfo,Wn=!0,Al(a,c,p),Fr=m,Wn=_;break;case 0:case 11:case 14:case 15:br||oc(2,p,c),br||oc(4,p,c),Al(a,c,p);break;case 1:br||(Hn(p,c),m=p.stateNode,typeof m.componentWillUnmount=="function"&&aF(p,c,m)),Al(a,c,p);break;case 21:Al(a,c,p);break;case 22:br||Hn(p,c),br=(m=br)||p.memoizedState!==null,Al(a,c,p),br=m;break;default:Al(a,c,p)}}function mF(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{nv(a)}catch(p){Vt(c,c.return,p)}}function Bne(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new dF),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new dF),c;default:throw Error(i(435,a.tag))}}function FM(a,c){var p=Bne(a);c.forEach(function(m){var _=ise.bind(null,a,m);p.has(m)||(p.add(m),m.then(_,_))})}function xs(a,c){var p=c.deletions;if(p!==null)for(var m=0;m<p.length;m++){var _=p[m],w=a,$=c,R=$;e:for(;R!==null;){switch(R.tag){case 27:case 5:Fr=R.stateNode,Wn=!1;break e;case 3:Fr=R.stateNode.containerInfo,Wn=!0;break e;case 4:Fr=R.stateNode.containerInfo,Wn=!0;break e}R=R.return}if(Fr===null)throw Error(i(160));yF(w,$,_),Fr=null,Wn=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)gF(c,a),c=c.sibling}var bo=null;function gF(a,c){var p=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:xs(c,a),As(a),m&4&&(oc(3,a,a.return),U0(3,a),oc(5,a,a.return));break;case 1:xs(c,a),As(a),m&512&&(br||p===null||Hn(p,p.return)),m&64&&xl&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(p=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=p===null?m:p.concat(m))));break;case 26:var _=bo;if(xs(c,a),As(a),m&512&&(br||p===null||Hn(p,p.return)),m&4){var w=p!==null?p.memoizedState:null;if(m=a.memoizedState,p===null)if(m===null)if(a.stateNode===null){e:{m=a.type,p=a.memoizedProps,_=_.ownerDocument||_;t:switch(m){case"title":w=_.getElementsByTagName("title")[0],(!w||w[hh]||w[ui]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(m),_.head.insertBefore(w,_.querySelector("head > title"))),xi(w,m,p),w[ui]=a,kr(w),m=w;break e;case"link":var $=l6("link","href",_).get(m+(p.href||""));if($){for(var R=0;R<$.length;R++)if(w=$[R],w.getAttribute("href")===(p.href==null?null:p.href)&&w.getAttribute("rel")===(p.rel==null?null:p.rel)&&w.getAttribute("title")===(p.title==null?null:p.title)&&w.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){$.splice(R,1);break t}}w=_.createElement(m),xi(w,m,p),_.head.appendChild(w);break;case"meta":if($=l6("meta","content",_).get(m+(p.content||""))){for(R=0;R<$.length;R++)if(w=$[R],w.getAttribute("content")===(p.content==null?null:""+p.content)&&w.getAttribute("name")===(p.name==null?null:p.name)&&w.getAttribute("property")===(p.property==null?null:p.property)&&w.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&w.getAttribute("charset")===(p.charSet==null?null:p.charSet)){$.splice(R,1);break t}}w=_.createElement(m),xi(w,m,p),_.head.appendChild(w);break;default:throw Error(i(468,m))}w[ui]=a,kr(w),m=w}a.stateNode=m}else u6(_,a.type,a.stateNode);else a.stateNode=a6(_,m,a.memoizedProps);else w!==m?(w===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):w.count--,m===null?u6(_,a.type,a.stateNode):a6(_,m,a.memoizedProps)):m===null&&a.stateNode!==null&&uF(a,a.memoizedProps,p.memoizedProps)}break;case 27:if(m&4&&a.alternate===null){_=a.stateNode,w=a.memoizedProps;try{for(var L=_.firstChild;L;){var G=L.nextSibling,te=L.nodeName;L[hh]||te==="HEAD"||te==="BODY"||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&L.rel.toLowerCase()==="stylesheet"||_.removeChild(L),L=G}for(var de=a.type,J=_.attributes;J.length;)_.removeAttributeNode(J[0]);xi(_,de,w),_[ui]=a,_[or]=w}catch(ke){Vt(a,a.return,ke)}}case 5:if(xs(c,a),As(a),m&512&&(br||p===null||Hn(p,p.return)),a.flags&32){_=a.stateNode;try{jf(_,"")}catch(ke){Vt(a,a.return,ke)}}m&4&&a.stateNode!=null&&(_=a.memoizedProps,uF(a,_,p!==null?p.memoizedProps:_)),m&1024&&(jM=!0);break;case 6:if(xs(c,a),As(a),m&4){if(a.stateNode===null)throw Error(i(162));m=a.memoizedProps,p=a.stateNode;try{p.nodeValue=m}catch(ke){Vt(a,a.return,ke)}}break;case 3:if(Z1=null,_=bo,bo=H1(c.containerInfo),xs(c,a),bo=_,As(a),m&4&&p!==null&&p.memoizedState.isDehydrated)try{nv(c.containerInfo)}catch(ke){Vt(a,a.return,ke)}jM&&(jM=!1,vF(a));break;case 4:m=bo,bo=H1(a.stateNode.containerInfo),xs(c,a),As(a),bo=m;break;case 12:xs(c,a),As(a);break;case 13:xs(c,a),As(a),a.child.flags&8192&&a.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ZM=en()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,FM(a,m)));break;case 22:if(m&512&&(br||p===null||Hn(p,p.return)),L=a.memoizedState!==null,G=p!==null&&p.memoizedState!==null,te=xl,de=br,xl=te||L,br=de||G,xs(c,a),br=de,xl=te,As(a),c=a.stateNode,c._current=a,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,m&8192&&(c._visibility=L?c._visibility&-2:c._visibility|1,L&&(c=xl||br,p===null||G||c||ty(a)),a.memoizedProps===null||a.memoizedProps.mode!=="manual"))e:for(p=null,c=a;;){if(c.tag===5||c.tag===26||c.tag===27){if(p===null){G=p=c;try{if(_=G.stateNode,L)w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{$=G.stateNode,R=G.memoizedProps.style;var ee=R!=null&&R.hasOwnProperty("display")?R.display:null;$.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(ke){Vt(G,G.return,ke)}}}else if(c.tag===6){if(p===null){G=c;try{G.stateNode.nodeValue=L?"":G.memoizedProps}catch(ke){Vt(G,G.return,ke)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=a.updateQueue,m!==null&&(p=m.retryQueue,p!==null&&(m.retryQueue=null,FM(a,p))));break;case 19:xs(c,a),As(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,FM(a,m)));break;case 21:break;default:xs(c,a),As(a)}}function As(a){var c=a.flags;if(c&2){try{if(a.tag!==27){e:{for(var p=a.return;p!==null;){if(cF(p)){var m=p;break e}p=p.return}throw Error(i(160))}switch(m.tag){case 27:var _=m.stateNode,w=kM(a);C1(a,w,_);break;case 5:var $=m.stateNode;m.flags&32&&(jf($,""),m.flags&=-33);var R=kM(a);C1(a,R,$);break;case 3:case 4:var L=m.stateNode.containerInfo,G=kM(a);DM(a,G,L);break;default:throw Error(i(161))}}}catch(te){Vt(a,a.return,te)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function vF(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;vF(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Ml(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)pF(a,c.alternate,c),c=c.sibling}function ty(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:oc(4,c,c.return),ty(c);break;case 1:Hn(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&aF(c,c.return,p),ty(c);break;case 26:case 27:case 5:Hn(c,c.return),ty(c);break;case 22:Hn(c,c.return),c.memoizedState===null&&ty(c);break;default:ty(c)}a=a.sibling}}function ac(a,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,_=a,w=c,$=w.flags;switch(w.tag){case 0:case 11:case 15:ac(_,w,p),U0(4,w);break;case 1:if(ac(_,w,p),m=w,_=m.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(G){Vt(m,m.return,G)}if(m=w,_=m.updateQueue,_!==null){var R=m.stateNode;try{var L=_.shared.hiddenCallbacks;if(L!==null)for(_.shared.hiddenCallbacks=null,_=0;_<L.length;_++)nF(L[_],R)}catch(G){Vt(m,m.return,G)}}p&&$&64&&oF(w),Ah(w,w.return);break;case 26:case 27:case 5:ac(_,w,p),p&&m===null&&$&4&&lF(w),Ah(w,w.return);break;case 12:ac(_,w,p);break;case 13:ac(_,w,p),p&&$&4&&mF(_,w);break;case 22:w.memoizedState===null&&ac(_,w,p),Ah(w,w.return);break;default:ac(_,w,p)}c=c.sibling}}function UM(a,c){var p=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==p&&(a!=null&&a.refCount++,p!=null&&R0(p))}function VM(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&R0(a))}function lc(a,c,p,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)bF(a,c,p,m),c=c.sibling}function bF(a,c,p,m){var _=c.flags;switch(c.tag){case 0:case 11:case 15:lc(a,c,p,m),_&2048&&U0(9,c);break;case 3:lc(a,c,p,m),_&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&R0(a)));break;case 12:if(_&2048){lc(a,c,p,m),a=c.stateNode;try{var w=c.memoizedProps,$=w.id,R=w.onPostCommit;typeof R=="function"&&R($,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(L){Vt(c,c.return,L)}}else lc(a,c,p,m);break;case 23:break;case 22:w=c.stateNode,c.memoizedState!==null?w._visibility&4?lc(a,c,p,m):V0(a,c):w._visibility&4?lc(a,c,p,m):(w._visibility|=4,ry(a,c,p,m,(c.subtreeFlags&10256)!==0)),_&2048&&UM(c.alternate,c);break;case 24:lc(a,c,p,m),_&2048&&VM(c.alternate,c);break;default:lc(a,c,p,m)}}function ry(a,c,p,m,_){for(_=_&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var w=a,$=c,R=p,L=m,G=$.flags;switch($.tag){case 0:case 11:case 15:ry(w,$,R,L,_),U0(8,$);break;case 23:break;case 22:var te=$.stateNode;$.memoizedState!==null?te._visibility&4?ry(w,$,R,L,_):V0(w,$):(te._visibility|=4,ry(w,$,R,L,_)),_&&G&2048&&UM($.alternate,$);break;case 24:ry(w,$,R,L,_),_&&G&2048&&VM($.alternate,$);break;default:ry(w,$,R,L,_)}c=c.sibling}}function V0(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=a,m=c,_=m.flags;switch(m.tag){case 22:V0(p,m),_&2048&&UM(m.alternate,m);break;case 24:V0(p,m),_&2048&&VM(m.alternate,m);break;default:V0(p,m)}c=c.sibling}}var z0=8192;function iy(a){if(a.subtreeFlags&z0)for(a=a.child;a!==null;)_F(a),a=a.sibling}function _F(a){switch(a.tag){case 26:iy(a),a.flags&z0&&a.memoizedState!==null&&Ise(bo,a.memoizedState,a.memoizedProps);break;case 5:iy(a);break;case 3:case 4:var c=bo;bo=H1(a.stateNode.containerInfo),iy(a),bo=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=z0,z0=16777216,iy(a),z0=c):iy(a));break;default:iy(a)}}function wF(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function G0(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var m=c[p];di=m,TF(m,a)}wF(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)SF(a),a=a.sibling}function SF(a){switch(a.tag){case 0:case 11:case 15:G0(a),a.flags&2048&&oc(9,a,a.return);break;case 3:G0(a);break;case 12:G0(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&4&&(a.return===null||a.return.tag!==13)?(c._visibility&=-5,I1(a)):G0(a);break;default:G0(a)}}function I1(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var m=c[p];di=m,TF(m,a)}wF(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:oc(8,c,c.return),I1(c);break;case 22:p=c.stateNode,p._visibility&4&&(p._visibility&=-5,I1(c));break;default:I1(c)}a=a.sibling}}function TF(a,c){for(;di!==null;){var p=di;switch(p.tag){case 0:case 11:case 15:oc(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var m=p.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:R0(p.memoizedState.cache)}if(m=p.child,m!==null)m.return=p,di=m;else e:for(p=a;di!==null;){m=di;var _=m.sibling,w=m.return;if(fF(m),m===p){di=null;break e}if(_!==null){_.return=w,di=_;break e}di=w}}}function qne(a,c,p,m){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(a,c,p,m){return new qne(a,c,p,m)}function zM(a){return a=a.prototype,!(!a||!a.isReactComponent)}function uc(a,c){var p=a.alternate;return p===null?(p=Ms(a.tag,c,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=c,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&31457280,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,c=a.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p.refCleanup=a.refCleanup,p}function EF(a,c){a.flags&=31457282;var p=a.alternate;return p===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=p.childLanes,a.lanes=p.lanes,a.child=p.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=p.memoizedProps,a.memoizedState=p.memoizedState,a.updateQueue=p.updateQueue,a.type=p.type,c=p.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function N1(a,c,p,m,_,w){var $=0;if(m=a,typeof a=="function")zM(a)&&($=1);else if(typeof a=="string")$=Rse(a,p,Pr.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case d:return Mh(p.children,_,w,c);case f:$=8,_|=24;break;case g:return a=Ms(12,p,c,_|2),a.elementType=g,a.lanes=w,a;case E:return a=Ms(13,p,c,_),a.elementType=E,a.lanes=w,a;case x:return a=Ms(19,p,c,_),a.elementType=x,a.lanes=w,a;case I:return $F(p,_,w,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case v:case S:$=10;break e;case b:$=9;break e;case T:$=11;break e;case O:$=14;break e;case C:$=16,m=null;break e}$=29,p=Error(i(130,a===null?"null":typeof a,"")),m=null}return c=Ms($,p,c,_),c.elementType=a,c.type=m,c.lanes=w,c}function Mh(a,c,p,m){return a=Ms(7,a,m,c),a.lanes=p,a}function $F(a,c,p,m){a=Ms(22,a,m,c),a.elementType=I,a.lanes=p;var _={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var w=_._current;if(w===null)throw Error(i(456));if((_._pendingVisibility&2)===0){var $=Xu(w,2);$!==null&&(_._pendingVisibility|=2,on($,w,2))}},attach:function(){var w=_._current;if(w===null)throw Error(i(456));if((_._pendingVisibility&2)!==0){var $=Xu(w,2);$!==null&&(_._pendingVisibility&=-3,on($,w,2))}}};return a.stateNode=_,a}function GM(a,c,p){return a=Ms(6,a,null,c),a.lanes=p,a}function BM(a,c,p){return c=Ms(4,a.children!==null?a.children:[],a.key,c),c.lanes=p,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function Ol(a){a.flags|=4}function xF(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!c6(c)){if(c=$s.current,c!==null&&((gt&4194176)===gt?pa!==null:(gt&62914560)!==gt&&(gt&536870912)===0||c!==pa))throw A0=YA,G4;a.flags|=8192}}function P1(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?Xw():536870912,a.lanes|=c,sy|=c)}function B0(a,c){if(!Tt)switch(a.tailMode){case"hidden":c=a.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var m=null;p!==null;)p.alternate!==null&&(m=p),p=p.sibling;m===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function pr(a){var c=a.alternate!==null&&a.alternate.child===a.child,p=0,m=0;if(c)for(var _=a.child;_!==null;)p|=_.lanes|_.childLanes,m|=_.subtreeFlags&31457280,m|=_.flags&31457280,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)p|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=m,a.childLanes=p,c}function Hne(a,c,p){var m=c.pendingProps;switch(WA(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(c),null;case 1:return pr(c),null;case 3:return p=c.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),$l(Jr),fo(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(T0(c)?Ol(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,vo!==null&&(KM(vo),vo=null))),pr(c),null;case 26:return p=c.memoizedState,a===null?(Ol(c),p!==null?(pr(c),xF(c,p)):(pr(c),c.flags&=-16777217)):p?p!==a.memoizedState?(Ol(c),pr(c),xF(c,p)):(pr(c),c.flags&=-16777217):(a.memoizedProps!==m&&Ol(c),pr(c),c.flags&=-16777217),null;case 27:pl(c),p=Gn.current;var _=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==m&&Ol(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return pr(c),null}a=Pr.current,T0(c)?V4(c):(a=r6(_,m,p),c.stateNode=a,Ol(c))}return pr(c),null;case 5:if(pl(c),p=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==m&&Ol(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return pr(c),null}if(a=Pr.current,T0(c))V4(c);else{switch(_=q1(Gn.current),a){case 1:a=_.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:a=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":a=_.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":a=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":a=_.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?_.createElement("select",{is:m.is}):_.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?_.createElement(p,{is:m.is}):_.createElement(p)}}a[ui]=c,a[or]=m;e:for(_=c.child;_!==null;){if(_.tag===5||_.tag===6)a.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===c)break e;for(;_.sibling===null;){if(_.return===null||_.return===c)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}c.stateNode=a;e:switch(xi(a,p,m),p){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ol(c)}}return pr(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==m&&Ol(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(a=Gn.current,T0(c)){if(a=c.stateNode,p=c.memoizedProps,m=null,_=sn,_!==null)switch(_.tag){case 27:case 5:m=_.memoizedProps}a[ui]=c,a=!!(a.nodeValue===p||m!==null&&m.suppressHydrationWarning===!0||JF(a.nodeValue,p)),a||vh(c)}else a=q1(a).createTextNode(m),a[ui]=c,c.stateNode=a}return pr(c),null;case 13:if(m=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(_=T0(c),m!==null&&m.dehydrated!==null){if(a===null){if(!_)throw Error(i(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[ui]=c}else E0(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;pr(c),_=!1}else vo!==null&&(KM(vo),vo=null),_=!0;if(!_)return c.flags&256?(wl(c),c):(wl(c),null)}if(wl(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=m!==null,a=a!==null&&a.memoizedState!==null,p){m=c.child,_=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(_=m.alternate.memoizedState.cachePool.pool);var w=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==_&&(m.flags|=2048)}return p!==a&&p&&(c.child.flags|=8192),P1(c,c.updateQueue),pr(c),null;case 4:return fo(),a===null&&uO(c.stateNode.containerInfo),pr(c),null;case 10:return $l(c.type),pr(c),null;case 19:if(bt(Yr),_=c.memoizedState,_===null)return pr(c),null;if(m=(c.flags&128)!==0,w=_.rendering,w===null)if(m)B0(_,!1);else{if(_r!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(w=g1(a),w!==null){for(c.flags|=128,B0(_,!1),a=w.updateQueue,c.updateQueue=a,P1(c,a),c.subtreeFlags=0,a=p,p=c.child;p!==null;)EF(p,a),p=p.sibling;return _t(Yr,Yr.current&1|2),c.child}a=a.sibling}_.tail!==null&&en()>L1&&(c.flags|=128,m=!0,B0(_,!1),c.lanes=4194304)}else{if(!m)if(a=g1(w),a!==null){if(c.flags|=128,m=!0,a=a.updateQueue,c.updateQueue=a,P1(c,a),B0(_,!0),_.tail===null&&_.tailMode==="hidden"&&!w.alternate&&!Tt)return pr(c),null}else 2*en()-_.renderingStartTime>L1&&p!==536870912&&(c.flags|=128,m=!0,B0(_,!1),c.lanes=4194304);_.isBackwards?(w.sibling=c.child,c.child=w):(a=_.last,a!==null?a.sibling=w:c.child=w,_.last=w)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=en(),c.sibling=null,a=Yr.current,_t(Yr,m?a&1|2:a&1),c):(pr(c),null);case 22:case 23:return wl(c),XA(),m=c.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(p&536870912)!==0&&(c.flags&128)===0&&(pr(c),c.subtreeFlags&6&&(c.flags|=8192)):pr(c),p=c.updateQueue,p!==null&&P1(c,p.retryQueue),p=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==p&&(c.flags|=2048),a!==null&&bt(_h),null;case 24:return p=null,a!==null&&(p=a.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),$l(Jr),pr(c),null;case 25:return null}throw Error(i(156,c.tag))}function Wne(a,c){switch(WA(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return $l(Jr),fo(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return pl(c),null;case 13:if(wl(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(i(340));E0()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return bt(Yr),null;case 4:return fo(),null;case 10:return $l(c.type),null;case 22:case 23:return wl(c),XA(),a!==null&&bt(_h),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return $l(Jr),null;case 25:return null;default:return null}}function AF(a,c){switch(WA(c),c.tag){case 3:$l(Jr),fo();break;case 26:case 27:case 5:pl(c);break;case 4:fo();break;case 13:wl(c);break;case 19:bt(Yr);break;case 10:$l(c.type);break;case 22:case 23:wl(c),XA(),a!==null&&bt(_h);break;case 24:$l(Jr)}}var Zne={getCacheForType:function(a){var c=Li(Jr),p=c.data.get(a);return p===void 0&&(p=a(),c.data.set(a,p)),p}},Yne=typeof WeakMap=="function"?WeakMap:Map,fr=0,Gt=null,ht=null,gt=0,Bt=0,Zn=null,Rl=!1,ny=!1,qM=!1,Cl=0,_r=0,cc=0,Oh=0,HM=0,Os=0,sy=0,q0=null,ya=null,WM=!1,ZM=0,L1=1/0,k1=null,dc=null,D1=!1,Rh=null,H0=0,YM=0,JM=null,W0=0,XM=null;function Yn(){if((fr&2)!==0&&gt!==0)return gt&-gt;if(K.T!==null){var a=Jf;return a!==0?a:sO()}return dh()}function MF(){Os===0&&(Os=(gt&536870912)===0||Tt?Jw():536870912);var a=$s.current;return a!==null&&(a.flags|=32),Os}function on(a,c,p){(a===Gt&&Bt===2||a.cancelPendingCommit!==null)&&(oy(a,0),Il(a,gt,Os,!1)),Ct(a,p),((fr&2)===0||a!==Gt)&&(a===Gt&&((fr&2)===0&&(Oh|=p),_r===4&&Il(a,gt,Os,!1)),ma(a))}function OF(a,c,p){if((fr&6)!==0)throw Error(i(327));var m=!p&&(c&60)===0&&(c&a.expiredLanes)===0||uh(a,c),_=m?Kne(a,c):tO(a,c,!0),w=m;do{if(_===0){ny&&!m&&Il(a,c,0,!1);break}else if(_===6)Il(a,c,0,!Rl);else{if(p=a.current.alternate,w&&!Jne(p)){_=tO(a,c,!1),w=!1;continue}if(_===2){if(w=c,a.errorRecoveryDisabledLanes&w)var $=0;else $=a.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var R=a;_=q0;var L=R.current.memoizedState.isDehydrated;if(L&&(oy(R,$).flags|=256),$=tO(R,$,!1),$!==2){if(qM&&!L){R.errorRecoveryDisabledLanes|=w,Oh|=w,_=4;break e}w=ya,ya=_,w!==null&&KM(w)}_=$}if(w=!1,_!==2)continue}}if(_===1){oy(a,0),Il(a,c,0,!0);break}e:{switch(m=a,_){case 0:case 1:throw Error(i(345));case 4:if((c&4194176)===c){Il(m,c,Os,!Rl);break e}break;case 2:ya=null;break;case 3:case 5:break;default:throw Error(i(329))}if(m.finishedWork=p,m.finishedLanes=c,(c&62914560)===c&&(w=ZM+300-en(),10<w)){if(Il(m,c,Os,!Rl),Lf(m,0)!==0)break e;m.timeoutHandle=QF(RF.bind(null,m,p,ya,k1,WM,c,Os,Oh,sy,Rl,2,-0,0),w);break e}RF(m,p,ya,k1,WM,c,Os,Oh,sy,Rl,0,-0,0)}}break}while(!0);ma(a)}function KM(a){ya===null?ya=a:ya.push.apply(ya,a)}function RF(a,c,p,m,_,w,$,R,L,G,te,de,J){var ee=c.subtreeFlags;if((ee&8192||(ee&16785408)===16785408)&&(Q0={stylesheets:null,count:0,unsuspend:Cse},_F(c),c=Nse(),c!==null)){a.cancelPendingCommit=c(DF.bind(null,a,p,m,_,$,R,L,1,de,J)),Il(a,w,$,!G);return}DF(a,p,m,_,$,R,L,te,de,J)}function Jne(a){for(var c=a;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var m=0;m<p.length;m++){var _=p[m],w=_.getSnapshot;_=_.value;try{if(!qn(w(),_))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Il(a,c,p,m){c&=~HM,c&=~Oh,a.suspendedLanes|=c,a.pingedLanes&=~c,m&&(a.warmLanes|=c),m=a.expirationTimes;for(var _=c;0<_;){var w=31-rn(_),$=1<<w;m[w]=-1,_&=~$}p!==0&&bn(a,p,c)}function j1(){return(fr&6)===0?(Z0(0),!1):!0}function QM(){if(ht!==null){if(Bt===0)var a=ht.return;else a=ht,El=$h=null,sM(a),Zf=null,M0=0,a=ht;for(;a!==null;)AF(a.alternate,a),a=a.return;ht=null}}function oy(a,c){a.finishedWork=null,a.finishedLanes=0;var p=a.timeoutHandle;p!==-1&&(a.timeoutHandle=-1,yse(p)),p=a.cancelPendingCommit,p!==null&&(a.cancelPendingCommit=null,p()),QM(),Gt=a,ht=p=uc(a.current,null),gt=c,Bt=0,Zn=null,Rl=!1,ny=uh(a,c),qM=!1,sy=Os=HM=Oh=cc=_r=0,ya=q0=null,WM=!1,(c&8)!==0&&(c|=c&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=c;0<m;){var _=31-rn(m),w=1<<_;c|=a[_],m&=~w}return Cl=c,l1(),p}function CF(a,c){ut=null,K.H=fa,c===x0?(c=H4(),Bt=3):c===G4?(c=H4(),Bt=4):Bt=c===Bj?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Zn=c,ht===null&&(_r=1,M1(a,Ss(c,a.current)))}function IF(){var a=K.H;return K.H=fa,a===null?fa:a}function NF(){var a=K.A;return K.A=Zne,a}function eO(){_r=4,Rl||(gt&4194176)!==gt&&$s.current!==null||(ny=!0),(cc&134217727)===0&&(Oh&134217727)===0||Gt===null||Il(Gt,gt,Os,!1)}function tO(a,c,p){var m=fr;fr|=2;var _=IF(),w=NF();(Gt!==a||gt!==c)&&(k1=null,oy(a,c)),c=!1;var $=_r;e:do try{if(Bt!==0&&ht!==null){var R=ht,L=Zn;switch(Bt){case 8:QM(),$=6;break e;case 3:case 2:case 6:$s.current===null&&(c=!0);var G=Bt;if(Bt=0,Zn=null,ay(a,R,L,G),p&&ny){$=0;break e}break;default:G=Bt,Bt=0,Zn=null,ay(a,R,L,G)}}Xne(),$=_r;break}catch(te){CF(a,te)}while(!0);return c&&a.shellSuspendCounter++,El=$h=null,fr=m,K.H=_,K.A=w,ht===null&&(Gt=null,gt=0,l1()),$}function Xne(){for(;ht!==null;)PF(ht)}function Kne(a,c){var p=fr;fr|=2;var m=IF(),_=NF();Gt!==a||gt!==c?(k1=null,L1=en()+500,oy(a,c)):ny=uh(a,c);e:do try{if(Bt!==0&&ht!==null){c=ht;var w=Zn;t:switch(Bt){case 1:Bt=0,Zn=null,ay(a,c,w,1);break;case 2:if(B4(w)){Bt=0,Zn=null,LF(c);break}c=function(){Bt===2&&Gt===a&&(Bt=7),ma(a)},w.then(c,c);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:B4(w)?(Bt=0,Zn=null,LF(c)):(Bt=0,Zn=null,ay(a,c,w,7));break;case 5:var $=null;switch(ht.tag){case 26:$=ht.memoizedState;case 5:case 27:var R=ht;if(!$||c6($)){Bt=0,Zn=null;var L=R.sibling;if(L!==null)ht=L;else{var G=R.return;G!==null?(ht=G,F1(G)):ht=null}break t}}Bt=0,Zn=null,ay(a,c,w,5);break;case 6:Bt=0,Zn=null,ay(a,c,w,6);break;case 8:QM(),_r=6;break e;default:throw Error(i(462))}}Qne();break}catch(te){CF(a,te)}while(!0);return El=$h=null,K.H=m,K.A=_,fr=p,ht!==null?0:(Gt=null,gt=0,l1(),_r)}function Qne(){for(;ht!==null&&!sh();)PF(ht)}function PF(a){var c=rF(a.alternate,a,Cl);a.memoizedProps=a.pendingProps,c===null?F1(a):ht=c}function LF(a){var c=a,p=c.alternate;switch(c.tag){case 15:case 0:c=Jj(p,c,c.pendingProps,c.type,void 0,gt);break;case 11:c=Jj(p,c,c.pendingProps,c.type.render,c.ref,gt);break;case 5:sM(c);default:AF(p,c),c=ht=EF(c,Cl),c=rF(p,c,Cl)}a.memoizedProps=a.pendingProps,c===null?F1(a):ht=c}function ay(a,c,p,m){El=$h=null,sM(c),Zf=null,M0=0;var _=c.return;try{if(Vne(a,_,c,p,gt)){_r=1,M1(a,Ss(p,a.current)),ht=null;return}}catch(w){if(_!==null)throw ht=_,w;_r=1,M1(a,Ss(p,a.current)),ht=null;return}c.flags&32768?(Tt||m===1?a=!0:ny||(gt&536870912)!==0?a=!1:(Rl=a=!0,(m===2||m===3||m===6)&&(m=$s.current,m!==null&&m.tag===13&&(m.flags|=16384))),kF(c,a)):F1(c)}function F1(a){var c=a;do{if((c.flags&32768)!==0){kF(c,Rl);return}a=c.return;var p=Hne(c.alternate,c,Cl);if(p!==null){ht=p;return}if(c=c.sibling,c!==null){ht=c;return}ht=c=a}while(c!==null);_r===0&&(_r=5)}function kF(a,c){do{var p=Wne(a.alternate,a);if(p!==null){p.flags&=32767,ht=p;return}if(p=a.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(a=a.sibling,a!==null)){ht=a;return}ht=a=p}while(a!==null);_r=6,ht=null}function DF(a,c,p,m,_,w,$,R,L,G){var te=K.T,de=we.p;try{we.p=2,K.T=null,ese(a,c,p,m,de,_,w,$,R,L,G)}finally{K.T=te,we.p=de}}function ese(a,c,p,m,_,w,$,R){do ly();while(Rh!==null);if((fr&6)!==0)throw Error(i(327));var L=a.finishedWork;if(m=a.finishedLanes,L===null)return null;if(a.finishedWork=null,a.finishedLanes=0,L===a.current)throw Error(i(177));a.callbackNode=null,a.callbackPriority=0,a.cancelPendingCommit=null;var G=L.lanes|L.childLanes;if(G|=BA,Wu(a,m,G,w,$,R),a===Gt&&(ht=Gt=null,gt=0),(L.subtreeFlags&10256)===0&&(L.flags&10256)===0||D1||(D1=!0,YM=G,JM=p,nse(If,function(){return ly(),null})),p=(L.flags&15990)!==0,(L.subtreeFlags&15990)!==0||p?(p=K.T,K.T=null,w=we.p,we.p=2,$=fr,fr|=4,Gne(a,L),gF(L,a),Ene(pO,a.containerInfo),X1=!!hO,pO=hO=null,a.current=L,pF(a,L.alternate,L),Bn(),fr=$,we.p=w,K.T=p):a.current=L,D1?(D1=!1,Rh=a,H0=m):jF(a,G),G=a.pendingLanes,G===0&&(dc=null),gA(L.stateNode),ma(a),c!==null)for(_=a.onRecoverableError,L=0;L<c.length;L++)G=c[L],_(G.value,{componentStack:G.stack});return(H0&3)!==0&&ly(),G=a.pendingLanes,(m&4194218)!==0&&(G&42)!==0?a===XM?W0++:(W0=0,XM=a):W0=0,Z0(0),null}function jF(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,R0(c)))}function ly(){if(Rh!==null){var a=Rh,c=YM;YM=0;var p=Re(H0),m=K.T,_=we.p;try{if(we.p=32>p?32:p,K.T=null,Rh===null)var w=!1;else{p=JM,JM=null;var $=Rh,R=H0;if(Rh=null,H0=0,(fr&6)!==0)throw Error(i(331));var L=fr;if(fr|=4,SF($.current),bF($,$.current,R,p),fr=L,Z0(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(lh,$)}catch{}w=!0}return w}finally{we.p=_,K.T=m,jF(a,c)}}return!1}function FF(a,c,p){c=Ss(p,c),c=bM(a.stateNode,c,2),a=sc(a,c,2),a!==null&&(Ct(a,2),ma(a))}function Vt(a,c,p){if(a.tag===3)FF(a,a,p);else for(;c!==null;){if(c.tag===3){FF(c,a,p);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(dc===null||!dc.has(m))){a=Ss(p,a),p=zj(2),m=sc(c,p,2),m!==null&&(Gj(p,m,c,a),Ct(m,2),ma(m));break}}c=c.return}}function rO(a,c,p){var m=a.pingCache;if(m===null){m=a.pingCache=new Yne;var _=new Set;m.set(c,_)}else _=m.get(c),_===void 0&&(_=new Set,m.set(c,_));_.has(p)||(qM=!0,_.add(p),a=tse.bind(null,a,c,p),c.then(a,a))}function tse(a,c,p){var m=a.pingCache;m!==null&&m.delete(c),a.pingedLanes|=a.suspendedLanes&p,a.warmLanes&=~p,Gt===a&&(gt&p)===p&&(_r===4||_r===3&&(gt&62914560)===gt&&300>en()-ZM?(fr&2)===0&&oy(a,0):HM|=p,sy===gt&&(sy=0)),ma(a)}function UF(a,c){c===0&&(c=Xw()),a=Xu(a,c),a!==null&&(Ct(a,c),ma(a))}function rse(a){var c=a.memoizedState,p=0;c!==null&&(p=c.retryLane),UF(a,p)}function ise(a,c){var p=0;switch(a.tag){case 13:var m=a.stateNode,_=a.memoizedState;_!==null&&(p=_.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),UF(a,p)}function nse(a,c){return Hu(a,c)}var U1=null,uy=null,iO=!1,V1=!1,nO=!1,Ch=0;function ma(a){a!==uy&&a.next===null&&(uy===null?U1=uy=a:uy=uy.next=a),V1=!0,iO||(iO=!0,ose(sse))}function Z0(a,c){if(!nO&&V1){nO=!0;do for(var p=!1,m=U1;m!==null;){if(a!==0){var _=m.pendingLanes;if(_===0)var w=0;else{var $=m.suspendedLanes,R=m.pingedLanes;w=(1<<31-rn(42|a)+1)-1,w&=_&~($&~R),w=w&201326677?w&201326677|1:w?w|2:0}w!==0&&(p=!0,GF(m,w))}else w=gt,w=Lf(m,m===Gt?w:0),(w&3)===0||uh(m,w)||(p=!0,GF(m,w));m=m.next}while(p);nO=!1}}function sse(){V1=iO=!1;var a=0;Ch!==0&&(fse()&&(a=Ch),Ch=0);for(var c=en(),p=null,m=U1;m!==null;){var _=m.next,w=VF(m,c);w===0?(m.next=null,p===null?U1=_:p.next=_,_===null&&(uy=p)):(p=m,(a!==0||(w&3)!==0)&&(V1=!0)),m=_}Z0(a)}function VF(a,c){for(var p=a.suspendedLanes,m=a.pingedLanes,_=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var $=31-rn(w),R=1<<$,L=_[$];L===-1?((R&p)===0||(R&m)!==0)&&(_[$]=wA(R,c)):L<=c&&(a.expiredLanes|=R),w&=~R}if(c=Gt,p=gt,p=Lf(a,a===c?p:0),m=a.callbackNode,p===0||a===c&&Bt===2||a.cancelPendingCommit!==null)return m!==null&&m!==null&&fl(m),a.callbackNode=null,a.callbackPriority=0;if((p&3)===0||uh(a,p)){if(c=p&-p,c===a.callbackPriority)return c;switch(m!==null&&fl(m),Re(p)){case 2:case 8:p=ah;break;case 32:p=If;break;case 268435456:p=Yw;break;default:p=If}return m=zF.bind(null,a),p=Hu(p,m),a.callbackPriority=c,a.callbackNode=p,c}return m!==null&&m!==null&&fl(m),a.callbackPriority=2,a.callbackNode=null,2}function zF(a,c){var p=a.callbackNode;if(ly()&&a.callbackNode!==p)return null;var m=gt;return m=Lf(a,a===Gt?m:0),m===0?null:(OF(a,m,c),VF(a,en()),a.callbackNode!=null&&a.callbackNode===p?zF.bind(null,a):null)}function GF(a,c){if(ly())return null;OF(a,c,!0)}function ose(a){mse(function(){(fr&6)!==0?Hu(oh,a):a()})}function sO(){return Ch===0&&(Ch=Jw()),Ch}function BF(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:t1(""+a)}function qF(a,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,a.id&&p.setAttribute("form",a.id),c.parentNode.insertBefore(p,c),a=new FormData(a),p.parentNode.removeChild(p),a}function ase(a,c,p,m,_){if(c==="submit"&&p&&p.stateNode===_){var w=BF((_[or]||null).action),$=m.submitter;$&&(c=(c=$[or]||null)?BF(c.formAction):$.getAttribute("formAction"),c!==null&&(w=c,$=null));var R=new s1("action","action",null,m,_);a.push({event:R,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ch!==0){var L=$?qF(_,$):new FormData(_);fM(p,{pending:!0,data:L,method:_.method,action:w},null,L)}}else typeof w=="function"&&(R.preventDefault(),L=$?qF(_,$):new FormData(_),fM(p,{pending:!0,data:L,method:_.method,action:w},w,L))},currentTarget:_}]})}}for(var oO=0;oO<D4.length;oO++){var aO=D4[oO],lse=aO.toLowerCase(),use=aO[0].toUpperCase()+aO.slice(1);go(lse,"on"+use)}go(I4,"onAnimationEnd"),go(N4,"onAnimationIteration"),go(P4,"onAnimationStart"),go("dblclick","onDoubleClick"),go("focusin","onFocus"),go("focusout","onBlur"),go(xne,"onTransitionRun"),go(Ane,"onTransitionStart"),go(Mne,"onTransitionCancel"),go(L4,"onTransitionEnd"),Yu("onMouseEnter",["mouseout","mouseover"]),Yu("onMouseLeave",["mouseout","mouseover"]),Yu("onPointerEnter",["pointerout","pointerover"]),Yu("onPointerLeave",["pointerout","pointerover"]),vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vl("onBeforeInput",["compositionend","keypress","textInput","paste"]),vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Y0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cse=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Y0));function HF(a,c){c=(c&4)!==0;for(var p=0;p<a.length;p++){var m=a[p],_=m.event;m=m.listeners;e:{var w=void 0;if(c)for(var $=m.length-1;0<=$;$--){var R=m[$],L=R.instance,G=R.currentTarget;if(R=R.listener,L!==w&&_.isPropagationStopped())break e;w=R,_.currentTarget=G;try{w(_)}catch(te){A1(te)}_.currentTarget=null,w=L}else for($=0;$<m.length;$++){if(R=m[$],L=R.instance,G=R.currentTarget,R=R.listener,L!==w&&_.isPropagationStopped())break e;w=R,_.currentTarget=G;try{w(_)}catch(te){A1(te)}_.currentTarget=null,w=L}}}}function yt(a,c){var p=c[kf];p===void 0&&(p=c[kf]=new Set);var m=a+"__bubble";p.has(m)||(WF(c,a,2,!1),p.add(m))}function lO(a,c,p){var m=0;c&&(m|=4),WF(p,a,m,c)}var z1="_reactListening"+Math.random().toString(36).slice(2);function uO(a){if(!a[z1]){a[z1]=!0,p0.forEach(function(p){p!=="selectionchange"&&(cse.has(p)||lO(p,!1,a),lO(p,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[z1]||(c[z1]=!0,lO("selectionchange",!1,c))}}function WF(a,c,p,m){switch(m6(c)){case 2:var _=kse;break;case 8:_=Dse;break;default:_=SO}p=_.bind(null,c,p,a),_=void 0,!CA||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),m?_!==void 0?a.addEventListener(c,p,{capture:!0,passive:_}):a.addEventListener(c,p,!0):_!==void 0?a.addEventListener(c,p,{passive:_}):a.addEventListener(c,p,!1)}function cO(a,c,p,m,_){var w=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var $=m.tag;if($===3||$===4){var R=m.stateNode.containerInfo;if(R===_||R.nodeType===8&&R.parentNode===_)break;if($===4)for($=m.return;$!==null;){var L=$.tag;if((L===3||L===4)&&(L=$.stateNode.containerInfo,L===_||L.nodeType===8&&L.parentNode===_))return;$=$.return}for(;R!==null;){if($=yo(R),$===null)return;if(L=$.tag,L===5||L===6||L===26||L===27){m=w=$;continue e}R=R.parentNode}}m=m.return}l4(function(){var G=w,te=OA(p),de=[];e:{var J=k4.get(a);if(J!==void 0){var ee=s1,ke=a;switch(a){case"keypress":if(i1(p)===0)break e;case"keydown":case"keyup":ee=ine;break;case"focusin":ke="focus",ee=LA;break;case"focusout":ke="blur",ee=LA;break;case"beforeblur":case"afterblur":ee=LA;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=d4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=qie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=one;break;case I4:case N4:case P4:ee=Zie;break;case L4:ee=lne;break;case"scroll":case"scrollend":ee=Gie;break;case"wheel":ee=cne;break;case"copy":case"cut":case"paste":ee=Jie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=p4;break;case"toggle":case"beforetoggle":ee=hne}var tt=(c&4)!==0,wr=!tt&&(a==="scroll"||a==="scrollend"),q=tt?J!==null?J+"Capture":null:J;tt=[];for(var z=G,Y;z!==null;){var oe=z;if(Y=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Y===null||q===null||(oe=f0(z,q),oe!=null&&tt.push(J0(z,oe,Y))),wr)break;z=z.return}0<tt.length&&(J=new ee(J,ke,null,p,te),de.push({event:J,listeners:tt}))}}if((c&7)===0){e:{if(J=a==="mouseover"||a==="pointerover",ee=a==="mouseout"||a==="pointerout",J&&p!==MA&&(ke=p.relatedTarget||p.fromElement)&&(yo(ke)||ke[ml]))break e;if((ee||J)&&(J=te.window===te?te:(J=te.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(ke=p.relatedTarget||p.toElement,ee=G,ke=ke?yo(ke):null,ke!==null&&(wr=ye(ke),tt=ke.tag,ke!==wr||tt!==5&&tt!==27&&tt!==6)&&(ke=null)):(ee=null,ke=G),ee!==ke)){if(tt=d4,oe="onMouseLeave",q="onMouseEnter",z="mouse",(a==="pointerout"||a==="pointerover")&&(tt=p4,oe="onPointerLeave",q="onPointerEnter",z="pointer"),wr=ee==null?J:gl(ee),Y=ke==null?J:gl(ke),J=new tt(oe,z+"leave",ee,p,te),J.target=wr,J.relatedTarget=Y,oe=null,yo(te)===G&&(tt=new tt(q,z+"enter",ke,p,te),tt.target=Y,tt.relatedTarget=wr,oe=tt),wr=oe,ee&&ke)t:{for(tt=ee,q=ke,z=0,Y=tt;Y;Y=cy(Y))z++;for(Y=0,oe=q;oe;oe=cy(oe))Y++;for(;0<z-Y;)tt=cy(tt),z--;for(;0<Y-z;)q=cy(q),Y--;for(;z--;){if(tt===q||q!==null&&tt===q.alternate)break t;tt=cy(tt),q=cy(q)}tt=null}else tt=null;ee!==null&&ZF(de,J,ee,tt,!1),ke!==null&&wr!==null&&ZF(de,wr,ke,tt,!0)}}e:{if(J=G?gl(G):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Ce=w4;else if(b4(J))if(S4)Ce=Sne;else{Ce=_ne;var dt=bne}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?G&&AA(G.elementType)&&(Ce=w4):Ce=wne;if(Ce&&(Ce=Ce(a,G))){_4(de,Ce,p,te);break e}dt&&dt(a,J,G),a==="focusout"&&G&&J.type==="number"&&G.memoizedProps.value!=null&&xA(J,"number",J.value)}switch(dt=G?gl(G):window,a){case"focusin":(b4(dt)||dt.contentEditable==="true")&&(zf=dt,VA=G,S0=null);break;case"focusout":S0=VA=zf=null;break;case"mousedown":zA=!0;break;case"contextmenu":case"mouseup":case"dragend":zA=!1,R4(de,p,te);break;case"selectionchange":if($ne)break;case"keydown":case"keyup":R4(de,p,te)}var Ue;if(DA)e:{switch(a){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Vf?g4(a,p)&&(qe="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(qe="onCompositionStart");qe&&(f4&&p.locale!=="ko"&&(Vf||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Vf&&(Ue=u4()):(Ju=te,IA="value"in Ju?Ju.value:Ju.textContent,Vf=!0)),dt=G1(G,qe),0<dt.length&&(qe=new h4(qe,a,null,p,te),de.push({event:qe,listeners:dt}),Ue?qe.data=Ue:(Ue=v4(p),Ue!==null&&(qe.data=Ue)))),(Ue=fne?yne(a,p):mne(a,p))&&(qe=G1(G,"onBeforeInput"),0<qe.length&&(dt=new h4("onBeforeInput","beforeinput",null,p,te),de.push({event:dt,listeners:qe}),dt.data=Ue)),ase(de,a,G,p,te)}HF(de,c)})}function J0(a,c,p){return{instance:a,listener:c,currentTarget:p}}function G1(a,c){for(var p=c+"Capture",m=[];a!==null;){var _=a,w=_.stateNode;_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=f0(a,p),_!=null&&m.unshift(J0(a,_,w)),_=f0(a,c),_!=null&&m.push(J0(a,_,w))),a=a.return}return m}function cy(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function ZF(a,c,p,m,_){for(var w=c._reactName,$=[];p!==null&&p!==m;){var R=p,L=R.alternate,G=R.stateNode;if(R=R.tag,L!==null&&L===m)break;R!==5&&R!==26&&R!==27||G===null||(L=G,_?(G=f0(p,w),G!=null&&$.unshift(J0(p,G,L))):_||(G=f0(p,w),G!=null&&$.push(J0(p,G,L)))),p=p.return}$.length!==0&&a.push({event:c,listeners:$})}var dse=/\r\n?/g,hse=/\u0000|\uFFFD/g;function YF(a){return(typeof a=="string"?a:""+a).replace(dse,`
`).replace(hse,"")}function JF(a,c){return c=YF(c),YF(a)===c}function B1(){}function jt(a,c,p,m,_,w){switch(p){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||jf(a,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&jf(a,""+m);break;case"className":Q(a,"class",m);break;case"tabIndex":Q(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Q(a,p,m);break;case"style":o4(a,m,w);break;case"data":if(c!=="object"){Q(a,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||p!=="href")){a.removeAttribute(p);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(p);break}m=t1(""+m),a.setAttribute(p,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(p==="formAction"?(c!=="input"&&jt(a,c,"name",_.name,_,null),jt(a,c,"formEncType",_.formEncType,_,null),jt(a,c,"formMethod",_.formMethod,_,null),jt(a,c,"formTarget",_.formTarget,_,null)):(jt(a,c,"encType",_.encType,_,null),jt(a,c,"method",_.method,_,null),jt(a,c,"target",_.target,_,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(p);break}m=t1(""+m),a.setAttribute(p,m);break;case"onClick":m!=null&&(a.onclick=B1);break;case"onScroll":m!=null&&yt("scroll",a);break;case"onScrollEnd":m!=null&&yt("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(p=m.__html,p!=null){if(_.children!=null)throw Error(i(60));a.innerHTML=p}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}p=t1(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(p,""+m):a.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(p,""):a.removeAttribute(p);break;case"capture":case"download":m===!0?a.setAttribute(p,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(p,m):a.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(p,m):a.removeAttribute(p);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(p):a.setAttribute(p,m);break;case"popover":yt("beforetoggle",a),yt("toggle",a),N(a,"popover",m);break;case"xlinkActuate":ce(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ce(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ce(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ce(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ce(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ce(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ce(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ce(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ce(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":N(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Vie.get(p)||p,N(a,p,m))}}function dO(a,c,p,m,_,w){switch(p){case"style":o4(a,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(p=m.__html,p!=null){if(_.children!=null)throw Error(i(60));a.innerHTML=p}}break;case"children":typeof m=="string"?jf(a,m):(typeof m=="number"||typeof m=="bigint")&&jf(a,""+m);break;case"onScroll":m!=null&&yt("scroll",a);break;case"onScrollEnd":m!=null&&yt("scrollend",a);break;case"onClick":m!=null&&(a.onclick=B1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kw.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(_=p.endsWith("Capture"),c=p.slice(2,_?p.length-7:void 0),w=a[or]||null,w=w!=null?w[p]:null,typeof w=="function"&&a.removeEventListener(c,w,_),typeof m=="function")){typeof w!="function"&&w!==null&&(p in a?a[p]=null:a.hasAttribute(p)&&a.removeAttribute(p)),a.addEventListener(c,m,_);break e}p in a?a[p]=m:m===!0?a.setAttribute(p,""):N(a,p,m)}}}function xi(a,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",a),yt("load",a);var m=!1,_=!1,w;for(w in p)if(p.hasOwnProperty(w)){var $=p[w];if($!=null)switch(w){case"src":m=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:jt(a,c,w,$,p,null)}}_&&jt(a,c,"srcSet",p.srcSet,p,null),m&&jt(a,c,"src",p.src,p,null);return;case"input":yt("invalid",a);var R=w=$=_=null,L=null,G=null;for(m in p)if(p.hasOwnProperty(m)){var te=p[m];if(te!=null)switch(m){case"name":_=te;break;case"type":$=te;break;case"checked":L=te;break;case"defaultChecked":G=te;break;case"value":w=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,c));break;default:jt(a,c,m,te,p,null)}}r4(a,w,R,L,G,$,_,!1),lr(a);return;case"select":yt("invalid",a),m=$=w=null;for(_ in p)if(p.hasOwnProperty(_)&&(R=p[_],R!=null))switch(_){case"value":w=R;break;case"defaultValue":$=R;break;case"multiple":m=R;default:jt(a,c,_,R,p,null)}c=w,p=$,a.multiple=!!m,c!=null?Df(a,!!m,c,!1):p!=null&&Df(a,!!m,p,!0);return;case"textarea":yt("invalid",a),w=_=m=null;for($ in p)if(p.hasOwnProperty($)&&(R=p[$],R!=null))switch($){case"value":m=R;break;case"defaultValue":_=R;break;case"children":w=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:jt(a,c,$,R,p,null)}n4(a,m,_,w),lr(a);return;case"option":for(L in p)if(p.hasOwnProperty(L)&&(m=p[L],m!=null))switch(L){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:jt(a,c,L,m,p,null)}return;case"dialog":yt("cancel",a),yt("close",a);break;case"iframe":case"object":yt("load",a);break;case"video":case"audio":for(m=0;m<Y0.length;m++)yt(Y0[m],a);break;case"image":yt("error",a),yt("load",a);break;case"details":yt("toggle",a);break;case"embed":case"source":case"link":yt("error",a),yt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in p)if(p.hasOwnProperty(G)&&(m=p[G],m!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:jt(a,c,G,m,p,null)}return;default:if(AA(c)){for(te in p)p.hasOwnProperty(te)&&(m=p[te],m!==void 0&&dO(a,c,te,m,p,void 0));return}}for(R in p)p.hasOwnProperty(R)&&(m=p[R],m!=null&&jt(a,c,R,m,p,null))}function pse(a,c,p,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,$=null,R=null,L=null,G=null,te=null;for(ee in p){var de=p[ee];if(p.hasOwnProperty(ee)&&de!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=de;default:m.hasOwnProperty(ee)||jt(a,c,ee,null,m,de)}}for(var J in m){var ee=m[J];if(de=p[J],m.hasOwnProperty(J)&&(ee!=null||de!=null))switch(J){case"type":w=ee;break;case"name":_=ee;break;case"checked":G=ee;break;case"defaultChecked":te=ee;break;case"value":$=ee;break;case"defaultValue":R=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,c));break;default:ee!==de&&jt(a,c,J,ee,m,de)}}$A(a,$,R,L,G,te,w,_);return;case"select":ee=$=R=J=null;for(w in p)if(L=p[w],p.hasOwnProperty(w)&&L!=null)switch(w){case"value":break;case"multiple":ee=L;default:m.hasOwnProperty(w)||jt(a,c,w,null,m,L)}for(_ in m)if(w=m[_],L=p[_],m.hasOwnProperty(_)&&(w!=null||L!=null))switch(_){case"value":J=w;break;case"defaultValue":R=w;break;case"multiple":$=w;default:w!==L&&jt(a,c,_,w,m,L)}c=R,p=$,m=ee,J!=null?Df(a,!!p,J,!1):!!m!=!!p&&(c!=null?Df(a,!!p,c,!0):Df(a,!!p,p?[]:"",!1));return;case"textarea":ee=J=null;for(R in p)if(_=p[R],p.hasOwnProperty(R)&&_!=null&&!m.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:jt(a,c,R,null,m,_)}for($ in m)if(_=m[$],w=p[$],m.hasOwnProperty($)&&(_!=null||w!=null))switch($){case"value":J=_;break;case"defaultValue":ee=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==w&&jt(a,c,$,_,m,w)}i4(a,J,ee);return;case"option":for(var ke in p)if(J=p[ke],p.hasOwnProperty(ke)&&J!=null&&!m.hasOwnProperty(ke))switch(ke){case"selected":a.selected=!1;break;default:jt(a,c,ke,null,m,J)}for(L in m)if(J=m[L],ee=p[L],m.hasOwnProperty(L)&&J!==ee&&(J!=null||ee!=null))switch(L){case"selected":a.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:jt(a,c,L,J,m,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in p)J=p[tt],p.hasOwnProperty(tt)&&J!=null&&!m.hasOwnProperty(tt)&&jt(a,c,tt,null,m,J);for(G in m)if(J=m[G],ee=p[G],m.hasOwnProperty(G)&&J!==ee&&(J!=null||ee!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,c));break;default:jt(a,c,G,J,m,ee)}return;default:if(AA(c)){for(var wr in p)J=p[wr],p.hasOwnProperty(wr)&&J!==void 0&&!m.hasOwnProperty(wr)&&dO(a,c,wr,void 0,m,J);for(te in m)J=m[te],ee=p[te],!m.hasOwnProperty(te)||J===ee||J===void 0&&ee===void 0||dO(a,c,te,J,m,ee);return}}for(var q in p)J=p[q],p.hasOwnProperty(q)&&J!=null&&!m.hasOwnProperty(q)&&jt(a,c,q,null,m,J);for(de in m)J=m[de],ee=p[de],!m.hasOwnProperty(de)||J===ee||J==null&&ee==null||jt(a,c,de,J,m,ee)}var hO=null,pO=null;function q1(a){return a.nodeType===9?a:a.ownerDocument}function XF(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KF(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function fO(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var yO=null;function fse(){var a=window.event;return a&&a.type==="popstate"?a===yO?!1:(yO=a,!0):(yO=null,!1)}var QF=typeof setTimeout=="function"?setTimeout:void 0,yse=typeof clearTimeout=="function"?clearTimeout:void 0,e6=typeof Promise=="function"?Promise:void 0,mse=typeof queueMicrotask=="function"?queueMicrotask:typeof e6<"u"?function(a){return e6.resolve(null).then(a).catch(gse)}:QF;function gse(a){setTimeout(function(){throw a})}function mO(a,c){var p=c,m=0;do{var _=p.nextSibling;if(a.removeChild(p),_&&_.nodeType===8)if(p=_.data,p==="/$"){if(m===0){a.removeChild(_),nv(c);return}m--}else p!=="$"&&p!=="$?"&&p!=="$!"||m++;p=_}while(p);nv(c)}function gO(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":gO(p),h0(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}a.removeChild(p)}}function vse(a,c,p,m){for(;a.nodeType===1;){var _=p;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[hh])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==_.rel||a.getAttribute("href")!==(_.href==null?null:_.href)||a.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||a.getAttribute("title")!==(_.title==null?null:_.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(_.src==null?null:_.src)||a.getAttribute("type")!==(_.type==null?null:_.type)||a.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=_o(a.nextSibling),a===null)break}return null}function bse(a,c,p){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!p||(a=_o(a.nextSibling),a===null))return null;return a}function _o(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}function t6(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return a;c--}else p==="/$"&&c++}a=a.previousSibling}return null}function r6(a,c,p){switch(c=q1(p),a){case"html":if(a=c.documentElement,!a)throw Error(i(452));return a;case"head":if(a=c.head,!a)throw Error(i(453));return a;case"body":if(a=c.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}var Rs=new Map,i6=new Set;function H1(a){return typeof a.getRootNode=="function"?a.getRootNode():a.ownerDocument}var Nl=we.d;we.d={f:_se,r:wse,D:Sse,C:Tse,L:Ese,m:$se,X:Ase,S:xse,M:Mse};function _se(){var a=Nl.f(),c=j1();return a||c}function wse(a){var c=Zu(a);c!==null&&c.tag===5&&c.type==="form"?Rj(c):Nl.r(a)}var dy=typeof document>"u"?null:document;function n6(a,c,p){var m=dy;if(m&&typeof c=="string"&&c){var _=_s(c);_='link[rel="'+a+'"][href="'+_+'"]',typeof p=="string"&&(_+='[crossorigin="'+p+'"]'),i6.has(_)||(i6.add(_),a={rel:a,crossOrigin:p,href:c},m.querySelector(_)===null&&(c=m.createElement("link"),xi(c,"link",a),kr(c),m.head.appendChild(c)))}}function Sse(a){Nl.D(a),n6("dns-prefetch",a,null)}function Tse(a,c){Nl.C(a,c),n6("preconnect",a,c)}function Ese(a,c,p){Nl.L(a,c,p);var m=dy;if(m&&a&&c){var _='link[rel="preload"][as="'+_s(c)+'"]';c==="image"&&p&&p.imageSrcSet?(_+='[imagesrcset="'+_s(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(_+='[imagesizes="'+_s(p.imageSizes)+'"]')):_+='[href="'+_s(a)+'"]';var w=_;switch(c){case"style":w=hy(a);break;case"script":w=py(a)}Rs.has(w)||(a=ie({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:a,as:c},p),Rs.set(w,a),m.querySelector(_)!==null||c==="style"&&m.querySelector(X0(w))||c==="script"&&m.querySelector(K0(w))||(c=m.createElement("link"),xi(c,"link",a),kr(c),m.head.appendChild(c)))}}function $se(a,c){Nl.m(a,c);var p=dy;if(p&&a){var m=c&&typeof c.as=="string"?c.as:"script",_='link[rel="modulepreload"][as="'+_s(m)+'"][href="'+_s(a)+'"]',w=_;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=py(a)}if(!Rs.has(w)&&(a=ie({rel:"modulepreload",href:a},c),Rs.set(w,a),p.querySelector(_)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(K0(w)))return}m=p.createElement("link"),xi(m,"link",a),kr(m),p.head.appendChild(m)}}}function xse(a,c,p){Nl.S(a,c,p);var m=dy;if(m&&a){var _=Xt(m).hoistableStyles,w=hy(a);c=c||"default";var $=_.get(w);if(!$){var R={loading:0,preload:null};if($=m.querySelector(X0(w)))R.loading=5;else{a=ie({rel:"stylesheet",href:a,"data-precedence":c},p),(p=Rs.get(w))&&vO(a,p);var L=$=m.createElement("link");kr(L),xi(L,"link",a),L._p=new Promise(function(G,te){L.onload=G,L.onerror=te}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,W1($,c,m)}$={type:"stylesheet",instance:$,count:1,state:R},_.set(w,$)}}}function Ase(a,c){Nl.X(a,c);var p=dy;if(p&&a){var m=Xt(p).hoistableScripts,_=py(a),w=m.get(_);w||(w=p.querySelector(K0(_)),w||(a=ie({src:a,async:!0},c),(c=Rs.get(_))&&bO(a,c),w=p.createElement("script"),kr(w),xi(w,"link",a),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(_,w))}}function Mse(a,c){Nl.M(a,c);var p=dy;if(p&&a){var m=Xt(p).hoistableScripts,_=py(a),w=m.get(_);w||(w=p.querySelector(K0(_)),w||(a=ie({src:a,async:!0,type:"module"},c),(c=Rs.get(_))&&bO(a,c),w=p.createElement("script"),kr(w),xi(w,"link",a),p.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(_,w))}}function s6(a,c,p,m){var _=(_=Gn.current)?H1(_):null;if(!_)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=hy(p.href),p=Xt(_).hoistableStyles,m=p.get(c),m||(m={type:"style",instance:null,count:0,state:null},p.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){a=hy(p.href);var w=Xt(_).hoistableStyles,$=w.get(a);if($||(_=_.ownerDocument||_,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,$),(w=_.querySelector(X0(a)))&&!w._p&&($.instance=w,$.state.loading=5),Rs.has(a)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Rs.set(a,p),w||Ose(_,a,p,$.state))),c&&m===null)throw Error(i(528,""));return $}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=py(p),p=Xt(_).hoistableScripts,m=p.get(c),m||(m={type:"script",instance:null,count:0,state:null},p.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function hy(a){return'href="'+_s(a)+'"'}function X0(a){return'link[rel="stylesheet"]['+a+"]"}function o6(a){return ie({},a,{"data-precedence":a.precedence,precedence:null})}function Ose(a,c,p,m){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=a.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),xi(c,"link",p),kr(c),a.head.appendChild(c))}function py(a){return'[src="'+_s(a)+'"]'}function K0(a){return"script[async]"+a}function a6(a,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var m=a.querySelector('style[data-href~="'+_s(p.href)+'"]');if(m)return c.instance=m,kr(m),m;var _=ie({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),kr(m),xi(m,"style",_),W1(m,p.precedence,a),c.instance=m;case"stylesheet":_=hy(p.href);var w=a.querySelector(X0(_));if(w)return c.state.loading|=4,c.instance=w,kr(w),w;m=o6(p),(_=Rs.get(_))&&vO(m,_),w=(a.ownerDocument||a).createElement("link"),kr(w);var $=w;return $._p=new Promise(function(R,L){$.onload=R,$.onerror=L}),xi(w,"link",m),c.state.loading|=4,W1(w,p.precedence,a),c.instance=w;case"script":return w=py(p.src),(_=a.querySelector(K0(w)))?(c.instance=_,kr(_),_):(m=p,(_=Rs.get(w))&&(m=ie({},p),bO(m,_)),a=a.ownerDocument||a,_=a.createElement("script"),kr(_),xi(_,"link",m),a.head.appendChild(_),c.instance=_);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,W1(m,p.precedence,a));return c.instance}function W1(a,c,p){for(var m=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=m.length?m[m.length-1]:null,w=_,$=0;$<m.length;$++){var R=m[$];if(R.dataset.precedence===c)w=R;else if(w!==_)break}w?w.parentNode.insertBefore(a,w.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(a,c.firstChild))}function vO(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function bO(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Z1=null;function l6(a,c,p){if(Z1===null){var m=new Map,_=Z1=new Map;_.set(p,m)}else _=Z1,m=_.get(p),m||(m=new Map,_.set(p,m));if(m.has(a))return m;for(m.set(a,null),p=p.getElementsByTagName(a),_=0;_<p.length;_++){var w=p[_];if(!(w[hh]||w[ui]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var $=w.getAttribute(c)||"";$=a+$;var R=m.get($);R?R.push(w):m.set($,[w])}}return m}function u6(a,c,p){a=a.ownerDocument||a,a.head.insertBefore(p,c==="title"?a.querySelector("head > title"):null)}function Rse(a,c,p){if(p===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function c6(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Q0=null;function Cse(){}function Ise(a,c,p){if(Q0===null)throw Error(i(475));var m=Q0;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=hy(p.href),w=a.querySelector(X0(_));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Y1.bind(m),a.then(m,m)),c.state.loading|=4,c.instance=w,kr(w);return}w=a.ownerDocument||a,p=o6(p),(_=Rs.get(_))&&vO(p,_),w=w.createElement("link"),kr(w);var $=w;$._p=new Promise(function(R,L){$.onload=R,$.onerror=L}),xi(w,"link",p),c.instance=w}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Y1.bind(m),a.addEventListener("load",c),a.addEventListener("error",c))}}function Nse(){if(Q0===null)throw Error(i(475));var a=Q0;return a.stylesheets&&a.count===0&&_O(a,a.stylesheets),0<a.count?function(c){var p=setTimeout(function(){if(a.stylesheets&&_O(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(p)}}:null}function Y1(){if(this.count--,this.count===0){if(this.stylesheets)_O(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var J1=null;function _O(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,J1=new Map,c.forEach(Pse,a),J1=null,Y1.call(a))}function Pse(a,c){if(!(c.state.loading&4)){var p=J1.get(a);if(p)var m=p.get(null);else{p=new Map,J1.set(a,p);for(var _=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var $=_[w];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(p.set($.dataset.precedence,$),m=$)}m&&p.set(null,m)}_=c.instance,$=_.getAttribute("data-precedence"),w=p.get($)||m,w===m&&p.set(null,_),p.set($,_),this.count++,m=Y1.bind(this),_.addEventListener("load",m),_.addEventListener("error",m),w?w.parentNode.insertBefore(_,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(_,a.firstChild)),c.state.loading|=4}}var ev={$$typeof:S,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function Lse(a,c,p,m,_,w,$,R){this.tag=1,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=X(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=X(0),this.hiddenUpdates=X(null),this.identifierPrefix=m,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function d6(a,c,p,m,_,w,$,R,L,G,te,de){return a=new Lse(a,c,p,$,R,L,G,de),c=1,w===!0&&(c|=24),w=Ms(3,null,null,c),a.current=w,w.stateNode=a,c=KA(),c.refCount++,a.pooledCache=c,c.refCount++,w.memoizedState={element:m,isDehydrated:p,cache:c},IM(w),a}function h6(a){return a?(a=qf,a):qf}function p6(a,c,p,m,_,w){_=h6(_),m.context===null?m.context=_:m.pendingContext=_,m=nc(c),m.payload={element:p},w=w===void 0?null:w,w!==null&&(m.callback=w),p=sc(a,m,c),p!==null&&(on(p,a,c),D0(p,a,c))}function f6(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<c?p:c}}function wO(a,c){f6(a,c),(a=a.alternate)&&f6(a,c)}function y6(a){if(a.tag===13){var c=Xu(a,67108864);c!==null&&on(c,a,67108864),wO(a,67108864)}}var X1=!0;function kse(a,c,p,m){var _=K.T;K.T=null;var w=we.p;try{we.p=2,SO(a,c,p,m)}finally{we.p=w,K.T=_}}function Dse(a,c,p,m){var _=K.T;K.T=null;var w=we.p;try{we.p=8,SO(a,c,p,m)}finally{we.p=w,K.T=_}}function SO(a,c,p,m){if(X1){var _=TO(m);if(_===null)cO(a,c,m,K1,p),g6(a,m);else if(Fse(_,a,c,p,m))m.stopPropagation();else if(g6(a,m),c&4&&-1<jse.indexOf(a)){for(;_!==null;){var w=Zu(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var $=yl(w.pendingLanes);if($!==0){var R=w;for(R.pendingLanes|=2,R.entangledLanes|=2;$;){var L=1<<31-rn($);R.entanglements[1]|=L,$&=~L}ma(w),(fr&6)===0&&(L1=en()+500,Z0(0))}}break;case 13:R=Xu(w,2),R!==null&&on(R,w,2),j1(),wO(w,2)}if(w=TO(m),w===null&&cO(a,c,m,K1,p),w===_)break;_=w}_!==null&&m.stopPropagation()}else cO(a,c,m,null,p)}}function TO(a){return a=OA(a),EO(a)}var K1=null;function EO(a){if(K1=null,a=yo(a),a!==null){var c=ye(a);if(c===null)a=null;else{var p=c.tag;if(p===13){if(a=Ve(c),a!==null)return a;a=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return K1=a,null}function m6(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cf()){case oh:return 2;case ah:return 8;case If:case fA:return 32;case Yw:return 268435456;default:return 32}default:return 32}}var $O=!1,hc=null,pc=null,fc=null,tv=new Map,rv=new Map,yc=[],jse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g6(a,c){switch(a){case"focusin":case"focusout":hc=null;break;case"dragenter":case"dragleave":pc=null;break;case"mouseover":case"mouseout":fc=null;break;case"pointerover":case"pointerout":tv.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":rv.delete(c.pointerId)}}function iv(a,c,p,m,_,w){return a===null||a.nativeEvent!==w?(a={blockedOn:c,domEventName:p,eventSystemFlags:m,nativeEvent:w,targetContainers:[_]},c!==null&&(c=Zu(c),c!==null&&y6(c)),a):(a.eventSystemFlags|=m,c=a.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),a)}function Fse(a,c,p,m,_){switch(c){case"focusin":return hc=iv(hc,a,c,p,m,_),!0;case"dragenter":return pc=iv(pc,a,c,p,m,_),!0;case"mouseover":return fc=iv(fc,a,c,p,m,_),!0;case"pointerover":var w=_.pointerId;return tv.set(w,iv(tv.get(w)||null,a,c,p,m,_)),!0;case"gotpointercapture":return w=_.pointerId,rv.set(w,iv(rv.get(w)||null,a,c,p,m,_)),!0}return!1}function v6(a){var c=yo(a.target);if(c!==null){var p=ye(c);if(p!==null){if(c=p.tag,c===13){if(c=Ve(p),c!==null){a.blockedOn=c,Lr(a.priority,function(){if(p.tag===13){var m=Yn(),_=Xu(p,m);_!==null&&on(_,p,m),wO(p,m)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Q1(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var p=TO(a.nativeEvent);if(p===null){p=a.nativeEvent;var m=new p.constructor(p.type,p);MA=m,p.target.dispatchEvent(m),MA=null}else return c=Zu(p),c!==null&&y6(c),a.blockedOn=p,!1;c.shift()}return!0}function b6(a,c,p){Q1(a)&&p.delete(c)}function Use(){$O=!1,hc!==null&&Q1(hc)&&(hc=null),pc!==null&&Q1(pc)&&(pc=null),fc!==null&&Q1(fc)&&(fc=null),tv.forEach(b6),rv.forEach(b6)}function eS(a,c){a.blockedOn===c&&(a.blockedOn=null,$O||($O=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Use)))}var tS=null;function _6(a){tS!==a&&(tS=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){tS===a&&(tS=null);for(var c=0;c<a.length;c+=3){var p=a[c],m=a[c+1],_=a[c+2];if(typeof m!="function"){if(EO(m||p)===null)continue;break}var w=Zu(p);w!==null&&(a.splice(c,3),c-=3,fM(w,{pending:!0,data:_,method:p.method,action:m},m,_))}}))}function nv(a){function c(L){return eS(L,a)}hc!==null&&eS(hc,a),pc!==null&&eS(pc,a),fc!==null&&eS(fc,a),tv.forEach(c),rv.forEach(c);for(var p=0;p<yc.length;p++){var m=yc[p];m.blockedOn===a&&(m.blockedOn=null)}for(;0<yc.length&&(p=yc[0],p.blockedOn===null);)v6(p),p.blockedOn===null&&yc.shift();if(p=(a.ownerDocument||a).$$reactFormReplay,p!=null)for(m=0;m<p.length;m+=3){var _=p[m],w=p[m+1],$=_[or]||null;if(typeof w=="function")$||_6(p);else if($){var R=null;if(w&&w.hasAttribute("formAction")){if(_=w,$=w[or]||null)R=$.formAction;else if(EO(_)!==null)continue}else R=$.action;typeof R=="function"?p[m+1]=R:(p.splice(m,3),m-=3),_6(p)}}}function xO(a){this._internalRoot=a}rS.prototype.render=xO.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(i(409));var p=c.current,m=Yn();p6(p,m,a,c,null,null)},rS.prototype.unmount=xO.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;a.tag===0&&ly(),p6(a.current,2,null,a,null,null),j1(),c[ml]=null}};function rS(a){this._internalRoot=a}rS.prototype.unstable_scheduleHydration=function(a){if(a){var c=dh();a={blockedOn:null,target:a,priority:c};for(var p=0;p<yc.length&&c!==0&&c<yc[p].priority;p++);yc.splice(p,0,a),p===0&&v6(a)}};var w6=t.version;if(w6!=="19.0.0")throw Error(i(527,w6,"19.0.0"));we.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=ue(c),a=a!==null?Ie(a):null,a=a===null?null:a.stateNode,a};var Vse={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:K,findFiberByHostInstance:yo,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iS.isDisabled&&iS.supportsFiber)try{lh=iS.inject(Vse),tn=iS}catch{}}return ov.createRoot=function(a,c){if(!n(a))throw Error(i(299));var p=!1,m="",_=jj,w=Fj,$=Uj,R=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(R=c.unstable_transitionCallbacks)),c=d6(a,1,!1,null,null,p,m,_,w,$,R,null),a[ml]=c.current,uO(a.nodeType===8?a.parentNode:a),new xO(c)},ov.hydrateRoot=function(a,c,p){if(!n(a))throw Error(i(299));var m=!1,_="",w=jj,$=Fj,R=Uj,L=null,G=null;return p!=null&&(p.unstable_strictMode===!0&&(m=!0),p.identifierPrefix!==void 0&&(_=p.identifierPrefix),p.onUncaughtError!==void 0&&(w=p.onUncaughtError),p.onCaughtError!==void 0&&($=p.onCaughtError),p.onRecoverableError!==void 0&&(R=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(L=p.unstable_transitionCallbacks),p.formState!==void 0&&(G=p.formState)),c=d6(a,1,!0,c,p??null,m,_,w,$,R,L,G),c.context=h6(null),p=c.current,m=Yn(),_=nc(m),_.callback=null,sc(p,_,m),c.current.lanes=m,Ct(c,m),ma(c),a[ml]=c.current,uO(a),new rS(c)},ov.version="19.0.0",ov}var I6;function Kse(){if(I6)return OO.exports;I6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),OO.exports=Xse(),OO.exports}var Qse=Kse();const eoe=ZB(Qse);var Yi=function(){return Yi=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Yi.apply(this,arguments)};function x_(e,t,r){if(r||arguments.length===2)for(var i=0,n=t.length,s;i<n;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var Qt="-ms-",Zb="-moz-",Pt="-webkit-",JB="comm",N$="rule",YL="decl",toe="@import",XB="@keyframes",roe="@layer",KB=Math.abs,JL=String.fromCharCode,CR=Object.assign;function ioe(e,t){return bi(e,0)^45?(((t<<2^bi(e,0))<<2^bi(e,1))<<2^bi(e,2))<<2^bi(e,3):0}function QB(e){return e.trim()}function hu(e,t){return(e=t.exec(e))?e[0]:e}function lt(e,t,r){return e.replace(t,r)}function b2(e,t,r){return e.indexOf(t,r)}function bi(e,t){return e.charCodeAt(t)|0}function hg(e,t,r){return e.slice(t,r)}function za(e){return e.length}function eq(e){return e.length}function Iv(e,t){return t.push(e),e}function noe(e,t){return e.map(t).join("")}function N6(e,t){return e.filter(function(r){return!hu(r,t)})}var P$=1,pg=1,tq=0,io=0,Hr=0,jg="";function L$(e,t,r,i,n,s,o,l){return{value:e,root:t,parent:r,type:i,props:n,children:s,line:P$,column:pg,length:o,return:"",siblings:l}}function Mc(e,t){return CR(L$("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function fy(e){for(;e.root;)e=Mc(e.root,{children:[e]});Iv(e,e.siblings)}function soe(){return Hr}function ooe(){return Hr=io>0?bi(jg,--io):0,pg--,Hr===10&&(pg=1,P$--),Hr}function Xo(){return Hr=io<tq?bi(jg,io++):0,pg++,Hr===10&&(pg=1,P$++),Hr}function Bp(){return bi(jg,io)}function _2(){return io}function k$(e,t){return hg(jg,e,t)}function IR(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function aoe(e){return P$=pg=1,tq=za(jg=e),io=0,[]}function loe(e){return jg="",e}function NO(e){return QB(k$(io-1,NR(e===91?e+2:e===40?e+1:e)))}function uoe(e){for(;(Hr=Bp())&&Hr<33;)Xo();return IR(e)>2||IR(Hr)>3?"":" "}function coe(e,t){for(;--t&&Xo()&&!(Hr<48||Hr>102||Hr>57&&Hr<65||Hr>70&&Hr<97););return k$(e,_2()+(t<6&&Bp()==32&&Xo()==32))}function NR(e){for(;Xo();)switch(Hr){case e:return io;case 34:case 39:e!==34&&e!==39&&NR(Hr);break;case 40:e===41&&NR(e);break;case 92:Xo();break}return io}function doe(e,t){for(;Xo()&&e+Hr!==57;)if(e+Hr===84&&Bp()===47)break;return"/*"+k$(t,io-1)+"*"+JL(e===47?e:Xo())}function hoe(e){for(;!IR(Bp());)Xo();return k$(e,io)}function poe(e){return loe(w2("",null,null,null,[""],e=aoe(e),0,[0],e))}function w2(e,t,r,i,n,s,o,l,d){for(var f=0,g=0,v=o,b=0,S=0,T=0,E=1,x=1,O=1,C=0,I="",P=n,k=s,D=i,H=I;x;)switch(T=C,C=Xo()){case 40:if(T!=108&&bi(H,v-1)==58){b2(H+=lt(NO(C),"&","&\f"),"&\f",KB(f?l[f-1]:0))!=-1&&(O=-1);break}case 34:case 39:case 91:H+=NO(C);break;case 9:case 10:case 13:case 32:H+=uoe(T);break;case 92:H+=coe(_2()-1,7);continue;case 47:switch(Bp()){case 42:case 47:Iv(foe(doe(Xo(),_2()),t,r,d),d);break;default:H+="/"}break;case 123*E:l[f++]=za(H)*O;case 125*E:case 59:case 0:switch(C){case 0:case 125:x=0;case 59+g:O==-1&&(H=lt(H,/\f/g,"")),S>0&&za(H)-v&&Iv(S>32?L6(H+";",i,r,v-1,d):L6(lt(H," ","")+";",i,r,v-2,d),d);break;case 59:H+=";";default:if(Iv(D=P6(H,t,r,f,g,n,l,I,P=[],k=[],v,s),s),C===123)if(g===0)w2(H,t,D,D,P,s,v,l,k);else switch(b===99&&bi(H,3)===110?100:b){case 100:case 108:case 109:case 115:w2(e,D,D,i&&Iv(P6(e,D,D,0,0,n,l,I,n,P=[],v,k),k),n,k,v,l,i?P:k);break;default:w2(H,D,D,D,[""],k,0,l,k)}}f=g=S=0,E=O=1,I=H="",v=o;break;case 58:v=1+za(H),S=T;default:if(E<1){if(C==123)--E;else if(C==125&&E++==0&&ooe()==125)continue}switch(H+=JL(C),C*E){case 38:O=g>0?1:(H+="\f",-1);break;case 44:l[f++]=(za(H)-1)*O,O=1;break;case 64:Bp()===45&&(H+=NO(Xo())),b=Bp(),g=v=za(I=H+=hoe(_2())),C++;break;case 45:T===45&&za(H)==2&&(E=0)}}return s}function P6(e,t,r,i,n,s,o,l,d,f,g,v){for(var b=n-1,S=n===0?s:[""],T=eq(S),E=0,x=0,O=0;E<i;++E)for(var C=0,I=hg(e,b+1,b=KB(x=o[E])),P=e;C<T;++C)(P=QB(x>0?S[C]+" "+I:lt(I,/&\f/g,S[C])))&&(d[O++]=P);return L$(e,t,r,n===0?N$:l,d,f,g,v)}function foe(e,t,r,i){return L$(e,t,r,JB,JL(soe()),hg(e,2,-2),0,i)}function L6(e,t,r,i,n){return L$(e,t,r,YL,hg(e,0,i),hg(e,i+1,-1),i,n)}function rq(e,t,r){switch(ioe(e,t)){case 5103:return Pt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pt+e+e;case 4789:return Zb+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Pt+e+Zb+e+Qt+e+e;case 5936:switch(bi(e,t+11)){case 114:return Pt+e+Qt+lt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Pt+e+Qt+lt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Pt+e+Qt+lt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Pt+e+Qt+e+e;case 6165:return Pt+e+Qt+"flex-"+e+e;case 5187:return Pt+e+lt(e,/(\w+).+(:[^]+)/,Pt+"box-$1$2"+Qt+"flex-$1$2")+e;case 5443:return Pt+e+Qt+"flex-item-"+lt(e,/flex-|-self/g,"")+(hu(e,/flex-|baseline/)?"":Qt+"grid-row-"+lt(e,/flex-|-self/g,""))+e;case 4675:return Pt+e+Qt+"flex-line-pack"+lt(e,/align-content|flex-|-self/g,"")+e;case 5548:return Pt+e+Qt+lt(e,"shrink","negative")+e;case 5292:return Pt+e+Qt+lt(e,"basis","preferred-size")+e;case 6060:return Pt+"box-"+lt(e,"-grow","")+Pt+e+Qt+lt(e,"grow","positive")+e;case 4554:return Pt+lt(e,/([^-])(transform)/g,"$1"+Pt+"$2")+e;case 6187:return lt(lt(lt(e,/(zoom-|grab)/,Pt+"$1"),/(image-set)/,Pt+"$1"),e,"")+e;case 5495:case 3959:return lt(e,/(image-set\([^]*)/,Pt+"$1$`$1");case 4968:return lt(lt(e,/(.+:)(flex-)?(.*)/,Pt+"box-pack:$3"+Qt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pt+e+e;case 4200:if(!hu(e,/flex-|baseline/))return Qt+"grid-column-align"+hg(e,t)+e;break;case 2592:case 3360:return Qt+lt(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(i,n){return t=n,hu(i.props,/grid-\w+-end/)})?~b2(e+(r=r[t].value),"span",0)?e:Qt+lt(e,"-start","")+e+Qt+"grid-row-span:"+(~b2(r,"span",0)?hu(r,/\d+/):+hu(r,/\d+/)-+hu(e,/\d+/))+";":Qt+lt(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(i){return hu(i.props,/grid-\w+-start/)})?e:Qt+lt(lt(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return lt(e,/(.+)-inline(.+)/,Pt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(za(e)-1-t>6)switch(bi(e,t+1)){case 109:if(bi(e,t+4)!==45)break;case 102:return lt(e,/(.+:)(.+)-([^]+)/,"$1"+Pt+"$2-$3$1"+Zb+(bi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~b2(e,"stretch",0)?rq(lt(e,"stretch","fill-available"),t,r)+e:e}break;case 5152:case 5920:return lt(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(i,n,s,o,l,d,f){return Qt+n+":"+s+f+(o?Qt+n+"-span:"+(l?d:+d-+s)+f:"")+e});case 4949:if(bi(e,t+6)===121)return lt(e,":",":"+Pt)+e;break;case 6444:switch(bi(e,bi(e,14)===45?18:11)){case 120:return lt(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Pt+(bi(e,14)===45?"inline-":"")+"box$3$1"+Pt+"$2$3$1"+Qt+"$2box$3")+e;case 100:return lt(e,":",":"+Qt)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return lt(e,"scroll-","scroll-snap-")+e}return e}function eE(e,t){for(var r="",i=0;i<e.length;i++)r+=t(e[i],i,e,t)||"";return r}function yoe(e,t,r,i){switch(e.type){case roe:if(e.children.length)break;case toe:case YL:return e.return=e.return||e.value;case JB:return"";case XB:return e.return=e.value+"{"+eE(e.children,i)+"}";case N$:if(!za(e.value=e.props.join(",")))return""}return za(r=eE(e.children,i))?e.return=e.value+"{"+r+"}":""}function moe(e){var t=eq(e);return function(r,i,n,s){for(var o="",l=0;l<t;l++)o+=e[l](r,i,n,s)||"";return o}}function goe(e){return function(t){t.root||(t=t.return)&&e(t)}}function voe(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case YL:e.return=rq(e.value,e.length,r);return;case XB:return eE([Mc(e,{value:lt(e.value,"@","@"+Pt)})],i);case N$:if(e.length)return noe(r=e.props,function(n){switch(hu(n,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":fy(Mc(e,{props:[lt(n,/:(read-\w+)/,":"+Zb+"$1")]})),fy(Mc(e,{props:[n]})),CR(e,{props:N6(r,i)});break;case"::placeholder":fy(Mc(e,{props:[lt(n,/:(plac\w+)/,":"+Pt+"input-$1")]})),fy(Mc(e,{props:[lt(n,/:(plac\w+)/,":"+Zb+"$1")]})),fy(Mc(e,{props:[lt(n,/:(plac\w+)/,Qt+"input-$1")]})),fy(Mc(e,{props:[n]})),CR(e,{props:N6(r,i)});break}return""})}}var boe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},os={},fg=typeof process<"u"&&os!==void 0&&(os.REACT_APP_SC_ATTR||os.SC_ATTR)||"data-styled",iq="active",nq="data-styled-version",D$="6.1.15",XL=`/*!sc*/
`,tE=typeof window<"u"&&"HTMLElement"in window,_oe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&os!==void 0&&os.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&os.REACT_APP_SC_DISABLE_SPEEDY!==""?os.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&os.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&os!==void 0&&os.SC_DISABLE_SPEEDY!==void 0&&os.SC_DISABLE_SPEEDY!==""&&os.SC_DISABLE_SPEEDY!=="false"&&os.SC_DISABLE_SPEEDY),woe={},j$=Object.freeze([]),yg=Object.freeze({});function sq(e,t,r){return r===void 0&&(r=yg),e.theme!==r.theme&&e.theme||t||r.theme}var oq=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Soe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Toe=/(^-|-$)/g;function k6(e){return e.replace(Soe,"-").replace(Toe,"")}var Eoe=/(a)(d)/gi,nS=52,D6=function(e){return String.fromCharCode(e+(e>25?39:97))};function PR(e){var t,r="";for(t=Math.abs(e);t>nS;t=t/nS|0)r=D6(t%nS)+r;return(D6(t%nS)+r).replace(Eoe,"$1-$2")}var PO,aq=5381,Pm=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},lq=function(e){return Pm(aq,e)};function uq(e){return PR(lq(e)>>>0)}function $oe(e){return e.displayName||e.name||"Component"}function LO(e){return typeof e=="string"&&!0}var cq=typeof Symbol=="function"&&Symbol.for,dq=cq?Symbol.for("react.memo"):60115,xoe=cq?Symbol.for("react.forward_ref"):60112,Aoe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Moe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},hq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ooe=((PO={})[xoe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},PO[dq]=hq,PO);function j6(e){return("type"in(t=e)&&t.type.$$typeof)===dq?hq:"$$typeof"in e?Ooe[e.$$typeof]:Aoe;var t}var Roe=Object.defineProperty,Coe=Object.getOwnPropertyNames,F6=Object.getOwnPropertySymbols,Ioe=Object.getOwnPropertyDescriptor,Noe=Object.getPrototypeOf,U6=Object.prototype;function pq(e,t,r){if(typeof t!="string"){if(U6){var i=Noe(t);i&&i!==U6&&pq(e,i,r)}var n=Coe(t);F6&&(n=n.concat(F6(t)));for(var s=j6(e),o=j6(t),l=0;l<n.length;++l){var d=n[l];if(!(d in Moe||r&&r[d]||o&&d in o||s&&d in s)){var f=Ioe(t,d);try{Roe(e,d,f)}catch{}}}}return e}function mg(e){return typeof e=="function"}function KL(e){return typeof e=="object"&&"styledComponentId"in e}function Dp(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function LR(e,t){if(e.length===0)return"";for(var r=e[0],i=1;i<e.length;i++)r+=e[i];return r}function A_(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function kR(e,t,r){if(r===void 0&&(r=!1),!r&&!A_(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)e[i]=kR(e[i],t[i]);else if(A_(t))for(var i in t)e[i]=kR(e[i],t[i]);return e}function QL(e,t){Object.defineProperty(e,"toString",{value:t})}function aw(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Poe=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var r=0,i=0;i<t;i++)r+=this.groupSizes[i];return r},e.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var i=this.groupSizes,n=i.length,s=n;t>=s;)if((s<<=1)<0)throw aw(16,"".concat(t));this.groupSizes=new Uint32Array(s),this.groupSizes.set(i),this.length=s;for(var o=n;o<s;o++)this.groupSizes[o]=0}for(var l=this.indexOfGroup(t+1),d=(o=0,r.length);o<d;o++)this.tag.insertRule(l,r[o])&&(this.groupSizes[t]++,l++)},e.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],i=this.indexOfGroup(t),n=i+r;this.groupSizes[t]=0;for(var s=i;s<n;s++)this.tag.deleteRule(i)}},e.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var i=this.groupSizes[t],n=this.indexOfGroup(t),s=n+i,o=n;o<s;o++)r+="".concat(this.tag.getRule(o)).concat(XL);return r},e}(),S2=new Map,rE=new Map,T2=1,sS=function(e){if(S2.has(e))return S2.get(e);for(;rE.has(T2);)T2++;var t=T2++;return S2.set(e,t),rE.set(t,e),t},Loe=function(e,t){T2=t+1,S2.set(e,t),rE.set(t,e)},koe="style[".concat(fg,"][").concat(nq,'="').concat(D$,'"]'),Doe=new RegExp("^".concat(fg,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),joe=function(e,t,r){for(var i,n=r.split(","),s=0,o=n.length;s<o;s++)(i=n[s])&&e.registerName(t,i)},Foe=function(e,t){for(var r,i=((r=t.textContent)!==null&&r!==void 0?r:"").split(XL),n=[],s=0,o=i.length;s<o;s++){var l=i[s].trim();if(l){var d=l.match(Doe);if(d){var f=0|parseInt(d[1],10),g=d[2];f!==0&&(Loe(g,f),joe(e,g,d[3]),e.getTag().insertRules(f,n)),n.length=0}else n.push(l)}}},V6=function(e){for(var t=document.querySelectorAll(koe),r=0,i=t.length;r<i;r++){var n=t[r];n&&n.getAttribute(fg)!==iq&&(Foe(e,n),n.parentNode&&n.parentNode.removeChild(n))}};function Uoe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var fq=function(e){var t=document.head,r=e||t,i=document.createElement("style"),n=function(l){var d=Array.from(l.querySelectorAll("style[".concat(fg,"]")));return d[d.length-1]}(r),s=n!==void 0?n.nextSibling:null;i.setAttribute(fg,iq),i.setAttribute(nq,D$);var o=Uoe();return o&&i.setAttribute("nonce",o),r.insertBefore(i,s),i},Voe=function(){function e(t){this.element=fq(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var i=document.styleSheets,n=0,s=i.length;n<s;n++){var o=i[n];if(o.ownerNode===r)return o}throw aw(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},e}(),zoe=function(){function e(t){this.element=fq(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var i=document.createTextNode(r);return this.element.insertBefore(i,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),Goe=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),z6=tE,Boe={isServer:!tE,useCSSOMInjection:!_oe},iE=function(){function e(t,r,i){t===void 0&&(t=yg),r===void 0&&(r={});var n=this;this.options=Yi(Yi({},Boe),t),this.gs=r,this.names=new Map(i),this.server=!!t.isServer,!this.server&&tE&&z6&&(z6=!1,V6(this)),QL(this,function(){return function(s){for(var o=s.getTag(),l=o.length,d="",f=function(v){var b=function(O){return rE.get(O)}(v);if(b===void 0)return"continue";var S=s.names.get(b),T=o.getGroup(v);if(S===void 0||!S.size||T.length===0)return"continue";var E="".concat(fg,".g").concat(v,'[id="').concat(b,'"]'),x="";S!==void 0&&S.forEach(function(O){O.length>0&&(x+="".concat(O,","))}),d+="".concat(T).concat(E,'{content:"').concat(x,'"}').concat(XL)},g=0;g<l;g++)f(g);return d}(n)})}return e.registerId=function(t){return sS(t)},e.prototype.rehydrate=function(){!this.server&&tE&&V6(this)},e.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new e(Yi(Yi({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var i=r.useCSSOMInjection,n=r.target;return r.isServer?new Goe(n):i?new Voe(n):new zoe(n)}(this.options),new Poe(t)));var t},e.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},e.prototype.registerName=function(t,r){if(sS(t),this.names.has(t))this.names.get(t).add(r);else{var i=new Set;i.add(r),this.names.set(t,i)}},e.prototype.insertRules=function(t,r,i){this.registerName(t,r),this.getTag().insertRules(sS(t),i)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(sS(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),qoe=/&/g,Hoe=/^\s*\/\/.*$/gm;function yq(e,t){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(i){return"".concat(t," ").concat(i)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=yq(r.children,t)),r})}function Woe(e){var t,r,i,n=yg,s=n.options,o=s===void 0?yg:s,l=n.plugins,d=l===void 0?j$:l,f=function(b,S,T){return T.startsWith(r)&&T.endsWith(r)&&T.replaceAll(r,"").length>0?".".concat(t):b},g=d.slice();g.push(function(b){b.type===N$&&b.value.includes("&")&&(b.props[0]=b.props[0].replace(qoe,r).replace(i,f))}),o.prefix&&g.push(voe),g.push(yoe);var v=function(b,S,T,E){S===void 0&&(S=""),T===void 0&&(T=""),E===void 0&&(E="&"),t=E,r=S,i=new RegExp("\\".concat(r,"\\b"),"g");var x=b.replace(Hoe,""),O=poe(T||S?"".concat(T," ").concat(S," { ").concat(x," }"):x);o.namespace&&(O=yq(O,o.namespace));var C=[];return eE(O,moe(g.concat(goe(function(I){return C.push(I)})))),C};return v.hash=d.length?d.reduce(function(b,S){return S.name||aw(15),Pm(b,S.name)},aq).toString():"",v}var Zoe=new iE,DR=Woe(),mq=Js.createContext({shouldForwardProp:void 0,styleSheet:Zoe,stylis:DR});mq.Consumer;Js.createContext(void 0);function jR(){return Dn.useContext(mq)}var Yoe=function(){function e(t,r){var i=this;this.inject=function(n,s){s===void 0&&(s=DR);var o=i.name+s.hash;n.hasNameForId(i.id,o)||n.insertRules(i.id,o,s(i.rules,o,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,QL(this,function(){throw aw(12,String(i.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=DR),this.name+t.hash},e}(),Joe=function(e){return e>="A"&&e<="Z"};function G6(e){for(var t="",r=0;r<e.length;r++){var i=e[r];if(r===1&&i==="-"&&e[0]==="-")return e;Joe(i)?t+="-"+i.toLowerCase():t+=i}return t.startsWith("ms-")?"-"+t:t}var gq=function(e){return e==null||e===!1||e===""},vq=function(e){var t,r,i=[];for(var n in e){var s=e[n];e.hasOwnProperty(n)&&!gq(s)&&(Array.isArray(s)&&s.isCss||mg(s)?i.push("".concat(G6(n),":"),s,";"):A_(s)?i.push.apply(i,x_(x_(["".concat(n," {")],vq(s),!1),["}"],!1)):i.push("".concat(G6(n),": ").concat((t=n,(r=s)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in boe||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return i};function xd(e,t,r,i){if(gq(e))return[];if(KL(e))return[".".concat(e.styledComponentId)];if(mg(e)){if(!mg(s=e)||s.prototype&&s.prototype.isReactComponent||!t)return[e];var n=e(t);return xd(n,t,r,i)}var s;return e instanceof Yoe?r?(e.inject(r,i),[e.getName(i)]):[e]:A_(e)?vq(e):Array.isArray(e)?Array.prototype.concat.apply(j$,e.map(function(o){return xd(o,t,r,i)})):[e.toString()]}function bq(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(mg(r)&&!KL(r))return!1}return!0}var Xoe=lq(D$),Koe=function(){function e(t,r,i){this.rules=t,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&bq(t),this.componentId=r,this.baseHash=Pm(Xoe,r),this.baseStyle=i,iE.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,i){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))n=Dp(n,this.staticRulesId);else{var s=LR(xd(this.rules,t,r,i)),o=PR(Pm(this.baseHash,s)>>>0);if(!r.hasNameForId(this.componentId,o)){var l=i(s,".".concat(o),void 0,this.componentId);r.insertRules(this.componentId,o,l)}n=Dp(n,o),this.staticRulesId=o}else{for(var d=Pm(this.baseHash,i.hash),f="",g=0;g<this.rules.length;g++){var v=this.rules[g];if(typeof v=="string")f+=v;else if(v){var b=LR(xd(v,t,r,i));d=Pm(d,b+g),f+=b}}if(f){var S=PR(d>>>0);r.hasNameForId(this.componentId,S)||r.insertRules(this.componentId,S,i(f,".".concat(S),void 0,this.componentId)),n=Dp(n,S)}}return n},e}(),ek=Js.createContext(void 0);ek.Consumer;var kO={};function Qoe(e,t,r){var i=KL(e),n=e,s=!LO(e),o=t.attrs,l=o===void 0?j$:o,d=t.componentId,f=d===void 0?function(P,k){var D=typeof P!="string"?"sc":k6(P);kO[D]=(kO[D]||0)+1;var H="".concat(D,"-").concat(uq(D$+D+kO[D]));return k?"".concat(k,"-").concat(H):H}(t.displayName,t.parentComponentId):d,g=t.displayName,v=g===void 0?function(P){return LO(P)?"styled.".concat(P):"Styled(".concat($oe(P),")")}(e):g,b=t.displayName&&t.componentId?"".concat(k6(t.displayName),"-").concat(t.componentId):t.componentId||f,S=i&&n.attrs?n.attrs.concat(l).filter(Boolean):l,T=t.shouldForwardProp;if(i&&n.shouldForwardProp){var E=n.shouldForwardProp;if(t.shouldForwardProp){var x=t.shouldForwardProp;T=function(P,k){return E(P,k)&&x(P,k)}}else T=E}var O=new Koe(r,b,i?n.componentStyle:void 0);function C(P,k){return function(D,H,re){var K=D.attrs,ie=D.componentStyle,fe=D.defaultProps,ve=D.foldedComponentIds,$e=D.styledComponentId,_e=D.target,it=Js.useContext(ek),pe=jR(),me=D.shouldForwardProp||pe.shouldForwardProp,ye=sq(H,it,fe)||yg,Ve=function(et,Be,Jt){for(var nt,bt=Yi(Yi({},Be),{className:void 0,theme:Jt}),_t=0;_t<et.length;_t+=1){var Pr=mg(nt=et[_t])?nt(bt):nt;for(var Zr in Pr)bt[Zr]=Zr==="className"?Dp(bt[Zr],Pr[Zr]):Zr==="style"?Yi(Yi({},bt[Zr]),Pr[Zr]):Pr[Zr]}return Be.className&&(bt.className=Dp(bt.className,Be.className)),bt}(K,H,ye),j=Ve.as||_e,ue={};for(var Ie in Ve)Ve[Ie]===void 0||Ie[0]==="$"||Ie==="as"||Ie==="theme"&&Ve.theme===ye||(Ie==="forwardedAs"?ue.as=Ve.forwardedAs:me&&!me(Ie,j)||(ue[Ie]=Ve[Ie]));var Le=function(et,Be){var Jt=jR(),nt=et.generateAndInjectStyles(Be,Jt.styleSheet,Jt.stylis);return nt}(ie,Ve),we=Dp(ve,$e);return Le&&(we+=" "+Le),Ve.className&&(we+=" "+Ve.className),ue[LO(j)&&!oq.has(j)?"class":"className"]=we,re&&(ue.ref=re),Dn.createElement(j,ue)}(I,P,k)}C.displayName=v;var I=Js.forwardRef(C);return I.attrs=S,I.componentStyle=O,I.displayName=v,I.shouldForwardProp=T,I.foldedComponentIds=i?Dp(n.foldedComponentIds,n.styledComponentId):"",I.styledComponentId=b,I.target=i?n.target:e,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(P){this._foldedDefaultProps=i?function(k){for(var D=[],H=1;H<arguments.length;H++)D[H-1]=arguments[H];for(var re=0,K=D;re<K.length;re++)kR(k,K[re],!0);return k}({},n.defaultProps,P):P}}),QL(I,function(){return".".concat(I.styledComponentId)}),s&&pq(I,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function B6(e,t){for(var r=[e[0]],i=0,n=t.length;i<n;i+=1)r.push(t[i],e[i+1]);return r}var q6=function(e){return Object.assign(e,{isCss:!0})};function _q(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(mg(e)||A_(e))return q6(xd(B6(j$,x_([e],t,!0))));var i=e;return t.length===0&&i.length===1&&typeof i[0]=="string"?xd(i):q6(xd(B6(i,t)))}function FR(e,t,r){if(r===void 0&&(r=yg),!t)throw aw(1,t);var i=function(n){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return e(t,r,_q.apply(void 0,x_([n],s,!1)))};return i.attrs=function(n){return FR(e,t,Yi(Yi({},r),{attrs:Array.prototype.concat(r.attrs,n).filter(Boolean)}))},i.withConfig=function(n){return FR(e,t,Yi(Yi({},r),n))},i}var wq=function(e){return FR(Qoe,e)},tk=wq;oq.forEach(function(e){tk[e]=wq(e)});var eae=function(){function e(t,r){this.rules=t,this.componentId=r,this.isStatic=bq(t),iE.registerId(this.componentId+1)}return e.prototype.createStyles=function(t,r,i,n){var s=n(LR(xd(this.rules,r,i,n)),""),o=this.componentId+t;i.insertRules(o,o,s)},e.prototype.removeStyles=function(t,r){r.clearRules(this.componentId+t)},e.prototype.renderStyles=function(t,r,i,n){t>2&&iE.registerId(this.componentId+t),this.removeStyles(t,i),this.createStyles(t,r,i,n)},e}();function tae(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=_q.apply(void 0,x_([e],t,!1)),n="sc-global-".concat(uq(JSON.stringify(i))),s=new eae(i,n),o=function(d){var f=jR(),g=Js.useContext(ek),v=Js.useRef(f.styleSheet.allocateGSInstance(n)).current;return f.styleSheet.server&&l(v,d,f.styleSheet,g,f.stylis),Js.useLayoutEffect(function(){if(!f.styleSheet.server)return l(v,d,f.styleSheet,g,f.stylis),function(){return s.removeStyles(v,f.styleSheet)}},[v,d,f.styleSheet,g,f.stylis]),null};function l(d,f,g,v,b){if(s.isStatic)s.renderStyles(d,woe,g,b);else{var S=Yi(Yi({},f),{theme:sq(f,v,o.defaultProps)});s.renderStyles(d,S,g,b)}}return Js.memo(o)}const rae=tae`
  body {
    margin: 0;
    font-family: Arial, sans-serif;
  }
`;function St(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var iae={};function F$(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:iae}var Sq=Object.assign,nE=Object.getOwnPropertyDescriptor,Za=Object.defineProperty,U$=Object.prototype,UR=[];Object.freeze(UR);var Tq={};Object.freeze(Tq);var nae=typeof Proxy<"u",sae=Object.toString();function Eq(){nae||St("Proxy not available")}function $q(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Lm=function(){};function na(e){return typeof e=="function"}function ef(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function V$(e){return e!==null&&typeof e=="object"}function Nu(e){if(!V$(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===sae}function xq(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function lw(e,t,r){Za(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function Aq(e,t,r){Za(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function bf(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(i){return V$(i)&&i[r]===!0}}function Fg(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function oae(e){var t=Object.getPrototypeOf(e),r=Object.getPrototypeOf(t),i=Object.getPrototypeOf(r);return i===null}function wu(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var Mq=typeof Object.getOwnPropertySymbols<"u";function aae(e){var t=Object.keys(e);if(!Mq)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(i){return U$.propertyIsEnumerable.call(e,i)})):t}var gg=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Mq?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Oq(e){return e===null?null:typeof e=="object"?""+e:e}function xu(e,t){return U$.hasOwnProperty.call(e,t)}var lae=Object.getOwnPropertyDescriptors||function(t){var r={};return gg(t).forEach(function(i){r[i]=nE(t,i)}),r};function ls(e,t){return!!(e&t)}function us(e,t,r){return r?e|=t:e&=~t,e}function H6(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function uae(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,dae(i.key),i)}}function Ug(e,t,r){return t&&uae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function km(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=hae(e))||t){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tf(){return tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)({}).hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},tf.apply(null,arguments)}function Rq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,VR(e,t)}function VR(e,t){return VR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VR(e,t)}function cae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function dae(e){var t=cae(e,"string");return typeof t=="symbol"?t:t+""}function hae(e,t){if(e){if(typeof e=="string")return H6(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H6(e,t):void 0}}var Ha=Symbol("mobx-stored-annotations");function Ya(e){function t(r,i){if(cw(i))return e.decorate_20223_(r,i);uw(r,i,e)}return Object.assign(t,e)}function uw(e,t,r){xu(e,Ha)||lw(e,Ha,tf({},e[Ha])),bae(r)||(e[Ha][t]=r)}function pae(e){return xu(e,Ha)||lw(e,Ha,tf({},e[Ha])),e[Ha]}function cw(e){return typeof e=="object"&&typeof e.kind=="string"}var Ye=Symbol("mobx administration"),Zd=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=At.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},t.reportObserved=function(){return Hq(this)},t.reportChanged=function(){Xs(),Wq(this),Ks()},t.toString=function(){return this.name_},Ug(e,[{key:"isBeingObserved",get:function(){return ls(this.flags_,e.isBeingObservedMask_)},set:function(i){this.flags_=us(this.flags_,e.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return ls(this.flags_,e.isPendingUnobservationMask_)},set:function(i){this.flags_=us(this.flags_,e.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return ls(this.flags_,e.diffValueMask_)?1:0},set:function(i){this.flags_=us(this.flags_,e.diffValueMask_,i===1)}}])}();Zd.isBeingObservedMask_=1;Zd.isPendingUnobservationMask_=2;Zd.diffValueMask_=4;var rk=bf("Atom",Zd);function Cq(e,t,r){t===void 0&&(t=Lm),r===void 0&&(r=Lm);var i=new Zd(e);return t!==Lm&&Tle(i,t),r!==Lm&&Kq(i,r),i}function fae(e,t){return dH(e,t)}function yae(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var sE={structural:fae,default:yae};function rf(e,t,r){return iH(e)?e:Array.isArray(e)?Ci.array(e,{name:r}):Nu(e)?Ci.object(e,void 0,{name:r}):Fg(e)?Ci.map(e,{name:r}):wu(e)?Ci.set(e,{name:r}):typeof e=="function"&&!O_(e)&&!R_(e)?xq(e)?vg(e):M_(r,e):e}function mae(e,t,r){if(e==null||W$(e)||H$(e)||wf(e)||qa(e))return e;if(Array.isArray(e))return Ci.array(e,{name:r,deep:!1});if(Nu(e))return Ci.object(e,void 0,{name:r,deep:!1});if(Fg(e))return Ci.map(e,{name:r,deep:!1});if(wu(e))return Ci.set(e,{name:r,deep:!1})}function z$(e){return e}function gae(e,t){return dH(e,t)?t:e}var vae="override";function bae(e){return e.annotationType_===vae}function dw(e,t){return{annotationType_:e,options_:t,make_:_ae,extend_:wae,decorate_20223_:Sae}}function _ae(e,t,r,i){var n;if((n=this.options_)!=null&&n.bound)return this.extend_(e,t,r,!1)===null?0:1;if(i===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(O_(r.value))return 1;var s=Iq(e,this,t,r,!1);return Za(i,t,s),2}function wae(e,t,r,i){var n=Iq(e,this,t,r);return e.defineProperty_(t,n,i)}function Sae(e,t){var r=t.kind,i=t.name,n=t.addInitializer,s=this,o=function(f){var g,v,b,S;return nf((g=(v=s.options_)==null?void 0:v.name)!=null?g:i.toString(),f,(b=(S=s.options_)==null?void 0:S.autoAction)!=null?b:!1)};if(r=="field")return function(d){var f,g=d;return O_(g)||(g=o(g)),(f=s.options_)!=null&&f.bound&&(g=g.bind(this),g.isMobxAction=!0),g};if(r=="method"){var l;return O_(e)||(e=o(e)),(l=this.options_)!=null&&l.bound&&n(function(){var d=this,f=d[i].bind(d);f.isMobxAction=!0,d[i]=f}),e}St("Cannot apply '"+s.annotationType_+"' to '"+String(i)+"' (kind: "+r+"):"+(`
'`+s.annotationType_+"' can only be used on properties with a function value."))}function Tae(e,t,r,i){t.annotationType_,i.value}function Iq(e,t,r,i,n){var s,o,l,d,f,g,v;n===void 0&&(n=be.safeDescriptors),Tae(e,t,r,i);var b=i.value;if((s=t.options_)!=null&&s.bound){var S;b=b.bind((S=e.proxy_)!=null?S:e.target_)}return{value:nf((o=(l=t.options_)==null?void 0:l.name)!=null?o:r.toString(),b,(d=(f=t.options_)==null?void 0:f.autoAction)!=null?d:!1,(g=t.options_)!=null&&g.bound?(v=e.proxy_)!=null?v:e.target_:void 0),configurable:n?e.isPlainObject_:!0,enumerable:!1,writable:!n}}function Nq(e,t){return{annotationType_:e,options_:t,make_:Eae,extend_:$ae,decorate_20223_:xae}}function Eae(e,t,r,i){var n;if(i===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((n=this.options_)!=null&&n.bound&&(!xu(e.target_,t)||!R_(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(R_(r.value))return 1;var s=Pq(e,this,t,r,!1,!1);return Za(i,t,s),2}function $ae(e,t,r,i){var n,s=Pq(e,this,t,r,(n=this.options_)==null?void 0:n.bound);return e.defineProperty_(t,s,i)}function xae(e,t){var r,i=t.name,n=t.addInitializer;return R_(e)||(e=vg(e)),(r=this.options_)!=null&&r.bound&&n(function(){var s=this,o=s[i].bind(s);o.isMobXFlow=!0,s[i]=o}),e}function Aae(e,t,r,i){t.annotationType_,i.value}function Pq(e,t,r,i,n,s){s===void 0&&(s=be.safeDescriptors),Aae(e,t,r,i);var o=i.value;if(R_(o)||(o=vg(o)),n){var l;o=o.bind((l=e.proxy_)!=null?l:e.target_),o.isMobXFlow=!0}return{value:o,configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function ik(e,t){return{annotationType_:e,options_:t,make_:Mae,extend_:Oae,decorate_20223_:Rae}}function Mae(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function Oae(e,t,r,i){return Cae(e,this,t,r),e.defineComputedProperty_(t,tf({},this.options_,{get:r.get,set:r.set}),i)}function Rae(e,t){var r=this,i=t.name,n=t.addInitializer;return n(function(){var s=Sf(this)[Ye],o=tf({},r.options_,{get:e,context:this});o.name||(o.name="ObservableObject."+i.toString()),s.values_.set(i,new sa(o))}),function(){return this[Ye].getObservablePropValue_(i)}}function Cae(e,t,r,i){t.annotationType_,i.get}function G$(e,t){return{annotationType_:e,options_:t,make_:Iae,extend_:Nae,decorate_20223_:Pae}}function Iae(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function Nae(e,t,r,i){var n,s;return Lae(e,this),e.defineObservableProperty_(t,r.value,(n=(s=this.options_)==null?void 0:s.enhancer)!=null?n:rf,i)}function Pae(e,t){var r=this,i=t.kind,n=t.name,s=new WeakSet;function o(l,d){var f,g,v=Sf(l)[Ye],b=new qp(d,(f=(g=r.options_)==null?void 0:g.enhancer)!=null?f:rf,"ObservableObject."+n.toString(),!1);v.values_.set(n,b),s.add(l)}if(i=="accessor")return{get:function(){return s.has(this)||o(this,e.get.call(this)),this[Ye].getObservablePropValue_(n)},set:function(d){return s.has(this)||o(this,d),this[Ye].setObservablePropValue_(n,d)},init:function(d){return s.has(this)||o(this,d),d}}}function Lae(e,t,r,i){t.annotationType_}var kae="true",Dae=Lq();function Lq(e){return{annotationType_:kae,options_:e,make_:jae,extend_:Fae,decorate_20223_:Uae}}function jae(e,t,r,i){var n,s;if(r.get)return B$.make_(e,t,r,i);if(r.set){var o=nf(t.toString(),r.set);return i===e.target_?e.defineProperty_(t,{configurable:be.safeDescriptors?e.isPlainObject_:!0,set:o})===null?0:2:(Za(i,t,{configurable:!0,set:o}),2)}if(i!==e.target_&&typeof r.value=="function"){var l;if(xq(r.value)){var d,f=(d=this.options_)!=null&&d.autoBind?vg.bound:vg;return f.make_(e,t,r,i)}var g=(l=this.options_)!=null&&l.autoBind?M_.bound:M_;return g.make_(e,t,r,i)}var v=((n=this.options_)==null?void 0:n.deep)===!1?Ci.ref:Ci;if(typeof r.value=="function"&&(s=this.options_)!=null&&s.autoBind){var b;r.value=r.value.bind((b=e.proxy_)!=null?b:e.target_)}return v.make_(e,t,r,i)}function Fae(e,t,r,i){var n,s;if(r.get)return B$.extend_(e,t,r,i);if(r.set)return e.defineProperty_(t,{configurable:be.safeDescriptors?e.isPlainObject_:!0,set:nf(t.toString(),r.set)},i);if(typeof r.value=="function"&&(n=this.options_)!=null&&n.autoBind){var o;r.value=r.value.bind((o=e.proxy_)!=null?o:e.target_)}var l=((s=this.options_)==null?void 0:s.deep)===!1?Ci.ref:Ci;return l.extend_(e,t,r,i)}function Uae(e,t){St("'"+this.annotationType_+"' cannot be used as a decorator")}var Vae="observable",zae="observable.ref",Gae="observable.shallow",Bae="observable.struct",kq={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(kq);function oS(e){return e||kq}var zR=G$(Vae),qae=G$(zae,{enhancer:z$}),Hae=G$(Gae,{enhancer:mae}),Wae=G$(Bae,{enhancer:gae}),Dq=Ya(zR);function aS(e){return e.deep===!0?rf:e.deep===!1?z$:Yae(e.defaultDecorator)}function Zae(e){var t;return e?(t=e.defaultDecorator)!=null?t:Lq(e):void 0}function Yae(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:rf}function jq(e,t,r){if(cw(t))return zR.decorate_20223_(e,t);if(ef(t)){uw(e,t,zR);return}return iH(e)?e:Nu(e)?Ci.object(e,t,r):Array.isArray(e)?Ci.array(e,t):Fg(e)?Ci.map(e,t):wu(e)?Ci.set(e,t):typeof e=="object"&&e!==null?e:Ci.box(e,t)}Sq(jq,Dq);var Jae={box:function(t,r){var i=oS(r);return new qp(t,aS(i),i.name,!0,i.equals)},array:function(t,r){var i=oS(r);return(be.useProxies===!1||i.proxy===!1?Zle:jle)(t,aS(i),i.name)},map:function(t,r){var i=oS(r);return new sH(t,aS(i),i.name)},set:function(t,r){var i=oS(r);return new oH(t,aS(i),i.name)},object:function(t,r,i){return Yd(function(){return eH(be.useProxies===!1||(i==null?void 0:i.proxy)===!1?Sf({},i):Nle({},i),t,r)})},ref:Ya(qae),shallow:Ya(Hae),deep:Dq,struct:Ya(Wae)},Ci=Sq(jq,Jae),Fq="computed",Xae="computed.struct",GR=ik(Fq),Kae=ik(Xae,{equals:sE.structural}),B$=function(t,r){if(cw(r))return GR.decorate_20223_(t,r);if(ef(r))return uw(t,r,GR);if(Nu(t))return Ya(ik(Fq,t));var i=Nu(r)?r:{};return i.get=t,i.name||(i.name=t.name||""),new sa(i)};Object.assign(B$,GR);B$.struct=Ya(Kae);var W6,Z6,oE=0,Qae=1,ele=(W6=(Z6=nE(function(){},"name"))==null?void 0:Z6.configurable)!=null?W6:!1,Y6={value:"action",configurable:!0,writable:!1,enumerable:!1};function nf(e,t,r,i){r===void 0&&(r=!1);function n(){return tle(e,r,t,i||this,arguments)}return n.isMobxAction=!0,n.toString=function(){return t.toString()},ele&&(Y6.value=e,Za(n,"name",Y6)),n}function tle(e,t,r,i,n){var s=rle(e,t);try{return r.apply(i,n)}catch(o){throw s.error_=o,o}finally{ile(s)}}function rle(e,t,r,i){var n=!1,s=0,o=be.trackingDerivation,l=!t||!o;Xs();var d=be.allowStateChanges;l&&(_f(),d=nk(!0));var f=ok(!0),g={runAsAction_:l,prevDerivation_:o,prevAllowStateChanges_:d,prevAllowStateReads_:f,notifySpy_:n,startTime_:s,actionId_:Qae++,parentActionId_:oE};return oE=g.actionId_,g}function ile(e){oE!==e.actionId_&&St(30),oE=e.parentActionId_,e.error_!==void 0&&(be.suppressReactionErrors=!0),sk(e.prevAllowStateChanges_),Yb(e.prevAllowStateReads_),Ks(),e.runAsAction_&&Au(e.prevDerivation_),be.suppressReactionErrors=!1}function nk(e){var t=be.allowStateChanges;return be.allowStateChanges=e,t}function sk(e){be.allowStateChanges=e}var qp=function(e){function t(i,n,s,o,l){var d;return s===void 0&&(s="ObservableValue"),l===void 0&&(l=sE.default),d=e.call(this,s)||this,d.enhancer=void 0,d.name_=void 0,d.equals=void 0,d.hasUnreportedChange_=!1,d.interceptors_=void 0,d.changeListeners_=void 0,d.value_=void 0,d.dehancer=void 0,d.enhancer=n,d.name_=s,d.equals=l,d.value_=n(i,void 0,s),d}Rq(t,e);var r=t.prototype;return r.dehanceValue=function(n){return this.dehancer!==void 0?this.dehancer(n):n},r.set=function(n){this.value_,n=this.prepareNewValue_(n),n!==be.UNCHANGED&&this.setNewValue_(n)},r.prepareNewValue_=function(n){if(Ws(this)){var s=Zs(this,{object:this,type:Ja,newValue:n});if(!s)return be.UNCHANGED;n=s.newValue}return n=this.enhancer(n,this.value_,this.name_),this.equals(this.value_,n)?be.UNCHANGED:n},r.setNewValue_=function(n){var s=this.value_;this.value_=n,this.reportChanged(),Ko(this)&&Qo(this,{type:Ja,object:this,newValue:n,oldValue:s})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(n){return hw(this,n)},r.observe_=function(n,s){return s&&n({observableKind:"value",debugObjectName:this.name_,object:this,type:Ja,newValue:this.value_,oldValue:void 0}),pw(this,n)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return Oq(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Zd),sa=function(){function e(r){this.dependenciesState_=At.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=At.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new lE(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=aE.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||St(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=nf("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?sE.structural:sE.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){lle(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(i){return i()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(i){return i()})},t.get=function(){if(this.isComputing&&St(32,this.name_,this.derivation),be.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)BR(this)&&(this.warnAboutUntrackedRead_(),Xs(),this.value_=this.computeValue_(!1),Ks());else if(Hq(this),BR(this)){var i=be.trackingContext;this.keepAlive_&&!i&&(be.trackingContext=this),this.trackAndCompute()&&ale(this),be.trackingContext=i}var n=this.value_;if(E2(n))throw n.cause;return n},t.set=function(i){if(this.setter_){this.isRunningSetter&&St(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,i)}finally{this.isRunningSetter=!1}}else St(34,this.name_)},t.trackAndCompute=function(){var i=this.value_,n=this.dependenciesState_===At.NOT_TRACKING_,s=this.computeValue_(!0),o=n||E2(i)||E2(s)||!this.equals_(i,s);return o&&(this.value_=s),o},t.computeValue_=function(i){this.isComputing=!0;var n=nk(!1),s;if(i)s=Uq(this,this.derivation,this.scope_);else if(be.disableErrorBoundaries===!0)s=this.derivation.call(this.scope_);else try{s=this.derivation.call(this.scope_)}catch(o){s=new lE(o)}return sk(n),this.isComputing=!1,s},t.suspend_=function(){this.keepAlive_||(qR(this),this.value_=void 0)},t.observe_=function(i,n){var s=this,o=!0,l=void 0;return vle(function(){var d=s.get();if(!o||n){var f=_f();i({observableKind:"computed",debugObjectName:s.name_,type:Ja,object:s,newValue:d,oldValue:l}),Au(f)}o=!1,l=d})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Oq(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},Ug(e,[{key:"isComputing",get:function(){return ls(this.flags_,e.isComputingMask_)},set:function(i){this.flags_=us(this.flags_,e.isComputingMask_,i)}},{key:"isRunningSetter",get:function(){return ls(this.flags_,e.isRunningSetterMask_)},set:function(i){this.flags_=us(this.flags_,e.isRunningSetterMask_,i)}},{key:"isBeingObserved",get:function(){return ls(this.flags_,e.isBeingObservedMask_)},set:function(i){this.flags_=us(this.flags_,e.isBeingObservedMask_,i)}},{key:"isPendingUnobservation",get:function(){return ls(this.flags_,e.isPendingUnobservationMask_)},set:function(i){this.flags_=us(this.flags_,e.isPendingUnobservationMask_,i)}},{key:"diffValue",get:function(){return ls(this.flags_,e.diffValueMask_)?1:0},set:function(i){this.flags_=us(this.flags_,e.diffValueMask_,i===1)}}])}();sa.isComputingMask_=1;sa.isRunningSetterMask_=2;sa.isBeingObservedMask_=4;sa.isPendingUnobservationMask_=8;sa.diffValueMask_=16;var q$=bf("ComputedValue",sa),At;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(At||(At={}));var aE;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(aE||(aE={}));var lE=function(t){this.cause=void 0,this.cause=t};function E2(e){return e instanceof lE}function BR(e){switch(e.dependenciesState_){case At.UP_TO_DATE_:return!1;case At.NOT_TRACKING_:case At.STALE_:return!0;case At.POSSIBLY_STALE_:{for(var t=ok(!0),r=_f(),i=e.observing_,n=i.length,s=0;s<n;s++){var o=i[s];if(q$(o)){if(be.disableErrorBoundaries)o.get();else try{o.get()}catch{return Au(r),Yb(t),!0}if(e.dependenciesState_===At.STALE_)return Au(r),Yb(t),!0}}return zq(e),Au(r),Yb(t),!1}}}function Uq(e,t,r){var i=ok(!0);zq(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++be.runId;var n=be.trackingDerivation;be.trackingDerivation=e,be.inBatch++;var s;if(be.disableErrorBoundaries===!0)s=t.call(r);else try{s=t.call(r)}catch(o){s=new lE(o)}return be.inBatch--,be.trackingDerivation=n,nle(e),Yb(i),s}function nle(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,i=At.UP_TO_DATE_,n=0,s=e.unboundDepsCount_,o=0;o<s;o++){var l=r[o];l.diffValue===0&&(l.diffValue=1,n!==o&&(r[n]=l),n++),l.dependenciesState_>i&&(i=l.dependenciesState_)}for(r.length=n,e.newObserving_=null,s=t.length;s--;){var d=t[s];d.diffValue===0&&Bq(d,e),d.diffValue=0}for(;n--;){var f=r[n];f.diffValue===1&&(f.diffValue=0,ole(f,e))}i!==At.UP_TO_DATE_&&(e.dependenciesState_=i,e.onBecomeStale_())}function qR(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)Bq(t[r],e);e.dependenciesState_=At.NOT_TRACKING_}function Vq(e){var t=_f();try{return e()}finally{Au(t)}}function _f(){var e=be.trackingDerivation;return be.trackingDerivation=null,e}function Au(e){be.trackingDerivation=e}function ok(e){var t=be.allowStateReads;return be.allowStateReads=e,t}function Yb(e){be.allowStateReads=e}function zq(e){if(e.dependenciesState_!==At.UP_TO_DATE_){e.dependenciesState_=At.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=At.UP_TO_DATE_}}var $2=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},x2=!0,Gq=!1,be=function(){var e=F$();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(x2=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new $2().version&&(x2=!1),x2?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new $2):(setTimeout(function(){Gq||St(35)},1),new $2)}();function sle(){if((be.pendingReactions.length||be.inBatch||be.isRunningReactions)&&St(36),Gq=!0,x2){var e=F$();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),be=new $2}}function ole(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Bq(e,t){e.observers_.delete(t),e.observers_.size===0&&qq(e)}function qq(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,be.pendingUnobservations.push(e))}function Xs(){be.inBatch++}function Ks(){if(--be.inBatch===0){Zq();for(var e=be.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers_.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof sa&&r.suspend_())}be.pendingUnobservations=[]}}function Hq(e){var t=be.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&be.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&be.inBatch>0&&qq(e),!1)}function Wq(e){e.lowestObserverState_!==At.STALE_&&(e.lowestObserverState_=At.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===At.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=At.STALE_}))}function ale(e){e.lowestObserverState_!==At.STALE_&&(e.lowestObserverState_=At.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===At.POSSIBLY_STALE_?t.dependenciesState_=At.STALE_:t.dependenciesState_===At.UP_TO_DATE_&&(e.lowestObserverState_=At.UP_TO_DATE_)}))}function lle(e){e.lowestObserverState_===At.UP_TO_DATE_&&(e.lowestObserverState_=At.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===At.UP_TO_DATE_&&(t.dependenciesState_=At.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Pu=function(){function e(r,i,n,s){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=At.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=aE.NONE,this.name_=r,this.onInvalidate_=i,this.errorHandler_=n,this.requiresObservable_=s}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,be.pendingReactions.push(this),Zq())},t.runReaction_=function(){if(!this.isDisposed){Xs(),this.isScheduled=!1;var i=be.trackingContext;if(be.trackingContext=this,BR(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(n){this.reportExceptionInDerivation_(n)}}be.trackingContext=i,Ks()}},t.track=function(i){if(!this.isDisposed){Xs(),this.isRunning=!0;var n=be.trackingContext;be.trackingContext=this;var s=Uq(this,i,void 0);be.trackingContext=n,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&qR(this),E2(s)&&this.reportExceptionInDerivation_(s.cause),Ks()}},t.reportExceptionInDerivation_=function(i){var n=this;if(this.errorHandler_){this.errorHandler_(i,this);return}if(be.disableErrorBoundaries)throw i;var s="[mobx] uncaught error in '"+this+"'";be.suppressReactionErrors||console.error(s,i),be.globalReactionErrorHandlers.forEach(function(o){return o(i,n)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Xs(),qR(this),Ks()))},t.getDisposer_=function(i){var n=this,s=function o(){n.dispose(),i==null||i.removeEventListener==null||i.removeEventListener("abort",o)};return i==null||i.addEventListener==null||i.addEventListener("abort",s),s[Ye]=this,s},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(i){},Ug(e,[{key:"isDisposed",get:function(){return ls(this.flags_,e.isDisposedMask_)},set:function(i){this.flags_=us(this.flags_,e.isDisposedMask_,i)}},{key:"isScheduled",get:function(){return ls(this.flags_,e.isScheduledMask_)},set:function(i){this.flags_=us(this.flags_,e.isScheduledMask_,i)}},{key:"isTrackPending",get:function(){return ls(this.flags_,e.isTrackPendingMask_)},set:function(i){this.flags_=us(this.flags_,e.isTrackPendingMask_,i)}},{key:"isRunning",get:function(){return ls(this.flags_,e.isRunningMask_)},set:function(i){this.flags_=us(this.flags_,e.isRunningMask_,i)}},{key:"diffValue",get:function(){return ls(this.flags_,e.diffValueMask_)?1:0},set:function(i){this.flags_=us(this.flags_,e.diffValueMask_,i===1)}}])}();Pu.isDisposedMask_=1;Pu.isScheduledMask_=2;Pu.isTrackPendingMask_=4;Pu.isRunningMask_=8;Pu.diffValueMask_=16;var ule=100,HR=function(t){return t()};function Zq(){be.inBatch>0||be.isRunningReactions||HR(cle)}function cle(){be.isRunningReactions=!0;for(var e=be.pendingReactions,t=0;e.length>0;){++t===ule&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),i=0,n=r.length;i<n;i++)r[i].runReaction_()}be.isRunningReactions=!1}var uE=bf("Reaction",Pu);function dle(e){var t=HR;HR=function(i){return e(function(){return t(i)})}}function Jb(){return!1}function hle(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var Yq="action",ple="action.bound",Jq="autoAction",fle="autoAction.bound",yle="<unnamed action>",WR=dw(Yq),mle=dw(ple,{bound:!0}),ZR=dw(Jq,{autoAction:!0}),gle=dw(fle,{autoAction:!0,bound:!0});function Xq(e){var t=function(i,n){if(na(i))return nf(i.name||yle,i,e);if(na(n))return nf(i,n,e);if(cw(n))return(e?ZR:WR).decorate_20223_(i,n);if(ef(n))return uw(i,n,e?ZR:WR);if(ef(i))return Ya(dw(e?Jq:Yq,{name:i,autoAction:e}))};return t}var Dm=Xq(!1);Object.assign(Dm,WR);var M_=Xq(!0);Object.assign(M_,ZR);Dm.bound=Ya(mle);M_.bound=Ya(gle);function O_(e){return na(e)&&e.isMobxAction===!0}function vle(e,t){var r,i,n,s;t===void 0&&(t=Tq);var o=(r=(i=t)==null?void 0:i.name)!=null?r:"Autorun",l=!t.scheduler&&!t.delay,d;if(l)d=new Pu(o,function(){this.track(v)},t.onError,t.requiresObservable);else{var f=_le(t),g=!1;d=new Pu(o,function(){g||(g=!0,f(function(){g=!1,d.isDisposed||d.track(v)}))},t.onError,t.requiresObservable)}function v(){e(d)}return(n=t)!=null&&(n=n.signal)!=null&&n.aborted||d.schedule_(),d.getDisposer_((s=t)==null?void 0:s.signal)}var ble=function(t){return t()};function _le(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ble}var wle="onBO",Sle="onBUO";function Tle(e,t,r){return Qq(wle,e,t,r)}function Kq(e,t,r){return Qq(Sle,e,t,r)}function Qq(e,t,r,i){var n=hE(t),s=na(i)?i:r,o=e+"L";return n[o]?n[o].add(s):n[o]=new Set([s]),function(){var l=n[o];l&&(l.delete(s),l.size===0&&delete n[o])}}var Ele="never",lS="always",$le="observed";function xle(e){e.isolateGlobalState===!0&&sle();var t=e.useProxies,r=e.enforceActions;if(t!==void 0&&(be.useProxies=t===lS?!0:t===Ele?!1:typeof Proxy<"u"),t==="ifavailable"&&(be.verifyProxies=!0),r!==void 0){var i=r===lS?lS:r===$le;be.enforceActions=i,be.allowStateChanges=!(i===!0||i===lS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(n){n in e&&(be[n]=!!e[n])}),be.allowStateReads=!be.observableRequiresReaction,e.reactionScheduler&&dle(e.reactionScheduler)}function eH(e,t,r,i){var n=lae(t);return Yd(function(){var s=Sf(e,i)[Ye];gg(n).forEach(function(o){s.extend_(o,n[o],r&&o in r?r[o]:!0)})}),e}function Ale(e,t){return tH(hE(e,t))}function tH(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=Mle(e.observing_).map(tH)),t}function Mle(e){return Array.from(new Set(e))}var Ole=0;function rH(){this.message="FLOW_CANCELLED"}rH.prototype=Object.create(Error.prototype);var DO=Nq("flow"),Rle=Nq("flow.bound",{bound:!0}),vg=Object.assign(function(t,r){if(cw(r))return DO.decorate_20223_(t,r);if(ef(r))return uw(t,r,DO);var i=t,n=i.name||"<unnamed flow>",s=function(){var l=this,d=arguments,f=++Ole,g=Dm(n+" - runid: "+f+" - init",i).apply(l,d),v,b=void 0,S=new Promise(function(T,E){var x=0;v=E;function O(P){b=void 0;var k;try{k=Dm(n+" - runid: "+f+" - yield "+x++,g.next).call(g,P)}catch(D){return E(D)}I(k)}function C(P){b=void 0;var k;try{k=Dm(n+" - runid: "+f+" - yield "+x++,g.throw).call(g,P)}catch(D){return E(D)}I(k)}function I(P){if(na(P==null?void 0:P.then)){P.then(I,E);return}return P.done?T(P.value):(b=Promise.resolve(P.value),b.then(O,C))}O(void 0)});return S.cancel=Dm(n+" - runid: "+f+" - cancel",function(){try{b&&J6(b);var T=g.return(void 0),E=Promise.resolve(T.value);E.then(Lm,Lm),J6(E),v(new rH)}catch(x){v(x)}}),S};return s.isMobXFlow=!0,s},DO);vg.bound=Ya(Rle);function J6(e){na(e.cancel)&&e.cancel()}function R_(e){return(e==null?void 0:e.isMobXFlow)===!0}function Cle(e,t){return e?W$(e)||!!e[Ye]||rk(e)||uE(e)||q$(e):!1}function iH(e){return Cle(e)}function Su(e,t){t===void 0&&(t=void 0),Xs();try{return e.apply(t)}finally{Ks()}}function yy(e){return e[Ye]}var Ile={has:function(t,r){return yy(t).has_(r)},get:function(t,r){return yy(t).get_(r)},set:function(t,r,i){var n;return ef(r)?(n=yy(t).set_(r,i,!0))!=null?n:!0:!1},deleteProperty:function(t,r){var i;return ef(r)?(i=yy(t).delete_(r,!0))!=null?i:!0:!1},defineProperty:function(t,r,i){var n;return(n=yy(t).defineProperty_(r,i))!=null?n:!0},ownKeys:function(t){return yy(t).ownKeys_()},preventExtensions:function(t){St(13)}};function Nle(e,t){var r,i;return Eq(),e=Sf(e,t),(i=(r=e[Ye]).proxy_)!=null?i:r.proxy_=new Proxy(e,Ile)}function Ws(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function hw(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),$q(function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)})}function Zs(e,t){var r=_f();try{for(var i=[].concat(e.interceptors_||[]),n=0,s=i.length;n<s&&(t=i[n](t),t&&!t.type&&St(14),!!t);n++);return t}finally{Au(r)}}function Ko(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function pw(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),$q(function(){var i=r.indexOf(t);i!==-1&&r.splice(i,1)})}function Qo(e,t){var r=_f(),i=e.changeListeners_;if(i){i=i.slice();for(var n=0,s=i.length;n<s;n++)i[n](t);Au(r)}}function Ple(e,t,r){return Yd(function(){var i,n=Sf(e,r)[Ye];(i=t)!=null||(t=pae(e)),gg(t).forEach(function(s){return n.make_(s,t[s])})}),e}var jO=Symbol("mobx-keys");function Lle(e,t,r){return Nu(e)?eH(e,e,t,r):(Yd(function(){var i=Sf(e,r)[Ye];if(!e[jO]){var n=Object.getPrototypeOf(e),s=new Set([].concat(gg(e),gg(n)));s.delete("constructor"),s.delete(Ye),lw(n,jO,s)}e[jO].forEach(function(o){return i.make_(o,t&&o in t?t[o]:!0)})}),e)}var X6="splice",Ja="update",kle=1e4,Dle={get:function(t,r){var i=t[Ye];return r===Ye?i:r==="length"?i.getArrayLength_():typeof r=="string"&&!isNaN(r)?i.get_(parseInt(r)):xu(cE,r)?cE[r]:t[r]},set:function(t,r,i){var n=t[Ye];return r==="length"&&n.setArrayLength_(i),typeof r=="symbol"||isNaN(r)?t[r]=i:n.set_(parseInt(r),i),!0},preventExtensions:function(){St(15)}},ak=function(){function e(r,i,n,s){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=s,this.atom_=new Zd(r),this.enhancer_=function(o,l){return i(o,l,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.dehanceValues_=function(i){return this.dehancer!==void 0&&i.length>0?i.map(this.dehancer):i},t.intercept_=function(i){return hw(this,i)},t.observe_=function(i,n){return n===void 0&&(n=!1),n&&i({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),pw(this,i)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(i){(typeof i!="number"||isNaN(i)||i<0)&&St("Out of range: "+i);var n=this.values_.length;if(i!==n)if(i>n){for(var s=new Array(i-n),o=0;o<i-n;o++)s[o]=void 0;this.spliceWithArray_(n,0,s)}else this.spliceWithArray_(i,n-i)},t.updateArrayLength_=function(i,n){i!==this.lastKnownLength_&&St(16),this.lastKnownLength_+=n,this.legacyMode_&&n>0&&cH(i+n+1)},t.spliceWithArray_=function(i,n,s){var o=this;this.atom_;var l=this.values_.length;if(i===void 0?i=0:i>l?i=l:i<0&&(i=Math.max(0,l+i)),arguments.length===1?n=l-i:n==null?n=0:n=Math.max(0,Math.min(n,l-i)),s===void 0&&(s=UR),Ws(this)){var d=Zs(this,{object:this.proxy_,type:X6,index:i,removedCount:n,added:s});if(!d)return UR;n=d.removedCount,s=d.added}if(s=s.length===0?s:s.map(function(v){return o.enhancer_(v,void 0)}),this.legacyMode_){var f=s.length-n;this.updateArrayLength_(l,f)}var g=this.spliceItemsIntoValues_(i,n,s);return(n!==0||s.length!==0)&&this.notifyArraySplice_(i,s,g),this.dehanceValues_(g)},t.spliceItemsIntoValues_=function(i,n,s){if(s.length<kle){var o;return(o=this.values_).splice.apply(o,[i,n].concat(s))}else{var l=this.values_.slice(i,i+n),d=this.values_.slice(i+n);this.values_.length+=s.length-n;for(var f=0;f<s.length;f++)this.values_[i+f]=s[f];for(var g=0;g<d.length;g++)this.values_[i+s.length+g]=d[g];return l}},t.notifyArrayChildUpdate_=function(i,n,s){var o=!this.owned_&&Jb(),l=Ko(this),d=l||o?{observableKind:"array",object:this.proxy_,type:Ja,debugObjectName:this.atom_.name_,index:i,newValue:n,oldValue:s}:null;this.atom_.reportChanged(),l&&Qo(this,d)},t.notifyArraySplice_=function(i,n,s){var o=!this.owned_&&Jb(),l=Ko(this),d=l||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:X6,index:i,removed:s,added:n,removedCount:s.length,addedCount:n.length}:null;this.atom_.reportChanged(),l&&Qo(this,d)},t.get_=function(i){if(this.legacyMode_&&i>=this.values_.length){console.warn("[mobx] Out of bounds read: "+i);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[i])},t.set_=function(i,n){var s=this.values_;if(this.legacyMode_&&i>s.length&&St(17,i,s.length),i<s.length){this.atom_;var o=s[i];if(Ws(this)){var l=Zs(this,{type:Ja,object:this.proxy_,index:i,newValue:n});if(!l)return;n=l.newValue}n=this.enhancer_(n,o);var d=n!==o;d&&(s[i]=n,this.notifyArrayChildUpdate_(i,n,o))}else{for(var f=new Array(i+1-s.length),g=0;g<f.length-1;g++)f[g]=void 0;f[f.length-1]=n,this.spliceWithArray_(s.length,0,f)}},e}();function jle(e,t,r,i){return r===void 0&&(r="ObservableArray"),i===void 0&&(i=!1),Eq(),Yd(function(){var n=new ak(r,t,i,!1);Aq(n.values_,Ye,n);var s=new Proxy(n.values_,Dle);return n.proxy_=s,e&&e.length&&n.spliceWithArray_(0,0,e),s})}var cE={clear:function(){return this.splice(0)},replace:function(t){var r=this[Ye];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];var o=this[Ye];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(t);case 2:return o.spliceWithArray_(t,r)}return o.spliceWithArray_(t,r,n)},spliceWithArray:function(t,r,i){return this[Ye].spliceWithArray_(t,r,i)},push:function(){for(var t=this[Ye],r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return t.spliceWithArray_(t.values_.length,0,i),t.values_.length},pop:function(){return this.splice(Math.max(this[Ye].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Ye],r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return t.spliceWithArray_(0,0,i),t.values_.length},reverse:function(){return be.trackingDerivation&&St(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){be.trackingDerivation&&St(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[Ye],i=r.dehanceValues_(r.values_).indexOf(t);return i>-1?(this.splice(i,1),!0):!1}};Yt("at",vs);Yt("concat",vs);Yt("flat",vs);Yt("includes",vs);Yt("indexOf",vs);Yt("join",vs);Yt("lastIndexOf",vs);Yt("slice",vs);Yt("toString",vs);Yt("toLocaleString",vs);Yt("toSorted",vs);Yt("toSpliced",vs);Yt("with",vs);Yt("every",ca);Yt("filter",ca);Yt("find",ca);Yt("findIndex",ca);Yt("findLast",ca);Yt("findLastIndex",ca);Yt("flatMap",ca);Yt("forEach",ca);Yt("map",ca);Yt("some",ca);Yt("toReversed",ca);Yt("reduce",nH);Yt("reduceRight",nH);function Yt(e,t){typeof Array.prototype[e]=="function"&&(cE[e]=t(e))}function vs(e){return function(){var t=this[Ye];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function ca(e){return function(t,r){var i=this,n=this[Ye];n.atom_.reportObserved();var s=n.dehanceValues_(n.values_);return s[e](function(o,l){return t.call(r,o,l,i)})}}function nH(e){return function(){var t=this,r=this[Ye];r.atom_.reportObserved();var i=r.dehanceValues_(r.values_),n=arguments[0];return arguments[0]=function(s,o,l){return n(s,o,l,t)},i[e].apply(i,arguments)}}var Fle=bf("ObservableArrayAdministration",ak);function H$(e){return V$(e)&&Fle(e[Ye])}var Ule={},gd="add",dE="delete",sH=function(){function e(r,i,n){var s=this;i===void 0&&(i=rf),n===void 0&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ye]=Ule,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=i,this.name_=n,na(Map)||St(18),Yd(function(){s.keysAtom_=Cq("ObservableMap.keys()"),s.data_=new Map,s.hasMap_=new Map,r&&s.merge(r)})}var t=e.prototype;return t.has_=function(i){return this.data_.has(i)},t.has=function(i){var n=this;if(!be.trackingDerivation)return this.has_(i);var s=this.hasMap_.get(i);if(!s){var o=s=new qp(this.has_(i),z$,"ObservableMap.key?",!1);this.hasMap_.set(i,o),Kq(o,function(){return n.hasMap_.delete(i)})}return s.get()},t.set=function(i,n){var s=this.has_(i);if(Ws(this)){var o=Zs(this,{type:s?Ja:gd,object:this,newValue:n,name:i});if(!o)return this;n=o.newValue}return s?this.updateValue_(i,n):this.addValue_(i,n),this},t.delete=function(i){var n=this;if(this.keysAtom_,Ws(this)){var s=Zs(this,{type:dE,object:this,name:i});if(!s)return!1}if(this.has_(i)){var o=Jb(),l=Ko(this),d=l||o?{observableKind:"map",debugObjectName:this.name_,type:dE,object:this,oldValue:this.data_.get(i).value_,name:i}:null;return Su(function(){var f;n.keysAtom_.reportChanged(),(f=n.hasMap_.get(i))==null||f.setNewValue_(!1);var g=n.data_.get(i);g.setNewValue_(void 0),n.data_.delete(i)}),l&&Qo(this,d),!0}return!1},t.updateValue_=function(i,n){var s=this.data_.get(i);if(n=s.prepareNewValue_(n),n!==be.UNCHANGED){var o=Jb(),l=Ko(this),d=l||o?{observableKind:"map",debugObjectName:this.name_,type:Ja,object:this,oldValue:s.value_,name:i,newValue:n}:null;s.setNewValue_(n),l&&Qo(this,d)}},t.addValue_=function(i,n){var s=this;this.keysAtom_,Su(function(){var f,g=new qp(n,s.enhancer_,"ObservableMap.key",!1);s.data_.set(i,g),n=g.value_,(f=s.hasMap_.get(i))==null||f.setNewValue_(!0),s.keysAtom_.reportChanged()});var o=Jb(),l=Ko(this),d=l||o?{observableKind:"map",debugObjectName:this.name_,type:gd,object:this,name:i,newValue:n}:null;l&&Qo(this,d)},t.get=function(i){return this.has(i)?this.dehanceValue_(this.data_.get(i).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var i=this,n=this.keys();return K6({next:function(){var o=n.next(),l=o.done,d=o.value;return{done:l,value:l?void 0:i.get(d)}}})},t.entries=function(){var i=this,n=this.keys();return K6({next:function(){var o=n.next(),l=o.done,d=o.value;return{done:l,value:l?void 0:[d,i.get(d)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(i,n){for(var s=km(this),o;!(o=s()).done;){var l=o.value,d=l[0],f=l[1];i.call(n,f,d,this)}},t.merge=function(i){var n=this;return wf(i)&&(i=new Map(i)),Su(function(){Nu(i)?aae(i).forEach(function(s){return n.set(s,i[s])}):Array.isArray(i)?i.forEach(function(s){var o=s[0],l=s[1];return n.set(o,l)}):Fg(i)?(oae(i)||St(19,i),i.forEach(function(s,o){return n.set(o,s)})):i!=null&&St(20,i)}),this},t.clear=function(){var i=this;Su(function(){Vq(function(){for(var n=km(i.keys()),s;!(s=n()).done;){var o=s.value;i.delete(o)}})})},t.replace=function(i){var n=this;return Su(function(){for(var s=Vle(i),o=new Map,l=!1,d=km(n.data_.keys()),f;!(f=d()).done;){var g=f.value;if(!s.has(g)){var v=n.delete(g);if(v)l=!0;else{var b=n.data_.get(g);o.set(g,b)}}}for(var S=km(s.entries()),T;!(T=S()).done;){var E=T.value,x=E[0],O=E[1],C=n.data_.has(x);if(n.set(x,O),n.data_.has(x)){var I=n.data_.get(x);o.set(x,I),C||(l=!0)}}if(!l)if(n.data_.size!==o.size)n.keysAtom_.reportChanged();else for(var P=n.data_.keys(),k=o.keys(),D=P.next(),H=k.next();!D.done;){if(D.value!==H.value){n.keysAtom_.reportChanged();break}D=P.next(),H=k.next()}n.data_=o}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(i,n){return pw(this,i)},t.intercept_=function(i){return hw(this,i)},Ug(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),wf=bf("ObservableMap",sH);function K6(e){return e[Symbol.toStringTag]="MapIterator",uk(e)}function Vle(e){if(Fg(e)||wf(e))return e;if(Array.isArray(e))return new Map(e);if(Nu(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return St(21,e)}var zle={},oH=function(){function e(r,i,n){var s=this;i===void 0&&(i=rf),n===void 0&&(n="ObservableSet"),this.name_=void 0,this[Ye]=zle,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,na(Set)||St(22),this.enhancer_=function(o,l){return i(o,l,n)},Yd(function(){s.atom_=Cq(s.name_),r&&s.replace(r)})}var t=e.prototype;return t.dehanceValue_=function(i){return this.dehancer!==void 0?this.dehancer(i):i},t.clear=function(){var i=this;Su(function(){Vq(function(){for(var n=km(i.data_.values()),s;!(s=n()).done;){var o=s.value;i.delete(o)}})})},t.forEach=function(i,n){for(var s=km(this),o;!(o=s()).done;){var l=o.value;i.call(n,l,l,this)}},t.add=function(i){var n=this;if(this.atom_,Ws(this)){var s=Zs(this,{type:gd,object:this,newValue:i});if(!s)return this}if(!this.has(i)){Su(function(){n.data_.add(n.enhancer_(i,void 0)),n.atom_.reportChanged()});var o=!1,l=Ko(this),d=l||o?{observableKind:"set",debugObjectName:this.name_,type:gd,object:this,newValue:i}:null;l&&Qo(this,d)}return this},t.delete=function(i){var n=this;if(Ws(this)){var s=Zs(this,{type:dE,object:this,oldValue:i});if(!s)return!1}if(this.has(i)){var o=!1,l=Ko(this),d=l||o?{observableKind:"set",debugObjectName:this.name_,type:dE,object:this,oldValue:i}:null;return Su(function(){n.atom_.reportChanged(),n.data_.delete(i)}),l&&Qo(this,d),!0}return!1},t.has=function(i){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(i))},t.entries=function(){var i=this.values();return Q6({next:function(){var s=i.next(),o=s.value,l=s.done;return l?{value:void 0,done:l}:{value:[o,o],done:l}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var i=this,n=this.data_.values();return Q6({next:function(){var o=n.next(),l=o.value,d=o.done;return d?{value:void 0,done:d}:{value:i.dehanceValue_(l),done:d}}})},t.intersection=function(i){if(wu(i)&&!qa(i))return i.intersection(this);var n=new Set(this);return n.intersection(i)},t.union=function(i){if(wu(i)&&!qa(i))return i.union(this);var n=new Set(this);return n.union(i)},t.difference=function(i){return new Set(this).difference(i)},t.symmetricDifference=function(i){if(wu(i)&&!qa(i))return i.symmetricDifference(this);var n=new Set(this);return n.symmetricDifference(i)},t.isSubsetOf=function(i){return new Set(this).isSubsetOf(i)},t.isSupersetOf=function(i){return new Set(this).isSupersetOf(i)},t.isDisjointFrom=function(i){if(wu(i)&&!qa(i))return i.isDisjointFrom(this);var n=new Set(this);return n.isDisjointFrom(i)},t.replace=function(i){var n=this;return qa(i)&&(i=new Set(i)),Su(function(){Array.isArray(i)?(n.clear(),i.forEach(function(s){return n.add(s)})):wu(i)?(n.clear(),i.forEach(function(s){return n.add(s)})):i!=null&&St("Cannot initialize set from "+i)}),this},t.observe_=function(i,n){return pw(this,i)},t.intercept_=function(i){return hw(this,i)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},Ug(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),qa=bf("ObservableSet",oH);function Q6(e){return e[Symbol.toStringTag]="SetIterator",uk(e)}var e8=Object.create(null),t8="remove",aH=function(){function e(r,i,n,s){i===void 0&&(i=new Map),s===void 0&&(s=Dae),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=i,this.name_=n,this.defaultAnnotation_=s,this.keysAtom_=new Zd("ObservableObject.keys"),this.isPlainObject_=Nu(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(i){return this.values_.get(i).get()},t.setObservablePropValue_=function(i,n){var s=this.values_.get(i);if(s instanceof sa)return s.set(n),!0;if(Ws(this)){var o=Zs(this,{type:Ja,object:this.proxy_||this.target_,name:i,newValue:n});if(!o)return null;n=o.newValue}if(n=s.prepareNewValue_(n),n!==be.UNCHANGED){var l=Ko(this),d=!1,f=l||d?{type:Ja,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:s.value_,name:i,newValue:n}:null;s.setNewValue_(n),l&&Qo(this,f)}return!0},t.get_=function(i){return be.trackingDerivation&&!xu(this.target_,i)&&this.has_(i),this.target_[i]},t.set_=function(i,n,s){return s===void 0&&(s=!1),xu(this.target_,i)?this.values_.has(i)?this.setObservablePropValue_(i,n):s?Reflect.set(this.target_,i,n):(this.target_[i]=n,!0):this.extend_(i,{value:n,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,s)},t.has_=function(i){if(!be.trackingDerivation)return i in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var n=this.pendingKeys_.get(i);return n||(n=new qp(i in this.target_,z$,"ObservableObject.key?",!1),this.pendingKeys_.set(i,n)),n.get()},t.make_=function(i,n){if(n===!0&&(n=this.defaultAnnotation_),n!==!1){if(!(i in this.target_)){var s;if((s=this.target_[Ha])!=null&&s[i])return;St(1,n.annotationType_,this.name_+"."+i.toString())}for(var o=this.target_;o&&o!==U$;){var l=nE(o,i);if(l){var d=n.make_(this,i,l,o);if(d===0)return;if(d===1)break}o=Object.getPrototypeOf(o)}i8(this,n,i)}},t.extend_=function(i,n,s,o){if(o===void 0&&(o=!1),s===!0&&(s=this.defaultAnnotation_),s===!1)return this.defineProperty_(i,n,o);var l=s.extend_(this,i,n,o);return l&&i8(this,s,i),l},t.defineProperty_=function(i,n,s){s===void 0&&(s=!1),this.keysAtom_;try{Xs();var o=this.delete_(i);if(!o)return o;if(Ws(this)){var l=Zs(this,{object:this.proxy_||this.target_,name:i,type:gd,newValue:n.value});if(!l)return null;var d=l.newValue;n.value!==d&&(n=tf({},n,{value:d}))}if(s){if(!Reflect.defineProperty(this.target_,i,n))return!1}else Za(this.target_,i,n);this.notifyPropertyAddition_(i,n.value)}finally{Ks()}return!0},t.defineObservableProperty_=function(i,n,s,o){o===void 0&&(o=!1),this.keysAtom_;try{Xs();var l=this.delete_(i);if(!l)return l;if(Ws(this)){var d=Zs(this,{object:this.proxy_||this.target_,name:i,type:gd,newValue:n});if(!d)return null;n=d.newValue}var f=r8(i),g={configurable:be.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:f.get,set:f.set};if(o){if(!Reflect.defineProperty(this.target_,i,g))return!1}else Za(this.target_,i,g);var v=new qp(n,s,"ObservableObject.key",!1);this.values_.set(i,v),this.notifyPropertyAddition_(i,v.value_)}finally{Ks()}return!0},t.defineComputedProperty_=function(i,n,s){s===void 0&&(s=!1),this.keysAtom_;try{Xs();var o=this.delete_(i);if(!o)return o;if(Ws(this)){var l=Zs(this,{object:this.proxy_||this.target_,name:i,type:gd,newValue:void 0});if(!l)return null}n.name||(n.name="ObservableObject.key"),n.context=this.proxy_||this.target_;var d=r8(i),f={configurable:be.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:d.get,set:d.set};if(s){if(!Reflect.defineProperty(this.target_,i,f))return!1}else Za(this.target_,i,f);this.values_.set(i,new sa(n)),this.notifyPropertyAddition_(i,void 0)}finally{Ks()}return!0},t.delete_=function(i,n){if(n===void 0&&(n=!1),this.keysAtom_,!xu(this.target_,i))return!0;if(Ws(this)){var s=Zs(this,{object:this.proxy_||this.target_,name:i,type:t8});if(!s)return null}try{var o;Xs();var l=Ko(this),d=!1,f=this.values_.get(i),g=void 0;if(!f&&(l||d)){var v;g=(v=nE(this.target_,i))==null?void 0:v.value}if(n){if(!Reflect.deleteProperty(this.target_,i))return!1}else delete this.target_[i];if(f&&(this.values_.delete(i),f instanceof qp&&(g=f.value_),Wq(f)),this.keysAtom_.reportChanged(),(o=this.pendingKeys_)==null||(o=o.get(i))==null||o.set(i in this.target_),l||d){var b={type:t8,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:g,name:i};l&&Qo(this,b)}}finally{Ks()}return!0},t.observe_=function(i,n){return pw(this,i)},t.intercept_=function(i){return hw(this,i)},t.notifyPropertyAddition_=function(i,n){var s,o=Ko(this),l=!1;if(o||l){var d=o||l?{type:gd,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:i,newValue:n}:null;o&&Qo(this,d)}(s=this.pendingKeys_)==null||(s=s.get(i))==null||s.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),gg(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Sf(e,t){var r;if(xu(e,Ye))return e;var i=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",n=new aH(e,new Map,String(i),Zae(t));return lw(e,Ye,n),e}var Gle=bf("ObservableObjectAdministration",aH);function r8(e){return e8[e]||(e8[e]={get:function(){return this[Ye].getObservablePropValue_(e)},set:function(r){return this[Ye].setObservablePropValue_(e,r)}})}function W$(e){return V$(e)?Gle(e[Ye]):!1}function i8(e,t,r){var i;(i=e.target_[Ha])==null||delete i[r]}var Ble=uH(0),qle=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),FO=0,lH=function(){};function Hle(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}Hle(lH,Array.prototype);var lk=function(e){function t(i,n,s,o){var l;return s===void 0&&(s="ObservableArray"),o===void 0&&(o=!1),l=e.call(this)||this,Yd(function(){var d=new ak(s,n,o,!0);d.proxy_=l,Aq(l,Ye,d),i&&i.length&&l.spliceWithArray(0,0,i),qle&&Object.defineProperty(l,"0",Ble)}),l}Rq(t,e);var r=t.prototype;return r.concat=function(){this[Ye].atom_.reportObserved();for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return Array.prototype.concat.apply(this.slice(),s.map(function(l){return H$(l)?l.slice():l}))},r[Symbol.iterator]=function(){var i=this,n=0;return uk({next:function(){return n<i.length?{value:i[n++],done:!1}:{done:!0,value:void 0}}})},Ug(t,[{key:"length",get:function(){return this[Ye].getArrayLength_()},set:function(n){this[Ye].setArrayLength_(n)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(lH);Object.entries(cE).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&lw(lk.prototype,t,r)});function uH(e){return{enumerable:!1,configurable:!0,get:function(){return this[Ye].get_(e)},set:function(r){this[Ye].set_(e,r)}}}function Wle(e){Za(lk.prototype,""+e,uH(e))}function cH(e){if(e>FO){for(var t=FO;t<e+100;t++)Wle(t);FO=e}}cH(1e3);function Zle(e,t,r){return new lk(e,t,r)}function hE(e,t){if(typeof e=="object"&&e!==null){if(H$(e))return t!==void 0&&St(23),e[Ye].atom_;if(qa(e))return e.atom_;if(wf(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||St(25,t,YR(e)),r}if(W$(e)){if(!t)return St(26);var i=e[Ye].values_.get(t);return i||St(27,t,YR(e)),i}if(rk(e)||q$(e)||uE(e))return e}else if(na(e)&&uE(e[Ye]))return e[Ye];St(28)}function Yle(e,t){if(e||St(29),rk(e)||q$(e)||uE(e)||wf(e)||qa(e))return e;if(e[Ye])return e[Ye];St(24,e)}function YR(e,t){var r;if(t!==void 0)r=hE(e,t);else{if(O_(e))return e.name;W$(e)||wf(e)||qa(e)?r=Yle(e):r=hE(e)}return r.name_}function Yd(e){var t=_f(),r=nk(!0);Xs();try{return e()}finally{Ks(),sk(r),Au(t)}}var n8=U$.toString;function dH(e,t,r){return r===void 0&&(r=-1),JR(e,t,r)}function JR(e,t,r,i,n){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var s=typeof e;if(s!=="function"&&s!=="object"&&typeof t!="object")return!1;var o=n8.call(e);if(o!==n8.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=s8(e),t=s8(t);var l=o==="[object Array]";if(!l){if(typeof e!="object"||typeof t!="object")return!1;var d=e.constructor,f=t.constructor;if(d!==f&&!(na(d)&&d instanceof d&&na(f)&&f instanceof f)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),i=i||[],n=n||[];for(var g=i.length;g--;)if(i[g]===e)return n[g]===t;if(i.push(e),n.push(t),l){if(g=e.length,g!==t.length)return!1;for(;g--;)if(!JR(e[g],t[g],r-1,i,n))return!1}else{var v=Object.keys(e),b;if(g=v.length,Object.keys(t).length!==g)return!1;for(;g--;)if(b=v[g],!(xu(t,b)&&JR(e[b],t[b],r-1,i,n)))return!1}return i.pop(),n.pop(),!0}function s8(e){return H$(e)?e.slice():Fg(e)||wf(e)||wu(e)||qa(e)?Array.from(e.entries()):e}var o8,Jle=((o8=F$().Iterator)==null?void 0:o8.prototype)||{};function uk(e){return e[Symbol.iterator]=Xle,Object.assign(Object.create(Jle),e)}function Xle(){return this}["Symbol","Map","Set"].forEach(function(e){var t=F$();typeof t[e]>"u"&&St("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:hle,extras:{getDebugName:YR},$mobx:Ye});if(!Dn.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Ple)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Kle=YB();function Qle(e){e()}function eue(e){e||(e=Qle),xle({reactionScheduler:e})}function tue(e){return Ale(e)}var rue=1e4,iue=1e4,nue=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(i){i===void 0&&(i=rue),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var n=Date.now();r.registrations.forEach(function(s,o){n-s.registeredAt>=i&&(r.finalize(s.value),r.registrations.delete(o))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,i){this.registrations.set(i,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,iue))}}),e}(),sue=typeof FinalizationRegistry<"u"?FinalizationRegistry:nue,XR=new sue(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),UO={exports:{}},VO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a8;function oue(){if(a8)return VO;a8=1;var e=I$();function t(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var r=typeof Object.is=="function"?Object.is:t,i=e.useState,n=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(v,b){var S=b(),T=i({inst:{value:S,getSnapshot:b}}),E=T[0].inst,x=T[1];return s(function(){E.value=S,E.getSnapshot=b,d(E)&&x({inst:E})},[v,S,b]),n(function(){return d(E)&&x({inst:E}),v(function(){d(E)&&x({inst:E})})},[v]),o(S),S}function d(v){var b=v.getSnapshot;v=v.value;try{var S=b();return!r(v,S)}catch{return!0}}function f(v,b){return b()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return VO.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,VO}var l8;function aue(){return l8||(l8=1,UO.exports=oue()),UO.exports}var lue=aue();function u8(e){e.reaction=new Pu("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function uue(e,t){t===void 0&&(t="observed");var r=Js.useRef(null);if(!r.current){var i={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(l){return XR.unregister(i),i.onStoreChange=l,i.reaction||(u8(i),i.stateVersion=Symbol()),function(){var d;i.onStoreChange=null,(d=i.reaction)===null||d===void 0||d.dispose(),i.reaction=null}},getSnapshot:function(){return i.stateVersion}};r.current=i}var n=r.current;n.reaction||(u8(n),XR.register(r,n,n)),Js.useDebugValue(n.reaction,tue),lue.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot);var s,o;if(n.reaction.track(function(){try{s=e()}catch(l){o=l}}),o)throw o;return s}var zO,GO,hH=typeof Symbol=="function"&&Symbol.for,cue=(GO=(zO=Object.getOwnPropertyDescriptor(function(){},"name"))===null||zO===void 0?void 0:zO.configurable)!==null&&GO!==void 0?GO:!1,c8=hH?Symbol.for("react.forward_ref"):typeof Dn.forwardRef=="function"&&Dn.forwardRef(function(e){return null}).$$typeof,d8=hH?Symbol.for("react.memo"):typeof Dn.memo=="function"&&Dn.memo(function(e){return null}).$$typeof;function pH(e,t){var r;if(d8&&e.$$typeof===d8)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=(r=void 0)!==null&&r!==void 0?r:!1,n=e,s=e.displayName||e.name;if(c8&&e.$$typeof===c8&&(i=!0,n=e.render,typeof n!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var o=function(l,d){return uue(function(){return n(l,d)},s)};return o.displayName=e.displayName,cue&&Object.defineProperty(o,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(o.contextTypes=e.contextTypes),i&&(o=Dn.forwardRef(o)),o=Dn.memo(o),hue(e,o),o}var due={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function hue(e,t){Object.keys(e).forEach(function(r){due[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var BO;eue(Kle.unstable_batchedUpdates);BO=XR.finalizeAllImmediately;class pue{constructor(){S6(this,"layerVisible",!0);Lle(this)}toggleLayer(){this.layerVisible=!this.layerVisible}}const Xb=new pue;function u(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function BDe(e,t){return function(r,i){t(r,i,e)}}function qDe(e,t,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(g){try{f(i.next(g))}catch(v){o(v)}}function d(g){try{f(i.throw(g))}catch(v){o(v)}}function f(g){g.done?s(g.value):n(g.value).then(l,d)}f((i=i.apply(e,[])).next())})}function HDe(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,n;if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:i,async:r})}return t}var fue=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function WDe(e){function t(s){e.error=e.hasError?new fue(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,i=0;function n(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(s).then(n,function(o){return t(o),n()})}else i|=1}catch(o){t(o)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}let vd;function Z(e){return typeof vd[e]=="function"?vd[e]=vd[e](globalThis):vd[e]}var jB,FB,UB,VB;vd=(jB=globalThis.dojoConfig)!=null&&jB.has||(FB=globalThis.esriConfig)!=null&&FB.has?{...(UB=globalThis.dojoConfig)==null?void 0:UB.has,...(VB=globalThis.esriConfig)==null?void 0:VB.has}:{},Z.add=(e,t,r,i)=>{(i||vd[e]===void 0)&&(vd[e]=t),r&&Z(e)},Z.cache=vd,Z.add("big-integer-warning-enabled",!0),Z.add("esri-deprecation-warnings",!0),Z.add("esri-tests-disable-screenshots",!1),Z.add("esri-tests-use-full-window",!1),Z.add("esri-tests-post-to-influx",!0),Z.add("esri-cim-animations-enable-status","enabled"),Z.add("esri-cim-animations-spotlight",!1),Z.add("esri-cim-animations-freeze-time",!1),Z.add("enable-feature:multiple-highlights",!0),(()=>{var t;Z.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(Z.add("host-browser",e),Z.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),Z.add("dom",e),Z("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(Z.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),Z.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),Z.add("khtml",n.includes("Konqueror")?s:void 0),Z.add("edge",parseFloat(i.split("Edge/")[1])||void 0),Z.add("opr",parseFloat(i.split("OPR/")[1])||void 0),Z.add("webkit",!Z("wp")&&!Z("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),Z.add("chrome",!Z("edge")&&!Z("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),Z.add("android",!Z("wp")&&parseFloat(i.split("Android ")[1])||void 0),Z.add("safari",!n.includes("Safari")||Z("wp")||Z("chrome")||Z("android")||Z("edge")||Z("opr")?void 0:parseFloat(n.split("Version/")[1])),Z.add("mac",n.includes("Macintosh")),!Z("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),l=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",d=parseFloat(l.replace(/_/,".").replaceAll("_",""));Z.add(o,d),Z.add("ios",d)}Z("webkit")||(!i.includes("Gecko")||Z("wp")||Z("khtml")||Z("edge")||Z.add("mozilla",s),Z("mozilla")&&Z.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&Z.add("esri-mobile",t),r&&Z.add("esri-iPhone",r),Z.add("esri-geolocation",!!navigator.geolocation)}Z.add("esri-wasm","WebAssembly"in globalThis),Z.add("esri-performance-mode-frames-between-render",20),Z.add("esri-force-performance-mode",!1),Z.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),Z.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),Z.add("esri-atomics","Atomics"in globalThis),Z.add("esri-workers","Worker"in globalThis),Z.add("web-feat:cache","caches"in globalThis),Z.add("esri-workers-arraybuffer-transfer",!Z("safari")||Number(Z("safari"))>=12),Z.add("workers-pool-size",8),Z.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Z.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Z.add("featurelayer-fast-triangulation-enabled",!0),Z.add("featurelayer-animation-enabled",!0),Z.add("featurelayer-snapshot-enabled",!0),Z.add("featurelayer-snapshot-point-min-threshold",8e4),Z.add("featurelayer-snapshot-point-max-threshold",4e5),Z.add("featurelayer-snapshot-point-coverage",.1),Z.add("featurelayer-query-max-depth",4),Z.add("featurelayer-query-pausing-enabled",!1),Z.add("featurelayer-advanced-symbols",!1),Z.add("featurelayer-pbf",!0),Z.add("featurelayer-pbf-statistics",!1),Z.add("feature-layers-workers",!0),Z.add("feature-polyline-generalization-factor",1),Z.add("mapview-transitions-duration",200),Z.add("mapview-essential-goto-duration",200),Z.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Z.add("mapserver-pbf-version-support",10.81),Z.add("mapservice-popup-identify-max-tolerance",20),Z.add("request-queue-concurrency-hosted",16),Z.add("request-queue-concurrency-non-hosted",4),Z.add("curve-densification-coarse-segments",128),Z.add("curve-densification-max-segments",2e3),Z.add("curve-densification-min-segments",3),Z.add("curve-densification-pixels-per-segment",16),Z.add("view-readyState-waiting-delay",1e3),Z.add("gradient-depth-bias",.01),Z.add("gradient-depth-epsilon",1e-8),Z("host-webworker")||Z("host-browser")&&(Z.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),Z.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{Z.add("esri-image-decode",!0,!0,!0)}).catch(()=>{Z.add("esri-image-decode",!1,!0,!0)})}return!1}),Z.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function ZDe(e){}function yue(e){return()=>e}function YDe(e){return e}let A2=class Gh{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Gh._m}getInt(){return this._seed=(Gh._a*this._seed+Gh._c)%Gh._m,this._seed}getFloat(){return this.getInt()/(Gh._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Gh._m*i}};A2._m=2147483647,A2._a=48271,A2._c=0;const mue=1.5,JDe=1/mue,XDe=.5;function KDe(e,t){return t?e.filter((r,i,n)=>n.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function Z$(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function h8(e,t,r){let i,n;return r?(i=t.filter(s=>!e.some(o=>r(o,s))),n=e.filter(s=>!t.some(o=>r(o,s)))):(i=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:i,removed:n}}function QDe(e){return e&&typeof e.length=="number"}let fH=class{constructor(){this.last=0}};const yH=new fH;function KR(e,t,r,i){i=i||yH;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function gue(e,t,r,i){const n=e.length,s=KR(e,t,n,i);if(s!==-1)return e[s]=e[n-1],e.pop(),t}const wo=new Set;function vue(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;wo.clear();for(let l=0;l<i;++l)wo.add(t[l]);n=n||yH;const o=Math.max(0,n.last-10);for(let l=o;l<r;++l)if(wo.has(e[l])&&(s==null||s.push(e[l]),wo.delete(e[l]),e[l]=e[r-1],--r,--l,wo.size===0||r===0))return wo.clear(),r;for(let l=0;l<o;++l)if(wo.has(e[l])&&(s==null||s.push(e[l]),wo.delete(e[l]),e[l]=e[r-1],--r,--l,wo.size===0||r===0))return wo.clear(),r;return wo.clear(),r}function t5e(e,t,r){const i=e.length;if(t>=i)return e.slice();const n=mH(r),s=new Set,o=[];for(;o.length<t;){const l=Math.floor(n()*i);s.has(l)||(s.add(l),o.push(e[l]))}return o}function mH(e){return e?(p8.seed=e,()=>p8.getFloat()):Math.random}const p8=new A2;function r5e(e,t){const r=mH(t);for(let i=e.length-1;i>0;i--){const n=Math.floor(r()*(i+1)),s=e[i];e[i]=e[n],e[n]=s}return e}function gH(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Lu(e,t){return e!=null}const i5e=[];function n5e(e){return e instanceof ArrayBuffer}function ck(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function vH(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function bH(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function dk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function _H(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function hk(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function wH(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function Y$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function J$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function bue(e){return"buffer"in e}const SH=1024;function s5e(e){return J$(e)||Y$(e)||hk(e)||dk(e)||ck(e)}function o5e(e){return J$(e)||Y$(e)}function a5e(e){return J$(e)?179769e303:Y$(e)?3402823e32:wH(e)?4294967295:_H(e)?65535:vH(e)||bH(e)?255:hk(e)?2147483647:dk(e)?32767:ck(e)?127:256}function _ue(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function U(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=$H(e);if(t!=null)return t;if(pE(e))return e.clone();if(TH(e))return e.map(U);if(EH(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=U(e[i]);return r}function QR(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=$H(e);if(t!=null)return t;if(TH(e)){let i=!0;const n=e.map(s=>{const o=QR(s);return s!=null&&o==null&&(i=!1),o});return i?n:null}if(pE(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(EH(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=QR(n);if(n!=null&&s==null)return null;r[i]=s}return r}function pE(e){return typeof e.clone=="function"}function TH(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function EH(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function f8(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function $H(e){if(ck(e)||vH(e)||bH(e)||dk(e)||_H(e)||hk(e)||wH(e)||Y$(e)||J$(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,U(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(U(r));return t}return null}function pk(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function xH(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Z$(e,t):e instanceof Set?t instanceof Set&&Sue(e,t):e instanceof Map?t instanceof Map&&Tue(e,t):!!f8(e)&&f8(t)&&wue(e,t))}function wue(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function Sue(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Tue(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function fk(e,t,r=!1){return MH(e,t,r)}function X$(e,t){if(t!=null)return t[e]||AH(e.split("."),!1,t)}function Nr(e,t,r){const i=e.split("."),n=i.pop(),s=AH(i,!0,r);s&&n&&(s[n]=t)}function y8(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(y8(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(y8(e[r],t[r]))return!0;return!1}return e!==t}function AH(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function MH(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=U(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.slice():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(l=>{s.includes(l)||s.push(l)}):i[n]=o.slice())):o&&typeof o=="object"?i[n]=MH(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}var zB;const Mt={apiKey:void 0,applicationName:"",applicationUrl:(zB=globalThis.location)==null?void 0:zB.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(fk(Mt,globalThis.esriConfig,!0),delete Mt.has),!Mt.assetsPath){{const e="4.32";Mt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Mt.defaultAssetsPath=Mt.assetsPath}const Eue=/\{([^}]+)\}/g;function m8(e){return e??""}function K$(e,t){return t?e.replaceAll(Eue,typeof t=="object"?(r,i)=>m8(X$(i,t)):(r,i)=>m8(t(i))):e}function l5e(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function OH(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let g8;function u5e(e){return g8??(g8=new DOMParser),g8.parseFromString(e||"","text/html").body.innerText||""}function c5e(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function d5e(e,...t){let r=e[0];for(let i=0;i<t.length;++i)r+=t[i]+e[i+1];return r}const v8={info:0,warn:1,error:2,none:3};let ae=class Xn{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Xn._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Xn.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Xn._loggers.get(t)||new Xn({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Xn._throttlingDisabled){const n=xue(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Xn._tickCounter)return;this._loggedMessages[t].set(n,Xn._tickCounter),Xn._scheduleTickCounterIncrement()}for(const n of Mt.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const n=i[t];if(n!=null)return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",$ue)}_matchLevel(t){const r=Mt.log.level||"warn";return v8[this._parentWithMember("level",r)]<=v8[t]}static _scheduleTickCounterIncrement(){Xn._tickCounterScheduled||(Xn._tickCounterScheduled=!0,Promise.resolve().then(()=>{Xn._tickCounter++,Xn._tickCounterScheduled=!1}))}};function $ue(e,t,...r){console[e](`[${t}]`,...r)}function xue(...e){return OH(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}ae._loggers=new Map,ae._tickCounter=0,ae._tickCounterScheduled=!1,ae._throttlingDisabled=!1;function Aue(e,t){for(const r of e.values())if(t(r))return!0;return!1}function h5e(e,t){for(const r of e.values())if(t(r))return r;return null}function fw(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}function p5e(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const Wm=()=>ae.getLogger("esri.core.accessorSupport.ensureTypes");function Mue(e){return e==null?e:new Date(e)}function Oue(e){return e==null?e:!!e}function yw(e){return e==null?e:e.toString()}function pn(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function yk(e){return e==null?e:Math.round(parseFloat(e))}function Rue(e){return null}function Cue(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function RH(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function fE(e,t){return t!=null&&e&&!(t instanceof e)}function CH(e){return e&&"isCollection"in e}function b8(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Iue(e,t){if(!(t!=null&&t.constructor)||!CH(t.constructor))return eC(e,t)?t:new e(t);const r=b8(e.prototype.itemType),i=b8(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(eC(e,t),t):new e(t):t}function eC(e,t){return!!RH(t)&&(Wm().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Q$(e)+"'"),!0)}function mw(e,t){return t==null?t:CH(e)?Iue(e,t):fE(e,t)?eC(e,t)?t:new e(t):t}function Q$(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const Nue=new WeakMap;function Pue(e){switch(e){case Number:return t=>pn(t);case at:return yk;case Boolean:return Oue;case String:return yw;case Date:return Mue;case Vg:return Rue;default:return fw(Nue,e,()=>mw.bind(null,e))}}function Or(e,t){const r=Pue(e);return arguments.length===1?r:r(t)}function C_(e,t,r){return arguments.length===1?C_.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function Lue(e,t){return arguments.length===1?C_(r=>Or(e,r)):C_(r=>Or(e,r),t)}function IH(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>IH(e,t-1,i)):e(r)}function yE(e,t,r){if(arguments.length===2)return s=>yE(e,t,s);if(!r)return r;r=IH(e,t,r);let i=t,n=r;for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function kue(e,t,r){return arguments.length===2?yE(i=>Or(e,i),t):yE(i=>Or(e,i),t,r)}function NH(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function tC(e,t){if(arguments.length===2)return tC(e).call(null,t);const r=new Set,i=e.filter(l=>typeof l!="function"),n=e.filter(l=>typeof l=="function");for(const l of e)typeof l!="string"&&typeof l!="number"||r.add(l);let s=null,o=null;return(l,d)=>{if(l==null)return l;const f=typeof l,g=f==="string"||f==="number";return g&&(r.has(l)||n.some(v=>f==="string"&&v===String||f==="number"&&v===Number))||f==="object"&&n.some(v=>!fE(l,v))?l:(g&&i.length?(s||(s=i.map(v=>typeof v=="string"?`'${v}'`:`${v}`).join(", ")),Wm().error("Accessor#set",`'${l}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof l=="object"&&n.length?(o||(o=n.map(v=>Q$(v)).join(", ")),Wm().error("Accessor#set",`'${l}' is not a valid value for this property, value must be one of ${o}`)):Wm().error("Accessor#set",`'${l}' is not a valid value for this property`),d&&(d.valid=!1),null)}}function oa(e,t){if(arguments.length===2)return oa(e).call(null,t);const r={},i=[],n=[];for(const d in e.typeMap){const f=e.typeMap[d];r[d]=Or(f),i.push(Q$(f)),n.push(d)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,l=typeof e.key=="string"?d=>d[e.key]:e.key;return d=>{if(e.base&&!fE(e.base,d)||d==null)return d;const f=l(d)||e.defaultKeyValue,g=r[f];if(!g)return Wm().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!fE(e.typeMap[f],d))return d;if(typeof e.key=="string"&&!RH(d)){const v={};for(const b in d)b!==e.key&&(v[b]=d[b]);return g(v)}return g(d)}}let at=class{},Vg=class{};const m5e={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Due(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function PH(e){switch(e.type){case"native":return Or(e.value);case"array":return C_(PH(e.value));case"one-of":return jue(e);default:return null}}function jue(e){let t=null;return(r,i)=>iC(r,e)?r:(t==null&&(t=rC(e)),Wm().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function rC(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case at:return"integer";case Date:return"date";case Vg:return"null";default:return Q$(e.value)}case"array":return`array of ${rC(e.value)}`;case"one-of":{const t=e.values.map(r=>rC(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function iC(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case at:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Vg:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!iC(r,t.value));case"one-of":return t.values.some(r=>iC(e,r))}}const Fue={remove:()=>{}};function vt(e){return e?{remove(){e&&(e(),e=void 0)}}:Fue}function LH(e){e.forEach(t=>t==null?void 0:t.remove())}function g5e(e){LH(e),e.length=0}function gw(e){return vt(()=>LH(e))}function v5e(e){return vt(()=>{var t;return(t=e())==null?void 0:t.remove()})}function b5e(e){return vt(()=>e==null?void 0:e.abort())}function Uue(e){return vt(e!=null?()=>e.destroy():void 0)}function Vn(e){return e.__accessor__??null}function Vue(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function M2(e,t,r){return r?mE(e,t,{policy:r,path:""}):mE(e,t,null)}function mE(e,t,r){return t?Object.keys(t).reduce((i,n)=>{const s=n;let o=null,l="merge";if(r&&(o=r.path?`${r.path}.${n}`:n,l=r.policy(o)),l==="replace"||l==="replace-arrays"&&Array.isArray(i[s]))return i[s]=t[s],i;if(i[s]===void 0)return i[s]=U(t[s]),i;let d=i[s],f=t[s];if(d===f)return i;if(Array.isArray(f)||Array.isArray(i))d=d?Array.isArray(d)?i[s]=d.slice():i[s]=[d]:i[s]=[],f&&(Array.isArray(f)||(f=[f]),f.forEach(g=>{d.includes(g)||d.push(g)}));else if(f&&typeof f=="object")if(r){const g=r.path;r.path=o,i[s]=mE(d,f,r),r.path=g}else i[s]=mE(d,f,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[s]=f);return i},e||{}):e}function kH(e){return Array.isArray(e)?e:e.split(".")}function _8(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function zue(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(..._8(r));return t}return _8(e)}function DH(e,t,r,i){const n=zue(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return gw(s)}return i(e,n[0],r)}function jH(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.at(n)}const i=Vn(t);return Vue(i,r)?i.get(r):t[r]}function FH(e,t,r){if(e==null)return e;const i=jH(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:FH(i,t,r+1)}function vw(e,t,r=0){return typeof t!="string"||t.includes(".")?FH(e,kH(t),r):jH(t,e)}function Xa(e,t){return vw(e,t)}function w8(e,t){return vw(t,e)!==void 0}function bw(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=U(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function ex(e,t){const r=bw(e);let i=r[t];return i||(i=r[t]={}),i}function Gue(e,t){return M2(e,t,que)}const Bue=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function que(e){return Bue.test(e)?"replace":"merge"}function Hue(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(X$(i,t)??"").toString())}let UH=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&Hue(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},V=class VH extends UH{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return U(r)}catch{return"[object]"}}))}}catch(t){throw ae.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new VH(t.name,t.message,t.details)}};V.prototype.type="error";function gE(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))gE(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void gE(Xa(e,n),s,r)}const i=e.__accessor__;i!=null&&Wue(t,i),e[t]=r}}function Wue(e,t){if(Z("esri-unknown-property-errors")&&!Zue(e,t))throw new V("set:unknown-property",Yue(e,t))}function Zue(e,t){return t.metadata[e]!=null}function Yue(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function h(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=ex(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&ae.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const d=typeof s=="string"?s:s.source,f=typeof s=="string"?null:s.overridable===!0;let g;n.dependsOn=[d],n.get=function(){let v=Xa(this,d);if(typeof v=="function"){g||(g=d.split(".").slice(0,-1).join("."));const b=Xa(this,g);b&&(v=v.bind(b))}return v},n.readOnly||(n.set=f?function(v){this._override(r,v)}:function(v){gE(this,d,v)})}const o=e.type,l=e.types;if(!n.cast){let d;o?d=Jue(o):l&&(d=Array.isArray(l)?C_(oa(l[0])):oa(l)),e.cast=Xue(e.cast,d)}Gue(n,e),e.range&&(n.cast=Cue(n.cast,e.range))}}function zH(e,t,r){const i=ex(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function Jue(e){let t=0,r=e;if(Due(e))return PH(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(NH(i))return t===0?tC(i):yE(tC(i),t);if(t===1)return Lue(i);if(t>1)return kue(i,t);const n=e;return n.from?n.from:Or(n)}function Xue(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}const GH=Symbol("Accessor-beforeDestroy");var kn;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(kn||(kn={}));var Rt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Rt||(Rt={}));let tx=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const vE=new tx,Nv=[];let Kb=vE;function Fe(e){Kb.onAccessed(e)}let O2=!1,R2=!1;function ku(e,t,r){if(O2)return mk(e,t,r);let i=null;return BH(e),i=t.call(r),qH(),i}function Kue(e,t){return ku(vE,e,t)}function mk(e,t,r){const i=O2;O2=!0,BH(e);let n=null;try{n=t.call(r)}catch(s){R2&&ae.getLogger("esri.core.accessorSupport.tracking").error(s)}return qH(),O2=i,n}function BH(e){Kb=e,Nv.push(e)}function qH(){const e=Nv.length;if(e>1){const t=Nv.pop();Kb=Nv[e-2],t.onTrackingEnd()}else if(e===1){const t=Nv.pop();Kb=vE,t.onTrackingEnd()}else Kb=vE}function HH(e,t){if(t.flags&Rt.DepTrackingInitialized)return;t.flags|=Rt.DepTrackingInitialized;const r=R2;R2=!1,t.flags&Rt.AutoTracked?mk(t.trackingTarget,t.metadata.get,e):WH(e,t),R2=r}const Que=[];function WH(e,t){t.flags&Rt.ExplicitlyTracking||(t.flags|=Rt.ExplicitlyTracking,mk(t.trackingTarget,()=>{const r=t.metadata.dependsOn||Que;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=kH(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=S8(o,n[s],s!==n.length-1)}else S8(e,i,!1)}),t.flags&=~Rt.ExplicitlyTracking)}function S8(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const n=Vn(e);if(n){const s=n.propertiesByName.get(i);s&&(Fe(s),HH(e,s))}return r?e[i]:void 0}function ece(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}let no=class extends UH{constructor(t,r,i){super(t,r,i)}};no.prototype.type="warning";function ZH(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const nC=()=>ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function T8(e,t,r){var i,n;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((n=t.read)==null?void 0:n.enabled)===!1||ice(e)&&Nr("read.reader",zg(e),t))}function zg(e){var r,i;const t=e.ndimArray??0;if(t>1)return rce(e);if(t===1)return E8(e);if("type"in e&&JH(e.type)){const n=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,s=E8(typeof n=="function"?{type:n}:{types:n});return(o,l,d)=>{const f=s(o,l,d);return f&&new e.type(f)}}return gk(e)}function gk(e){return"type"in e?tce(e.type):nce(e.types)}function tce(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void nC().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function YH(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>YH(e,n,r,i-1)):e(t,void 0,r)}function rce(e){const t=gk(e),r=YH.bind(null,t),i=e.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=r(n,o,i);let l=i,d=n;for(;l>0&&Array.isArray(d);)l--,d=d[0];if(d!==void 0)for(let f=0;f<l;f++)n=[n];return n}}function E8(e){const t=gk(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const l of r){const d=t(l,void 0,n);d!==void 0&&o.push(d)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function JH(e){if(!ZH(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?vk(t.Type):XH(t.Type))}function ice(e){return"types"in e?XH(e.types):vk(e.type)}function vk(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||JH(e))}function XH(e){for(const t in e.typeMap)if(!vk(e.typeMap[t]))return!1;return!0}function nce(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(n,s,o)=>{if(n==null)return n;const l=typeof n;if(l!=="object")return void nC().error(`Expected JSON value of type 'object' to deserialize, but got '${l}'`);t||(t=sce(e));const d=e.key;if(typeof d!="string")return;const f=n[d],g=f?t[f]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!g){const b=`Type '${f||"unknown"}' is not supported`;return o!=null&&o.messages&&n&&o.messages.push(new no(`${r}:unsupported`,b,{definition:n,context:o})),void nC().error(b)}const v=new g;return v.read(n,o),i?i(v):v}}function sce(e){var r,i;const t={};for(const n in e.typeMap){const s=e.typeMap[n],o=bw(s.prototype);if(typeof e.key=="function")continue;const l=o[e.key];if(!l)continue;if((r=l.json)!=null&&r.type&&Array.isArray(l.json.type)&&l.json.type.length===1&&typeof l.json.type[0]=="string"){t[l.json.type[0]]=s;continue}const d=(i=l.json)==null?void 0:i.write;if(!(d!=null&&d.writer)){t[n]=s;continue}const f=d.target,g=typeof f=="string"?f:e.key,v={};d.writer(n,v,g),v[g]&&(t[v[g]]=s)}return t}function oce(e){if(e.json||(e.json={}),x8(e.json),A8(e.json),$8(e.json),e.json.origins)for(const t in e.json.origins)x8(e.json.origins[t]),A8(e.json.origins[t]),$8(e.json.origins[t]);return!0}function $8(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function x8(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function A8(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function M8(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&ZH(e.type))?t.write.writer=uce:r>1?t.write.writer=cce(r):t.types?Array.isArray(t.types)?t.write.writer=lce(t.types[0]):t.write.writer=ace(t.types):t.write.writer=I_}function ace(e){return(t,r,i,n)=>t?KH(t,e,n)?I_(t,r,i,n):void 0:I_(t,r,i,n)}function KH(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new V(`${i}:unsupported`,n,{definition:e,context:r})),ae.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(n)}return!1}function lce(e){return(t,r,i,n)=>!t||!Array.isArray(t)?I_(t,r,i,n):I_(t.filter(s=>KH(s,e,n)),r,i,n)}function I_(e,t,r,i){Nr(r,bE(e,i),t)}function bE(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?_E(e):e}function _E(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function uce(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>bE(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[bE(e,i)],Nr(r,n,t)}function QH(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>QH(i,t,r-1)):bE(e,t)}function cce(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=QH(t,n,e);let o=e,l=s;for(;o>0&&Array.isArray(l);)o--,l=l[0];if(l!==void 0)for(let d=0;d<o;d++)s=[s]}Nr(i,s,r)}}function dce(e,t){return bk(e,"any",t==null?void 0:t.origin)}function sC(e,t){return bk(e,"read",t==null?void 0:t.origin)}function eW(e,t){return bk(e,"write",t==null?void 0:t.origin)}function bk(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let n;n=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],n&&(t==="any"||t in n)&&(i=n)}return i}function hce(e){var r;const t=pce(e);if(e.json.origins)for(const i in e.json.origins){const n=e.json.origins[i],s=n.types?fce(n):t;T8(s,n,!1),n.types&&!n.write&&((r=e.json.write)!=null&&r.enabled)&&(n.write={...e.json.write}),M8(s,n)}T8(t,e.json,!0),M8(t,e.json)}function pce(e){return e.json.types?oC(e.json):e.type?tW(e):oC(e)}function fce(e){return e.type?tW(e):oC(e)}function tW(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!NH(r);)r=r[0],t++;return{type:r,ndimArray:t}}function oC(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function yce(e){oce(e)&&(ece(e),hce(e))}const qO=new Set,HO=new Set;function M(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,gce(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!qO.has(n.initialize)&&(qO.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!HO.has(n.destroy)&&(HO.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);qO.clear(),HO.clear();const s=class extends t{constructor(...l){if(super(...l),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let d=r.length-1;d>=0;d--)r[d].call(this)}}),i.length){let d=!1;const f=this[GH];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!d){d=!0,f.call(this);for(let g=0;g<i.length;g++)i[g].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=bw(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function mce(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&Fe(i);const n=r.store;return n.has(e)?n.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function gce(e){const t=e.prototype,r=bw(t),i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];yce(s),i[n]={enumerable:!0,configurable:!0,get:mce(n,s),set(o){const l=this.__accessor__;if(l!==void 0){if(l.mutable)return l.initialized&&s.readOnly?O8("read-only",n):l.lifecycle===kn.CONSTRUCTED&&s.constructOnly?O8("construct-only",n):void l.set(n,o)}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const O8=(e,t)=>{ae.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)},vce="modulepreload",bce=function(e){return"/boilerplate-arcgis-mobx-vite/"+e},R8={},ne=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(r.map(d=>{if(d=bce(d),d in R8)return;R8[d]=!0;const f=d.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":vce,f||(v.as="script"),v.crossOrigin="",v.href=d,l&&v.setAttribute("nonce",l),document.head.appendChild(v),f)return new Promise((b,S)=>{v.addEventListener("load",b),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},C8=new WeakMap;function _ce(e,t,r=!1){const i=`🛑 DEPRECATED - ${t}`;if(!r)return void e.warn(i);let n=C8.get(e);n||(n=new Set,C8.set(e,n)),n.has(t)||(n.add(t),e.warn(i))}function wce(e,t,r={}){if(Z("esri-deprecation-warnings")){const{moduleName:i}=r;N_(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function Sce(e,t,r={}){if(Z("esri-deprecation-warnings")){const{moduleName:i}=r;N_(e,`Property: ${(i?i+"::":"")+t}`,r)}}function Tce(e,t,r={}){Z("esri-deprecation-warnings")&&N_(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function N_(e,t,r={}){if(Z("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let l=t;if(i&&(l+=`
	🛠️ Replacement: ${i}`),n&&(l+=`
	⚙️ Version: ${n}`),s)if(Array.isArray(s)){l+=`
	🔗 See for more details:`;for(const d of s)l+=`
		${d}`}else l+=`
	🔗 See ${s} for more details.`;_ce(e,l,o)}}function T5e(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function Ece(e,t){for(const r of e)if(r!=null&&t(r))return r}function wE(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Gg=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(wE(t)){const i=this._getOrCreateGroup(r);for(const n of t)N8(n)&&i.push(n)}else N8(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(uS(t))}remove(t){if(typeof t!="string"&&wE(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(I8(this._getGroup(t)),this._groups.delete(uS(t)),this):this}removeAll(){return this._groups.forEach(I8),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(uS(t),r),r}_getGroup(t){return this._groups.get(uS(t))}};function uS(e){return e||"_default_"}function I8(e){for(const t of e)t instanceof Gg?t.removeAll():t.remove()}function N8(e){return e!=null&&(!!e.remove||e instanceof Gg)}function rW(e,t){if(e==null)throw new Error(t??"value is None")}function Zt(e){return e==null||e.destroy(),null}function $5e(e){return e==null||e.dispose(),null}function nr(e){return e==null||e.remove(),null}function bg(e){return e==null||e.abort(),null}function x5e(e){return e==null||e.release(),null}function $ce(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function xce(e,t){let r;return e.some((i,n)=>(r=t(i,n),r!=null)),r??void 0}function Ace(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function Mce(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Tf=class aC{constructor(t,r,i,n=1,s=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(aC.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):Mce(r)&&r.acquire(...t),r}release(t){t&&!aC.test.disabled&&(this._releaseFunction?this._releaseFunction(t):Ace(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Tf.test={disabled:!1};let Oce=class{constructor(t,r){this._observers=t,this._observer=r}remove(){gH(this._observers,this._observer)}},iW=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return Rce;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,n=!1;const s=r.length;for(let o=0;o<s;++o){const l=r[o];if(l.destroyed)n=!0;else if(l===t){i=!0;break}}return i||(r.push(t),n&&this._removeDestroyedObservers()),new Oce(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let n=0;n<r;++n){for(;n+i<r&&t[n+i].destroyed;)++i;if(i>0){if(!(n+i<r))break;t[n]=t[n+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const Rce=vt();var ot;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(ot||(ot={}));const lC=ot.USER+1;function bd(e){switch(e){case"defaults":return ot.DEFAULTS;case"service":return ot.SERVICE;case"portal-item":return ot.PORTAL_ITEM;case"web-scene":return ot.WEB_SCENE;case"web-map":return ot.WEB_MAP;case"link-chart":return ot.LINK_CHART;case"user":return ot.USER;default:return null}}function SE(e){switch(e){case ot.DEFAULTS:return"defaults";case ot.SERVICE:return"service";case ot.PORTAL_ITEM:return"portal-item";case ot.WEB_SCENE:return"web-scene";case ot.WEB_MAP:return"web-map";case ot.LINK_CHART:return"link-chart";case ot.USER:return"user"}}function Cce(e){return SE(e)}let P8=class extends iW{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new tx(this),this.flags=0,this.flags=Rt.Dirty|(r.nonNullable?Rt.NonNullable:0)|(r.hasOwnProperty("value")?Rt.HasDefaultValue:0)|(r.get===void 0?Rt.DepTrackingInitialized:0)|(r.dependsOn===void 0?Rt.AutoTracked:0)}destroy(){this.flags&Rt.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Fe(this);const r=t.store,i=this.propertyName,n=this.flags,s=r.get(i);if(n&Rt.Computing||~n&Rt.Dirty&&r.has(i))return s;this.flags|=Rt.Computing;const o=t.host;let l;n&Rt.AutoTracked?l=ku(this.trackingTarget,this.metadata.get,o):(WH(o,this),l=this.metadata.get.call(o)),this.flags|=Rt.DepTrackingInitialized,r.set(i,l,ot.COMPUTED);const d=r.get(i);return d===s?this.flags&=~Rt.Dirty:Kue(this.commit,this),this.flags&=~Rt.Computing,d}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Rt.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Rt.Overridden&&(this.flags|=Rt.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},Ice=class nW{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new nW;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,U(i))}),r}get(t){return this._values.get(t)}originOf(){return ot.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function cS(e,t,r){return e!==void 0}function L8(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&Rt.NonNullable)||(i.lifecycle,kn.INITIALIZING,!1))}let Nce=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=kn.INITIALIZING,this.store=new Ice,this.mutable=!0,this._origin=ot.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const n=new P8(i,r[i]);this.propertiesByName.set(i,n)}this.metadata=r}initialize(){this.lifecycle=kn.CONSTRUCTING}constructed(){this.lifecycle=kn.CONSTRUCTED}destroy(){this.lifecycle=kn.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==kn.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&Fe(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&Rt.HasDefaultValue)return"defaults"}return SE(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(cS(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);cS(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.propertiesByName.get(r);if(!cS(n))return"";const s=new tx,o=ku(s,()=>{var f;return(f=n.metadata.get)==null?void 0:f.call(t)});let l=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const d=s.accessed??new Set;if(d.size===0)return l;i+="  ";for(const f of d)f instanceof P8&&(l+=`${i}${f.propertyName}: undefined
`);return l}setAtOrigin(t,r,i){const n=this.propertiesByName.get(t);if(cS(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&Rt.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&Rt.Overridden&&(r.flags&=~Rt.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!L8(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:l}=s;if(WO.release(s),!o)return;r=l}i.flags|=Rt.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!L8(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:l,value:d}=o;if(WO.release(o),!l)return;r=d}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=bd(t)}getDefaultOrigin(){return SE(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==kn.INITIALIZING?this._origin:ot.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&pk(r,n.get(s))&&~t.flags&Rt.Overridden&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),HH(this.host,t))}_cast(t,r){const i=WO.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},Pce=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const WO=new Tf(Pce);let Lce;function kce(){return Lce}var k8;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(k8||(k8={}));function Dce(e){e.length=0}let fn=class{constructor(t=50,r=50){this._pool=new Tf(Array,void 0,Dce,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return ZO.acquire()}static release(t){return ZO.release(t)}static prune(){ZO.prune()}};const ZO=new fn(100);let sW=class extends Tf{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const dS=[];function TE(e){dS.push(e),dS.length===1&&queueMicrotask(()=>{const t=dS.slice();dS.length=0;for(const r of t)r()})}let Qb=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var uC;(function(e){const t=(s,o,l,d)=>{let f=o,g=o;const v=l>>>1,b=s[f-1];for(;g<=v;){g=f<<1,g<l&&d(s[g-1],s[g])<0&&++g;const S=s[g-1];if(d(S,b)<=0)break;s[f-1]=S,f=g}s[f-1]=b},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,l,d){o===void 0&&(o=0),l===void 0&&(l=s.length),d===void 0&&(d=r);for(let g=l>>>1;g>o;g--)t(s,g,l,d);const f=o+1;for(let g=l-1;g>o;g--){const v=s[o];s[o]=s[g],s[g]=v,t(s,f,g,d)}}function*n(s,o,l,d){o===void 0&&(o=0),l===void 0&&(l=s.length),d===void 0&&(d=r);for(let g=l>>>1;g>o;g--)t(s,g,l,d),yield;const f=o+1;for(let g=l-1;g>o;g--){const v=s[o];s[o]=s[g],s[g]=v,t(s,f,g,d),yield}}e.sort=i,e.iterableSort=n})(uC||(uC={}));const D8=uC,jce=1.5,Fce=1.1;let Hp=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new fH,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>j8(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,j8(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=KR(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(KR(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=vue(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){D8.sort(this.data,0,this.length,t)}iterableSort(t){return D8.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)if(t.call(r,i[s]))return i[s]}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:n}=this;for(let s=0;s<n;++s)t.call(r,i[s],s,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function j8(e){e.data.length>jce*e.length&&(e.data.length=Math.floor(e.length*Fce))}function Uce(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return vt(()=>e.clearTimeout(i))}}}const Bg=Uce(globalThis);function rx(e){return Vce(e)||oW(e)}function Vce(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function oW(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function _w(e,t,r){if(!rx(e))throw new TypeError("target is not a Evented or EventTarget object");return oW(e)?zce(e,t,r):e.on(t,r)}function zce(e,t,r,i){if(Array.isArray(t)){const n=t.slice();for(const s of n)e.addEventListener(s,r,i);return vt(()=>{for(const s of n)e.removeEventListener(s,r,i)})}return e.addEventListener(t,r,i),vt(()=>e.removeEventListener(t,r,i))}function aW(e,t,r){if(!rx(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=_w(e,t,n=>{i.remove(),r.call(e,n)});return i}function kt(e="Aborted"){return new V("AbortError",e)}function hr(e,t="Aborted"){if(ms(e))throw kt(t)}function ww(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function ms(e){const t=ww(e);return t!=null&&t.aborted}function Ga(e){if(Ni(e))throw e}function F8(e){if(!Ni(e))throw e}function ro(e,t){const r=ww(e);if(r!=null){if(!r.aborted)return aW(r,"abort",()=>t());t()}}function _k(e,t){const r=ww(e);if(r!=null)return hr(r),aW(r,"abort",()=>t(kt()))}function lW(e,t){return ww(t)==null?e:new Promise((r,i)=>{let n=ro(t,()=>i(kt()));const s=()=>{n=nr(n)};e.then(s,s),e.then(r,i)})}function Ni(e){return(e==null?void 0:e.name)==="AbortError"}async function P_(e){try{return await e}catch(t){if(!Ni(t))throw t;return}}async function wk(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),n=await wk(i),s={};return r.map((o,l)=>s[o]=n[l]),s}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,n)=>{const s=r[n];return s.status==="fulfilled"?{promise:i,value:s.value}:{promise:i,error:s.reason}}))}async function Gce(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function k5e(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function uW(e,t=void 0,r){const i=new AbortController;return ro(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);ro(i,()=>{o&&(clearTimeout(o),s(kt()))})})}function D5e(e,t,r,i){const n=r&&"abort"in r?r:null;i!=null||n||(i=r);let s=setTimeout(()=>{s=0,n==null||n.abort()},t);const o=()=>i||new V("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(l=>{if(s===0)throw o();return clearTimeout(s),l},l=>{throw clearTimeout(s),s===0?o():l})}function Bce(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return ro(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function ll(e){return e&&typeof e.then=="function"}function cC(e){return ll(e)?e:Promise.resolve(e)}function ix(e,t=-1){let r,i,n,s,o=null;const l=(...d)=>{if(r){i=d,s&&s.reject(kt()),s=gs();const b=s.promise;if(o){const S=o;o=null,S.abort()}return b}if(n=s||gs(),s=null,t>0){const b=new AbortController;r=cC(e(...d,b.signal));const S=r;uW(t).then(()=>{r===S&&(s?b.abort():o=b)})}else r=1,r=cC(e(...d));const f=()=>{const b=i;i=n=r=o=null,b!=null&&l(...b)},g=r,v=n;return g.then(f,f),g.then(v.resolve,v.reject),v.promise};return l}function gs(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>Bg.setTimeout(()=>i.reject(s),n),i.promise=r,i}async function U8(e){await Promise.resolve(),hr(e)}function j5e(e){return e}function qce(e){return 1e3*e}function F5e(e){return e}function U5e(e){return .001*e}let Hce=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},Wce=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},dC=0;const av={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},hC=["prepare","preRender","render","postRender","update","finish"],pC=[],sf=new Hp;let Zce=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,cW()}};function Yce(){Wp!=null&&(cancelAnimationFrame(Wp),Wp=requestAnimationFrame(Sk))}function cW(){Wp==null&&(dC=performance.now(),Wp=requestAnimationFrame(Sk))}const EE={frameTasks:sf,willDispatch:!1,clearFrameTasks:Jce,dispatch:hW,executeFrameTasks:Xce,reschedule:Yce};function Sw(e){const t=new Wce(e);return pC.push(t),EE.willDispatch||(EE.willDispatch=!0,TE(hW)),t}function _g(e){const t=new Hce(e);return sf.push(t),cW(),new Zce(t)}let Wp=null;function Jce(e=!1){sf.forAll(t=>{t.removed=!0}),e&&dW()}function Sk(){const e=performance.now();Wp=null,Wp=sf.some(r=>!r.paused&&!r.removed)?requestAnimationFrame(Sk):null,EE.executeFrameTasks(e)}function Xce(e){const t=e-dC;dC=e;const r=1e3/60,i=Math.max(0,t-r);av.time=e,av.frameDuration=r-i;for(let n=0;n<hC.length;n++){const s=performance.now(),o=hC[n];sf.forAll(l=>{var d;l.paused||l.removed||(n===0&&l.ticks++,l.phases[o]&&(av.elapsedFrameTime=performance.now()-e,av.deltaTime=l.ticks===0?0:t,(d=l.phases[o])==null||d.call(l,av)))}),tde[n].push(performance.now()-s)}dW(),rde.push(performance.now()-e)}const hS=new Hp;function dW(){sf.forAll(e=>{e.removed&&hS.push(e)}),sf.removeUnorderedMany(hS.data,hS.length),hS.clear()}function hW(){for(;pC.length;){const e=pC.shift();e.isActive&&e.callback()}EE.willDispatch=!1}function Kce(e=1,t){const r=gs(),i=()=>{ms(t)?r.reject(kt()):e===0?r():(--e,TE(()=>i()))};return i(),r.promise}function Qce(e){return Kce(1,e)}async function ede(e){await Qce(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const tde=hC.map(e=>new Qb(e)),rde=new Qb("total");function pW(e,t){for(const r of e.values())if(t(r))return!0;return!1}function $E(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function V8(e,t){return t!=null&&e.add(t),e}function Tk(e,t){const r=new Set;return $E(r,e),$E(r,t),r}function ide(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function B5e(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function q5e(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function nde(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function sde(e,t){return nde(Tk(e,t),ide(e,t))}let ode=0;function C2(){return++ode}let nx=class extends tx{constructor(t){super(new ade(t)),this._observer&&z8.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&z8.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},ade=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=lde}};const z8=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function lde(){}let Zm=!1;const xE=[];function fW(e,t){let r=new nx(s),i=null,n=!1;function s(){if(!r||n)return;if(Zm)return void gW(s);const l=i;r.clear(),Zm=!0,n=!0,i=ku(r,e),n=!1,Zm=!1,t(i,l),vW()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=ku(r,e),n=!1,vt(o)}function yW(e,t){let r=new nx(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=ku(r,e),i):null}return o(),vt(s)}function mW(e,t){let r=!1,i=!1;const n=!!(t!=null&&t.sync);let s=new nx(()=>{r||i||(i=!0,n?o():queueMicrotask(o))});function o(){i=!1,s&&!r&&(Zm?gW(o):(s.clear(),Zm=!0,r=!0,ku(s,e),r=!1,Zm=!1,vW()))}function l(){s&&(s.destroy(),s=null)}return r=!0,ku(s,e),r=!1,vt(l)}function gW(e){xE.includes(e)||xE.unshift(e)}function vW(){for(;xE.length;)xE.pop()()}var e_;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(e_||(e_={}));let L_=class{constructor(){this.uid=C2(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(e_.Untracked,t,r,i,n,s,pk)}static acquireTracked(t,r,i,n){return this.pool.acquire(e_.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===e_.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,n,s,o,l){this.uid=C2(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=l}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=C2(),this.removed=!0}};L_.pool=new sW(L_);const I2=new fn,Mu=new Set;let AE;function ME(e){Mu.delete(e),Mu.add(e),AE||(AE=Sw(dde))}function ude(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function cde(e){for(const t of Mu.values())t.target===e&&(t.removed=!0)}function dde(){let e=10;for(;AE&&e--;){AE=null;const t=hde(),r=I2.acquire();for(const i of t){const n=i.uid;ude(i),n===i.uid&&i.removed&&r.push(i)}for(const i of Mu)i.removed&&(r.push(i),Mu.delete(i));for(const i of r)L_.pool.release(i);I2.release(r),I2.release(t),fC.forEach(i=>i())}}function hde(){const e=I2.acquire();e.length=Mu.size;let t=0;for(const r of Mu)e[t]=r,++t;return Mu.clear(),e}const fC=new Set;function pde(e){return fC.add(e),vt(()=>fC.delete(e))}function fde(e,t,r){let i=DH(e,t,r,(n,s,o)=>{let l,d,f=yW(()=>vw(n,s),(g,v)=>{var b;((b=n.__accessor__)==null?void 0:b.lifecycle)===kn.DESTROYED||l&&l.uid!==d?i.remove():(l||(l=L_.acquireUntracked(g,o,v,n,s),d=l.uid),ME(l))});return vt(()=>{f.remove(),l&&(l.uid!==d||l.removed||(l.removed=!0,ME(l)),l=null),i=f=null})});return i}function yde(e,t,r){const i=DH(e,t,r,(n,s,o)=>{let l=!1;return fW(()=>vw(n,s),(d,f)=>{n.__accessor__.lifecycle!==kn.DESTROYED?l||(l=!0,pk(f,d)||o.call(n,d,f,s,n),l=!1):i.remove()})});return i}function mde(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==kn.DESTROYED?i?yde(e,t,r):fde(e,t,r):vt()}function gde(e,t,r){let i,n,s=yW(e,(o,l)=>{i&&i.uid!==n?s.remove():(i||(i=L_.acquireTracked(o,t,l,r),n=i.uid),ME(i))});return vt(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,ME(i)),i=null),s=null})}function vde(e,t,r){let i=!1;return fW(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function bde(e,t,r=!1,i=xH){return r?vde(e,t,i):gde(e,t,i)}function G8(e){return pW(Mu,t=>t.oldValue===e)}var bW,_W;function _de(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const va=Symbol("Accessor-Handles"),yC=Symbol("Accessor-Initialized");let Ae=class N2{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...d){super(...d),this.inherited=null,n&&n.apply(this,d)}}bw(o.prototype);for(const l in t){const d=t[l];o.prototype[l]=typeof d=="function"?function(...f){const g=this.inherited;let v;this.inherited=function(...b){if(s.prototype[l])return s.prototype[l].apply(this,b)};try{v=d.apply(this,f)}catch(b){throw this.inherited=g,b}return this.inherited=g,v}:t[l]}for(const l in r){const d=_de(r[l]);h(d)(o.prototype,l)}return M(i)(o)}static freeze(t){return t instanceof N2?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof N2?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[bW]=null,this[_W]=!1,this.constructor===N2)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new Nce(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[yC]=!0}initialize(){}[GH](){this[va]=Zt(this[va])}destroy(){var t;this.destroyed||(cde(this),this.__accessor__.destroy(),(t=kce())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[yC]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===kn.DESTROYED||!1}commitProperty(t){Xa(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return gE(this,t,r),this}watch(t,r,i){return wce(ae.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),mde(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const n of i)n.remove();return}(this[va]??(this[va]=new Gg)).add(t,r)}removeHandles(t){var r;(r=this[va])==null||r.remove(t)}removeAllHandles(){var t;(t=this[va])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[va])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[va])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};bW=va,_W=yC;const wW=e=>{let t=class extends e{clone(){var d;const r=Vn(this);rW(r,"unable to clone instance of non-accessor class");const i=r.metadata,n=r.store,s={},o=new Map;for(const f in i){const g=i[f],v=n==null?void 0:n.originOf(f),b=g.clonable;if(g.readOnly||b===!1||v!==ot.USER&&v!==ot.DEFAULTS&&v!==ot.WEB_MAP&&v!==ot.WEB_SCENE)continue;const S=this[f];let T=null;T=typeof b=="function"?b(S):b==="reference"?S:QR(S),S!=null&&T==null||(v===ot.DEFAULTS?o.set(f,T):s[f]=T)}const l=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const f=(d=Vn(l))==null?void 0:d.store;if(f)for(const[g,v]of o)f.set(g,v,ot.DEFAULTS)}return l}};return t=u([M("esri.core.Clonable")],t),t};let Pv=class extends wW(Ae){};Pv=u([M("esri.core.Clonable")],Pv),function(e){e.ClonableMixin=wW}(Pv||(Pv={}));const He=Pv;let Bh=class extends He{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bh.prototype,"row",void 0),u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bh.prototype,"column",void 0),u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bh.prototype,"rows",void 0),u([h({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bh.prototype,"columns",void 0),Bh=u([M("esri.CameraLayout")],Bh);const SW=Bh,B8=new Float32Array(1);function X5e(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function so(e,t,r){return Math.min(Math.max(e,t),r)}function K5e(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function Lv(e,t,r){return e+(t-e)*r}function Q5e(e,t,r,i,n){return Lv(i,n,(e-t)/(r-t))}function sx(e){return e*Math.PI/180}function TW(e){return 180*e/Math.PI}function e4e(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function t4e(e){return Math.acos(so(e,-1,1))}function wde(e){return Math.asin(so(e,-1,1))}function ea(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}function EW(e,t,r=1e-6){return!ea(e,t,r)&&e>t}function mC(e,t,r=1e-6){return!ea(e,t,r)&&e<t}function Sde(e,t,r=1e-6){return ea(e,t,r)||e>t}const OE=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function gC(e){return OE.setFloat64(0,e),OE.getBigInt64(0)}function Tde(e){return OE.setBigInt64(0,e),OE.getFloat64(0)}const P2=BigInt("1000000"),Ede=$W(1);function $W(e){const t=gC(e=Math.abs(e)),r=Tde(t<=P2?P2:t-P2);return Math.abs(e-r)}function r4e(e,t,r=Ede){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&$W(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=gC(e),n=gC(t);return i<0!=n<0?!1:!((i<n?n-i:i-n)>P2)}function i4e(e){return xW(Math.max(-q8,Math.min(e,q8)))}function xW(e){return B8[0]=e,B8[0]}function n4e(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(ea(t,1)&&ea(r,1)&&ea(i,1))}const q8=xW(34028234663852886e22);function s4e(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}let Ek=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return H8(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return so(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+vC(this.range,t-r,i)}minimalMonotonic(t,r,i){return H8(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function H8(e,t,r,i,n=0,s=!1){return(i-=n)<t?i+=vC(e,t-i):i>r&&(i-=vC(e,i-r)),s&&i===r&&(i=t),i+n}function vC(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const a4e=new Ek(0,2*Math.PI),l4e=new Ek(-Math.PI,Math.PI),$de=new Ek(0,360);let xde=class AW{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new AW;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,U(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??ot.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var n;return((n=this._values.get(i))==null?void 0:n.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===ot.DEFAULTS){const n=this._values.get(t);if((n==null?void 0:n.origin)!=null&&n.origin>i)return}this._values.set(t,new Ade(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===ot.DEFAULTS?t:ot.USER}},Ade=class{constructor(t,r){this.value=t,this.origin=r}};function MW(e,t,r){t.keys().forEach(n=>{r.set(n,t.get(n),ot.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),ot.DEFAULTS)})}function Mde(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&w8(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&w8(n,r))return!0;return!1}function Ode(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Rde(e,t,r,i,n){let s=sC(t[r],n);Ode(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=sC(t[o],n),Mde(s,r,i)&&(e[o]=!0)}function Cde(e,t,r,i){const n=r.metadata,s=dce(n[t],i),o=s==null?void 0:s.default;if(o===void 0)return;const l=typeof o=="function"?o.call(e,t,i):o;l!==void 0&&r.set(t,l)}const OW={origin:"service"};function RW(e,t,r=OW){if(!t||typeof t!="object")return;const i=Vn(e),n=i.metadata,s={};for(const o of Object.getOwnPropertyNames(t))Rde(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const l=sC(n[o],r).read,d=l==null?void 0:l.source;let f;f=d&&typeof d=="string"?vw(t,d):t[o],l!=null&&l.reader&&(f=l.reader.call(e,f,t,r)),f!==void 0&&i.set(o,f)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||Cde(e,o,i,r)}i.setDefaultOrigin("user")}function CW(e,t,r,i=OW){var s;const n={...i,messages:[]};r(n),(s=n.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function Ide(e,t,r,i,n){var o,l;const s={};return(l=(o=t.write)==null?void 0:o.writer)==null||l.call(e,i,s,r,n),s}function IW(e,t,r,i,n,s){if(!(i!=null&&i.write))return!1;const o=Xa(e,r);if(!n&&i.write.overridePolicy){const l=i.write.overridePolicy.call(e,o,r,s??void 0);l!==void 0&&(n=l)}if(n||(n=i.write),!n||n.enabled===!1||n.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!n.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const l=new V("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return l&&(s!=null&&s.messages)?s.messages.push(l):l&&!s&&ae.getLogger("esri.core.accessorSupport.write").error(l.name,l.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||!n.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===ot.DEFAULTS)&&Nde(e,r,s,i,o)||!n.ignoreOrigin&&(s!=null&&s.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<bd(s.origin))}function Nde(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r??void 0);return Z$(o,n)}return!1}return s===n}function Pde(e,t,r,i){const n=Vn(e),s=n.metadata,o=eW(s[t],i);return!!o&&IW(e,n,t,o,r,i)}function NW(e,t,r){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return M2(t,e.toJSON(r));const i=Vn(e),n=i.metadata;for(const l in n){const d=eW(n[l],r);if(!IW(e,i,l,d,void 0,r))continue;const f=Xa(e,l),g=Ide(e,d,d.write&&typeof d.write.target=="string"?d.write.target:l,f,r);Object.keys(g).length>0&&(t=M2(t,g),(o=(s=r==null?void 0:r.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>M2(t,g,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:l,oldOrigin:Cce(i.store.originOf(l)),newOrigin:r.origin}))}return t}const PW=e=>{let t=class extends e{constructor(...r){super(...r);const i=Vn(this),n=i.store,s=new xde;i.store=s,MW(i,n,s)}read(r,i){RW(this,r,i)}write(r,i){return NW(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return Lde.call(this,r,i)}};return t=u([M("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Lde(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let kv=class extends PW(Ae){};kv=u([M("esri.core.JSONSupport")],kv),function(e){function t(r){return r&&typeof r=="object"&&"toJSON"in r&&typeof r.toJSON=="function"}e.JSONSupportMixin=PW,e.isSerializable=t}(kv||(kv={}));const W=kv,kde=Object.prototype.toString;function Dde(e){const t="__accessorMetadata__"in e?Or(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return jde.apply(this,r)}}function jde(e,t,r,i){ex(e,t).cast=i}function Fde(e){return(t,r)=>{ex(t,e).cast=t[r]}}function ft(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&kde.call(e[0])==="[object Function]"?Dde(e[0]):e.length===1&&typeof e[0]=="string"?Fde(e[0]):void 0}function se(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const l=s.constructor.prototype;i.forEach(d=>{const f=zH(s,d,n);f.read&&typeof f.read=="object"||(f.read={}),f.read.reader=l[o],r&&(f.read.source=(f.read.source||[]).concat(r))})}}function le(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const l=s.constructor.prototype;for(const d of i){const f=zH(s,d,n);f.write&&typeof f.write=="object"||(f.write={}),r&&(f.write.target=r),f.write.writer=l[o]}}}let We=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=Ude(t),this.apiValues=W8(this._apiToJSON),this.jsonValues=W8(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&Nr(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function Ude(e){const t={};for(const r in e)t[e[r]]=r;return t}function W8(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Wr(){return function(e,t){return new We(e,{ignoreUnknown:!0,...t})}}let $k=class{constructor(t,r,i,n,s,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=n,this.scaleHeight=s;const l=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*l,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const gr=new $k(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ka=new $k(3396190,1/169.8944472236118,23e4,6e4,.111),Nd=new $k(1737400,0,0,0,0),Vde=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,zde={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function Z8(e){const t=e==null?void 0:e.match(Vde);if(!t)return null;const[,r,i,n]=t;if(!r)return null;let s=null,o=null,l=null;const{devext:d,qaext:f,www:g}=zde;if(i)if(s=r,n)switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=d);break;case"qa":({customBaseUrl:o,portalHostname:l}=f);break;default:return null}else({customBaseUrl:o,portalHostname:l}=g);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:l}=d);break;case"qaext":({customBaseUrl:o,portalHostname:l}=f);break;case"www":({customBaseUrl:o,portalHostname:l}=g);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:l,urlKey:s}}function Gde(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function LW(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function kW(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function Bde(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const qde=()=>ae.getLogger("esri.core.urlUtils"),qg=Mt.request,Y8="esri/config: esriConfig.request.proxyUrl is not set.",DW=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,jW=/^\s*http:/i,Hde=/^\s*https:/i,Wde=/^\s*file:/i,Zde=/:\d+$/,Yde=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Jde=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Xde=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Zp=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(Jde);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(Xde),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const pS={},Kde=new Zp(Mt.applicationUrl);let Wi=Kde;const Qde=ehe();let xk=Qde;const Ak=()=>Wi,f4e=()=>xk;function ehe(){const e=Wi.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${Wi.scheme}://${Wi.host}${Wi.port!=null?`:${Wi.port}`:""}`}${t}`}function oi(e){if(!e)return null;const t={path:null,query:null},r=new Zp(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=Mk(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function Mk(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let l=r[s];typeof l=="string"&&(l=r[s]=[l]),Array.isArray(l)?l.push(o):r[s]=o}return r}function k_(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t==null?void 0:t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>W.isSerializable(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):W.isSerializable(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function FW(e=!1){let t,r=qg.proxyUrl;if(typeof e=="string"){t=GW(e);const i=ox(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw qde().warn(Y8),new V("urlUtils:proxy-not-set",Y8);return t&&_C()&&(r=Nk(r)),oi(r)}function y4e(e,t=!1){const r=ox(e);let i,n;if(r){const s=Ok(r.proxyUrl);i=s.path,n=s.query?Mk(s.query):null}else if(t){const s=FW(e);i=s.path,n=s.query}if(i){const s=oi(e);e=i+"?"+s.path;const o=k_({...n,...s.query});o&&(e=`${e}?${o}`)}return e}const lv={path:"",query:""};function Ok(e){const t=e.indexOf("?");return t!==-1?(lv.path=e.slice(0,t),lv.query=e.slice(t+1)):(lv.path=e,lv.query=null),lv}function UW(e){return e=(e=CE(e=dhe(e=Ok(e).path),!0)).toLowerCase()}function the(e){const t={proxyUrl:e.proxyUrl,urlPrefix:UW(e.urlPrefix)},r=qg.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function ox(e){const t=qg.proxyRules,r=UW(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function rhe(e,t){if(!e||!t)return!1;e=RE(e),t=RE(t);const r=Z8(e),i=Z8(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&wg(e,t,!0)}function VW(e,t){return e=RE(e),t=RE(t),CE(e)===CE(t)}function RE(e){const t=(e=ta(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function bC(e,t=qg.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function wg(e,t,r=!1){if(!e||!t)return!1;const i=SC(e),n=SC(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function Rk(e){if(typeof e=="string"){if(!fs(e))return!0;e=SC(e)}if(wg(e,Wi))return!0;const t=qg.trustedServers||[];for(let r=0;r<t.length;r++){const i=ihe(t[r]);for(let n=0;n<i.length;n++)if(wg(e,i[n]))return!0}return!1}function ihe(e){return pS[e]||(Ik(e)||tl(e)?pS[e]=[new Zp(cs(e))]:pS[e]=[new Zp(`http://${e}`),new Zp(`https://${e}`)]),pS[e]}function cs(e,t=xk,r){return tl(e)?r!=null&&r.preserveProtocolRelative?e:Wi.scheme==="http"&&Wi.authority===ps(e).slice(2)?`http:${e}`:`https:${e}`:Ik(e)?e:Sg(e[0]==="/"?uhe(t):t,e)}function Ck(e,t=xk,r){if(e==null||!fs(e))return e;const i=ta(e),n=i.toLowerCase(),s=ta(t).toLowerCase().replace(/\/+$/,""),o=r?ta(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const l=(v,b,S)=>(S=v.indexOf(b,S))===-1?v.length:S;let d=l(n,"/",n.indexOf("//")+2),f=-1;for(;n.slice(0,d+1)===s.slice(0,d)+"/"&&(f=d+1,d!==n.length);)d=l(n,"/",d+1);if(f===-1||o&&f<o.length)return e;e=i.slice(f);const g=s.slice(f-1).replaceAll(/[^/]+/g,"").length;if(g>0)for(let v=0;v<g;v++)e=`../${e}`;else e=`./${e}`;return e}function ta(e){return e=fhe(e=phe(e=hhe(e=cs(e=e.trim()))))}function Sg(...e){const t=e.filter(Lu);if(!(t!=null&&t.length))return;const r=[];if(fs(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),ahe(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function ps(e,t=!1){if(e==null||ax(e)||Fu(e))return null;let r=e.indexOf("://");if(r===-1&&tl(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=CE(e,!0)),e}function fs(e){return tl(e)||Ik(e)}function ax(e){return e!=null&&e.slice(0,5)==="blob:"}function Fu(e){return e!=null&&e.slice(0,5)==="data:"}function nhe(e){const t=of(e);return t!=null&&t.isBase64?kW(t.data):null}function m4e(e){return Bde(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const she=/^data:(.*?)(;base64)?,(.*)$/;function of(e){const t=e.match(she);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function zW(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function g4e(e){return(await fetch(e)).blob()}function v4e(e){const t=nhe(e);if(!t)return null;const r=of(e);return new Blob([t],{type:r.mediaType})}function tl(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function Ik(e){return e!=null&&DW.test(e)}function GW(e){return e!=null&&Hde.test(e)||Wi.scheme==="https"&&tl(e)}function ohe(e){return e!=null&&jW.test(e)||Wi.scheme==="http"&&tl(e)}function ahe(e){return e!=null&&Wde.test(e)}function Nk(e){return tl(e)?`https:${e}`:e.replace(jW,"https:")}function lhe(){return Wi.scheme==="http"}function _C(){return Wi.scheme==="https"}function CE(e,t=!1){return tl(e)?e.slice(2):(e=e.replace(DW,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function uhe(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function che(e){let t=0;if(fs(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function b4e(e,t){if(!e)return"";const r=oi(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const n=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(n,"")}function dhe(e){return e.endsWith("/")?e:`${e}/`}function BW(e){return e.replace(/\/+$/,"")}function hhe(e){if(/^https?:\/\//i.test(e)){const t=Ok(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function phe(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function fhe(e){const t=qg.httpsDomains;if(!ohe(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),Zde.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return lhe()&&i===Wi.authority&&!Yde.test(e)||(_C()&&i===Wi.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||_C()&&!ox(e))&&(e=Nk(e)),e}function wC(e,t,r){if(!(t&&r&&e&&fs(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function SC(e){return typeof e=="string"?new Zp(cs(e)):(e.scheme||(e.scheme=Wi.scheme),e)}function _4e(e){return yhe.test(e)}function qW(e,t){const r=oi(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function HW(e,t,r){const i=oi(e),n=i.query||{};return n[t]=String(r),`${i.path}?${k_(n)}`}function YO(e,t){if(!t)return e;const r=oi(e),i=r.query||{};for(const[s,o]of Object.entries(t))o!=null&&(i[s]=o);const n=k_(i);return n?`${r.path}?${n}`:r.path}function w4e(e){if(e==null)return null;const t=e.match(WW);return t?t[2]:null}function J8(e){if(e==null)return null;const t=e.match(WW);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function S4e(e){return typeof e=="string"?of(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(of(i.result)),i.onerror=n=>r(n)})}const WW=/([^.]*)\.([^/]*)$/,yhe=/(^data:image\/svg|\.svg$)/i,ZW="20250307",YW="d09bc9aef44b4794bed8c3513046c5d8ba023b76";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const JW="4.32";let Ze,Pk=JW;Pk="4.32.8";function T4e(e){Ze=e}function E4e(e){const t=Ze==null?void 0:Ze.findCredential(e);return t!=null&&t.token?HW(e,"token",t.token):e}Z("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),Z("host-webworker");function Hg(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=cs(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=Ck(e,t.portalItem.itemUrl);n!=null&&mhe.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=TC(e,t==null?void 0:t.portal))&&lx.test(e)?kk(e):e}function Tw(e,t,r=D_.YES){var n,s;if((e=e&&lx.test(e)?KW(e):e)==null)return e;!fs(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=cs(e);if(t){const o=((n=t.verifyItemRelativeUrls)==null?void 0:n.rootPath)||((s=t.url)==null?void 0:s.path);if(o){const l=TC(o,t.portal),d=TC(i,t.portal);i=Ck(d,l,l),i!=null&&i!==d&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=XW(i,t==null?void 0:t.portal),fs(i)&&(i=ta(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!fs(i)&&!Fu(i)&&r===D_.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function Lk(e,t,r){return Hg(e,r)}function af(e,t,r,i){const n=Tw(e,i);n!==void 0&&(t[r]=n)}const lx=/\/items\/([^/]+)\/resources\/(.*)/,mhe=/^\.\/resources\//;function ghe(e){const t=(e==null?void 0:e.match(lx))??null;return(t==null?void 0:t[1])??null}function vhe(e){const t=(e==null?void 0:e.match(lx))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:l}=J8(r);return{prefix:null,filename:o,extension:l}}const{path:n,extension:s}=J8(r.slice(i+1));return{prefix:r.slice(0,i),filename:n,extension:s}}function XW(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?wC(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function TC(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=Ak();return wg(i,`${i.scheme}://${r}`)?wC(e,t.portalHostname,r):wC(e,r,t.portalHostname)}function kk(e){if(!e)return e||null;let t=e;return t&&Ze&&!Ze.findCredential(t)&&(t=LW(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function KW(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Ze&&!Ze.findCredential(t)&&(t=LW(t)),t}var D_;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(D_||(D_={}));const $4e=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return D_},ensureMainOnlineDomain:XW,fromCDNUrl:KW,fromJSON:Hg,itemIdFromResourceUrl:ghe,prefixAndFilenameFromResourceUrl:vhe,read:Lk,toCDNUrl:kk,toJSON:Tw,write:af},Symbol.toStringTag,{value:"Module"})),QW={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},eZ=Object.values(QW),tZ=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${eZ.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),bhe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${eZ.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),_he=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function x4e(e){return tZ.test(e)}function Pd(e){if(e==null)return null;const t=oi(e),r=(t==null?void 0:t.path.match(tZ))||(t==null?void 0:t.path.match(bhe));if(!r)return null;const[,i,n,s,o]=r,l=n.indexOf("/");return{title:Dk(l!==-1?n.slice(l+1):n),serverType:QW[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function whe(e){const t=oi(e).path.match(_he);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function Dk(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function She(e,t){const r=[];if(e){const i=Pd(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=Dk(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function IE(e){let t=ps(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function The(e,t){return e&&BW(qW(e,t))}function Ehe(e){let{url:t}=e;if(!t)return{url:t};t=qW(t,e.logger);const r=oi(t),i=Pd(r.path);let n;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=whe(r.path);s!=null&&(t=s.serviceUrl,n=s.sublayerId)}return{url:BW(t),layerId:n}}function $he(e,t,r,i,n){af(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=Sg(i.url,r,e.layerId.toString()))}function A4e(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}function M4e(e){var i;if(!e)return!1;const t=new Zp(cs(e)),r=(i=t.authority)==null?void 0:i.toLowerCase();return r==="server.arcgisonline.com"||r==="services.arcgisonline.com"}const xhe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Ahe(e){const t=ps(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!xhe.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function rZ(e,t){return!(!Mt.apiKey||!Ahe(e))}function Mhe(e,t,r=!1,i){return new Promise((n,s)=>{if(ms(i))return void s(X8());let o=()=>{f(),s(new Error(`Unable to load ${t}`))},l=()=>{const g=e;f(),n(g)},d=()=>{if(!e)return;const g=e;f(),g.src="",s(X8())};const f=()=>{Z("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",l)),o=null,l=null,e=null,i!=null&&i.removeEventListener("abort",d),d=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",d),Z("esri-image-decode")?e.decode().then(l,o):(e.addEventListener("error",o),e.addEventListener("load",l))})}function X8(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const iZ="Timeout exceeded";function Ohe(){return new Error(iZ)}function O4e(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===iZ}function Rhe(e){Mt.request.crossOriginNoCorsDomains||(Mt.request.crossOriginNoCorsDomains={});const t=Mt.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[ps(r)??""]=0:(t[ps("http://"+r)??""]=0,t[ps("https://"+r)??""]=0)}function Che(e){const t=Mt.request.crossOriginNoCorsDomains;if(t){let r=ps(e);if(r)return r=r.toLowerCase(),!wg(r,Ak())&&t[r]<Date.now()-36e5}return!1}async function Ihe(e){var n;const t=oi(e);e=t.path,((n=t.query)==null?void 0:n.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=Mt.request.crossOriginNoCorsDomains,i=ps(e);r&&i&&(r[i.toLowerCase()]=Date.now())}async function mt(e,t){var S;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=Mk(t.query.toString().replaceAll("+"," ")));const r=Fu(e),i=ax(e);i||r||(e=ta(e));const n={url:e,requestOptions:{...t}},s=T=>({data:T,getAllHeaders:Tg,getHeader:Tg,httpStatus:200,requestOptions:n.requestOptions,url:n.url}),o=bC(e,qs.internalInterceptors);if(o){const T=await Q8(o,n);if(T!=null)return s(T)}let l=bC(e);if(l){const T=await Q8(l,n);if(T!=null)return s(T);l.after||l.error||(l=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"&&(Z("host-webworker")||Z("host-node")))throw ra("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n);if(t.method==="head"){if(t.body)throw ra("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw ra("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Dhe(),NE)return NE.execute(e,t);const d=new AbortController,f=ro(t,()=>d.abort()),g={controller:d,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:l,params:n,redoRequest:!1,useIdentity:qs.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},v=t.useRequestQueue?zhe(g):$C(g),b=await v.finally(()=>f==null?void 0:f.remove());return(S=l==null?void 0:l.after)==null||S.call(l,b),b}let NE;const qs=Mt.request,nZ="FormData"in globalThis,Nhe=new Set([499,498,403,401]),Phe=new Set(["COM_0056","COM_0057","SB_0008"]),Lhe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Tg=()=>null,PE=Symbol();function khe(e){const t=ps(e);t&&!mt._corsServers.includes(t)&&mt._corsServers.push(t)}function K8(e){const t=ps(e);return!t||t.endsWith(".arcgis.com")||mt._corsServers.includes(t)||Rk(t)}function ra(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getAllHeaders:Tg,getHeader:Tg,ssl:!1};if(t instanceof V)return t.details?(t.details=U(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(()=>Array.from(i.headers)),l=i&&(g=>i.headers.get(g)),d=i==null?void 0:i.status,f=t.message;f&&(n=f),o&&l&&(s.getAllHeaders=o,s.getHeader=l),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||d||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=PE in t?t[PE]:t}return Ni(t)?kt():new V(e,n,s)}async function Dhe(){Z("host-webworker")&&!NE&&(NE=await ne(()=>import("./request-BJgm-ANZ.js"),[]))}async function EC(){Ze||await ne(()=>import("./IdentityManager-Cscpjfh7.js"),__vite__mapDeps([0,1]))}async function jhe(e){var l;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null;if(nZ&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:qs.priority,redirect:"follow",signal:i},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(l=r.query)!=null&&l.token||s!=null&&s.get("token")),!e.hasToken&&rZ(t)&&(r.query||(r.query={}),r.query.token=Mt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!sZ(t)&&!ms(i)){let d;r.authMode==="immediate"?(await EC(),d=await Ze.getCredential(t,{signal:i}),e.credential=d):r.authMode==="no-prompt"?(await EC(),d=await Ze.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=d):Ze&&(d=Ze.findCredential(t)),d&&(e.credentialToken=d.token,e.useSSL=!!d.ssl)}}function sZ(e){return Lhe.some(t=>t.test(e))}async function Fhe(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},n=ax(t)||Fu(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:qs.timeout;let l=!1;if(!n){e.useSSL&&(t=Nk(t));let b={...r.query};e.credentialToken&&(b.token=e.credentialToken);let S=k_(b);Z("esri-url-encodes-apostrophe")&&(S=S.replaceAll("'","%27"));const T=t.length+1+S.length;let E;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||T>qs.maxUrlLength;const x=r.useProxy||!!ox(t);if(x){const O=FW(t);E=O.path,!l&&E.length+1+T>qs.maxUrlLength&&(l=!0),O.query&&(b={...O.query,...b})}if(i.method==="HEAD"&&(l||x)){if(l)throw T>qs.maxUrlLength?ra("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ra("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(x)throw ra("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(l?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=YO(t,b):(i.body=k_(b),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=YO(t,b),x&&(e.useProxy=!0,t=`${E}?${t}`),b.token&&nZ&&i.body instanceof FormData&&!Gde(t)&&i.body.set("token",b.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!wg(t,Ak())){if(Rk(t))e.withCredentials=!0;else if(Ze){const O=Ze.findServerInfo(t);O!=null&&O.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",Che(t)&&await Ihe(l?YO(t,b):t))}let d,f,g=0,v=!1;o>0&&(g=setTimeout(()=>{v=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")f=i,f.url=t,r.signal?f.signal=r.signal:delete f.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||l||Uhe(r.headers)||!n&&!e.useProxy&&qs.proxyUrl&&!K8(t)){if(mt._beforeFetch&&await mt._beforeFetch(t,i),d=await fetch(t,i),mt._afterFetch&&await mt._afterFetch(d),e.useProxy||khe(t),r.responseType==="native")f=d;else if(i.method!=="HEAD")if(d.ok){switch(s){case"array-buffer":f=await d.arrayBuffer();break;case"blob":case"image":f=await d.blob();break;default:f=await d.text()}if(g&&(clearTimeout(g),g=0),s==="json"||s==="xml"||s==="document")if(f)switch(s){case"json":f=JSON.parse(f);break;case"xml":f=eU(f,"application/xml");break;case"document":f=eU(f,"text/html")}else f=null;if(f){if(s==="array-buffer"||s==="blob"){const b=d.headers.get("Content-Type");if(b&&/application\/json|text\/plain/i.test(b)&&f[s==="blob"?"size":"byteLength"]<=750)try{const S=await new Response(f).json();S.error&&(f=S)}catch{}}s==="image"&&f instanceof Blob&&(f=await tU(URL.createObjectURL(f),e,!0))}}else{f=await d.text();try{f=JSON.parse(f)}catch{}}}else f=await tU(t,e)}catch(b){if(b.name==="AbortError")throw v?Ohe():kt("Request canceled");if(!(!d&&b instanceof TypeError&&qs.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||K8(t))throw b;e.redoRequest=!0,the({proxyUrl:qs.proxyUrl,urlPrefix:ps(t)??""})}finally{g&&clearTimeout(g)}return[d,f]}async function Q8(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=ra("request:interceptor",n,t)}if((i instanceof Error||i instanceof V)&&(r=ra("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function Uhe(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function eU(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}mt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],mt._beforeFetch=void 0,mt._afterFetch=void 0;const Vhe=new Map;async function zhe(e){const t=Bhe(e.params.url);if(!t)return $C(e);const{QueueProcessor:r}=await ne(()=>import("./QueueProcessor-B6mF9TCR.js"),[]);return fw(Vhe,t.origin,()=>{const n=t.isHosted?Z("request-queue-concurrency-hosted"):Z("request-queue-concurrency-non-hosted");return new r({concurrency:n,process:s=>{if(ms(s.params.requestOptions))throw ra("",kt("Request canceled"),s.params);return $C(s)}})}).push(e)}async function $C(e){var s,o;let t,r;await jhe(e);try{do[t,r]=await Fhe(e);while(!await Ghe(e,t,r))}catch(l){const d=ra("request:server",l,e.params,t);throw d.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(d),d}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!Rk(i)){const l=ps(i,!0);l&&qs.trustedServers.push(l)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&Rhe(r.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&Ze){const l=Ze.findServerInfo(n.server);let d=l==null?void 0:l.owningSystemUrl;if(d){d=d.replace(/\/?$/,"/sharing");const f=Ze.findCredential(d,n.userId);f&&Ze._getIdenticalSvcIdx(d,f)===-1&&f.resources.unshift(d)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):Tg,getHeader:t?l=>t.headers.get(l):Tg,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Ghe(e,t,r){var f;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s;if(r&&(r.error&&typeof r.error=="object"?n=r.error:r.status==="error"&&Array.isArray(r.messages)&&(n={...r},n[PE]=r,n.details=r.messages)),!n&&!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[PE]=r,n;let o,l=null;n&&(s=Number(n.code),l=n.hasOwnProperty("subcode")?Number(n.subcode):null,o=n.messageCode,o=o==null?void 0:o.toUpperCase());const d=i.authMode;if(s===403&&(l===4||(f=n.message)!=null&&f.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(d!=="no-prompt"||s===498)&&s!==void 0&&Nhe.has(s)&&!sZ(e.params.url)&&(s!==403||(!o||!Phe.has(o))&&(l==null||l===2&&e.credentialToken))){await EC();try{const g=await Ze.getCredential(e.params.url,{error:ra("request:server",n,e.params),prompt:d!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=g,e.credentialToken=g.token,e.useSSL=e.useSSL||g.ssl,!1}catch(g){if(d==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;n=g}}if(n)throw n;return!0}function tU(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=qs.priority,n.src=e,Mhe(n,e,r,i)}function Bhe(e){let t,r;return typeof e=="string"?(t=ps(e,!0),r=IE(e)):(t=e.origin,r=IE(e.toString())),t==null?null:{origin:t,isHosted:r}}function $r(e){if(!Mt.assetsPath)throw ae.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new V("assets:path-not-set","config.assetsPath is not set");return Sg(Mt.assetsPath,e)}let JO,F=null;function jk(){return!!F}function qhe(){return!!Z("esri-wasm")}function oZ(){return JO||(JO=ne(()=>import("./pe-wasm-Co3DzcyP.js"),__vite__mapDeps([2,3])).then(e=>e.p).then(({default:e})=>e({locateFile:t=>$r(`esri/geometry/support/${t}`)})).then(e=>{uZ(e)}),JO)}var xC,ir;(function(e){function t(s,o,l){F.ensureCache.prepare();const d=Ip(l),f=l===d,g=F.ensureFloat64(d),v=F._pe_geog_to_proj(F.getPointer(s),o,g);return v&&fd(l,o,g,f),v}function r(s,o,l,d){switch(d){case ir.PE_TRANSFORM_P_TO_G:return i(s,o,l);case ir.PE_TRANSFORM_G_TO_P:return t(s,o,l)}return 0}function i(s,o,l){return n(s,o,l,0)}function n(s,o,l,d){F.ensureCache.prepare();const f=Ip(l),g=l===f,v=F.ensureFloat64(f),b=F._pe_proj_to_geog_center(F.getPointer(s),o,v,d);return b&&fd(l,o,v,g),b}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(xC||(xC={})),function(e){function t(){e.PE_BUFFER_MAX=F.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=F.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=F.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=F.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=F.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=F.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=F.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=F.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=F.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=F.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=F.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=F.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=F.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=F.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=F.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=F.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=F.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=F.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=F.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=F.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=F.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=F.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=F.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=F.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=F.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=F.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=F.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=F.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=F.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=F.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=F.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=F.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(ir||(ir={}));let aZ=null;var AC;(function(e){const t={},r={},i=S=>{const T=S.getType();switch(T){case ir.PE_TYPE_GEOGCS:S=F.castObject(S,F.PeGeogcs);break;case ir.PE_TYPE_PROJCS:S=F.castObject(S,F.PeProjcs);break;case ir.PE_TYPE_GEOGTRAN:S=F.castObject(S,F.PeGeogtran);break;default:T&ir.PE_TYPE_UNIT&&(S=F.castObject(S,F.PeUnit))}return S};function n(){F.PeFactory.prototype.initialize(null)}function s(S){return o(ir.PE_TYPE_COORDSYS,S)}function o(S,T){let E=null,x=t[S];if(x||(x={},t[S]=x),x.hasOwnProperty(String(T))&&(E=x[T],F.compare(E,F.NULL)&&(E=null)),!E){const O=F.PeFactory.prototype.factoryByType(S,T);F.compare(O,F.NULL)||(E=i(O),x[T]=E)}return E}function l(S,T){let E=null,x=r[S];if(x||(x={},r[S]=x),x.hasOwnProperty(T)&&(E=x[T],F.compare(E,F.NULL)&&(E=null)),!E){const O=F.PeFactory.prototype.fromString(S,T);F.compare(O,F.NULL)||(E=i(O),x[T]=E)}return E}function d(S){return o(ir.PE_TYPE_GEOGCS,S)}function f(S){return o(ir.PE_TYPE_GEOGTRAN,S)}function g(S){return F.PeFactory.prototype.getCode(S)}function v(S){return o(ir.PE_TYPE_PROJCS,S)}function b(S){return o(ir.PE_TYPE_UNIT,S)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=l,e.geogcs=d,e.geogtran=f,e.getCode=g,e.projcs=v,e.unit=b})(AC||(AC={}));let lZ=null;var LE,MC,OC,RC,CC,IC,kE,NC,DE,jE,PC;function uZ(e){function t(s,o,l){s[o]=l(s[o])}F=e,ir.init(),LE.init(),kE.init(),DE.init(),jE.init(),aZ=class extends F.PeDouble{constructor(s=NaN){super(s)}destroy(){F.destroy(this)}[Symbol.dispose](){this.destroy()}},lZ=class extends F.PeGCSExtent{destroy(){F.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[F.PeAngunit,F.PeDatum,F.PeGeogcs,F.PeGeogtran,F.PeObject,F.PeParameter,F.PePrimem,F.PeProjcs,F.PeSpheroid,F.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(ir.PE_NAME_MAX))});for(const s of[F.PeGeogtran,F.PeProjcs])t(s.prototype,"getParameters",o=>function(){const l=new Array(ir.PE_PARM_MAX);let d=o.call(this);for(let f=0;f<l.length;f++){const g=F.getValue(d,"*");l[f]=g?F.wrapPointer(g,F.PeParameter):null,d+=Int32Array.BYTES_PER_ELEMENT}return l});t(F.PeHorizon.prototype,"getCoord",s=>function(o=!1){const l=this.getSize();if(!l)return null;const d=[];return fd(d,l,s.call(this),o),d}),t(F.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=F._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;const d=s.call(this);if(!F.compare(d,F.NULL)){l=[d];const f=this.getSteps();if(f>1){const g=F.getPointer(d);for(let v=1;v<f;v++)l.push(F.wrapPointer(g+o*v,F.PeGTlistExtendedGTs))}}return l}});const i=F._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let l=null;const d=s.call(this);if(!F.compare(d,F.NULL)){l=[d];const f=d.getNump();if(f>1){const g=F.getPointer(d);for(let v=1;v<f;v++)l.push(F.wrapPointer(g+i*v,F.PeHorizon))}}return o.set(s,l),l};t(F.PeProjcs.prototype,"horizonGcsGenerate",n),t(F.PeProjcs.prototype,"horizonPcsGenerate",n),F.PeObject.prototype.toString=function(s=ir.PE_STR_OPTS_NONE){F.ensureCache.prepare();const o=F.getPointer(this),l=F.ensureInt8(new Array(ir.PE_BUFFER_MAX));return F.UTF8ToString(F._pe_object_to_string_ext(o,s,l))},F.PeGeogcs.prototype.destroy=function(){this.Delete(),Bo(this),this.ptr=0},F.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},F.PeProjcs.prototype.destroy=function(){this.Delete(),Bo(this),this.ptr=0},F.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Bo(e){if(!e)return;const t=F.getClass(e);if(!t)return;const r=F.getCache(t);if(!r)return;const i=F.getPointer(e);i&&delete r[i]}function fS(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(F.ensureInt8(i));return r}function Ip(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function fd(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=F.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=F.getValue(r,"double"),e[s][1]=F.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=F.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=F._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,l,d,f){let g=null;const v=new F.PeInteger(f);try{const b=F.PeGTlistExtended.prototype.getGTlist(n,s,o,l,d,v);if((f=v.val)&&(g=[b],f>1)){const S=F.getPointer(b);for(let T=1;T<f;T++)g.push(F.wrapPointer(S+t*T,F.PeGTlistExtendedEntry))}}finally{F.destroy(v)}return g}e.init=r,e.getGTlist=i})(LE||(LE={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)Bo(i),i.getEntries().forEach(n=>{Bo(n);const s=n.getGeogtran();Bo(s),s.getParameters().forEach(Bo),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Bo(o);const l=o.getDatum();Bo(l),Bo(l.getSpheroid()),Bo(o.getPrimem()),Bo(o.getUnit())})});F.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(MC||(MC={})),function(e){function t(r,i,n,s,o){F.ensureCache.prepare();const l=Ip(n),d=n===l,f=F.ensureFloat64(l);let g=0;s&&(g=F.ensureFloat64(s));const v=F._pe_geog_to_geog(F.getPointer(r),i,f,g,o);return v&&fd(n,i,f,d),v}e.geogToGeog=t}(OC||(OC={})),function(e){function t(s,o,l,d,f,g,v,b){F.PeLineType.prototype.geodesic_coordinate(s,o,l,d,f,g,v,b)}function r(s,o,l,d,f,g,v,b,S){F.PeLineType.prototype.geodetic_coordinate(s,o,l,d,f,g,v,b,S)}function i(s,o,l,d,f,g,v,b,S,T){F.PeLineType.prototype.geodetic_distance(s,o,l,d,f,g,v,b,S,T)}function n(s,o,l,d,f,g,v,b,S){F.PeLineType.prototype.great_elliptic_distance(s,o,l,d,f,g,v,b,S)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=n}(RC||(RC={})),function(e){function t(o,l){return F.PeMath.prototype.phi_to_eta(o,l)}function r(o,l){return F.PeMath.prototype.eta_to_phi(o,l)}function i(o,l){return F.PeMath.prototype.phi_to_phig(o,l)}function n(o,l,d){return F.PeMath.prototype.q(o,l,d)}function s(o,l){return F.PeMath.prototype.q90(o,l)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=n,e.q90=s}(CC||(CC={})),function(e){const t=(f,g,v,b,S,T)=>{let E,x;switch(F.ensureCache.prepare(),f){case"dd":E=F._pe_geog_to_dd,x=ir.PE_DD_MAX;break;case"ddm":E=F._pe_geog_to_ddm,x=ir.PE_DDM_MAX;break;case"dms":E=F._pe_geog_to_dms,x=ir.PE_DMS_MAX}let O=0;g&&(O=F.getPointer(g));const C=Ip(b),I=F.ensureFloat64(C),P=fS(v,x),k=E(O,v,I,S,F.ensureInt32(P));if(k)for(let D=0;D<v;D++)T[D]=F.UTF8ToString(P[D]);return k},r=(f,g,v,b,S)=>{let T;switch(F.ensureCache.prepare(),f){case"dd":T=F._pe_dd_to_geog;break;case"ddm":T=F._pe_ddm_to_geog;break;case"dms":T=F._pe_dms_to_geog}let E=0;g&&(E=F.getPointer(g));const x=b.map(P=>F.ensureString(P)),O=F.ensureInt32(x),C=F.ensureFloat64(new Array(2*v)),I=T(E,v,O,C);return I&&fd(S,v,C),I};function i(f,g,v,b,S){return t("dms",f,g,v,b,S)}function n(f,g,v,b){return r("dms",f,g,v,b)}function s(f,g,v,b,S){return t("ddm",f,g,v,b,S)}function o(f,g,v,b){return r("ddm",f,g,v,b)}function l(f,g,v,b,S){return t("dd",f,g,v,b,S)}function d(f,g,v,b){return r("dd",f,g,v,b)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=l,e.ddToGeog=d}(IC||(IC={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=F.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=F.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=F.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,l,d,f,g){F.ensureCache.prepare();let v=0;n&&(v=F.getPointer(n));const b=Ip(o),S=F.ensureFloat64(b),T=fS(s,ir.PE_MGRS_MAX),E=F.ensureInt32(T),x=F._pe_geog_to_mgrs_extended(v,s,S,l,d,f,E);if(x)for(let O=0;O<s;O++)g[O]=F.UTF8ToString(T[O]);return x}function i(n,s,o,l,d){F.ensureCache.prepare();let f=0;n&&(f=F.getPointer(n));const g=o.map(T=>F.ensureString(T)),v=F.ensureInt32(g),b=F.ensureFloat64(new Array(2*s)),S=F._pe_mgrs_to_geog_extended(f,s,v,l,b);return S&&fd(d,s,b),S}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(kE||(kE={})),function(e){function t(i,n,s,o,l,d,f){F.ensureCache.prepare();let g=0;i&&(g=F.getPointer(i));const v=Ip(s),b=F.ensureFloat64(v),S=fS(n,ir.PE_MGRS_MAX),T=F.ensureInt32(S),E=F._pe_geog_to_usng(g,n,b,o,l,d,T);if(E)for(let x=0;x<n;x++)f[x]=F.UTF8ToString(S[x]);return E}function r(i,n,s,o){F.ensureCache.prepare();let l=0;i&&(l=F.getPointer(i));const d=s.map(b=>F.ensureString(b)),f=F.ensureInt32(d),g=F.ensureFloat64(new Array(2*n)),v=F._pe_usng_to_geog(l,n,f,g);return v&&fd(o,n,g),v}e.geogToUsng=t,e.usngToGeog=r}(NC||(NC={})),function(e){function t(){e.PE_UTM_OPTS_NONE=F.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=F.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=F.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,l,d){F.ensureCache.prepare();let f=0;n&&(f=F.getPointer(n));const g=Ip(o),v=F.ensureFloat64(g),b=fS(s,ir.PE_UTM_MAX),S=F.ensureInt32(b),T=F._pe_geog_to_utm(f,s,v,l,S);if(T)for(let E=0;E<s;E++)d[E]=F.UTF8ToString(b[E]);return T}function i(n,s,o,l,d){F.ensureCache.prepare();let f=0;n&&(f=F.getPointer(n));const g=o.map(T=>F.ensureString(T)),v=F.ensureInt32(g),b=F.ensureFloat64(new Array(2*s)),S=F._pe_utm_to_geog(f,s,v,l,b);return S&&fd(d,s,b),S}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(DE||(DE={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=F.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=F.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=F.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=F.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,l=null;return t.has(n)&&(l=t.get(n),l[s]&&(o=l[s])),o||(o=F.PePCSInfo.prototype.generate(n,s),l||(l=[],t.set(n,l)),l[s]=o),o}e.init=r,e.generate=i}(jE||(jE={})),function(e){function t(){return F.PeVersion.prototype.version_string()}e.versionString=t}(PC||(PC={}));const Hhe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return xC},get PeDefs(){return ir},get PeDouble(){return aZ},get PeFactory(){return AC},get PeGCSExtent(){return lZ},get PeGTTransformations(){return OC},get PeGTlistExtended(){return LE},get PeGTlistExtendedEntry(){return MC},get PeLineType(){return RC},get PeMath(){return CC},get PeNotationDms(){return IC},get PeNotationMgrs(){return kE},get PeNotationUsng(){return NC},get PeNotationUtm(){return DE},get PePCSInfo(){return jE},get PeVersion(){return PC},_init:uZ,get _pe(){return F},isLoaded:jk,isSupported:qhe,load:oZ},Symbol.toStringTag,{value:"Module"}));var lf;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(lf||(lf={}));let y;const A={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(y=2e3;y<=2045;y++)A[y]=0;for(y=2056;y<=2065;y++)A[y]=0;for(y=2067;y<=2135;y++)A[y]=0;for(y=2137;y<=2154;y++)A[y]=0;for(y=2161;y<=2170;y++)A[y]=0;for(y=2172;y<=2193;y++)A[y]=0;for(y=2195;y<=2198;y++)A[y]=0;for(y=2200;y<=2203;y++)A[y]=0;for(y=2205;y<=2217;y++)A[y]=0;for(y=2222;y<=2224;y++)A[y]=1;for(y=2225;y<=2250;y++)A[y]=2;for(y=2251;y<=2253;y++)A[y]=1;for(y=2257;y<=2264;y++)A[y]=2;for(y=2274;y<=2279;y++)A[y]=2;for(y=2280;y<=2282;y++)A[y]=1;for(y=2283;y<=2289;y++)A[y]=2;for(y=2290;y<=2292;y++)A[y]=0;for(y=2308;y<=2313;y++)A[y]=0;for(y=2315;y<=2491;y++)A[y]=0;for(y=2494;y<=2866;y++)A[y]=0;for(y=2867;y<=2869;y++)A[y]=1;for(y=2870;y<=2888;y++)A[y]=2;for(y=2891;y<=2895;y++)A[y]=2;for(y=2896;y<=2898;y++)A[y]=1;for(y=2902;y<=2908;y++)A[y]=2;for(y=2915;y<=2920;y++)A[y]=2;for(y=2921;y<=2923;y++)A[y]=1;for(y=2924;y<=2930;y++)A[y]=2;for(y=2931;y<=2962;y++)A[y]=0;for(y=2964;y<=2968;y++)A[y]=2;for(y=2969;y<=2973;y++)A[y]=0;for(y=2975;y<=2991;y++)A[y]=0;for(y=2995;y<=3051;y++)A[y]=0;for(y=3054;y<=3079;y++)A[y]=0;for(y=3081;y<=3088;y++)A[y]=0;for(y=3092;y<=3101;y++)A[y]=0;for(y=3106;y<=3138;y++)A[y]=0;for(y=3146;y<=3151;y++)A[y]=0;for(y=3153;y<=3166;y++)A[y]=0;for(y=3168;y<=3172;y++)A[y]=0;for(y=3174;y<=3203;y++)A[y]=0;for(y=3294;y<=3358;y++)A[y]=0;for(y=3367;y<=3403;y++)A[y]=0;for(y=3408;y<=3416;y++)A[y]=0;for(y=3417;y<=3438;y++)A[y]=2;for(y=3441;y<=3446;y++)A[y]=2;for(y=3447;y<=3450;y++)A[y]=0;for(y=3451;y<=3459;y++)A[y]=2;for(y=3460;y<=3478;y++)A[y]=0;for(y=3554;y<=3559;y++)A[y]=0;for(y=3560;y<=3570;y++)A[y]=2;for(y=3571;y<=3581;y++)A[y]=0;for(y=3594;y<=3597;y++)A[y]=0;for(y=3601;y<=3604;y++)A[y]=0;for(y=3637;y<=3639;y++)A[y]=0;for(y=3665;y<=3667;y++)A[y]=0;for(y=3693;y<=3695;y++)A[y]=0;for(y=3701;y<=3727;y++)A[y]=0;for(y=3728;y<=3739;y++)A[y]=2;for(y=3740;y<=3751;y++)A[y]=0;for(y=3753;y<=3760;y++)A[y]=2;for(y=3761;y<=3773;y++)A[y]=0;for(y=3775;y<=3777;y++)A[y]=0;for(y=3779;y<=3781;y++)A[y]=0;for(y=3783;y<=3785;y++)A[y]=0;for(y=3788;y<=3791;y++)A[y]=0;for(y=3797;y<=3802;y++)A[y]=0;for(y=3814;y<=3816;y++)A[y]=0;for(y=3825;y<=3829;y++)A[y]=0;for(y=3832;y<=3841;y++)A[y]=0;for(y=3844;y<=3852;y++)A[y]=0;for(y=3873;y<=3885;y++)A[y]=0;for(y=3890;y<=3893;y++)A[y]=0;for(y=3907;y<=3912;y++)A[y]=0;for(y=3942;y<=3950;y++)A[y]=0;for(y=3968;y<=3970;y++)A[y]=0;for(y=3973;y<=3976;y++)A[y]=0;for(y=3986;y<=3989;y++)A[y]=0;for(y=3994;y<=3997;y++)A[y]=0;for(y=4048;y<=4051;y++)A[y]=0;for(y=4056;y<=4063;y++)A[y]=0;for(y=4093;y<=4096;y++)A[y]=0;for(y=4390;y<=4398;y++)A[y]=0;for(y=4399;y<=4413;y++)A[y]=2;for(y=4418;y<=4433;y++)A[y]=2;for(y=4455;y<=4457;y++)A[y]=2;for(y=4484;y<=4489;y++)A[y]=0;for(y=4491;y<=4554;y++)A[y]=0;for(y=4568;y<=4589;y++)A[y]=0;for(y=4652;y<=4656;y++)A[y]=0;for(y=4766;y<=4800;y++)A[y]=0;for(y=5014;y<=5016;y++)A[y]=0;for(y=5069;y<=5072;y++)A[y]=0;for(y=5105;y<=5130;y++)A[y]=0;for(y=5167;y<=5188;y++)A[y]=0;for(y=5253;y<=5259;y++)A[y]=0;for(y=5269;y<=5275;y++)A[y]=0;for(y=5292;y<=5311;y++)A[y]=0;for(y=5329;y<=5331;y++)A[y]=0;for(y=5343;y<=5349;y++)A[y]=0;for(y=5355;y<=5357;y++)A[y]=0;for(y=5387;y<=5389;y++)A[y]=0;for(y=5459;y<=5463;y++)A[y]=0;for(y=5479;y<=5482;y++)A[y]=0;for(y=5518;y<=5520;y++)A[y]=0;for(y=5530;y<=5539;y++)A[y]=0;for(y=5550;y<=5552;y++)A[y]=0;for(y=5562;y<=5583;y++)A[y]=0;for(y=5623;y<=5625;y++)A[y]=2;for(y=5631;y<=5639;y++)A[y]=0;for(y=5649;y<=5653;y++)A[y]=0;for(y=5663;y<=5680;y++)A[y]=0;for(y=5682;y<=5685;y++)A[y]=0;for(y=5875;y<=5877;y++)A[y]=0;for(y=5896;y<=5899;y++)A[y]=0;for(y=5921;y<=5940;y++)A[y]=0;for(y=6050;y<=6125;y++)A[y]=0;for(y=6244;y<=6275;y++)A[y]=0;for(y=6328;y<=6348;y++)A[y]=0;for(y=6350;y<=6356;y++)A[y]=0;for(y=6366;y<=6372;y++)A[y]=0;for(y=6381;y<=6387;y++)A[y]=0;for(y=6393;y<=6404;y++)A[y]=0;for(y=6480;y<=6483;y++)A[y]=0;for(y=6511;y<=6514;y++)A[y]=0;for(y=6579;y<=6581;y++)A[y]=0;for(y=6619;y<=6624;y++)A[y]=0;for(y=6625;y<=6627;y++)A[y]=2;for(y=6628;y<=6632;y++)A[y]=0;for(y=6634;y<=6637;y++)A[y]=0;for(y=6669;y<=6692;y++)A[y]=0;for(y=6707;y<=6709;y++)A[y]=0;for(y=6720;y<=6723;y++)A[y]=0;for(y=6732;y<=6738;y++)A[y]=0;for(y=6931;y<=6933;y++)A[y]=0;for(y=6956;y<=6959;y++)A[y]=0;for(y=7005;y<=7007;y++)A[y]=0;for(y=7057;y<=7070;y++)A[y]=2;for(y=7074;y<=7082;y++)A[y]=0;for(y=7109;y<=7118;y++)A[y]=0;for(y=7119;y<=7127;y++)A[y]=1;for(y=7374;y<=7376;y++)A[y]=0;for(y=7528;y<=7586;y++)A[y]=0;for(y=7587;y<=7645;y++)A[y]=2;for(y=7692;y<=7696;y++)A[y]=0;for(y=7755;y<=7787;y++)A[y]=0;for(y=7791;y<=7795;y++)A[y]=0;for(y=7799;y<=7801;y++)A[y]=0;for(y=7803;y<=7805;y++)A[y]=0;for(y=7825;y<=7831;y++)A[y]=0;for(y=7845;y<=7859;y++)A[y]=0;for(y=8013;y<=8032;y++)A[y]=0;for(y=8065;y<=8068;y++)A[y]=1;for(y=8518;y<=8529;y++)A[y]=2;for(y=8533;y<=8536;y++)A[y]=2;for(y=8538;y<=8540;y++)A[y]=2;for(y=8677;y<=8679;y++)A[y]=0;for(y=8836;y<=8840;y++)A[y]=0;for(y=8857;y<=8859;y++)A[y]=0;for(y=8908;y<=8910;y++)A[y]=0;for(y=9154;y<=9159;y++)A[y]=0;for(y=9205;y<=9218;y++)A[y]=0;for(y=9271;y<=9273;y++)A[y]=0;for(y=9295;y<=9297;y++)A[y]=0;for(y=9356;y<=9360;y++)A[y]=0;for(y=9404;y<=9407;y++)A[y]=0;for(y=9476;y<=9482;y++)A[y]=0;for(y=9487;y<=9494;y++)A[y]=0;for(y=9697;y<=9699;y++)A[y]=0;for(y=9821;y<=9865;y++)A[y]=0;for(y=10285;y<=10291;y++)A[y]=0;for(y=10314;y<=10317;y++)A[y]=0;for(y=10448;y<=10465;y++)A[y]=0;for(y=10731;y<=10733;y++)A[y]=0;for(y=11114;y<=11118;y++)A[y]=0;for(y=20004;y<=20032;y++)A[y]=0;for(y=20047;y<=20049;y++)A[y]=0;for(y=20062;y<=20092;y++)A[y]=0;for(y=20135;y<=20138;y++)A[y]=0;for(y=20248;y<=20258;y++)A[y]=0;for(y=20348;y<=20358;y++)A[y]=0;for(y=20436;y<=20440;y++)A[y]=0;for(y=20822;y<=20824;y++)A[y]=0;for(y=20904;y<=20932;y++)A[y]=0;for(y=20934;y<=20936;y++)A[y]=0;for(y=21004;y<=21032;y++)A[y]=0;for(y=21035;y<=21037;y++)A[y]=0;for(y=21095;y<=21097;y++)A[y]=0;for(y=21148;y<=21150;y++)A[y]=0;for(y=21207;y<=21264;y++)A[y]=0;for(y=21307;y<=21364;y++)A[y]=0;for(y=21413;y<=21423;y++)A[y]=0;for(y=21453;y<=21463;y++)A[y]=0;for(y=21473;y<=21483;y++)A[y]=0;for(y=21780;y<=21782;y++)A[y]=0;for(y=21891;y<=21894;y++)A[y]=0;for(y=21896;y<=21899;y++)A[y]=0;for(y=22171;y<=22177;y++)A[y]=0;for(y=22181;y<=22187;y++)A[y]=0;for(y=22191;y<=22197;y++)A[y]=0;for(y=22207;y<=22222;y++)A[y]=0;for(y=22229;y<=22232;y++)A[y]=0;for(y=22234;y<=22236;y++)A[y]=0;for(y=22243;y<=22250;y++)A[y]=0;for(y=22262;y<=22265;y++)A[y]=0;for(y=22307;y<=22322;y++)A[y]=0;for(y=22348;y<=22357;y++)A[y]=0;for(y=22407;y<=22422;y++)A[y]=0;for(y=22462;y<=22465;y++)A[y]=0;for(y=22521;y<=22525;y++)A[y]=0;for(y=22607;y<=22622;y++)A[y]=0;for(y=22641;y<=22646;y++)A[y]=0;for(y=22648;y<=22657;y++)A[y]=0;for(y=22707;y<=22722;y++)A[y]=0;for(y=22762;y<=22765;y++)A[y]=0;for(y=22807;y<=22822;y++)A[y]=0;for(y=22991;y<=22994;y++)A[y]=0;for(y=23028;y<=23038;y++)A[y]=0;for(y=23301;y<=23333;y++)A[y]=2;for(y=23830;y<=23853;y++)A[y]=0;for(y=23866;y<=23872;y++)A[y]=0;for(y=23877;y<=23884;y++)A[y]=0;for(y=23886;y<=23894;y++)A[y]=0;for(y=23946;y<=23948;y++)A[y]=0;for(y=24311;y<=24313;y++)A[y]=0;for(y=24342;y<=24347;y++)A[y]=0;for(y=24370;y<=24374;y++)A[y]=10;for(y=24375;y<=24381;y++)A[y]=0;for(y=24718;y<=24721;y++)A[y]=0;for(y=24817;y<=24821;y++)A[y]=0;for(y=24877;y<=24882;y++)A[y]=0;for(y=24891;y<=24893;y++)A[y]=0;for(y=25391;y<=25395;y++)A[y]=0;for(y=25828;y<=25838;y++)A[y]=0;for(y=26191;y<=26195;y++)A[y]=0;for(y=26391;y<=26393;y++)A[y]=0;for(y=26701;y<=26722;y++)A[y]=0;for(y=26729;y<=26799;y++)A[y]=2;for(y=26801;y<=26803;y++)A[y]=2;for(y=26811;y<=26813;y++)A[y]=2;for(y=26847;y<=26870;y++)A[y]=2;for(y=26891;y<=26899;y++)A[y]=0;for(y=26901;y<=26923;y++)A[y]=0;for(y=26929;y<=26946;y++)A[y]=0;for(y=26948;y<=26998;y++)A[y]=0;for(y=27037;y<=27040;y++)A[y]=0;for(y=27205;y<=27232;y++)A[y]=0;for(y=27258;y<=27260;y++)A[y]=0;for(y=27391;y<=27398;y++)A[y]=0;for(y=27561;y<=27564;y++)A[y]=0;for(y=27571;y<=27574;y++)A[y]=0;for(y=27581;y<=27584;y++)A[y]=0;for(y=27591;y<=27594;y++)A[y]=0;for(y=27700;y<=27707;y++)A[y]=0;for(y=28191;y<=28193;y++)A[y]=0;for(y=28348;y<=28358;y++)A[y]=0;for(y=28402;y<=28432;y++)A[y]=0;for(y=28462;y<=28492;y++)A[y]=0;for(y=29118;y<=29122;y++)A[y]=0;for(y=29168;y<=29172;y++)A[y]=0;for(y=29177;y<=29185;y++)A[y]=0;for(y=29187;y<=29195;y++)A[y]=0;for(y=29900;y<=29903;y++)A[y]=0;for(y=30161;y<=30179;y++)A[y]=0;for(y=30491;y<=30494;y++)A[y]=0;for(y=30729;y<=30732;y++)A[y]=0;for(y=31251;y<=31259;y++)A[y]=0;for(y=31265;y<=31268;y++)A[y]=0;for(y=31275;y<=31279;y++)A[y]=0;for(y=31281;y<=31297;y++)A[y]=0;for(y=31461;y<=31469;y++)A[y]=0;for(y=31491;y<=31495;y++)A[y]=0;for(y=31917;y<=31922;y++)A[y]=0;for(y=31965;y<=32e3;y++)A[y]=0;for(y=32001;y<=32003;y++)A[y]=2;for(y=32005;y<=32031;y++)A[y]=2;for(y=32033;y<=32060;y++)A[y]=2;for(y=32064;y<=32067;y++)A[y]=2;for(y=32074;y<=32077;y++)A[y]=2;for(y=32081;y<=32086;y++)A[y]=0;for(y=32107;y<=32130;y++)A[y]=0;for(y=32133;y<=32159;y++)A[y]=0;for(y=32164;y<=32167;y++)A[y]=2;for(y=32180;y<=32199;y++)A[y]=0;for(y=32201;y<=32260;y++)A[y]=0;for(y=32301;y<=32360;y++)A[y]=0;for(y=32401;y<=32460;y++)A[y]=0;for(y=32501;y<=32560;y++)A[y]=0;for(y=32601;y<=32662;y++)A[y]=0;for(y=32664;y<=32667;y++)A[y]=2;for(y=32701;y<=32761;y++)A[y]=0;for(y=53001;y<=53004;y++)A[y]=0;for(y=53008;y<=53019;y++)A[y]=0;for(y=53021;y<=53032;y++)A[y]=0;for(y=53034;y<=53037;y++)A[y]=0;for(y=53042;y<=53046;y++)A[y]=0;for(y=53074;y<=53080;y++)A[y]=0;for(y=54001;y<=54004;y++)A[y]=0;for(y=54008;y<=54019;y++)A[y]=0;for(y=54021;y<=54032;y++)A[y]=0;for(y=54034;y<=54037;y++)A[y]=0;for(y=54042;y<=54046;y++)A[y]=0;for(y=54048;y<=54053;y++)A[y]=0;for(y=54074;y<=54080;y++)A[y]=0;for(y=54098;y<=54101;y++)A[y]=0;for(y=102001;y<=102040;y++)A[y]=0;for(y=102042;y<=102063;y++)A[y]=0;for(y=102065;y<=102067;y++)A[y]=0;for(y=102070;y<=102117;y++)A[y]=0;for(y=102122;y<=102216;y++)A[y]=0;for(y=102221;y<=102377;y++)A[y]=0;for(y=102382;y<=102388;y++)A[y]=0;for(y=102389;y<=102398;y++)A[y]=2;for(y=102399;y<=102444;y++)A[y]=0;for(y=102445;y<=102447;y++)A[y]=2;for(y=102448;y<=102458;y++)A[y]=0;for(y=102459;y<=102468;y++)A[y]=2;for(y=102469;y<=102499;y++)A[y]=0;for(y=102500;y<=102519;y++)A[y]=1;for(y=102520;y<=102524;y++)A[y]=0;for(y=102525;y<=102529;y++)A[y]=2;for(y=102530;y<=102588;y++)A[y]=0;for(y=102590;y<=102598;y++)A[y]=0;for(y=102601;y<=102603;y++)A[y]=0;for(y=102605;y<=102628;y++)A[y]=0;for(y=102629;y<=102646;y++)A[y]=2;for(y=102648;y<=102700;y++)A[y]=2;for(y=102701;y<=102703;y++)A[y]=0;for(y=102707;y<=102730;y++)A[y]=2;for(y=102733;y<=102758;y++)A[y]=2;for(y=102767;y<=102900;y++)A[y]=0;for(y=102901;y<=102933;y++)A[y]=2;for(y=102934;y<=102950;y++)A[y]=13;for(y=102951;y<=102963;y++)A[y]=0;for(y=102965;y<=102969;y++)A[y]=0;for(y=102971;y<=102973;y++)A[y]=0;for(y=102975;y<=102989;y++)A[y]=0;for(y=102990;y<=102992;y++)A[y]=1;for(y=102997;y<=103002;y++)A[y]=0;for(y=103003;y<=103008;y++)A[y]=2;for(y=103009;y<=103011;y++)A[y]=0;for(y=103012;y<=103014;y++)A[y]=2;for(y=103019;y<=103021;y++)A[y]=0;for(y=103022;y<=103024;y++)A[y]=2;for(y=103029;y<=103031;y++)A[y]=0;for(y=103032;y<=103034;y++)A[y]=2;for(y=103065;y<=103068;y++)A[y]=0;for(y=103074;y<=103076;y++)A[y]=0;for(y=103077;y<=103079;y++)A[y]=1;for(y=103080;y<=103082;y++)A[y]=0;for(y=103083;y<=103085;y++)A[y]=2;for(y=103090;y<=103093;y++)A[y]=0;for(y=103097;y<=103099;y++)A[y]=0;for(y=103100;y<=103102;y++)A[y]=2;for(y=103107;y<=103109;y++)A[y]=0;for(y=103110;y<=103112;y++)A[y]=2;for(y=103113;y<=103116;y++)A[y]=0;for(y=103117;y<=103120;y++)A[y]=2;for(y=103153;y<=103157;y++)A[y]=0;for(y=103158;y<=103162;y++)A[y]=2;for(y=103163;y<=103165;y++)A[y]=0;for(y=103166;y<=103168;y++)A[y]=1;for(y=103169;y<=103171;y++)A[y]=2;for(y=103186;y<=103188;y++)A[y]=0;for(y=103189;y<=103191;y++)A[y]=2;for(y=103192;y<=103195;y++)A[y]=0;for(y=103196;y<=103199;y++)A[y]=2;for(y=103200;y<=103224;y++)A[y]=0;for(y=103225;y<=103227;y++)A[y]=1;for(y=103232;y<=103237;y++)A[y]=0;for(y=103238;y<=103243;y++)A[y]=2;for(y=103244;y<=103246;y++)A[y]=0;for(y=103247;y<=103249;y++)A[y]=2;for(y=103254;y<=103256;y++)A[y]=0;for(y=103257;y<=103259;y++)A[y]=2;for(y=103264;y<=103266;y++)A[y]=0;for(y=103267;y<=103269;y++)A[y]=2;for(y=103300;y<=103375;y++)A[y]=0;for(y=103381;y<=103383;y++)A[y]=0;for(y=103384;y<=103386;y++)A[y]=1;for(y=103387;y<=103389;y++)A[y]=0;for(y=103390;y<=103392;y++)A[y]=2;for(y=103397;y<=103399;y++)A[y]=0;for(y=103400;y<=103471;y++)A[y]=2;for(y=103476;y<=103478;y++)A[y]=0;for(y=103479;y<=103481;y++)A[y]=2;for(y=103486;y<=103488;y++)A[y]=0;for(y=103489;y<=103491;y++)A[y]=2;for(y=103492;y<=103495;y++)A[y]=0;for(y=103496;y<=103499;y++)A[y]=2;for(y=103528;y<=103543;y++)A[y]=0;for(y=103544;y<=103548;y++)A[y]=2;for(y=103549;y<=103551;y++)A[y]=0;for(y=103552;y<=103554;y++)A[y]=1;for(y=103555;y<=103557;y++)A[y]=2;for(y=103558;y<=103560;y++)A[y]=0;for(y=103571;y<=103573;y++)A[y]=0;for(y=103574;y<=103576;y++)A[y]=2;for(y=103577;y<=103580;y++)A[y]=0;for(y=103581;y<=103583;y++)A[y]=2;for(y=103595;y<=103694;y++)A[y]=0;for(y=103696;y<=103699;y++)A[y]=0;for(y=103700;y<=103793;y++)A[y]=2;for(y=103794;y<=103890;y++)A[y]=0;for(y=103891;y<=103896;y++)A[y]=2;for(y=103900;y<=103971;y++)A[y]=2;for(y=103972;y<=103977;y++)A[y]=0;for(y=112e3;y<=112101;y++)A[y]=0;const cZ=[102100,102113,3857,3785,900913],Whe=[104905,104971],Zhe=[4326,...cZ,...Whe],j_=[-20037508342788905e-9,20037508342788905e-9],LC=[-20037508342787e-6,20037508342787e-6],XO={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:j_,origin:LC,dx:1e-5},dZ={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:j_,origin:LC,dx:1e-5},102100:XO,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:j_,origin:LC,dx:1e-5},3857:XO,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:XO};function ai(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||rl(e)&&rl(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const l=t.latestWkid;return l!=null&&r===l}let n,s;return e.wkt2&&t.wkt2?(n=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(n=e.wkt,s=t.wkt),!(!n||!s)&&n.toUpperCase()===s.toUpperCase()}function mn(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&dZ[t]||null}function FE(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function Wg(e){if(!ds(e))return!1;const{wkid:t}=e;if(t)return A[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function Yhe(e){return!(hZ(e)||pZ(e))}function uf(e){return(e==null?void 0:e.wkid)===4326}function R4e(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function rU(e){return(e==null?void 0:e.wkid)===lf.CGCS2000}function rl(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&cZ.includes(t)}function Jhe(e){return(e==null?void 0:e.wkid)===32662}function ux(e){return e===lf.GCSMARS2000||e===lf.GCSMARS2000_SPHERE}function hZ(e){return ux(e==null?void 0:e.wkid)}function cx(e){return e===lf.GCSMOON2000}function pZ(e){return cx(e==null?void 0:e.wkid)}function Xhe(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&Zhe.includes(t)}function ds(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const fZ={wkid:4326,wkt:K$(dZ[4326].wkTemplate,{Central_Meridian:"0.0"})},yZ={wkid:102100,latestWkid:3857},Khe={wkid:32662};function Fk(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const Qhe=Fk(gr),Uk=Fk(Ka),Vk=Fk(Nd),epe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${gr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},tpe=Uk.wkt.toUpperCase(),rpe=Vk.wkt.toUpperCase();function ipe(e){if(e!=null&&ds(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(ux(t))return Ka;const i=r==null?void 0:r.toUpperCase();if(r&&i===tpe)return Ka;if(cx(t)||i&&i===rpe)return Nd}return gr}function C4e(e){return ux(e)?Ka:cx(e)?Nd:gr}function UE(e){return ai(e,Qhe)}function Ld(e){return UE(e)||ai(e,Uk)||ai(e,Vk)}const mZ=39.37,npe=gr.radius*Math.PI/200,gZ=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Eg=A,vZ=/UNIT\[([^\]]+)]/i,spe=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),ope=Wr()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),So=e=>e*e,gc=e=>e*e*e,F_={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:So(.001)},"square-centimeters":{inBaseUnits:So(.01)},"square-decimeters":{inBaseUnits:So(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:So(1e3)},"square-inches":{inBaseUnits:So(.0254)},"square-feet":{inBaseUnits:So(.3048)},"square-yards":{inBaseUnits:So(.9144)},"square-miles":{inBaseUnits:So(1609.344)},"square-nautical-miles":{inBaseUnits:So(1852)},"square-us-feet":{inBaseUnits:So(1200/3937)},acres:{inBaseUnits:.0015625*So(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*gc(.001)},"cubic-centimeters":{inBaseUnits:1e3*gc(.01)},"cubic-decimeters":{inBaseUnits:1e3*gc(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*gc(1e3)},"cubic-inches":{inBaseUnits:1e3*gc(.0254)},"cubic-feet":{inBaseUnits:1e3*gc(.3048)},"cubic-yards":{inBaseUnits:1e3*gc(.9144)},"cubic-miles":{inBaseUnits:1e3*gc(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},ape=(()=>{const e={};for(const t in F_)for(const r in F_[t].units)e[r]=t;return e})();function lpe(e,t,r){return e*F_[r].units[t].inBaseUnits}function upe(e,t,r){return e/F_[r].units[t].inBaseUnits}const bZ=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],cpe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function kC(e){const t=ape[e];if(!t)throw new Error("unknown type");return t}function iU(e,t=null){return t=t||kC(e),F_[t].baseUnit===e}function Ar(e,t,r){if(t===r)return e;const i=kC(t);if(i!==kC(r))throw new Error("incompatible units");const n=iU(t,i)?e:lpe(e,t,i);return iU(r,i)?n:upe(n,r,i)}function I4e(e,t,r,i=!1){if(!i&&Wg(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const n=Ef(t);return n!==r&&(e=n?Ar(e,n,r):Ar(e*=co(t),"meters",r)),e}function N4e(e,t,r,i=!1){if(!i&&Wg(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const n=Ef(r);return t!==n&&(e=n?Ar(e,t,n):Ar(e,t,"meters")/co(r)),e}function dpe(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function P4e(e){return dpe(e)}function L4e(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function k4e(e,t){const r=Ar(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function D4e(e,t){const r=Ar(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function j4e(e,t){const r=Ar(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function F4e(e,t){const r=Ar(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function U4e(e,t){const r=Ar(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function V4e(e,t){const r=Ar(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function hpe(e,t,r){return Ar(e,t,"meters")/(r*Math.PI/180)}function zk(e){return ope.fromJSON(e.toLowerCase())||null}function VE(e){if(e!=null&&!Yhe(e))return 1;const t=co(e);return t>1e5?1:t}function _Z(e){return co(e)>=ipe(e).metersPerDegree?"meters":Ef(e)}function co(e,t=gr.metersPerDegree){return ppe(e,!0)??t}function ppe(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let n=null;if(r){if(ux(r))return Ka.metersPerDegree;if(cx(r))return Nd.metersPerDegree;n=Eg.values[Eg[r]],!n&&t&&spe.has(r)&&(n=npe)}else i&&(TZ(i)?n=nU(gZ.exec(i),n):SZ(i)&&(n=nU(vZ.exec(i),n)));return n}function z4e(e){return Wg(e)?1:co(e)}function nU(e,t){return e!=null&&e[1]?wZ(e[1]):t}function wZ(e){return parseFloat(e.split(",")[1])}function Ef(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=Eg.units[Eg[t]];else if(r){const n=TZ(r)?gZ:SZ(r)?vZ:null;if(n){const s=n.exec(r);s!=null&&s[1]&&(i=ype(s[1]))}}return i!=null?zk(i):null}function G4e(e){const t=Ef(e);return t!=null&&bZ.includes(t)?t:null}function B4e(e){const t=_Z(e);return t!=null&&bZ.includes(t)?t:null}function q4e(e){const t=Ef(e);return t==null?null:cpe.get(t)}function SZ(e){return/^GEOCCS/i.test(e)}function TZ(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const fpe=1e-7;function ype(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!zk(r)){const i=wZ(e);r=null;const n=Eg.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<fpe){r=Eg.units[s];break}}return r}function H4e(e){const t=Ef(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const mpe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},gpe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},vpe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},bpe=Wr()(mpe),_pe=Wr()(gpe),W4e=Wr()(vpe);var ba;let Nt=ba=class extends W{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return ba.WebMercator;if((e==null?void 0:e.wkid)===4326)return ba.WGS84;const t=new ba;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return uf(this)}get isWebMercator(){return rl(this)}get isGeographic(){return Wg(this)}get isWrappable(){return Xhe(this)}get metersPerUnit(){return co(this)}get unit(){return Ef(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===ba.WGS84)return new ba(fZ);if(this===ba.WebMercator)return new ba(yZ);const e=new ba;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=U(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return ai(this,e)}toJSON(e){return this.write(void 0,e)}};Nt.GCS_NAD_1927=null,Nt.WGS84=null,Nt.WebMercator=null,Nt.PlateCarree=null,u([h({readOnly:!0})],Nt.prototype,"isWGS84",null),u([h({readOnly:!0})],Nt.prototype,"isWebMercator",null),u([h({readOnly:!0})],Nt.prototype,"isGeographic",null),u([h({readOnly:!0})],Nt.prototype,"isWrappable",null),u([h({type:at,json:{write:!0}})],Nt.prototype,"latestWkid",void 0),u([h({readOnly:!0})],Nt.prototype,"metersPerUnit",null),u([h({readOnly:!0})],Nt.prototype,"unit",null),u([h({type:at,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Nt.prototype,"wkid",void 0),u([h({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Nt.prototype,"wkt",void 0),u([le("wkt"),le("web-scene","wkt")],Nt.prototype,"writeWkt",null),u([h({type:String,json:{write:!1}})],Nt.prototype,"wkt2",void 0),u([h({type:at,json:{write:!0}})],Nt.prototype,"vcsWkid",void 0),u([h({type:at,json:{write:!0}})],Nt.prototype,"latestVcsWkid",void 0),u([h()],Nt.prototype,"imageCoordinateSystem",void 0),Nt=ba=u([M("esri.geometry.SpatialReference")],Nt),Nt.prototype.toJSON.isDefaultToJSON=!0,Nt.GCS_NAD_1927=Ae.freeze(new Nt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Nt.WGS84=Ae.freeze(new Nt(fZ)),Nt.WebMercator=Ae.freeze(new Nt(yZ)),Nt.PlateCarree=Ae.freeze(new Nt(Khe));const Ge=Nt;let _a=class extends W{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ge.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof Ge)return t;if(t!=null){const i=new Ge;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};u([h()],_a.prototype,"type",void 0),u([h({readOnly:!0})],_a.prototype,"cache",null),u([h({readOnly:!0})],_a.prototype,"extent",null),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],_a.prototype,"hasM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],_a.prototype,"hasZ",void 0),u([h({type:Ge,json:{write:!0},value:Ge.WGS84})],_a.prototype,"spatialReference",void 0),u([se("spatialReference")],_a.prototype,"readSpatialReference",null),_a=u([M("esri.geometry.Geometry")],_a);const Uu=_a;function $g(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new V("Mesh geometries are not supported for this operation")}function wpe(e){e.forEach($g)}const Spe=57.29577951308232,Tpe=.017453292519943;function sU(e){return e*Spe}function oU(e){return e*Tpe}function Y4e(e){return Math.PI/2-2*Math.atan(Math.exp(-e/gr.radius))}function DC(e){return e.wkid!=null||e.wkt!=null}const KO=[0,0];function zE(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,KO,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,KO,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,KO,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const l="paths"in s?s.paths:s.rings,d=[];let f;for(let g=0;g<l.length;g++){const v=l[g];f=[],d.push(f);for(let b=0;b<v.length;b++)f.push(t(v[b][0],v[b][1],[0,0],i)),v[b].length>2&&f[b].push(v[b][2]),v[b].length>3&&f[b].push(v[b][3])}"paths"in o?o.paths=d:o.rings=d}else if("points"in s&&"points"in o){const l=s.points,d=[];for(let f=0;f<l.length;f++)d[f]=t(l[f][0],l[f][1],[0,0],i),l[f].length>2&&d[f].push(l[f][2]),l[f].length>3&&d[f].push(l[f][3]);o.points=d}return n}function L2(e,t){const r=e&&(DC(e)?e:e.spatialReference),i=t&&(DC(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!ai(i,r)||rl(i)&&uf(r)||rl(r)&&uf(i))}function dx(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(DC(t)?t:t.spatialReference);return L2(r,i)?ai(r,i)?U(e):rl(i)?zE(e,jm,Ge.WebMercator,!1,U(e)):uf(i)?zE(e,hx,Ge.WGS84,!1,U(e)):null:null}function jm(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=oU(t);return r[0]=oU(e)*gr.radius,r[1]=gr.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function hx(e,t,r=[0,0],i=!1){if(e===j_[0])r[0]=-180;else if(e===j_[1])r[0]=180;else{const n=sU(e/gr.radius);r[0]=i?n:n-360*Math.floor((n+180)/360)}return r[1]=sU(Math.PI/2-2*Math.atan(Math.exp(-t/gr.radius))),r}function Ad(e,t=!1,r=U(e)){return $g(e),$g(r),zE(e,jm,Ge.WebMercator,t,r)}function Fm(e,t=!1,r=U(e)){return $g(e),$g(r),zE(e,hx,Ge.WGS84,t,r)}function EZ(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}function Epe(e){var t;return((t=$Z(e,xZ))==null?void 0:t[0])??null}function $pe(e){var t;return((t=$Z(e,xZ))==null?void 0:t[1])??null}function $Z({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(rl(r))return hx(e,t,i);if(Wg(r))return i[0]=e,i[1]=t,i}return null}const xZ=[0,0];var k2;const QO=[0,0];function aU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let an=k2=class extends Uu{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Ae.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Ge(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)ae.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)ae.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&(n!=null&&n.isWebMercator)){const l=jm(s.longitude,s.latitude,QO);e=l[0],t=l[1]}}}else aU(r)?(n=r,r=null):aU(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?ae.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&ae.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return $pe(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",jm(r,e,QO)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Epe(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",jm(e,t,QO)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new k2;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return k2.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:l}=e;let{x:d,y:f,spatialReference:g}=e;if(!s.equals(g))if(s.isWebMercator&&g.isWGS84)[d,f]=jm(d,f),g=s;else{if(!s.isWGS84||!g.isWebMercator)return!1;[d,f]=hx(d,f),g=s}return t===d&&r===f&&i===o&&n===l&&s.wkid===g.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=mn(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return EZ(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};u([h({readOnly:!0})],an.prototype,"cache",null),u([h({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],an.prototype,"hasM",null),u([h({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],an.prototype,"hasZ",null),u([h({type:Number})],an.prototype,"latitude",null),u([h({type:Number})],an.prototype,"longitude",null),u([h({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ft(e=>isNaN(e)?e:pn(e))],an.prototype,"x",void 0),u([le("x")],an.prototype,"writeX",null),u([se("x")],an.prototype,"readX",null),u([h({type:Number,json:{write:!0}})],an.prototype,"y",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],an.prototype,"z",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],an.prototype,"m",void 0),an=k2=u([M("esri.geometry.Point")],an),an.prototype.toJSON.isDefaultToJSON=!0;const Qe=an;let wa=class extends He.ClonableMixin(W){constructor(...t){super(...t),this.position=new Qe([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new SW}normalizeCtorArgs(t,r,i,n){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const s={position:t};return r!=null&&(s.heading=r),i!=null&&(s.tilt=i),n!=null&&(s.fov=n),s}return t}writePosition(t,r,i,n){const s=t.clone();s.x=pn(t.x||0),s.y=pn(t.y||0),s.z=t.hasZ?pn(t.z||0):t.z,r[i]=s.write({},n)}readPosition(t,r){const i=new Qe;return i.read(t,r),i.x=pn(i.x||0),i.y=pn(i.y||0),i.z=i.hasZ?pn(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};u([h({type:Qe,json:{write:{isRequired:!0}}})],wa.prototype,"position",void 0),u([le("position")],wa.prototype,"writePosition",null),u([se("position")],wa.prototype,"readPosition",null),u([h({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ft(e=>$de.normalize(pn(e)))],wa.prototype,"heading",void 0),u([h({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ft(e=>so(pn(e),-180,180))],wa.prototype,"tilt",void 0),u([h({type:Number,nonNullable:!0,json:{default:55,write:!0}}),ft(e=>so(pn(e,55),1,170))],wa.prototype,"fov",void 0),u([h({type:SW,nonNullable:!0,json:{read:!1,write:!1}})],wa.prototype,"layout",void 0),wa=u([M("esri.Camera")],wa);const xpe=wa,e3=[0,0];function Ew(e,t){return t!=null&&hn(e,t.x,t.y,t.z)}function X4e(e,t){var r;if(!((r=t.points)!=null&&r.length))return!1;for(const i of t.points)if(!xg(e,i))return!1;return!0}function Ape(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:l}=t;return e.hasZ&&t.hasZ?hn(e,r,i,n)&&hn(e,r,o,n)&&hn(e,s,o,n)&&hn(e,s,i,n)&&hn(e,r,i,l)&&hn(e,r,o,l)&&hn(e,s,o,l)&&hn(e,s,i,l):hn(e,r,i)&&hn(e,r,o)&&hn(e,s,o)&&hn(e,s,i)}function xg(e,t){return hn(e,t[0],t[1])}function Mpe(e,t){return hn(e,t[0],t[1],t[2])}function hn(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function Gk(e,t){return e3[1]=t.y,e3[0]=t.x,Ope(e,e3)}function Ope(e,t){return Bk(e.rings,t)}function Bk(e,t){if(!e)return!1;if(Rpe(e))return lU(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=lU(r,e[i],t);return r}function Rpe(e){return!Array.isArray(e[0][0])}function lU(e,t,r){const[i,n]=r;let s=e,o=0;for(let l=0,d=t.length;l<d;l++){o++,o===d&&(o=0);const[f,g]=t[l],[v,b]=t[o];(g<n&&b>=n||b<n&&g>=n)&&f+(n-g)/(b-g)*(v-f)<i&&(s=!s)}return s}function Cpe(e,t){return Ew(e,t)}function Ipe(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function Npe(e,t){const{points:r,hasZ:i}=t,n=i?Mpe:xg;for(const s of r)if(n(e,s))return!0;return!1}const cf=[0,0],df=[0,0],hf=[0,0],pf=[0,0],Ppe=[cf,df,hf,pf],AZ=[[hf,cf],[cf,df],[df,pf],[pf,hf]];function Lpe(e,t){return kpe(e,t.rings)}function kpe(e,t){cf[0]=e.xmin,cf[1]=e.ymax,df[0]=e.xmax,df[1]=e.ymax,hf[0]=e.xmin,hf[1]=e.ymin,pf[0]=e.xmax,pf[1]=e.ymin;for(const r of Ppe)if(Bk(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(xg(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(xg(e,s)||MZ(i,s,AZ))return!0;i=s}}return!1}function Dpe(e,t){cf[0]=e.xmin,cf[1]=e.ymax,df[0]=e.xmax,df[1]=e.ymax,hf[0]=e.xmin,hf[1]=e.ymin,pf[0]=e.xmax,pf[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(xg(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(xg(e,o)||MZ(n,o,AZ))return!0;n=o}}return!1}const pi=[0,0];function jpe(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let l=t+1;l<e.length;l++)for(let d=0;d<e[l].length-1;d++){const f=e[l][d],g=e[l][d+1];if(jC(s,o,f,g,pi)&&!(pi[0]===s[0]&&pi[1]===s[1]||pi[0]===f[0]&&pi[1]===f[1]||pi[0]===o[0]&&pi[1]===o[1]||pi[0]===g[0]&&pi[1]===g[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],l=r[n+1];for(let d=n+2;d<s;d++){const f=r[d],g=r[d+1];if(jC(o,l,f,g,pi)&&!(pi[0]===o[0]&&pi[1]===o[1]||pi[0]===f[0]&&pi[1]===f[1]||pi[0]===l[0]&&pi[1]===l[1]||pi[0]===g[0]&&pi[1]===g[1]))return!0}}}return!1}function MZ(e,t,r){for(let i=0;i<r.length;i++)if(jC(e,t,r[i][0],r[i][1]))return!0;return!1}function jC(e,t,r,i,n){const[s,o]=e,[l,d]=t,[f,g]=r,[v,b]=i,S=v-f,T=s-f,E=l-s,x=b-g,O=o-g,C=d-o,I=x*E-S*C;if(I===0)return!1;const P=(S*O-x*T)/I,k=(E*O-C*T)/I;return P>=0&&P<=1&&k>=0&&k<=1&&(n&&(n[0]=s+P*(l-s),n[1]=o+P*(d-o)),!0)}function Fpe(e){switch(e){case"esriGeometryEnvelope":case"extent":return Ipe;case"esriGeometryMultipoint":case"multipoint":return Npe;case"esriGeometryPoint":case"point":return Cpe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Lpe;case"esriGeometryPolyline":case"polyline":return Dpe}}var Mo;function Upe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function vc(e,t,r){return t==null?r:r==null?t:e(t,r)}let Xr=Mo=class extends Uu{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return Upe(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ge.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??Ge.WGS84}}static fromPoint(e){return new Mo({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Qe({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Mo;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&L2(t,r)&&(e=t.isWebMercator?Ad(e):Fm(e,!0)),e.type==="point"?Ew(this,e):e.type==="extent"&&Ape(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&L2(t,r)&&(e=t.isWebMercator?Ad(e):Fm(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!ai(t,r)&&L2(t,r)&&(e=t.isWebMercator?Ad(e):Fm(e,!0)),Fpe(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=vc(Math.min,this.zmin,e.zmin),this.zmax=vc(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=vc(Math.min,this.mmin,e.mmin),this.mmax=vc(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=vc(Math.max,this.zmin,e.zmin),this.zmax=vc(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=vc(Math.max,this.mmin,e.mmin),this.mmax=vc(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=mn(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?Fm(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=t3(i.x,e).x),this.spatialReference=new Ge(K$((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const n=r??mn(i);if(n==null)return this;const s=this._getParts(n).map(d=>d.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(e)return this._shiftCM(n);if(t)return s;let o=!0,l=!0;return s.forEach(d=>{d.hasZ||(o=!1),d.hasM||(l=!1)}),{rings:s.map(d=>{const f=[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]];if(o){const g=(d.zmax-d.zmin)/2;for(let v=0;v<f.length;v++)f[v].push(g)}if(l){const g=(d.mmax-d.mmin)/2;for(let v=0;v<f.length;v++)f[v].push(g)}return f}),hasZ:o,hasM:l,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,l=this.width,d=this.xmin,f=this.xmax;let g;e=e||mn(o);const[v,b]=e.valid;g=t3(this.xmin,e);const S=g.x,T=g.frameId;g=t3(this.xmax,e);const E=g.x,x=g.frameId,O=S===E&&l>0;if(l>2*b){const C=new Mo(d<f?S:E,n,b,s,o),I=new Mo(v,n,d<f?E:S,s,o),P=new Mo(0,n,b,s,o),k=new Mo(v,n,0,s,o),D=[],H=[];C.contains(P)&&D.push(T),C.contains(k)&&H.push(T),I.contains(P)&&D.push(x),I.contains(k)&&H.push(x);for(let re=T+1;re<x;re++)D.push(re),H.push(re);t.push({extent:C,frameIds:[T]},{extent:I,frameIds:[x]},{extent:P,frameIds:D},{extent:k,frameIds:H})}else S>E||O?t.push({extent:new Mo(S,n,b,s,o),frameIds:[T]},{extent:new Mo(v,n,E,s,o),frameIds:[x]}):t.push({extent:new Mo(S,n,E,s,o),frameIds:[T]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}};function t3(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}u([h({readOnly:!0})],Xr.prototype,"cache",null),u([h({readOnly:!0})],Xr.prototype,"center",null),u([h({readOnly:!0})],Xr.prototype,"extent",null),u([h({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xr.prototype,"hasM",null),u([h({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xr.prototype,"hasZ",null),u([h({readOnly:!0})],Xr.prototype,"height",null),u([h({readOnly:!0})],Xr.prototype,"width",null),u([h({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Xr.prototype,"xmin",void 0),u([h({type:Number,json:{write:!0}})],Xr.prototype,"ymin",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xr.prototype,"mmin",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xr.prototype,"zmin",void 0),u([h({type:Number,json:{write:!0}})],Xr.prototype,"xmax",void 0),u([h({type:Number,json:{write:!0}})],Xr.prototype,"ymax",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xr.prototype,"mmax",void 0),u([h({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xr.prototype,"zmax",void 0),Xr=Mo=u([M("esri.geometry.Extent")],Xr),Xr.prototype.toJSON.isDefaultToJSON=!0;const Ut=Xr;function Ag(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var FC;function uU(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function Vpe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Oc=FC=class extends Uu{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var n;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):Vpe(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(n=r.points)==null?void 0:n[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Ut,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=uU(Math.min),l=uU(Math.max);let d,f,g,v,[b,S]=s,[T,E]=s;for(let x=0,O=e.length;x<O;x++){const C=e[x],[I,P]=C;if(b=o(b,I),S=o(S,P),T=l(T,I),E=l(E,P),r&&C.length>2){const k=C[2];d=o(d,k),g=l(g,k)}if(i&&C.length>n){const k=C[n];f=o(f,k),v=l(v,k)}}return t.xmin=b,t.ymin=S,t.xmax=T,t.ymax=E,t.spatialReference=this.spatialReference,r?(t.zmin=d,t.zmax=g):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=f,t.mmax=v):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=U(this.points)}addPoint(e){return Ag(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:U(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new FC(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new Qe(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Qe(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Ag(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};u([h({readOnly:!0})],Oc.prototype,"cache",null),u([h()],Oc.prototype,"extent",null),u([h({type:[[Number]],json:{write:{isRequired:!0}}})],Oc.prototype,"points",void 0),u([le("points")],Oc.prototype,"writePoints",null),Oc=FC=u([M("esri.geometry.Multipoint")],Oc),Oc.prototype.toJSON.isDefaultToJSON=!0;const $w=Oc;function K4e(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function zpe(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var GE;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(GE||(GE={}));function Q4e(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,r=e.hasM;if(e.type==="point")return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const i=e.clone().normalize();if(!i)return null;let n=!1,s=!1;return i.forEach(o=>{o.hasZ&&(n=!0),o.hasM&&(s=!0)}),i.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const d=.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(d)}if(s&&o.hasM){const d=.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(d)}return l})}return null}function px(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function OZ(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function Gpe(e,t,r,i){return Bpe(e,t,r[i],r[i+1])}function Bpe(e,t,r,i){const[n,s]=t,[o,l]=r,[d,f]=i,g=d-o,v=f-l,b=g*g+v*v,S=(n-o)*g+(s-l)*v,T=Math.min(1,Math.max(0,S/b));return e[0]=o+g*T,e[1]=l+v*T,e}function eje(e,t,r,i,n,s){let o=r,l=i,d=n-o,f=s-l;if(d!==0||f!==0){const g=((e-o)*d+(t-l)*f)/(d*d+f*f);g>1?(o=n,l=s):g>0&&(o+=d*g,l+=f*g)}return d=e-o,f=t-l,d*d+f*f}function RZ(e,t){return OZ(e,t,.5)}function tje(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=px(e[i],e[i+1]);return r}function rje(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let n=0;n<r-1;++n){const s=px(e[n],e[n+1]);if(t-i<s){const o=(t-i)/s;return OZ(e[n],e[n+1],o)}i+=s}return e[r-1]}function CZ(e,t=GE.X,r=GE.Y){let i=0;const n=e.length;let s=e[0];for(let o=1;o<n;o++){const l=e[o];i+=(l[t]-s[t])*(l[r]+s[r]),s=l}if(!IZ(e)){const o=e[0];i+=(o[t]-s[t])*(o[r]+s[r])}return i>=0}function IZ(e){const t=e.length;return t<3||Z$(e[0],e[t-1])}function ije(e){"rings"in e&&(qpe(e),Hpe(e))}function qpe(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)IZ(r)||(r.push(r[0].slice()),t=!0);return t}function Hpe(e){if(!("rings"in e)||e.rings.length===0||CZ(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function nje(e){return e.type!=="polygon"&&e.type!=="polyline"||Wpe(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function Wpe(e,t){const r=mn(t);if(!r)return;const i=r.valid[0],n=r.valid[1],s=n-i;for(const o of e){let l=1/0,d=-1/0;for(const g of o){const v=Zpe(g[0],i,n);l=Math.min(l,v),d=Math.max(d,v),g[0]=v}const f=d-l;s-f<f&&o.forEach(g=>{g[0]<0&&(g[0]+=s)})}}function Zpe(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function sje(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every((n,s)=>n.length===i[s].length)}function oje(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Ype(e){return e?Jpe(e.rings,e.hasZ??!1):null}function Jpe(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const l=NZ(e[s],t,n);l&&i.push(l)}if(i.sort((s,o)=>{let l=s[2]-o[2];return l===0&&t&&(l=s[4]-o[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?Xpe(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function NZ(e,t,r){let i=0,n=0,s=0,o=0,l=0;const d=e.length?e[0][0]:0,f=e.length?e[0][1]:0,g=e.length&&t?e[0][2]:0;for(let b=0;b<e.length;b++){const S=e[b],T=e[(b+1)%e.length],[E,x,O]=S,C=E-d,I=x-f,[P,k,D]=T,H=P-d,re=k-f,K=C*re-H*I;if(o+=K,i+=(C+H)*K,n+=(I+re)*K,t&&S.length>2&&T.length>2){const ie=O-g,fe=D-g,ve=C*fe-H*ie;s+=(ie+fe)*ve,l+=ve}E<r[0]&&(r[0]=E),E>r[1]&&(r[1]=E),x<r[2]&&(r[2]=x),x>r[3]&&(r[3]=x),t&&(O<r[4]&&(r[4]=O),O>r[5]&&(r[5]=O))}if(o>0&&(o*=-1),l>0&&(l*=-1),!o)return null;o*=.5,l*=.5;const v=[i/(6*o)+d,n/(6*o)+f,o];return t&&(r[4]===r[5]||l===0?(v[3]=(r[4]+r[5])/2,v[4]=0):(v[3]=s/(6*l)+g,v[4]=l)),v}function aje(e,t){let r=0,i=0,n=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let l=0;l<e.pathSize;l++){e.seekInPath(l);const d=[e.x,e.y];e.seekInPath((l+1)%e.pathSize);const f=[e.x,e.y],[g,v]=d,b=g-s,S=v-o,[T,E]=f,x=T-s,O=E-o,C=b*O-x*S;n+=C,r+=(b+x)*C,i+=(S+O)*C,g<t[0]&&(t[0]=g),g>t[1]&&(t[1]=g),v<t[2]&&(t[2]=v),v>t[3]&&(t[3]=v)}return n>0&&(n*=-1),n?(n*=.5,[r/(6*n)+s,i/(6*n)+o,n]):null}function Xpe(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,l=0;for(let d=0,f=e.length;d<f-1;d++){const g=e[d],v=e[d+1];if(g&&v){r[0]=g[0],r[1]=g[1],i[0]=v[0],i[1]=v[1],t&&g.length>2&&v.length>2&&(r[2]=g[2],i[2]=v[2]);const b=px(r,i);if(b){n+=b;const S=RZ(g,v);s+=b*S[0],o+=b*S[1],t&&S.length>2&&(l+=b*S[2])}}}return n>0?t?[s/n,o/n,l/n]:[s/n,o/n]:e.length?e[0]:null}function Kpe(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],n=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=NZ(zpe(e),e.hasZ,s);o&&n.push(o)}if(n.sort((o,l)=>{let d=o[2]-l[2];return d===0&&t&&(d=o[4]-l[4]),d}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],t&&(i[2]=n[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?Qpe(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function Qpe(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,l=0;if(e.nextPoint()){let d=e.x,f=e.y,g=e.z;for(;e.nextPoint();){const v=e.x,b=e.y,S=e.z;r[0]=d,r[1]=f,i[0]=v,i[1]=b,t&&(r[2]=g,i[2]=S);const T=px(r,i);if(T){n+=T;const E=RZ(r,i);s+=T*E[0],o+=T*E[1],t&&E.length>2&&(l+=T*E[2])}d=v,f=b,g=S}}return n>0?t?[s/n,o/n,l/n]:[s/n,o/n]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const efe=1e-6;function lje(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<efe){const n=Kpe(e);return n?[n[0],n[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)rfe(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const tfe=1/3;function rfe(e,t,r){if(!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,n=r.y;r.nextPoint();let s,o=r.x-i,l=r.y-n,d=0,f=0;for(;r.nextPoint();)d=r.x-i,f=r.y-n,s=.5*tfe*(d*l-f*o),e[0]+=s*(o+d),e[1]+=s*(l+f),o=d,l=f;const g=r.getCurrentRingArea(),v=[i,n];return v[0]-=t[0],v[1]-=t[1],v[0]*=g,v[1]*=g,e[0]+=v[0],e[1]+=v[1],e}function yn(e=ofe){return[e[0],e[1],e[2],e[3]]}function PZ(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function uje(e,t,r,i,n=yn()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function cje(e,t=yn()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function ife(e,t,r=new Ut){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r}function dje(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function hje(e,t,r){if(t!=null)if("length"in t)UC(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else PZ(r,e)}function pje(e,t,r=e){const i=t.length;let n=e[0],s=e[1],o=e[2],l=e[3];for(let d=0;d<i;d++){const f=t[d];n=Math.min(n,f[0]),s=Math.min(s,f[1]),o=Math.max(o,f[0]),l=Math.max(l,f[1])}return r[0]=n,r[1]=s,r[2]=o,r[3]=l,r}function fje(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function qk(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function Hk(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function yje(e){return qk(e)*Hk(e)}function mje(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function gje(e){const t=qk(e),r=Hk(e);return Math.sqrt(t*t+r*r)}function vje(e,t){return nfe(e,t.x,t.y)}function nfe(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function bje(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function _je(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])}function sfe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function wje(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function Sje(e){return e?PZ(e,cU):yn(cU)}function UC(e){return e!=null&&e.length===4}function Tje(e,t){return UC(e)&&UC(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const cU=[1/0,1/0,-1/0,-1/0],ofe=[0,0,0,0];function LZ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function kZ(e){return e.points!==void 0}function DZ(e){return e.x!==void 0&&e.y!==void 0}function jZ(e){return e.paths!==void 0}function FZ(e){return e.rings!==void 0}function UZ(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const _d=UZ(Math.min),wd=UZ(Math.max);function Eje(e,t){return jZ(t)?Mg(e,t.paths,!1,!1):FZ(t)?Mg(e,t.rings,!1,!1):kZ(t)?Wk(e,t.points,!1,!1,!1,!1):LZ(t)?VZ(e,t):(DZ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function $je(e){let t,r,i,n;for(e.reset(),t=i=1/0,r=n=-1/0;e.nextPath();){const s=afe(e);t=Math.min(s[0],t),i=Math.min(s[1],i),r=Math.max(s[2],r),n=Math.max(s[3],n)}return yn([t,i,r,n])}function afe(e){let t,r,i,n;for(t=i=1/0,r=n=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),n=Math.max(e.y,n);return yn([t,i,r,n])}function xje(e,t){return jZ(t)?Mg(e,t.paths,!0,!1):FZ(t)?Mg(e,t.rings,!0,!1):kZ(t)?Wk(e,t.points,!0,!1,!0,!1):LZ(t)?VZ(e,t,!0,!1,!0,!1):(DZ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Mg(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,l,d,[f,g]=t[0][0],[v,b]=t[0][0];for(let S=0;S<t.length;S++){const T=t[S];for(let E=0;E<T.length;E++){const x=T[E],[O,C]=x;if(f=_d(f,O),g=_d(g,C),v=wd(v,O),b=wd(b,C),r&&x.length>2){const I=x[2];s=_d(s,I),o=wd(o,I)}if(i&&x.length>n){const I=x[n];l=_d(s,I),d=wd(o,I)}}}return r?i?(e[0]=f,e[1]=g,e[2]=s,e[3]=l,e[4]=v,e[5]=b,e[6]=o,e[7]=d,e.length=8,e):(e[0]=f,e[1]=g,e[2]=s,e[3]=v,e[4]=b,e[5]=o,e.length=6,e):i?(e[0]=f,e[1]=g,e[2]=l,e[3]=v,e[4]=b,e[5]=d,e.length=6,e):(e[0]=f,e[1]=g,e[2]=v,e[3]=b,e.length=4,e)}function VZ(e,t,r,i,n,s){const o=t.xmin,l=t.xmax,d=t.ymin,f=t.ymax;let g=t.zmin,v=t.zmax,b=t.mmin,S=t.mmax;return n?(g=g||0,v=v||0,s?(b=b||0,S=S||0,e[0]=o,e[1]=d,e[2]=g,e[3]=b,e[4]=l,e[5]=f,e[6]=v,e[7]=S,e):(e[0]=o,e[1]=d,e[2]=g,e[3]=l,e[4]=f,e[5]=v,e)):s?(b=b||0,S=S||0,e[0]=o,e[1]=d,e[2]=b,e[3]=l,e[4]=f,e[5]=S,e):(e[0]=o,e[1]=d,e[2]=l,e[3]=f,e)}function Wk(e,t,r,i,n,s){const o=r?3:2,l=i&&s,d=r&&n;if(!t.length||!t[0].length)return null;let f,g,v,b,[S,T]=t[0],[E,x]=t[0];for(let O=0;O<t.length;O++){const C=t[O],[I,P]=C;if(S=_d(S,I),T=_d(T,P),E=wd(E,I),x=wd(x,P),d&&C.length>2){const k=C[2];f=_d(f,k),g=wd(g,k)}if(l&&C.length>o){const k=C[o];v=_d(f,k),b=wd(g,k)}}return n?(f=f||0,g=g||0,s?(v=v||0,b=b||0,e[0]=S,e[1]=T,e[2]=f,e[3]=v,e[4]=E,e[5]=x,e[6]=g,e[7]=b,e):(e[0]=S,e[1]=T,e[2]=f,e[3]=E,e[4]=x,e[5]=g,e)):s?(v=v||0,b=b||0,e[0]=S,e[1]=T,e[2]=v,e[3]=E,e[4]=x,e[5]=b,e):(e[0]=S,e[1]=T,e[2]=E,e[3]=x,e)}function lfe(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function ufe(e){return e.points!==void 0}function cfe(e){return e.x!==void 0&&e.y!==void 0}function dfe(e){return e.paths!==void 0}function hfe(e){return e.rings!==void 0}const Zk=[];function zZ(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function GZ(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function BZ(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function qZ(e,t,r,i,n,s,o,l){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:l}}function Yk(e,t=!1,r=!1){return t?r?qZ(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):GZ(e[0],e[1],e[2],e[3],e[4],e[5]):r?BZ(e[0],e[1],e[2],e[3],e[4],e[5]):zZ(e[0],e[1],e[2],e[3])}function Aje(e){return e?lfe(e)?e:cfe(e)?ffe(e):hfe(e)?HZ(e):dfe(e)?WZ(e):ufe(e)?pfe(e):null:null}function pfe(e){const{hasZ:t,hasM:r,points:i}=e;return Yk(Wk(Zk,i,t??!1,r??!1),t,r)}function ffe(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?qZ(t,r,i,n,t,r,i,n):GZ(t,r,i,t,r,i):s?BZ(t,r,n,t,r,n):zZ(t,r,t,r)}function HZ(e){const{hasZ:t,hasM:r,rings:i}=e,n=Mg(Zk,i,t??!1,r??!1);return n?Yk(n,t,r):null}function WZ(e){const{hasZ:t,hasM:r,paths:i}=e,n=Mg(Zk,i,t??!1,r??!1);return n?Yk(n,t,r):null}var D2;function dU(e){return!Array.isArray(e[0])}function yfe(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function mfe(e){var s,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??(t=[]),yfe(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return n??(n=Ge.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:n}}let zs=D2=class extends Uu{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const l=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const d=o.zmin+.5*(o.zmax-o.zmin);for(let f=0;f<l.length;f++)l[f].push(d)}if(n&&o.hasM){const d=o.mmin+.5*(o.mmax-o.mmin);for(let f=0;f<l.length;f++)l[f].push(d)}return l}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new D2(s)}constructor(e){super(mfe(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Ype(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Qe;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=U(e)}get extent(){const e=HZ(this),{spatialReference:t}=this;return e?new Ut({...e,spatialReference:t}):null}get isSelfIntersecting(){return jpe(this.rings)}writeRings(e,t){t.rings=U(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(dU(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new D2;return e.spatialReference=this.spatialReference,e.rings=U(this.rings),e.curveRings=U(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,l],[d,f,g,v])=>n===d&&s===f&&(o==null&&g==null||o===g)&&(l==null&&v==null||l===v);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!Z$(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=dx(e,this.spatialReference);return Gk(this,t??e)}isClockwise(e){const t=dU(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return CZ(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Qe(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Qe(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Qe(r[0],r[1],r[2],r[3],this.spatialReference):new Qe(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Ag(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Qe(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Qe(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(Ag(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([h({readOnly:!0})],zs.prototype,"cache",null),u([h({readOnly:!0})],zs.prototype,"centroid",null),u([h({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],zs.prototype,"curveRings",void 0),u([le("curveRings")],zs.prototype,"writeCurveRings",null),u([h({readOnly:!0})],zs.prototype,"extent",null),u([h({readOnly:!0})],zs.prototype,"isSelfIntersecting",null),u([h({type:[[[Number]]],json:{write:{isRequired:!0}}})],zs.prototype,"rings",void 0),u([le("rings")],zs.prototype,"writeRings",null),zs=D2=u([M("esri.geometry.Polygon")],zs);const oo=zs;zs.prototype.toJSON.isDefaultToJSON=!0;var VC;function gfe(e){return!Array.isArray(e[0])}function vfe(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function bfe(e){var s,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:n}=e;switch(t??(t=[]),vfe(t)&&(t=[t]),(o=(s=t[0])==null?void 0:s[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return n??(n=Ge.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:n}}let Da=VC=class extends Uu{constructor(e){super(bfe(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=U(e)}get extent(){const e=WZ(this),{spatialReference:t}=this;return e?new Ut({...e,spatialReference:t}):null}writePaths(e,t){t.paths=U(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(gfe(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new VC;return e.spatialReference=this.spatialReference,e.paths=U(this.paths),e.curvePaths=U(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Qe(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Qe(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Qe(r[0],r[1],r[2],r[3],this.spatialReference):new Qe(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Ag(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Qe(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Qe(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Ag(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};u([h({readOnly:!0})],Da.prototype,"cache",null),u([h({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Da.prototype,"curvePaths",void 0),u([le("curvePaths")],Da.prototype,"writeCurvePaths",null),u([h({readOnly:!0})],Da.prototype,"extent",null),u([h({type:[[[Number]]],json:{write:{isRequired:!0}}})],Da.prototype,"paths",void 0),u([le("paths")],Da.prototype,"writePaths",null),Da=VC=u([M("esri.geometry.Polyline")],Da);const Qs=Da;Da.prototype.toJSON.isDefaultToJSON=!0;function ZZ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function YZ(e){return e.points!==void 0}function JZ(e){return e.x!==void 0&&e.y!==void 0}function Jk(e){return e.paths!==void 0||e.curvePaths!==void 0}function Yp(e){return e.rings!==void 0||e.curveRings!==void 0}function Du(e){return e==null?null:e instanceof Uu?e:JZ(e)?Qe.fromJSON(e):Jk(e)?Qs.fromJSON(e):Yp(e)?oo.fromJSON(e):YZ(e)?$w.fromJSON(e):ZZ(e)?Ut.fromJSON(e):null}function xw(e){return e?JZ(e)?"esriGeometryPoint":Jk(e)?"esriGeometryPolyline":Yp(e)?"esriGeometryPolygon":ZZ(e)?"esriGeometryEnvelope":YZ(e)?"esriGeometryMultipoint":null:null}const _fe={esriGeometryPoint:Qe,esriGeometryPolyline:Qs,esriGeometryPolygon:oo,esriGeometryEnvelope:Ut,esriGeometryMultipoint:$w,esriGeometryMultiPatch:oo};function wfe(e){return e&&_fe[e]||null}const Sfe=Wr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),hU=Wr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Zg={base:Uu,key:"type",typeMap:{extent:Ut,multipoint:$w,point:Qe,polyline:Qs,polygon:oo}};var zC;let Rc=zC=class extends W{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new zC({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};u([h({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:r3}}}}})],Rc.prototype,"rotation",void 0),u([ft("rotation")],Rc.prototype,"castRotation",null),u([h({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:r3}}}}})],Rc.prototype,"scale",void 0),u([h({types:Zg,json:{read:Du,write:!0,origins:{"web-scene":{read:Du,write:{overridePolicy:r3}}}}})],Rc.prototype,"targetGeometry",void 0),u([h({type:xpe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Rc.prototype,"camera",void 0),Rc=zC=u([M("esri.Viewpoint")],Rc);const ni=Rc;function r3(){return{enabled:!this.camera}}let aa=class XZ{constructor(){this._emitter=new XZ.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(n=null){this._target=n,this._listenersMap=null}clear(){var n;(n=this._listenersMap)==null||n.clear(),this._listenersMap=null}destroy(){this.clear()}emit(n,s){var f;let o=(f=this._listenersMap)==null?void 0:f.get(n);if(!o)return!1;const l=this._target||this;let d=!1;for(const g of o.slice()){const v="deref"in g?g.deref():g;v?v==null||v.call(l,s):d=!0}return d&&(o=o.filter(g=>!("deref"in g)||g.deref()!=null),this._listenersMap.set(n,o)),o.length>0}on(n,s){if(Array.isArray(n)){const l=n.map(d=>this.on(d,s));return gw(l)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),vt(()=>{var f;const l=(f=this._listenersMap)==null?void 0:f.get(n),d=(l==null?void 0:l.indexOf(s))??-1;d>=0&&l.splice(d,1)})}once(n,s){const o=this.on(n,l=>{o.remove();const d="deref"in s?s.deref():s;d==null||d.call(null,l)});return o}hasEventListener(n){var o;const s=(o=this._listenersMap)==null?void 0:o.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=u([M("esri.core.Evented")],n),n};let r=class extends Ae{constructor(){super(...arguments),this._emitter=new aa.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=u([M("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(aa);var $t;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})($t||($t={}));function Xk(e){return(t,r)=>{t[r]=e}}let Aw=class extends iW{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var vu;let Tfe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},Efe=class{constructor(t,r,i,n,s){this.target=t,this.added=r,this.removed=i,this.start=n,this.deleteCount=s}};const Cs=new Tf(Tfe,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function pU(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function i3(e){return e?e instanceof pu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function n3(e){if(e!=null&&e.length)return e[0]}function $fe(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function KZ(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),KZ(e,r.call(i,n,s,o),r,i)})}const bc=new Set,_c=new Set,wc=new Set,s3=new Map;let xfe=0,pu=vu=class extends aa.EventedAccessor{static isCollection(e){return e!=null&&e instanceof vu}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Aw,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:xfe++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof vu?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Fe(this._observable),this._items}set items(e){this._emitBeforeChanges($t.ADD)||(this._splice(0,this.length,i3(e)),this._emitAfterChanges($t.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return vt();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),vt(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,n=>{var s;(s=r())==null||s.call(null,n),i.remove()});return i}add(e,t){if(Fe(this._observable),this._emitBeforeChanges($t.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges($t.ADD),this}addMany(e,t=this._items.length){if(Fe(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges($t.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,i3(e)),this._emitAfterChanges($t.ADD),this}at(e){if(Fe(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Fe(this._observable),!this.length||this._emitBeforeChanges($t.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges($t.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Fe(this._observable),this._createNewInstance({items:this._items.map(U)})}concat(...e){Fe(this._observable);const t=e.map(i3);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Fe(this._observable),!this.length||this._emitBeforeChanges($t.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges($t.REMOVE)}destroyAll(){this.drain(pU)}destroyMany(e){const t=this.removeMany(e);return t.forEach(pU),t}every(e,t){return Fe(this._observable),this._items.every(e,t)}filter(e,t){Fe(this._observable);const r=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return Fe(this._observable),this._items.find(e,t)}findIndex(e,t){return Fe(this._observable),this._items.findIndex(e,t)}flatten(e,t){Fe(this._observable);const r=[];return KZ(r,this,e,t),new vu(r)}forEach(e,t){return Fe(this._observable),this._items.forEach(e,t)}getItemAt(e){return Fe(this._observable),this._items[e]}getNextIndex(e){Fe(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Fe(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Fe(this._observable),this._items.indexOf(e,t)}join(e=","){return Fe(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Fe(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Fe(this._observable);const r=this._items.map(e,t);return new vu({items:r})}reorder(e,t=this.length-1){Fe(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges($t.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges($t.MOVE)}return e}}pop(){if(Fe(this._observable),!this.length||this._emitBeforeChanges($t.REMOVE))return;const e=n3(this._splice(this.length-1,1));return this._emitAfterChanges($t.REMOVE),e}push(...e){return Fe(this._observable),this._emitBeforeChanges($t.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges($t.ADD)),this.length}reduce(e,t){Fe(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Fe(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Fe(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Fe(this._observable),e<0||e>=this.length||this._emitBeforeChanges($t.REMOVE))return;const t=n3(this._splice(e,1));return this._emitAfterChanges($t.REMOVE),t}removeMany(e){if(Fe(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges($t.REMOVE))return[];const t=e instanceof vu?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],l=r.indexOf(o);if(l>-1){const d=1+$fe(t,r,s+1,l+1),f=this._splice(l,d);f&&f.length>0&&i.push.apply(i,f),s+=d-1}}return this._emitAfterChanges($t.REMOVE),i}reverse(){if(Fe(this._observable),this._emitBeforeChanges($t.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges($t.MOVE),this}shift(){if(Fe(this._observable),!this.length||this._emitBeforeChanges($t.REMOVE))return;const e=n3(this._splice(0,1));return this._emitAfterChanges($t.REMOVE),e}slice(e=0,t=this.length){return Fe(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Fe(this._observable),this._items.some(e,t)}sort(e){if(Fe(this._observable),!this.length||this._emitBeforeChanges($t.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges($t.MOVE),this}_requiresSort(e=(t,r)=>t===r?0:t<r?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){Fe(this._observable);const i=(t?$t.REMOVE:0)|(r.length?$t.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return Fe(this._observable),this._items.slice()}toJSON(){return Fe(this._observable),this.toArray()}toLocaleString(){return Fe(this._observable),this._items.toLocaleString()}toString(){return Fe(this._observable),this._items.toString()}unshift(...e){return Fe(this._observable),!e.length||this._emitBeforeChanges($t.ADD)||(this._splice(0,0,e),this._emitAfterChanges($t.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Sw(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const l=Cs.acquire();l.target=this,l.cancellable=!0;for(let d=0,f=o.length;d<f;d++)s=o[d],l.reset(s),this.emit("before-remove",l),l.defaultPrevented&&(o.splice(d,1),i.splice(e,0,s),e+=1,d-=1,f-=1);Cs.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const l=Cs.acquire();l.target=this,l.cancellable=!1;const d=o.length;for(let f=0;f<d;f++)l.reset(o[f]),this.emit("after-remove",l);Cs.release(l)}}if(r!=null&&r.length){if(n){const g=[];for(const v of r){const b=n.ensureType(v);b==null&&v!=null||g.push(b)}r=g}const l=this.hasEventListener("before-add"),d=this.hasEventListener("after-add"),f=e===this.length;if(l||d){const g=Cs.acquire();g.target=this,g.cancellable=!0;const v=Cs.acquire();v.target=this,v.cancellable=!1;for(const b of r)l?(g.reset(b),this.emit("before-add",g),g.defaultPrevented||(f?i.push(b):i.splice(e++,0,b),this._set("length",i.length),d&&(v.reset(b),this.emit("after-add",v)))):(f?i.push(b):i.splice(e++,0,b),this._set("length",i.length),v.reset(b),this.emit("after-add",v));Cs.release(v),Cs.release(g)}else{if(f)for(const g of r)i.push(g);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const l=new Efe(this,r,o,e,t);this.emit("after-splice",l)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=Cs.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,Cs.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Cs.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Cs.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;bc.clear(),_c.clear(),wc.clear();for(const{added:d,removed:f}of r){if(d)if(wc.size===0&&_c.size===0)for(const g of d)bc.add(g);else for(const g of d)_c.has(g)?(wc.add(g),_c.delete(g)):wc.has(g)||bc.add(g);if(f)if(wc.size===0&&bc.size===0)for(const g of f)_c.add(g);else for(const g of f)bc.has(g)?bc.delete(g):(wc.delete(g),_c.add(g))}const i=fn.acquire();bc.forEach(d=>{i.push(d)});const n=fn.acquire();_c.forEach(d=>{n.push(d)});const s=this._items,o=t.items,l=fn.acquire();if(wc.forEach(d=>{o.indexOf(d)!==s.indexOf(d)&&l.push(d)}),t.listeners&&(i.length||n.length||l.length)){const d={target:this,added:i,removed:n,moved:l},f=t.listeners.length;for(let g=0;g<f;g++){const v=t.listeners[g];v.removed||v.callback.call(this,d)}}fn.release(i),fn.release(n),fn.release(l)}bc.clear(),_c.clear(),wc.clear()}};pu.ofType=e=>{if(!e)return vu;if(s3.has(e))return s3.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends vu{};return u([Xk({Type:e,ensureType:typeof e=="function"?Or(e):oa(e)})],r.prototype,"itemType",void 0),r=u([M(`esri.core.Collection<${t}>`)],r),s3.set(e,r),r},u([h()],pu.prototype,"_updating",void 0),u([h()],pu.prototype,"length",void 0),u([h()],pu.prototype,"items",null),u([h({readOnly:!0})],pu.prototype,"updating",null),pu=vu=u([M("esri.core.Collection")],pu);const ge=pu;function Cje(e,t,r){return wk(e.map((i,n)=>t.apply(r,[i,n])))}async function Afe(e,t,r){return(await wk(e.map((i,n)=>t.apply(r,[i,n])))).map(i=>i.value)}function Kk(e){return{ok:!0,value:e}}function Qk(e){return{ok:!1,error:e}}function Mfe(e){return e!=null&&e.ok===!0?e.value:null}function Ofe(e){return e!=null&&e.ok===!1?e.error:null}async function fx(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return Kk(await e)}catch(t){return Qk(t)}}async function Rfe(e){try{return Kk(await e)}catch(t){return Ga(t),Qk(t)}}function Mw(e,t){return new Cc(e,t)}let Cc=class extends Ae{get value(){return Mfe(this._result)}get error(){return Ofe(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=bg(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(n=>{this._result=Kk(n),this._cleanup()},n=>{this._result=Qk(n),this._cleanup()}),this._abortHandle=ro(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=nr(this._abortHandle),this._abortController=null}};u([h()],Cc.prototype,"value",null),u([h()],Cc.prototype,"error",null),u([h()],Cc.prototype,"finished",null),u([h()],Cc.prototype,"promise",void 0),u([h()],Cc.prototype,"_result",void 0),Cc=u([M("esri.core.asyncUtils.ReactiveTask")],Cc);function ze(e,t,r={}){return eD(e,t,r,QZ)}function ao(e,t,r={}){return eD(e,t,r,eY)}function eD(e,t,r={},i){let n=null;const s=r.once?(o,l)=>{i(o)&&(nr(n),t(o,l))}:(o,l)=>{i(o)&&t(o,l)};if(n=bde(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function kd(e,t,r,i={}){let n=null,s=null,o=null;function l(){var g;n&&s&&(s.remove(),(g=i.onListenerRemove)==null||g.call(i,n),n=null,s=null)}function d(g){i.once&&i.once&&nr(o),r(g)}const f=ze(e,(g,v)=>{var b;l(),rx(g)&&(n=g,s=_w(g,t,d),(b=i.onListenerAdd)==null||b.call(i,g))},{sync:i.sync,initial:!0});return o=vt(()=>{f.remove(),l()}),o}function yx(e,t){return Cfe(e,eY,t)}function Cfe(e,t,r){if(ms(r))return Promise.reject(kt());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let n=null;function s(){n=nr(n)}return new Promise((o,l)=>{n=gw([ro(r,()=>{s(),l(kt())}),eD(e,d=>{s(),o(d)},{sync:!1,once:!0},t??QZ)])})}function QZ(e){return!0}function eY(e){return!!e}function Nje(e,t,r={}){let i=!1;const n=ze(e,(s,o)=>{i||t(s,o)},r);return{remove(){n.remove()},pause(){i=!0},resume(){i=!1}}}function Ife(e,t){const r=new ge,i=kd(e,"after-splice",({added:n,start:s,deleteCount:o})=>{const l=r.splice(s,o);for(const d of l)d.remove();if(n!=null&&n.length){const d=n.map(t);r.addMany(d,s)}},{sync:!0,onListenerRemove:()=>r.drain(n=>n.remove()),onListenerAdd:n=>r.addMany(n.items.map(t))});return r.addHandles(i),r}function Pje(e,t){const r=new ge,i=Ife(e,l=>Mw(async d=>{const f=await t(l,d);if(ms(d))throw f.remove(),kt();return f})),n=()=>null,s=async l=>{const d=await l.promise,f=i.indexOf(l);f<0||r.splice(f,1,d)};r.addMany(i.items.map(n));for(const l of i)P_(s(l));const o=i.on("after-splice",({added:l,start:d,deleteCount:f})=>{const g=r.splice(d,f);for(const v of g)v==null||v.remove();if(l!=null&&l.length){r.addMany(l.map(n),d);for(const v of l)P_(s(v))}});return r.addHandles([Uue(i),o]),r}const il={sync:!0},Xi={initial:!0},Pn={sync:!0,initial:!0};let Py=class extends ge{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(mW(()=>this._refresh(),il))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new ge(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(n=>!!n);for(const n of r)if(n){if(i(n)){const s=this.indexOf(n,t);s>=0?s!==t&&this.reorder(n,t):this.add(n,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(n);if(Array.isArray(s))for(const o of s)t=this._processCollection(t,o);else t=this._processCollection(t,s)}}return t}};u([h()],Py.prototype,"getCollections",void 0),u([h()],Py.prototype,"getChildrenFunction",void 0),u([h()],Py.prototype,"itemFilterFunction",void 0),Py=u([M("esri.core.CollectionFlattener")],Py);const U_=Py;let BE=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new Aw,this._items=new Set}get length(){return Fe(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Fe(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Fe(this._observable),yield*this._items}};const tY=new FinalizationRegistry(e=>{e.close()});function Nfe(e,t){tY.register(e,t,t)}function Pfe(e){tY.unregister(e)}function rY(e,t){return new Proxy({},{get:(r,i,n)=>(...s)=>{let o,l;const d=s[s.length-1];return Lfe(d)&&(o=d.signal,l=d.transferList,s.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),s,{transferList:l,signal:o})}})}function Lfe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const kfe={statsWorker:()=>ne(()=>import("./statsWorker-D-yHg47G.js"),__vite__mapDeps([4,5,6,7,8,9])),geometryEngineWorker:()=>ne(()=>import("./geometryEngineWorker-CA-tZxOm.js"),__vite__mapDeps([10,11,12,3,13])),arcadeGeometryOperatorsWorker:()=>ne(()=>import("./operatorsWorker-DbqhVVeJ.js"),[]),CSVSourceWorker:()=>ne(()=>import("./CSVSourceWorker-CYofRzAv.js"),__vite__mapDeps([14,15,13,16,17,18,19,20,21,22,23,24,25,26,27,6,5,7,8,9,28,29,30,31,32,33,34,35])),EdgeProcessingWorker:()=>ne(()=>import("./EdgeProcessingWorker-CpJOvq9C.js"),__vite__mapDeps([36,37,38,39,40,41,42,43,44,45,46,47])),ElevationSamplerWorker:()=>ne(()=>import("./ElevationSamplerWorker-iQaUIEEG.js"),__vite__mapDeps([48,32,49,50,51,52,53,54,55,56,57,39,58])),FeatureServiceSnappingSourceWorker:()=>ne(()=>import("./FeatureServiceSnappingSourceWorker-Cn3XU-3l.js"),__vite__mapDeps([59,18,19,13,20,21,16,17,22,23,24,25,26,27,6,5,7,8,9,28,29,30,31,32,33,60,61,62,63,64])),GeoJSONSourceWorker:()=>ne(()=>import("./GeoJSONSourceWorker-C4L8cjPi.js"),__vite__mapDeps([65,21,16,17,22,18,19,13,20,23,24,25,26,27,6,5,7,8,9,28,29,30,31,32,33,66,15,35,67])),LercWorker:()=>ne(()=>import("./LercWorker-CL97dOev.js"),[]),MemorySourceWorker:()=>ne(()=>import("./MemorySourceWorker-Cvi2UQLz.js"),__vite__mapDeps([68,21,16,17,22,69,18,19,13,20,23,24,25,26,27,6,5,7,8,9,28,29,30,31,32,33,35,67,15])),PBFDecoderWorker:()=>ne(()=>import("./PBFDecoderWorker-DBxZRghg.js"),__vite__mapDeps([70,71,17,21,16,22,61,62])),FeaturePipelineWorker:()=>ne(()=>import("./FeaturePipelineWorker-DAEmKWWT.js"),__vite__mapDeps([72,73,74,46,75,76,16,17,77,78,79,80,19,13,26,21,22,25,6,81,82,83,84,85,86,87,88,89,33,20,23,24,27,5,7,8,9,28,29,90,91,92,93,63,61,62,94,66,15,35,67,95,96,97])),PointCloudWorker:()=>ne(()=>import("./PointCloudWorker-B-QGZgZW.js"),__vite__mapDeps([98,99,51,100,101,102,103,44,104,52,53,54,105])),RasterWorker:()=>ne(()=>import("./RasterWorker-COAVNxth.js"),__vite__mapDeps([106,107,108,3,109,110,111,112])),SceneLayerSnappingSourceWorker:()=>ne(()=>import("./SceneLayerSnappingSourceWorker-SSvO8ceO.js"),__vite__mapDeps([113,114,115,51,105,52,100,116,38,39,40,41,42,43,44,45,46,47])),SceneLayerWorker:()=>ne(()=>import("./SceneLayerWorker-B9qhNWwN.js"),__vite__mapDeps([117,49,57,118,55,115,51,105,52,100,119,103,44,120,79,121,122,123,124,104,99,53,54])),WFSSourceWorker:()=>ne(()=>import("./WFSSourceWorker-CP9JfyKf.js"),__vite__mapDeps([125,21,16,17,22,18,19,13,20,23,24,25,26,27,6,5,7,8,9,28,29,30,31,32,33,66,15,67,126,127])),WorkerTileHandler:()=>ne(()=>import("./WorkerTileHandler-BudjIasZ.js"),__vite__mapDeps([128,129,77,80,130,131,62,17,85,132,133,46,109,87,76])),Lyr3DWorker:()=>ne(()=>import("./Lyr3DWorker-zlcHeApX.js"),[]),Feature3DPipelineWorker:()=>ne(()=>import("./Feature3DPipelineWorker-C5eoSiJ7.js"),__vite__mapDeps([134,20,21,16,17,22,23,24,25,26,19,13,27,6,5,7,8,9,28,29,32,63,61,62,43,135,136,137,138,123,52,124,122,51,44,139,115,105,100,114,104,99,53,54,140,141,38,39,40,142,45,46,143,116,144,79,145,146,56,49,118,55,147,101,148,149,150,121,151])),TextureCompressionWorker:()=>ne(()=>import("./TextureCompressionWorker-Bbstcnjc.js"),__vite__mapDeps([152,141]))},iY="worker:port-closed";var _i;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(_i||(_i={}));let Dfe=0;function nY(){return Dfe++}function jfe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function V_(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function tD(e,t,r,i){if(t.type===_i.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==_i.INVOKE&&t.type!==_i.RESPONSE)return void e.postMessage(t);let n;if(jfe(r)?(n=fU(r.transferList),t.data=r.result):(n=fU(i),t.data=r),n){if(Z("ff")){for(const s of n)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case _i.INVOKE:throw o;case _i.RESPONSE:return void tD(e,{type:_i.RESPONSE,jobId:t.jobId,error:V_(o)})}}}e.postMessage(t,n)}else e.postMessage(t)}function z_(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function fU(e){if(!(e!=null&&e.length))return null;if(Z("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!Ffe(r));return t.length?t:null}function Ffe(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function Dje(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===iY;if(!(Ni(t)||r))throw t;return}}const{CLOSE:yU,ABORT:mU,INVOKE:gU,RESPONSE:uv,OPEN_PORT:vU,ON:Ufe}=_i,Vfe=2;let zfe=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===_i.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Dd=class Ly{static connect(t,r){const i=new MessageChannel;let n;n=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new Ly(i.port1,{channel:i,client:n,schedule:r});return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=s),Ly.clients.set(s,n),i.port2}static loadWorker(t){const r=kfe[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new zfe(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:yU}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=i==null?void 0:i.signal,s=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new V(iY,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=nY();return new Promise((l,d)=>{if(ms(n))return this._processWork(),void d(kt());const f=ro(n,()=>{const v=this._outJobs.get(o);v&&(this._outJobs.delete(o),this._processWork(),nr(v.abortHandle),this._post({type:mU,jobId:o}),d(kt()))}),g={resolve:l,reject:d,abortHandle:f,debugInfo:t};this._outJobs.set(o,g),this._post({type:gU,jobId:o,methodName:t,abortable:n!=null},r,s)})}createInvokeProxy(t){return rY(this,t)}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:_i.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),vt(()=>{i.port1.postMessage({type:_i.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:vU,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=Vfe)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:n,resolver:s}=t;this.apply(r,i,n).then(l=>s.resolve(l)).catch(l=>s.reject(l))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{nr(t.abortHandle),t.reject(kt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=z_(t);if(i)switch(i.type){case uv:this._onResponseMessage(i);break;case gU:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case mU:this._onAbortMessage(i);break;case yU:this._onCloseMessage();break;case vU:this._onOpenPortMessage(i);break;case Ufe:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Ly.clients.get(this)===t&&t.destroy(),Ly.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n=[],abortable:s}=t,o=s?new AbortController:null,l=this._inJobs;let d,f=this._client,g=f[r];try{if(!g&&r&&r.includes(".")){const v=r.split(".");for(let b=0;b<v.length-1;b++)f=f[v[b]],g=f[v[b+1]]}if(typeof g!="function")throw new TypeError(`${r} is not a function`);n.push({client:this,signal:o?o.signal:null}),d=g.apply(f,n)}catch(v){return void this._post({type:uv,jobId:i,error:V_(v)})}ll(d)?(l.set(i,{controller:o,promise:d}),d.then(v=>{l.has(i)&&(l.delete(i),this._post({type:uv,jobId:i},v))},v=>{l.has(i)&&(l.delete(i),Ni(v)||this._post({type:uv,jobId:i,error:V_(v||{message:`Error encountered at method ${r}`})}))})):this._post({type:uv,jobId:i},d)}_onOpenPortMessage(t){new Ly(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=_w(t.port,"message",s=>{const o=z_(s);(o==null?void 0:o.type)===_i.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),nr(o.abortHandle),i?o.reject(V.fromJSON(JSON.parse(i))):o.resolve(n)}_post(t,r,i){return tD(this._port,t,r,i)}};Dd.kernelInfo={buildDate:ZW,fullVersion:Pk,revision:YW},Dd.clients=new Map;let Gfe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new BE}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,n)=>{let s=!0;const o=l=>{hr(r.signal),s&&(s=!1,l())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let l=0;l<t.length;++l){const d=t[l];ll(d)?this._clientPromises[l]=d.then(f=>(this._clients[l]=new Dd(f,r,this._ongoingJobsQueue),o(i),this._clients[l]),()=>(o(n),null)):(this._clients[l]=new Dd(d,r,this._ongoingJobsQueue),this._clientPromises[l]=Promise.resolve(this._clients[l]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(l=>l==null?void 0:l.invoke(t,r,i))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(kt(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Pfe(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const n=gs();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:n});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(l=>l==null?void 0:l.jobAdded())}return n.promise}createInvokeProxy(t){return rY(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>gw(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{s&&(r[n]=s.openPort()),--i==0&&t(r)})})}get test(){}};const Bfe={async request(e,t){var o,l;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=bC(e.url))!=null&&o.after)?i:"array-buffer";const n=await mt(e.url,r),s={data:n.data,httpStatus:n.httpStatus,ssl:n.ssl};switch((l=n.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}};let t_;var GB,BB;const qfe=((GB=globalThis.esriConfig)==null?void 0:GB.locale)??((BB=globalThis.dojoConfig)==null?void 0:BB.locale);var qB;const r_=(qB=globalThis.document)==null?void 0:qB.documentElement;function sY(){var r;const e=r_==null?void 0:r_.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return qfe??e??t??"en"}function Fn(){return t_===void 0&&(t_=sY()),t_}function Uje(e=Fn()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const j2=[];function oY(e){return j2.push(e),vt(()=>j2.splice(j2.indexOf(e),1))}const F2=[];function rD(e){return F2.push(e),vt(()=>F2.splice(F2.indexOf(e),1))}function bU(){const e=sY();t_!==e&&([...F2].forEach(t=>t(e)),t_=e,[...j2].forEach(t=>t(e)))}var HB;(HB=globalThis.addEventListener)==null||HB.call(globalThis,"languagechange",bU),r_&&new MutationObserver(()=>{bU()}).observe(r_,{attributeFilter:["lang"]});const la="system",ff="unknown",jd="UTC",Hfe=Intl.DateTimeFormat().resolvedOptions().timeZone,_U=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class $f extends Error{}class Wfe extends $f{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Zfe extends $f{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Yfe extends $f{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Um extends $f{}class aY extends $f{constructor(t){super(`Invalid unit ${t}`)}}class qi extends $f{}class Sc extends $f{constructor(){super("Zone is an abstract class")}}const Se="numeric",ua="short",ys="long",qE={year:Se,month:Se,day:Se},lY={year:Se,month:ua,day:Se},Jfe={year:Se,month:ua,day:Se,weekday:ua},uY={year:Se,month:ys,day:Se},cY={year:Se,month:ys,day:Se,weekday:ys},dY={hour:Se,minute:Se},hY={hour:Se,minute:Se,second:Se},pY={hour:Se,minute:Se,second:Se,timeZoneName:ua},fY={hour:Se,minute:Se,second:Se,timeZoneName:ys},yY={hour:Se,minute:Se,hourCycle:"h23"},mY={hour:Se,minute:Se,second:Se,hourCycle:"h23"},gY={hour:Se,minute:Se,second:Se,hourCycle:"h23",timeZoneName:ua},vY={hour:Se,minute:Se,second:Se,hourCycle:"h23",timeZoneName:ys},bY={year:Se,month:Se,day:Se,hour:Se,minute:Se},_Y={year:Se,month:Se,day:Se,hour:Se,minute:Se,second:Se},wY={year:Se,month:ua,day:Se,hour:Se,minute:Se},SY={year:Se,month:ua,day:Se,hour:Se,minute:Se,second:Se},Xfe={year:Se,month:ua,day:Se,weekday:ua,hour:Se,minute:Se},TY={year:Se,month:ys,day:Se,hour:Se,minute:Se,timeZoneName:ua},EY={year:Se,month:ys,day:Se,hour:Se,minute:Se,second:Se,timeZoneName:ua},$Y={year:Se,month:ys,day:Se,weekday:ys,hour:Se,minute:Se,timeZoneName:ys},xY={year:Se,month:ys,day:Se,weekday:ys,hour:Se,minute:Se,second:Se,timeZoneName:ys};class xf{get type(){throw new Sc}get name(){throw new Sc}get ianaName(){return this.name}get isUniversal(){throw new Sc}offsetName(t,r){throw new Sc}formatOffset(t,r){throw new Sc}offset(t){throw new Sc}equals(t){throw new Sc}get isValid(){throw new Sc}}let o3=null;class mx extends xf{static get instance(){return o3===null&&(o3=new mx),o3}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return LY(t,r,i)}formatOffset(t,r){return i_(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let U2={};function Kfe(e){return U2[e]||(U2[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),U2[e]}const Qfe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function eye(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,l,d,f,g]=i;return[o,n,s,l,d,f,g]}function tye(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],l=Qfe[s];s==="era"?i[l]=o:Ke(l)||(i[l]=parseInt(o,10))}return i}let yS={};class zn extends xf{static create(t){return yS[t]||(yS[t]=new zn(t)),yS[t]}static resetCache(){yS={},U2={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=zn.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return LY(t,r,i,this.name)}formatOffset(t,r){return i_(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=Kfe(this.name);let[n,s,o,l,d,f,g]=i.formatToParts?tye(i,r):eye(i,r);l==="BC"&&(n=-Math.abs(n)+1);const b=vx({year:n,month:s,day:o,hour:d===24?0:d,minute:f,second:g,millisecond:0});let S=+r;const T=S%1e3;return S-=T>=0?T:1e3+T,(b-S)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let wU={};function rye(e,t={}){const r=JSON.stringify([e,t]);let i=wU[r];return i||(i=new Intl.ListFormat(e,t),wU[r]=i),i}let GC={};function BC(e,t={}){const r=JSON.stringify([e,t]);let i=GC[r];return i||(i=new Intl.DateTimeFormat(e,t),GC[r]=i),i}let qC={};function iye(e,t={}){const r=JSON.stringify([e,t]);let i=qC[r];return i||(i=new Intl.NumberFormat(e,t),qC[r]=i),i}let HC={};function nye(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=HC[n];return s||(s=new Intl.RelativeTimeFormat(e,t),HC[n]=s),s}let Dv=null;function sye(){return Dv||(Dv=new Intl.DateTimeFormat().resolvedOptions().locale,Dv)}let SU={};function oye(e){let t=SU[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,SU[e]=t}return t}function aye(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,n;try{i=BC(e).resolvedOptions(),n=e}catch{const d=e.substring(0,r);i=BC(d).resolvedOptions(),n=d}const{numberingSystem:s,calendar:o}=i;return[n,s,o]}}function lye(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function uye(e){const t=[];for(let r=1;r<=12;r++){const i=Pe.utc(2009,r,1);t.push(e(i))}return t}function cye(e){const t=[];for(let r=1;r<=7;r++){const i=Pe.utc(2016,11,13+r);t.push(e(i))}return t}function mS(e,t,r,i){const n=e.listingMode();return n==="error"?null:n==="en"?r(t):i(t)}function dye(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class hye{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=iye(t,l)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):aD(t,3);return qr(r,this.padTo)}}}class pye{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&zn.create(l).valid?(n=l,this.dt=t):(n="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,n=t.zone.name):(n="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=BC(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class fye{constructor(t,r,i){this.opts={style:"long",...i},!r&&NY()&&(this.rtf=nye(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):Dye(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const yye={firstDay:1,minimalDays:4,weekend:[6,7]};class Lt{static fromOpts(t){return Lt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,n,s=!1){const o=t||Mr.defaultLocale,l=o||(s?"en-US":sye()),d=r||Mr.defaultNumberingSystem,f=i||Mr.defaultOutputCalendar,g=WC(n)||Mr.defaultWeekSettings;return new Lt(l,d,f,g,o)}static resetCache(){Dv=null,GC={},qC={},HC={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:n}={}){return Lt.create(t,r,i,n)}constructor(t,r,i,n,s){const[o,l,d]=aye(t);this.locale=o,this.numberingSystem=r||l||null,this.outputCalendar=i||d||null,this.weekSettings=n,this.intl=lye(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=dye(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Lt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,WC(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return mS(this,t,jY,()=>{const i=r?{month:t,day:"numeric"}:{month:t},n=r?"format":"standalone";return this.monthsCache[n][t]||(this.monthsCache[n][t]=uye(s=>this.extract(s,i,"month"))),this.monthsCache[n][t]})}weekdays(t,r=!1){return mS(this,t,VY,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},n=r?"format":"standalone";return this.weekdaysCache[n][t]||(this.weekdaysCache[n][t]=cye(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][t]})}meridiems(){return mS(this,void 0,()=>zY,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Pe.utc(2016,11,13,9),Pe.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return mS(this,t,GY,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Pe.utc(-40,1,1),Pe.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(l=>l.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new hye(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new pye(t,this.intl,r)}relFormatter(t={}){return new fye(this.intl,this.isEnglish(),t)}listFormatter(t={}){return rye(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:PY()?oye(this.locale):yye}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let a3=null;class wi extends xf{static get utcInstance(){return a3===null&&(a3=new wi(0)),a3}static instance(t){return t===0?wi.utcInstance:new wi(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new wi(bx(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${i_(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${i_(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return i_(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class mye extends xf{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function yd(e,t){if(Ke(e)||e===null)return t;if(e instanceof xf)return e;if(Sye(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?mx.instance:r==="utc"||r==="gmt"?wi.utcInstance:wi.parseSpecifier(r)||zn.create(e)}else return Md(e)?wi.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new mye(e)}const iD={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},TU={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gye=iD.hanidec.replace(/[\[|\]]/g,"").split("");function vye(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(iD.hanidec)!==-1)t+=gye.indexOf(e[r]);else for(const n in TU){const[s,o]=TU[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}let ky={};function bye(){ky={}}function To({numberingSystem:e},t=""){const r=e||"latn";return ky[r]||(ky[r]={}),ky[r][t]||(ky[r][t]=new RegExp(`${iD[r]}${t}`)),ky[r][t]}let EU=()=>Date.now(),$U="system",xU=null,AU=null,MU=null,OU=60,RU,CU=null;class Mr{static get now(){return EU}static set now(t){EU=t}static set defaultZone(t){$U=t}static get defaultZone(){return yd($U,mx.instance)}static get defaultLocale(){return xU}static set defaultLocale(t){xU=t}static get defaultNumberingSystem(){return AU}static set defaultNumberingSystem(t){AU=t}static get defaultOutputCalendar(){return MU}static set defaultOutputCalendar(t){MU=t}static get defaultWeekSettings(){return CU}static set defaultWeekSettings(t){CU=WC(t)}static get twoDigitCutoffYear(){return OU}static set twoDigitCutoffYear(t){OU=t%100}static get throwOnInvalid(){return RU}static set throwOnInvalid(t){RU=t}static resetCaches(){Lt.resetCache(),zn.resetCache(),Pe.resetCache(),bye()}}class Jo{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const AY=[0,31,59,90,120,151,181,212,243,273,304,334],MY=[0,31,60,91,121,152,182,213,244,274,305,335];function eo(e,t){return new Jo("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function nD(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function OY(e,t,r){return r+(Ow(e)?MY:AY)[t-1]}function RY(e,t){const r=Ow(e)?MY:AY,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function sD(e,t){return(e-t+7)%7+1}function HE(e,t=4,r=1){const{year:i,month:n,day:s}=e,o=OY(i,n,s),l=sD(nD(i,n,s),r);let d=Math.floor((o-l+14-t)/7),f;return d<1?(f=i-1,d=G_(f,t,r)):d>G_(i,t,r)?(f=i+1,d=1):f=i,{weekYear:f,weekNumber:d,weekday:l,..._x(e)}}function IU(e,t=4,r=1){const{weekYear:i,weekNumber:n,weekday:s}=e,o=sD(nD(i,1,t),r),l=Ym(i);let d=n*7+s-o-7+t,f;d<1?(f=i-1,d+=Ym(f)):d>l?(f=i+1,d-=Ym(i)):f=i;const{month:g,day:v}=RY(f,d);return{year:f,month:g,day:v,..._x(e)}}function l3(e){const{year:t,month:r,day:i}=e,n=OY(t,r,i);return{year:t,ordinal:n,..._x(e)}}function NU(e){const{year:t,ordinal:r}=e,{month:i,day:n}=RY(t,r);return{year:t,month:i,day:n,..._x(e)}}function PU(e,t){if(!Ke(e.localWeekday)||!Ke(e.localWeekNumber)||!Ke(e.localWeekYear)){if(!Ke(e.weekday)||!Ke(e.weekNumber)||!Ke(e.weekYear))throw new Um("Cannot mix locale-based week fields with ISO-based week fields");return Ke(e.localWeekday)||(e.weekday=e.localWeekday),Ke(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ke(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function _ye(e,t=4,r=1){const i=gx(e.weekYear),n=to(e.weekNumber,1,G_(e.weekYear,t,r)),s=to(e.weekday,1,7);return i?n?s?!1:eo("weekday",e.weekday):eo("week",e.weekNumber):eo("weekYear",e.weekYear)}function wye(e){const t=gx(e.year),r=to(e.ordinal,1,Ym(e.year));return t?r?!1:eo("ordinal",e.ordinal):eo("year",e.year)}function CY(e){const t=gx(e.year),r=to(e.month,1,12),i=to(e.day,1,WE(e.year,e.month));return t?r?i?!1:eo("day",e.day):eo("month",e.month):eo("year",e.year)}function IY(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=to(t,0,23)||t===24&&r===0&&i===0&&n===0,o=to(r,0,59),l=to(i,0,59),d=to(n,0,999);return s?o?l?d?!1:eo("millisecond",n):eo("second",i):eo("minute",r):eo("hour",t)}function Ke(e){return typeof e>"u"}function Md(e){return typeof e=="number"}function gx(e){return typeof e=="number"&&e%1===0}function Sye(e){return typeof e=="string"}function Tye(e){return Object.prototype.toString.call(e)==="[object Date]"}function NY(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function PY(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Eye(e){return Array.isArray(e)?e:[e]}function LU(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function $ye(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function Og(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function WC(e){if(e==null)return null;if(typeof e!="object")throw new qi("Week settings must be an object");if(!to(e.firstDay,1,7)||!to(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!to(t,1,7)))throw new qi("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function to(e,t,r){return gx(e)&&e>=t&&e<=r}function xye(e,t){return e-t*Math.floor(e/t)}function qr(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function ad(e){if(!(Ke(e)||e===null||e===""))return parseInt(e,10)}function Ih(e){if(!(Ke(e)||e===null||e===""))return parseFloat(e)}function oD(e){if(!(Ke(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function aD(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function Ow(e){return e%4===0&&(e%100!==0||e%400===0)}function Ym(e){return Ow(e)?366:365}function WE(e,t){const r=xye(t-1,12)+1,i=e+(t-r)/12;return r===2?Ow(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function vx(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function kU(e,t,r){return-sD(nD(e,1,t),r)+t-1}function G_(e,t=4,r=1){const i=kU(e,t,r),n=kU(e+1,t,r);return(Ym(e)-i+n)/7}function ZC(e){return e>99?e:e>Mr.twoDigitCutoffYear?1900+e:2e3+e}function LY(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},l=new Intl.DateTimeFormat(r,o).formatToParts(n).find(d=>d.type.toLowerCase()==="timezonename");return l?l.value:null}function bx(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function kY(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new qi(`Invalid unit value ${e}`);return t}function ZE(e,t){const r={};for(const i in e)if(Og(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=kY(n)}return r}function i_(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${qr(r,2)}:${qr(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${qr(r,2)}${qr(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function _x(e){return $ye(e,["hour","minute","second","millisecond"])}const Aye=["January","February","March","April","May","June","July","August","September","October","November","December"],DY=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Mye=["J","F","M","A","M","J","J","A","S","O","N","D"];function jY(e){switch(e){case"narrow":return[...Mye];case"short":return[...DY];case"long":return[...Aye];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const FY=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],UY=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Oye=["M","T","W","T","F","S","S"];function VY(e){switch(e){case"narrow":return[...Oye];case"short":return[...UY];case"long":return[...FY];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const zY=["AM","PM"],Rye=["Before Christ","Anno Domini"],Cye=["BC","AD"],Iye=["B","A"];function GY(e){switch(e){case"narrow":return[...Iye];case"short":return[...Cye];case"long":return[...Rye];default:return null}}function Nye(e){return zY[e.hour<12?0:1]}function Pye(e,t){return VY(t)[e.weekday-1]}function Lye(e,t){return jY(t)[e.month-1]}function kye(e,t){return GY(t)[e.year<0?0:1]}function Dye(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const v=e==="days";switch(t){case 1:return v?"tomorrow":`next ${n[e][0]}`;case-1:return v?"yesterday":`last ${n[e][0]}`;case 0:return v?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,l=Math.abs(t),d=l===1,f=n[e],g=i?d?f[1]:f[2]||f[1]:d?n[e][0]:e;return o?`${l} ${g} ago`:`in ${l} ${g}`}function DU(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const jye={D:qE,DD:lY,DDD:uY,DDDD:cY,t:dY,tt:hY,ttt:pY,tttt:fY,T:yY,TT:mY,TTT:gY,TTTT:vY,f:bY,ff:wY,fff:TY,ffff:$Y,F:_Y,FF:SY,FFF:EY,FFFF:xY};class Zi{static create(t,r={}){return new Zi(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const l=t.charAt(o);l==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),r=null,i="",n=!n):n||l===r?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,r=l)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(t){return jye[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return qr(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(S,T)=>this.loc.extract(t,S,T),o=S=>t.isOffsetFixed&&t.offset===0&&S.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,S.format):"",l=()=>i?Nye(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(S,T)=>i?Lye(t,S):s(T?{month:S}:{month:S,day:"numeric"},"month"),f=(S,T)=>i?Pye(t,S):s(T?{weekday:S}:{weekday:S,month:"long",day:"numeric"},"weekday"),g=S=>{const T=Zi.macroTokenToFormatOpts(S);return T?this.formatWithSystemDefault(t,T):S},v=S=>i?kye(t,S):s({era:S},"era"),b=S=>{switch(S){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return l();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return f("short",!0);case"cccc":return f("long",!0);case"ccccc":return f("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return f("short",!1);case"EEEE":return f("long",!1);case"EEEEE":return f("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return v("short");case"GG":return v("long");case"GGGGG":return v("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return g(S)}};return DU(Zi.parseFormat(r),b)}formatDurationFromString(t,r){const i=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=d=>f=>{const g=i(f);return g?this.num(d.get(g),f.length):f},s=Zi.parseFormat(r),o=s.reduce((d,{literal:f,val:g})=>f?d:d.concat(g),[]),l=t.shiftTo(...o.map(i).filter(d=>d));return DU(s,n(l))}}const BY=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Yg(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Jg(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,l,d]=s(t,n);return[{...r,...o},l||i,d]},[{},null,1]).slice(0,2)}function Xg(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function qY(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=ad(t[r+n]);return[i,null,r+n]}}const HY=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Fye=`(?:${HY.source}?(?:\\[(${BY.source})\\])?)?`,lD=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,WY=RegExp(`${lD.source}${Fye}`),uD=RegExp(`(?:T${WY.source})?`),Uye=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vye=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zye=/(\d{4})-?(\d{3})/,Gye=qY("weekYear","weekNumber","weekDay"),Bye=qY("year","ordinal"),qye=/(\d{4})-(\d\d)-(\d\d)/,ZY=RegExp(`${lD.source} ?(?:${HY.source}|(${BY.source}))?`),Hye=RegExp(`(?: ${ZY.source})?`);function Jm(e,t,r){const i=e[t];return Ke(i)?r:ad(i)}function Wye(e,t){return[{year:Jm(e,t),month:Jm(e,t+1,1),day:Jm(e,t+2,1)},null,t+3]}function Kg(e,t){return[{hours:Jm(e,t,0),minutes:Jm(e,t+1,0),seconds:Jm(e,t+2,0),milliseconds:oD(e[t+3])},null,t+4]}function Rw(e,t){const r=!e[t]&&!e[t+1],i=bx(e[t+1],e[t+2]),n=r?null:wi.instance(i);return[{},n,t+3]}function Cw(e,t){const r=e[t]?zn.create(e[t]):null;return[{},r,t+1]}const Zye=RegExp(`^T?${lD.source}$`),Yye=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Jye(e){const[t,r,i,n,s,o,l,d,f]=e,g=t[0]==="-",v=d&&d[0]==="-",b=(S,T=!1)=>S!==void 0&&(T||S&&g)?-S:S;return[{years:b(Ih(r)),months:b(Ih(i)),weeks:b(Ih(n)),days:b(Ih(s)),hours:b(Ih(o)),minutes:b(Ih(l)),seconds:b(Ih(d),d==="-0"),milliseconds:b(oD(f),v)}]}const Xye={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function cD(e,t,r,i,n,s,o){const l={year:t.length===2?ZC(ad(t)):ad(t),month:DY.indexOf(r)+1,day:ad(i),hour:ad(n),minute:ad(s)};return o&&(l.second=ad(o)),e&&(l.weekday=e.length>3?FY.indexOf(e)+1:UY.indexOf(e)+1),l}const Kye=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Qye(e){const[,t,r,i,n,s,o,l,d,f,g,v]=e,b=cD(t,n,i,r,s,o,l);let S;return d?S=Xye[d]:f?S=0:S=bx(g,v),[b,new wi(S)]}function eme(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const tme=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rme=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ime=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function jU(e){const[,t,r,i,n,s,o,l]=e;return[cD(t,n,i,r,s,o,l),wi.utcInstance]}function nme(e){const[,t,r,i,n,s,o,l]=e;return[cD(t,l,r,i,n,s,o),wi.utcInstance]}const sme=Yg(Uye,uD),ome=Yg(Vye,uD),ame=Yg(zye,uD),lme=Yg(WY),YY=Jg(Wye,Kg,Rw,Cw),ume=Jg(Gye,Kg,Rw,Cw),cme=Jg(Bye,Kg,Rw,Cw),dme=Jg(Kg,Rw,Cw);function hme(e){return Xg(e,[sme,YY],[ome,ume],[ame,cme],[lme,dme])}function pme(e){return Xg(eme(e),[Kye,Qye])}function fme(e){return Xg(e,[tme,jU],[rme,jU],[ime,nme])}function yme(e){return Xg(e,[Yye,Jye])}const mme=Jg(Kg);function gme(e){return Xg(e,[Zye,mme])}const vme=Yg(qye,Hye),bme=Yg(ZY),_me=Jg(Kg,Rw,Cw);function wme(e){return Xg(e,[vme,YY],[bme,_me])}const FU="Invalid Duration",JY={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Sme={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...JY},Is=146097/400,my=146097/4800,Tme={years:{quarters:4,months:12,weeks:Is/7,days:Is,hours:Is*24,minutes:Is*24*60,seconds:Is*24*60*60,milliseconds:Is*24*60*60*1e3},quarters:{months:3,weeks:Is/28,days:Is/4,hours:Is*24/4,minutes:Is*24*60/4,seconds:Is*24*60*60/4,milliseconds:Is*24*60*60*1e3/4},months:{weeks:my/7,days:my,hours:my*24,minutes:my*24*60,seconds:my*24*60*60,milliseconds:my*24*60*60*1e3},...JY},jp=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Eme=jp.slice(0).reverse();function Tc(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new wt(i)}function XY(e,t){let r=t.milliseconds??0;for(const i of Eme.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function UU(e,t){const r=XY(e,t)<0?-1:1;jp.reduceRight((i,n)=>{if(Ke(t[n]))return i;if(i){const s=t[i]*r,o=e[n][i],l=Math.floor(s/o);t[n]+=l*r,t[i]-=l*o*r}return n},null),jp.reduce((i,n)=>{if(Ke(t[n]))return i;if(i){const s=t[i]%1;t[i]-=s,t[n]+=s*e[i][n]}return n},null)}function $me(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class wt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?Tme:Sme;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||Lt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return wt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new qi(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new wt({values:ZE(t,wt.normalizeUnit),loc:Lt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(Md(t))return wt.fromMillis(t);if(wt.isDuration(t))return t;if(typeof t=="object")return wt.fromObject(t);throw new qi(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=yme(t);return i?wt.fromObject(i,r):wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=gme(t);return i?wt.fromObject(i,r):wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new qi("need to specify a reason the Duration is invalid");const i=t instanceof Jo?t:new Jo(t,r);if(Mr.throwOnInvalid)throw new Yfe(i);return new wt({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new aY(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Zi.create(this.loc,i).formatDurationFromString(this,t):FU}toHuman(t={}){if(!this.isValid)return FU;const r=jp.map(i=>{const n=this.values[i];return Ke(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=aD(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Pe.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?XY(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t),i={};for(const n of jp)(Og(r.values,n)||Og(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Tc(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=kY(t(this.values[i],i));return Tc(this,{values:r},!0)}get(t){return this[wt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...ZE(t,wt.normalizeUnit)};return Tc(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:n}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:n,conversionAccuracy:i};return Tc(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return UU(this.matrix,t),Tc(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=$me(this.normalize().shiftToAll().toObject());return Tc(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>wt.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of jp)if(t.indexOf(o)>=0){s=o;let l=0;for(const f in i)l+=this.matrix[f][o]*i[f],i[f]=0;Md(n[o])&&(l+=n[o]);const d=Math.trunc(l);r[o]=d,i[o]=(l*1e3-d*1e3)/1e3}else Md(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return UU(this.matrix,r),Tc(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Tc(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of jp)if(!r(this.values[i],t.values[i]))return!1;return!0}}const gy="Invalid Interval";function xme(e,t){return!e||!e.isValid?xr.invalid("missing or invalid start"):!t||!t.isValid?xr.invalid("missing or invalid end"):t<e?xr.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class xr{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new qi("need to specify a reason the Interval is invalid");const i=t instanceof Jo?t:new Jo(t,r);if(Mr.throwOnInvalid)throw new Zfe(i);return new xr({invalid:i})}static fromDateTimes(t,r){const i=cv(t),n=cv(r),s=xme(i,n);return s??new xr({start:i,end:n})}static after(t,r){const i=wt.fromDurationLike(r),n=cv(t);return xr.fromDateTimes(n,n.plus(i))}static before(t,r){const i=wt.fromDurationLike(r),n=cv(t);return xr.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=Pe.fromISO(i,r),o=s.isValid}catch{o=!1}let l,d;try{l=Pe.fromISO(n,r),d=l.isValid}catch{d=!1}if(o&&d)return xr.fromDateTimes(s,l);if(o){const f=wt.fromISO(n,r);if(f.isValid)return xr.after(s,f)}else if(d){const f=wt.fromISO(i,r);if(f.isValid)return xr.before(l,f)}}return xr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let n;return r!=null&&r.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(t,r),Math.floor(n.diff(i,t).get(t))+(n.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?xr.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(cv).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,l=+o>+this.e?this.e:o;i.push(xr.fromDateTimes(n,l)),n=l,s+=1}return i}splitBy(t){const r=wt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const l=this.start.plus(r.mapUnits(d=>d*n));s=+l>+this.e?this.e:l,o.push(xr.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:xr.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return xr.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),o=Array.prototype.concat(...s),l=o.sort((d,f)=>d.time-f.time);for(const d of l)i+=d.type==="s"?1:-1,i===1?r=d.time:(r&&+r!=+d.time&&n.push(xr.fromDateTimes(r,d.time)),r=null);return xr.merge(n)}difference(...t){return xr.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:gy}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=qE,r={}){return this.isValid?Zi.create(this.s.loc.clone(r),t).formatInterval(this):gy}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:gy}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:gy}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:gy}toFormat(t,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:gy}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):wt.invalid(this.invalidReason)}mapEndpoints(t){return xr.fromDateTimes(t(this.s),t(this.e))}}class gS{static hasDST(t=Mr.defaultZone){const r=Pe.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return zn.isValidZone(t)}static normalizeZone(t){return yd(t,Mr.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Lt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Lt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Lt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Lt.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Lt.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Lt.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Lt.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Lt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Lt.create(r,null,"gregory").eras(t)}static features(){return{relative:NY(),localeWeek:PY()}}}function VU(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(wt.fromMillis(i).as("days"))}function Ame(e,t,r){const i=[["years",(d,f)=>f.year-d.year],["quarters",(d,f)=>f.quarter-d.quarter+(f.year-d.year)*4],["months",(d,f)=>f.month-d.month+(f.year-d.year)*12],["weeks",(d,f)=>{const g=VU(d,f);return(g-g%7)/7}],["days",VU]],n={},s=e;let o,l;for(const[d,f]of i)r.indexOf(d)>=0&&(o=d,n[d]=f(e,t),l=s.plus(n),l>t?(n[d]--,e=s.plus(n),e>t&&(l=e,n[d]--,e=s.plus(n))):e=l);return[e,n,l,o]}function Mme(e,t,r,i){let[n,s,o,l]=Ame(e,t,r);const d=t-n,f=r.filter(v=>["hours","minutes","seconds","milliseconds"].indexOf(v)>=0);f.length===0&&(o<t&&(o=n.plus({[l]:1})),o!==n&&(s[l]=(s[l]||0)+d/(o-n)));const g=wt.fromObject(s,i);return f.length>0?wt.fromMillis(d,i).shiftTo(...f).plus(g):g}const Ome="missing Intl.DateTimeFormat.formatToParts support";function Ot(e,t=r=>r){return{regex:e,deser:([r])=>t(vye(r))}}const Rme=" ",KY=`[ ${Rme}]`,QY=new RegExp(KY,"g");function Cme(e){return e.replace(/\./g,"\\.?").replace(QY,KY)}function zU(e){return e.replace(/\./g,"").replace(QY," ").toLowerCase()}function Eo(e,t){return e===null?null:{regex:RegExp(e.map(Cme).join("|")),deser:([r])=>e.findIndex(i=>zU(r)===zU(i))+t}}function GU(e,t){return{regex:e,deser:([,r,i])=>bx(r,i),groups:t}}function vS(e){return{regex:e,deser:([t])=>t}}function Ime(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Nme(e,t){const r=To(t),i=To(t,"{2}"),n=To(t,"{3}"),s=To(t,"{4}"),o=To(t,"{6}"),l=To(t,"{1,2}"),d=To(t,"{1,3}"),f=To(t,"{1,6}"),g=To(t,"{1,9}"),v=To(t,"{2,4}"),b=To(t,"{4,6}"),S=x=>({regex:RegExp(Ime(x.val)),deser:([O])=>O,literal:!0}),E=(x=>{if(e.literal)return S(x);switch(x.val){case"G":return Eo(t.eras("short"),0);case"GG":return Eo(t.eras("long"),0);case"y":return Ot(f);case"yy":return Ot(v,ZC);case"yyyy":return Ot(s);case"yyyyy":return Ot(b);case"yyyyyy":return Ot(o);case"M":return Ot(l);case"MM":return Ot(i);case"MMM":return Eo(t.months("short",!0),1);case"MMMM":return Eo(t.months("long",!0),1);case"L":return Ot(l);case"LL":return Ot(i);case"LLL":return Eo(t.months("short",!1),1);case"LLLL":return Eo(t.months("long",!1),1);case"d":return Ot(l);case"dd":return Ot(i);case"o":return Ot(d);case"ooo":return Ot(n);case"HH":return Ot(i);case"H":return Ot(l);case"hh":return Ot(i);case"h":return Ot(l);case"mm":return Ot(i);case"m":return Ot(l);case"q":return Ot(l);case"qq":return Ot(i);case"s":return Ot(l);case"ss":return Ot(i);case"S":return Ot(d);case"SSS":return Ot(n);case"u":return vS(g);case"uu":return vS(l);case"uuu":return Ot(r);case"a":return Eo(t.meridiems(),0);case"kkkk":return Ot(s);case"kk":return Ot(v,ZC);case"W":return Ot(l);case"WW":return Ot(i);case"E":case"c":return Ot(r);case"EEE":return Eo(t.weekdays("short",!1),1);case"EEEE":return Eo(t.weekdays("long",!1),1);case"ccc":return Eo(t.weekdays("short",!0),1);case"cccc":return Eo(t.weekdays("long",!0),1);case"Z":case"ZZ":return GU(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return GU(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return vS(/[a-z_+-/]{1,256}?/i);case" ":return vS(/[^\S\n\r]/);default:return S(x)}})(e)||{invalidReason:Ome};return E.token=e,E}const Pme={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Lme(e,t,r){const{type:i,value:n}=e;if(i==="literal"){const d=/^\s+$/.test(n);return{literal:!d,val:d?" ":n}}const s=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let l=Pme[o];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function kme(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function Dme(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(Og(r,o)){const l=r[o],d=l.groups?l.groups+1:1;!l.literal&&l.token&&(n[l.token.val[0]]=l.deser(i.slice(s,s+d))),s+=d}return[i,n]}else return[i,{}]}function jme(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Ke(e.z)||(r=zn.create(e.z)),Ke(e.Z)||(r||(r=new wi(e.Z)),i=e.Z),Ke(e.q)||(e.M=(e.q-1)*3+1),Ke(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ke(e.u)||(e.S=oD(e.u)),[Object.keys(e).reduce((s,o)=>{const l=t(o);return l&&(s[l]=e[o]),s},{}),r,i]}let u3=null;function Fme(){return u3||(u3=Pe.fromMillis(1555555555555)),u3}function Ume(e,t){if(e.literal)return e;const r=Zi.macroTokenToFormatOpts(e.val),i=iJ(r,t);return i==null||i.includes(void 0)?e:i}function eJ(e,t){return Array.prototype.concat(...e.map(r=>Ume(r,t)))}class tJ{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=eJ(Zi.parseFormat(r),t),this.units=this.tokens.map(i=>Nme(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,n]=kme(this.units);this.regex=RegExp(i,"i"),this.handlers=n}}explainFromTokens(t){if(this.isValid){const[r,i]=Dme(t,this.regex,this.handlers),[n,s,o]=i?jme(i):[null,null,void 0];if(Og(i,"a")&&Og(i,"H"))throw new Um("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:n,zone:s,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function rJ(e,t,r){return new tJ(e,r).explainFromTokens(t)}function Vme(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=rJ(e,t,r);return[i,n,s,o]}function iJ(e,t){if(!e)return null;const i=Zi.create(t,e).dtFormatter(Fme()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(o=>Lme(o,e,s))}const c3="Invalid DateTime",zme=864e13;function jv(e){return new Jo("unsupported zone",`the zone "${e.name}" is not supported`)}function d3(e){return e.weekData===null&&(e.weekData=HE(e.c)),e.weekData}function h3(e){return e.localWeekData===null&&(e.localWeekData=HE(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Nh(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Pe({...r,...t,old:r})}function nJ(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function bS(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function V2(e,t,r){return nJ(vx(e),t,r)}function BU(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,WE(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=wt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),l=vx(s);let[d,f]=nJ(l,r,e.zone);return o!==0&&(d+=o,f=e.zone.offset(d)),{ts:d,o:f}}function vy(e,t,r,i,n,s){const{setZone:o,zone:l}=r;if(e&&Object.keys(e).length!==0||t){const d=t||l,f=Pe.fromObject(e,{...r,zone:d,specificOffset:s});return o?f:f.setZone(l)}else return Pe.invalid(new Jo("unparsable",`the input "${n}" can't be parsed as ${i}`))}function _S(e,t,r=!0){return e.isValid?Zi.create(Lt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function p3(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=qr(e.c.year,r?6:4),t?(i+="-",i+=qr(e.c.month),i+="-",i+=qr(e.c.day)):(i+=qr(e.c.month),i+=qr(e.c.day)),i}function qU(e,t,r,i,n,s){let o=qr(e.c.hour);return t?(o+=":",o+=qr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=qr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=qr(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=qr(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=qr(Math.trunc(-e.o/60)),o+=":",o+=qr(Math.trunc(-e.o%60))):(o+="+",o+=qr(Math.trunc(e.o/60)),o+=":",o+=qr(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const sJ={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Gme={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Bme={ordinal:1,hour:0,minute:0,second:0,millisecond:0},oJ=["year","month","day","hour","minute","second","millisecond"],qme=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Hme=["year","ordinal","hour","minute","second","millisecond"];function Wme(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new aY(e);return t}function HU(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Wme(e)}}function Zme(e){return G2[e]||(z2===void 0&&(z2=Mr.now()),G2[e]=e.offset(z2)),G2[e]}function WU(e,t){const r=yd(t.zone,Mr.defaultZone);if(!r.isValid)return Pe.invalid(jv(r));const i=Lt.fromObject(t);let n,s;if(Ke(e.year))n=Mr.now();else{for(const d of oJ)Ke(e[d])&&(e[d]=sJ[d]);const o=CY(e)||IY(e);if(o)return Pe.invalid(o);const l=Zme(r);[n,s]=V2(e,l,r)}return new Pe({ts:n,zone:r,loc:i,o:s})}function ZU(e,t,r){const i=Ke(r.round)?!0:r.round,n=(o,l)=>(o=aD(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,l)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const l=s(o);if(Math.abs(l)>=1)return n(l,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function YU(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let z2,G2={};class Pe{constructor(t){const r=t.zone||Mr.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Jo("invalid input"):null)||(r.isValid?null:jv(r));this.ts=Ke(t.ts)?Mr.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const l=Md(t.o)&&!t.old?t.o:r.offset(this.ts);n=bS(this.ts,l),i=Number.isNaN(n.year)?new Jo("invalid input"):null,n=i?null:n,s=i?null:l}this._zone=r,this.loc=t.loc||Lt.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Pe({})}static local(){const[t,r]=YU(arguments),[i,n,s,o,l,d,f]=r;return WU({year:i,month:n,day:s,hour:o,minute:l,second:d,millisecond:f},t)}static utc(){const[t,r]=YU(arguments),[i,n,s,o,l,d,f]=r;return t.zone=wi.utcInstance,WU({year:i,month:n,day:s,hour:o,minute:l,second:d,millisecond:f},t)}static fromJSDate(t,r={}){const i=Tye(t)?t.valueOf():NaN;if(Number.isNaN(i))return Pe.invalid("invalid input");const n=yd(r.zone,Mr.defaultZone);return n.isValid?new Pe({ts:i,zone:n,loc:Lt.fromObject(r)}):Pe.invalid(jv(n))}static fromMillis(t,r={}){if(Md(t))return t<-864e13||t>zme?Pe.invalid("Timestamp out of range"):new Pe({ts:t,zone:yd(r.zone,Mr.defaultZone),loc:Lt.fromObject(r)});throw new qi(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(Md(t))return new Pe({ts:t*1e3,zone:yd(r.zone,Mr.defaultZone),loc:Lt.fromObject(r)});throw new qi("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=yd(r.zone,Mr.defaultZone);if(!i.isValid)return Pe.invalid(jv(i));const n=Lt.fromObject(r),s=ZE(t,HU),{minDaysInFirstWeek:o,startOfWeek:l}=PU(s,n),d=Mr.now(),f=Ke(r.specificOffset)?i.offset(d):r.specificOffset,g=!Ke(s.ordinal),v=!Ke(s.year),b=!Ke(s.month)||!Ke(s.day),S=v||b,T=s.weekYear||s.weekNumber;if((S||g)&&T)throw new Um("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(b&&g)throw new Um("Can't mix ordinal dates with month/day");const E=T||s.weekday&&!S;let x,O,C=bS(d,f);E?(x=qme,O=Gme,C=HE(C,o,l)):g?(x=Hme,O=Bme,C=l3(C)):(x=oJ,O=sJ);let I=!1;for(const ie of x){const fe=s[ie];Ke(fe)?I?s[ie]=O[ie]:s[ie]=C[ie]:I=!0}const P=E?_ye(s,o,l):g?wye(s):CY(s),k=P||IY(s);if(k)return Pe.invalid(k);const D=E?IU(s,o,l):g?NU(s):s,[H,re]=V2(D,f,i),K=new Pe({ts:H,zone:i,o:re,loc:n});return s.weekday&&S&&t.weekday!==K.weekday?Pe.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${K.toISO()}`):K.isValid?K:Pe.invalid(K.invalid)}static fromISO(t,r={}){const[i,n]=hme(t);return vy(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=pme(t);return vy(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=fme(t);return vy(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Ke(t)||Ke(r))throw new qi("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=Lt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[l,d,f,g]=Vme(o,t,r);return g?Pe.invalid(g):vy(l,d,i,`format ${r}`,t,f)}static fromString(t,r,i={}){return Pe.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=wme(t);return vy(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new qi("need to specify a reason the DateTime is invalid");const i=t instanceof Jo?t:new Jo(t,r);if(Mr.throwOnInvalid)throw new Wfe(i);return new Pe({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=iJ(t,Lt.fromObject(r));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(t,r={}){return eJ(Zi.parseFormat(t),Lt.fromObject(r)).map(n=>n.val).join("")}static resetCache(){z2=void 0,G2={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?d3(this).weekYear:NaN}get weekNumber(){return this.isValid?d3(this).weekNumber:NaN}get weekday(){return this.isValid?d3(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?h3(this).weekday:NaN}get localWeekNumber(){return this.isValid?h3(this).weekNumber:NaN}get localWeekYear(){return this.isValid?h3(this).weekYear:NaN}get ordinal(){return this.isValid?l3(this.c).ordinal:NaN}get monthShort(){return this.isValid?gS.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?gS.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?gS.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?gS.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=vx(this.c),n=this.zone.offset(i-t),s=this.zone.offset(i+t),o=this.zone.offset(i-n*r),l=this.zone.offset(i-s*r);if(o===l)return[this];const d=i-o*r,f=i-l*r,g=bS(d,o),v=bS(f,l);return g.hour===v.hour&&g.minute===v.minute&&g.second===v.second&&g.millisecond===v.millisecond?[Nh(this,{ts:d}),Nh(this,{ts:f})]:[this]}get isInLeapYear(){return Ow(this.year)}get daysInMonth(){return WE(this.year,this.month)}get daysInYear(){return this.isValid?Ym(this.year):NaN}get weeksInWeekYear(){return this.isValid?G_(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?G_(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=Zi.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(wi.instance(t),r)}toLocal(){return this.setZone(Mr.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=yd(t,Mr.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=V2(o,s,t)}return Nh(this,{ts:n,zone:t})}else return Pe.invalid(jv(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return Nh(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=ZE(t,HU),{minDaysInFirstWeek:i,startOfWeek:n}=PU(r,this.loc),s=!Ke(r.weekYear)||!Ke(r.weekNumber)||!Ke(r.weekday),o=!Ke(r.ordinal),l=!Ke(r.year),d=!Ke(r.month)||!Ke(r.day),f=l||d,g=r.weekYear||r.weekNumber;if((f||o)&&g)throw new Um("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&o)throw new Um("Can't mix ordinal dates with month/day");let v;s?v=IU({...HE(this.c,i,n),...r},i,n):Ke(r.ordinal)?(v={...this.toObject(),...r},Ke(r.day)&&(v.day=Math.min(WE(v.year,v.month),v.day))):v=NU({...l3(this.c),...r});const[b,S]=V2(v,this.o,this.zone);return Nh(this,{ts:b,o:S})}plus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t);return Nh(this,BU(this,r))}minus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t).negate();return Nh(this,BU(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},n=wt.normalizeUnit(t);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(r){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Zi.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):c3}toLocaleString(t=qE,r={}){return this.isValid?Zi.create(this.loc.clone(r),t).formatDateTime(this):c3}toLocaleParts(t={}){return this.isValid?Zi.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let l=p3(this,o);return l+="T",l+=qU(this,o,r,i,n,s),l}toISODate({format:t="extended"}={}){return this.isValid?p3(this,t==="extended"):null}toISOWeekDate(){return _S(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+qU(this,o==="extended",r,t,i,s):null}toRFC2822(){return _S(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return _S(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?p3(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),_S(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():c3}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return wt.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=Eye(r).map(wt.normalizeUnit),o=t.valueOf()>this.valueOf(),l=o?this:t,d=o?t:this,f=Mme(l,d,s,n);return o?f.negate():f}diffNow(t="milliseconds",r={}){return this.diff(Pe.now(),t,r)}until(t){return this.isValid?xr.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const n=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(r,i)<=n&&n<=s.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Pe.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),ZU(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?ZU(t.base||Pe.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Pe.isDateTime))throw new qi("min requires all arguments be DateTimes");return LU(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Pe.isDateTime))throw new qi("max requires all arguments be DateTimes");return LU(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=Lt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return rJ(o,t,r)}static fromStringExplain(t,r,i={}){return Pe.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:n=null}=r,s=Lt.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});return new tJ(s,t)}static fromFormatParser(t,r,i={}){if(Ke(t)||Ke(r))throw new qi("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=i,o=Lt.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!o.equals(r.locale))throw new qi(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:l,zone:d,specificOffset:f,invalidReason:g}=r.explainFromTokens(t);return g?Pe.invalid(g):vy(l,d,i,`format ${r.format}`,t,f)}static get DATE_SHORT(){return qE}static get DATE_MED(){return lY}static get DATE_MED_WITH_WEEKDAY(){return Jfe}static get DATE_FULL(){return uY}static get DATE_HUGE(){return cY}static get TIME_SIMPLE(){return dY}static get TIME_WITH_SECONDS(){return hY}static get TIME_WITH_SHORT_OFFSET(){return pY}static get TIME_WITH_LONG_OFFSET(){return fY}static get TIME_24_SIMPLE(){return yY}static get TIME_24_WITH_SECONDS(){return mY}static get TIME_24_WITH_SHORT_OFFSET(){return gY}static get TIME_24_WITH_LONG_OFFSET(){return vY}static get DATETIME_SHORT(){return bY}static get DATETIME_SHORT_WITH_SECONDS(){return _Y}static get DATETIME_MED(){return wY}static get DATETIME_MED_WITH_SECONDS(){return SY}static get DATETIME_MED_WITH_WEEKDAY(){return Xfe}static get DATETIME_FULL(){return TY}static get DATETIME_FULL_WITH_SECONDS(){return EY}static get DATETIME_HUGE(){return $Y}static get DATETIME_HUGE_WITH_SECONDS(){return xY}}function cv(e){if(Pe.isDateTime(e))return e;if(e&&e.valueOf&&Md(e.valueOf()))return Pe.fromJSDate(e);if(e&&typeof e=="object")return Pe.fromObject(e);throw new qi(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Yme="shortOffset";function Jme(e){return"timeZoneIANA"in e}function Xme(e){return e.startsWith("UTC")}function YE(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?B2(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?Kme(r):null}}}}}function B2(e,t=la){return e?Jme(e)?e.timeZoneIANA:Qme(e,t):t}function Kme(e){return{timeZoneIANA:e}}function Qme(e,t=la){if(!e||!_U.has(e.timeZone))return t;const r=_U.get(e.timeZone);return Xme(e.timeZone)||e.respectsDaylightSaving?r:ege(r)}function ege(e){const t=Pe.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${wi.instance(-r).formatOffset(0,"narrow")}`}function Vje(e,t,r,i,n){if(t&&n==="date")return{timeZone:jd,timeZoneName:void 0};const s=i.timeStyle||i.hour,o=r===ff;return{timeZone:o?n==="timestamp-offset"?void 0:e??jd:r,timeZoneName:o&&s?Yme:void 0}}function tge(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return e===la||e===ff||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const rge={year:void 0,month:void 0,day:void 0,weekday:void 0},ige={hour:void 0,minute:void 0,second:void 0},aJ={timeZone:jd},ga={year:"numeric",month:"numeric",day:"numeric"},dv={year:"numeric",month:"long",day:"numeric"},hv={year:"numeric",month:"short",day:"numeric"},pv={year:"numeric",month:"long",weekday:"long",day:"numeric"},ld={hour:"numeric",minute:"numeric"},qh={...ld,second:"numeric"},lJ={hourCycle:"h23"},fv={...ld,...lJ},yv={...qh,...lJ},uJ={"short-date":ga,"short-date-short-time":{...ga,...ld},"short-date-short-time-24":{...ga,...fv},"short-date-long-time":{...ga,...qh},"short-date-long-time-24":{...ga,...yv},"short-date-le":ga,"short-date-le-short-time":{...ga,...ld},"short-date-le-short-time-24":{...ga,...fv},"short-date-le-long-time":{...ga,...qh},"short-date-le-long-time-24":{...ga,...yv},"long-month-day-year":dv,"long-month-day-year-short-time":{...dv,...ld},"long-month-day-year-short-time-24":{...dv,...fv},"long-month-day-year-long-time":{...dv,...qh},"long-month-day-year-long-time-24":{...dv,...yv},"day-short-month-year":hv,"day-short-month-year-short-time":{...hv,...ld},"day-short-month-year-short-time-24":{...hv,...fv},"day-short-month-year-long-time":{...hv,...qh},"day-short-month-year-long-time-24":{...hv,...yv},"long-date":pv,"long-date-short-time":{...pv,...ld},"long-date-short-time-24":{...pv,...fv},"long-date-long-time":{...pv,...qh},"long-date-long-time-24":{...pv,...yv},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ld,"long-time":qh},nge=Wr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),cJ={ar:"ar-u-nu-latn-ca-gregory"};let YC=new WeakMap;const wx=uJ["short-date-short-time"];function sge(e){let t=YC.get(e);if(!t){const r=Fn(),i=cJ[r]||r,n=hD(e.timeZone??la),s={...e,timeZone:n};t=new Intl.DateTimeFormat(i,s),YC.set(e,t)}return t}function zje(e){return uJ[e]}function dD(e,t=wx){return sge(t).format(e)}function Gje(e,t=wx){return dD(new Date(e),{...t,...aJ,...ige})}function Bje(e,t=wx){return dD(new Date(`1970-01-01T${e}Z`),{...t,...aJ,...rge})}function qje(e,t=wx){if(t.timeZone)return dD(new Date(e),t);const r=Pe.fromISO(e,{setZone:!0}),i=Fn(),n=cJ[i]??i,s=r.offset===0?jd:t.timeZone,o={...t,timeZone:s};return r.toLocaleString(o,{locale:n})}function hD(e){switch(e){case la:return Hfe;case ff:return jd;default:return e}}rD(()=>{YC=new WeakMap});const oge={ar:"ar-u-nu-latn"};let q2=new WeakMap,dJ={};function JC(e){const t=e||dJ;if(!q2.has(t)){const r=Fn(),i=oge[Fn()]||r;q2.set(t,new Intl.NumberFormat(i,e))}return q2.get(t)}function Hje(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Wje(e,t){return Object.is(e,-0)&&(e=0),JC(t).format(e)}function Zje(e,t=Fn()){var i,n;if(!e)return null;let r=JU.get(t);if(!r){const s=JC().formatToParts(12345.6),o=[...JC({useGrouping:!1}).format(9876543210)].reverse(),l=new Map(o.map((S,T)=>[S,T])),d=new RegExp(`[${(i=s.find(S=>S.type==="group"))==null?void 0:i.value}]`,"g"),f=new RegExp(`[${(n=s.find(S=>S.type==="decimal"))==null?void 0:n.value}]`),g=new RegExp(`[${o.join("")}]`,"g"),v=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,b=/[-\u2212\u2013\u2014\u2015]/g;r=S=>{if((S=S.trim().replaceAll(d,"").replace(f,".").replace(g,E=>String(l.get(E))).replaceAll(v,"").replaceAll(b,"-"))==="")return null;const T=Number(S);return isNaN(T)?null:T},JU.set(t,r)}return r(e)}rD(()=>{q2=new WeakMap,dJ={}});const JU=new Map,XU=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,hJ={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function age(e){return e in hJ}function KU(e){if(age(e)){const t=hJ[e];return t===!0?e:t}return null}const Fv=[],Xm=new Map;function QU(e){for(const t of Xm.keys())yJ(e.pattern,t)&&Xm.delete(t)}function lge(e){return Fv.includes(e)||(QU(e),Fv.unshift(e)),vt(()=>{const t=Fv.indexOf(e);t>-1&&(Fv.splice(t,1),QU(e))})}async function pJ(e){const t=Fn();Xm.has(e)||Xm.set(e,uge(e,t));const r=Xm.get(e);return r&&await cge.add(r),r}function fJ(e){if(!XU.test(e))return null;const t=XU.exec(e);if(t===null)return null;const[,r,i]=t;return KU(r+(i?"-"+i.toUpperCase():""))??KU(r)}async function uge(e,t){const r=[];for(const i of Fv)if(yJ(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new V("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new V("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function yJ(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}rD(()=>{Xm.clear()});const cge=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=gs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function dge(e,t,r,i){const n=t.exec(r);if(!n)throw new V("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],l=fJ(i),d=`${s}${o}.json`,f=l?`${s}${o}_${l}.json`:d;let g;try{g=await e9(e(f))}catch(v){if(f===d)throw new V("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:v});try{g=await e9(e(d))}catch(b){throw new V("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:b})}}return g}async function e9(e){if(t9.fetchBundleAsset!=null)return t9.fetchBundleAsset(e);const t=await mt(e,{responseType:"text"});return JSON.parse(t.data)}let hge=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return dge(this.getAssetUrl,this.matcher,t,r)}};function pge(e){return new hge(e)}const t9={};lge(pge({pattern:"esri/",location:$r}));const r9={};function fge(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...r9.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=r9.baseUrl),t}let yge=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},H2=class{constructor(){this._dispatcher=new yge,this._workerPostMessage({type:_i.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){TE(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){TE(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=z_(t);if(r&&r.type===_i.OPEN){const{modulePath:i,jobId:n}=r;let s=await Dd.loadWorker(i);s||(s=await import(i));const o=Dd.connect(s);this._workerPostMessage({type:_i.OPENED,jobId:n,data:o})}}};const XC=()=>ae.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:mge}=_i,gge='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let wS,SS;const i9="Failed to create Worker. Fallback to execute module in main thread";async function vge(){if(!Z("esri-workers"))return n9(new H2);if(!wS&&!SS)try{const t=gge.split("{CONFIGURATION}").join(bge());wS=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){SS=t||{}}let e;if(wS)try{e=new Worker(wS,{name:"esri-worker-"+_ge++})}catch{XC().warn(i9,SS),e=new H2}else XC().warn(i9,SS),e=new H2;return n9(e)}async function n9(e){return new Promise(t=>{function r(n){const s=z_(n);s&&s.type===mge&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),XC().warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new H2).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function bge(){let e;if(Mt.default!=null){const n={...Mt};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Mt));e.assetsPath=cs(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?cs(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Fn(),e.has={"esri-csp-restrictions":Z("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":Z("esri-2d-update-debug"),"esri-2d-log-updating":Z("esri-2d-log-updating"),"featurelayer-pbf":Z("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":Z("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":Z("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":Z("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":Z("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":Z("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":Z("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":Z("featurelayer-snapshot-enabled"),"esri-atomics":Z("esri-atomics"),"esri-shared-array-buffer":Z("esri-shared-array-buffer"),"esri-tiles-debug":Z("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":Z("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":Z("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=cs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=cs(e.workers.workerPath):e.workers.workerPath=cs($r("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Mt.workers.loaderConfig,r=fge({baseUrl:t==null?void 0:t.baseUrl,locale:Fn(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:ZW,fullVersion:Pk,revision:YW}})}let _ge=0;const{ABORT:s9,INVOKE:wge,OPEN:Sge,OPENED:Tge,RESPONSE:mv}=_i;let Ege=class mJ{static async create(t){const r=await vge();return new mJ(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),ae.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=nY();return new Promise((s,o)=>{const l={resolve:s,reject:o,abortHandle:_k(i,()=>{this._outJobs.delete(n),this._post({type:s9,jobId:n})})};this._outJobs.set(n,l),this._post({type:Sge,jobId:n,modulePath:t})})}_onMessage(t){const r=z_(t);if(r)switch(r.type){case Tge:this._onOpenedMessage(r);break;case mv:this._onResponseMessage(r);break;case s9:this._onAbortMessage(r);break;case wge:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,l=this._inJobs,d=Bfe[r];let f;try{if(typeof d!="function")throw new TypeError(`${r} is not a function`);f=d.call(null,n,{signal:o?o.signal:null})}catch(g){return void this._post({type:mv,jobId:i,error:V_(g)})}ll(f)?(l.set(i,{controller:o,promise:f}),f.then(g=>{l.has(i)&&(l.delete(i),this._post({type:mv,jobId:i},g))},g=>{l.has(i)&&(l.delete(i),g||(g={message:"Error encountered at method"+r}),Ni(g)||this._post({type:mv,jobId:i,error:V_(g||{message:`Error encountered at method ${r}`})}))})):this._post({type:mv,jobId:i},f)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),nr(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),nr(s.abortHandle),i?s.reject(V.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return tD(this.worker,t,r,i)}};const o9=Z("host-browser")?Math.min(navigator.hardwareConcurrency-1,Z("workers-pool-size")??8):0;let Fp=Z("esri-mobile")?Math.min(o9,3):o9;Fp||(Fp=Z("safari")&&Z("mac")?7:2);let a9=0;const W2=[];function $ge(){gJ()}async function TS(e,t){const r=new Gfe,{registryTarget:i,...n}=t;return await r.open(e,n),i&&Nfe(i,r),r}async function xge(e,t={}){if(typeof e!="string")throw new V("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(Z("host-webworker")&&!Z("esri-workers")&&(r="local"),r==="local"){let i=await Dd.loadWorker(e);i||(i=await import(e)),hr(t.signal);const n=t.client||i;return TS([Dd.connect(i,t.schedule)],{...t,client:n})}if(await gJ(),hr(t.signal),r==="dedicated"){const i=a9++%Fp;return TS([await W2[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Fp);if(i<Fp){const n=new Array(i);for(let s=0;s<i;++s){const o=a9++%Fp;n[s]=W2[o].open(e,t)}return TS(n,t)}}return TS(W2.map(i=>i.open(e,t)),t)}let ES=null;async function gJ(){if(ES)return ES;new AbortController;const e=[];for(let t=0;t<Fp;t++){const r=Ege.create(t).then(i=>(W2[t]=i,i));e.push(r)}return ES=Promise.all(e),ES}function Jd(){return[0,0,0]}function pD(e){return[e[0],e[1],e[2]]}function Qg(e,t,r){return[e,t,r]}function Age(e,t,r){return[e,t,r]}function Mge(e,t=Jd()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Oge(e,t){return new Float64Array(e,t,3)}function vJ(){return Jd()}function bJ(){return Qg(1,1,1)}function _J(){return Qg(1,0,0)}function wJ(){return Qg(0,1,0)}function SJ(){return Qg(0,0,1)}const Rge=vJ(),Cge=bJ(),Ige=_J(),Nge=wJ(),Pge=SJ();Object.freeze(Object.defineProperty({__proto__:null,ONES:Cge,UNIT_X:Ige,UNIT_Y:Nge,UNIT_Z:Pge,ZEROS:Rge,clone:pD,create:Jd,createView:Oge,freeze:Age,fromArray:Mge,fromValues:Qg,ones:bJ,unitX:_J,unitY:wJ,unitZ:SJ,zeros:vJ},Symbol.toStringTag,{value:"Module"}));const Kje=Math.PI/180,Qje=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Ec=gr.radius,$o=gr.eccentricitySquared,Lge={a1:Ec*$o,a2:Ec*$o*Ec*$o,a3:Ec*$o*$o/2,a4:Ec*$o*Ec*$o*2.5,a5:Ec*$o+Ec*$o*$o/2,a6:1-$o},eFe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:gr.radius,f:gr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Nd.radius,f:Nd.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ka.radius,f:Ka.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ka.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var B;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(B||(B={}));const kge={[B.WGS84]:{[B.CGCS2000]:rr,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:rr,[B.SPHERICAL_ECEF]:s_,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:Km,[B.PLATE_CARREE]:Qm,[B.WGS84]:rr,[B.WGS84_ECEF]:rg},[B.CGCS2000]:{[B.CGCS2000]:rr,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:rr,[B.SPHERICAL_ECEF]:s_,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:Km,[B.PLATE_CARREE]:Qm,[B.WGS84]:rr,[B.WGS84_ECEF]:rg},[B.GCSMARS2000]:{[B.CGCS2000]:null,[B.GCSMARS2000]:rr,[B.GCSMOON2000]:null,[B.LON_LAT]:rr,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:c9,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.GCSMOON2000]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:rr,[B.LON_LAT]:rr,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:u9,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.WEB_MERCATOR]:{[B.CGCS2000]:n_,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:n_,[B.SPHERICAL_ECEF]:jge,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:rr,[B.PLATE_CARREE]:Vge,[B.WGS84]:n_,[B.WGS84_ECEF]:Fge},[B.WGS84_ECEF]:{[B.CGCS2000]:ig,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:ig,[B.SPHERICAL_ECEF]:Jge,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:Xge,[B.PLATE_CARREE]:zge,[B.WGS84]:ig,[B.WGS84_ECEF]:rr},[B.SPHERICAL_ECEF]:{[B.CGCS2000]:tg,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:tg,[B.SPHERICAL_ECEF]:rr,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:Wge,[B.PLATE_CARREE]:Gge,[B.WGS84]:tg,[B.WGS84_ECEF]:Zge},[B.SPHERICAL_MARS_PCPF]:{[B.CGCS2000]:null,[B.GCSMARS2000]:h9,[B.GCSMOON2000]:null,[B.LON_LAT]:h9,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:rr,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.SPHERICAL_MOON_PCPF]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:d9,[B.LON_LAT]:d9,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:rr,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.UNKNOWN]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:null,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:rr,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.LON_LAT]:{[B.CGCS2000]:rr,[B.GCSMARS2000]:rr,[B.GCSMOON2000]:rr,[B.LON_LAT]:rr,[B.SPHERICAL_ECEF]:s_,[B.SPHERICAL_MARS_PCPF]:c9,[B.SPHERICAL_MOON_PCPF]:u9,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:Km,[B.PLATE_CARREE]:Qm,[B.WGS84]:rr,[B.WGS84_ECEF]:rg},[B.PLATE_CARREE]:{[B.CGCS2000]:eg,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:eg,[B.SPHERICAL_ECEF]:Bge,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:qge,[B.PLATE_CARREE]:rr,[B.WGS84]:eg,[B.WGS84_ECEF]:Hge}};function TJ(e,t){var r;return(r=Dge(e,t))==null?void 0:r.projector}function Dge(e,t){if(e==null||t==null)return null;if(Pl.source.spatialReference===e&&Pl.dest.spatialReference===t)return Pl;const r=l9(e,Pl.source),i=l9(t,Pl.dest);return r===B.UNKNOWN&&i===B.UNKNOWN?ai(e,t)?Pl.projector=rr:Pl.projector=null:Pl.projector=kge[r][i],Pl}function l9(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=co(e,1)),UE(e)?t.spatialReferenceId=B.SPHERICAL_ECEF:uf(e)?t.spatialReferenceId=B.WGS84:rl(e)?t.spatialReferenceId=B.WEB_MERCATOR:Jhe(e)?t.spatialReferenceId=B.PLATE_CARREE:e.wkt===epe.wkt?t.spatialReferenceId=B.WGS84_ECEF:e.wkid===lf.CGCS2000?t.spatialReferenceId=B.CGCS2000:e.wkt===Uk.wkt?t.spatialReferenceId=B.SPHERICAL_MARS_PCPF:e.wkt===Vk.wkt?t.spatialReferenceId=B.SPHERICAL_MOON_PCPF:hZ(e)?t.spatialReferenceId=B.GCSMARS2000:pZ(e)?t.spatialReferenceId=B.GCSMOON2000:t.spatialReferenceId=B.UNKNOWN):B.UNKNOWN}function rr(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function n_(e,t,r,i){r[i]=Cg*(e[t]/Jp),r[i+1]=Cg*(EJ-2*Math.atan(Math.exp(-e[t+1]/Jp))),r[i+2]=e[t+2]}function jge(e,t,r,i){const n=e[t]/Jp,s=EJ-2*Math.atan(Math.exp(-e[t+1]/Jp)),o=Jp+e[t+2],l=Math.cos(s)*o;r[i]=Math.cos(n)*l,r[i+1]=Math.sin(n)*l,r[i+2]=Math.sin(s)*o}function Fge(e,t,r,i){n_(e,t,r,i),rg(r,i,r,i)}function Uge(e,t,r,i,n){const s=.4999999*Math.PI,o=so(Rg*e[t+1],-s,s),l=Math.sin(o);r[i++]=Rg*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+l)/(1-l)),r[i]=e[t+2]}function Km(e,t,r,i){Uge(e,t,r,i,gr)}function Qm(e,t,r,i){r[i]=e[t]*p9,r[i+1]=e[t+1]*p9,r[i+2]=e[t+2]}function eg(e,t,r,i){r[i]=e[t]*f9,r[i+1]=e[t+1]*f9,r[i+2]=e[t+2]}function Vge(e,t,r,i){n_(e,t,r,i),Qm(r,i,r,i)}function zge(e,t,r,i){ig(e,t,r,i),Qm(r,i,r,i)}function Gge(e,t,r,i){tg(e,t,r,i),Qm(r,i,r,i)}function Bge(e,t,r,i){eg(e,t,r,i),s_(r,i,r,i)}function qge(e,t,r,i){eg(e,t,r,i),Km(r,i,r,i)}function Hge(e,t,r,i){eg(e,t,r,i),rg(r,i,r,i)}function fD(e,t,r,i,n){const s=n+e[t+2],o=Rg*e[t+1],l=Rg*e[t],d=Math.cos(o)*s;r[i]=Math.cos(l)*d,r[i+1]=Math.sin(l)*d,r[i+2]=Math.sin(o)*s}function u9(e,t,r,i){fD(e,t,r,i,Nd.radius)}function c9(e,t,r,i){fD(e,t,r,i,Ka.radius)}function s_(e,t,r,i){fD(e,t,r,i,gr.radius)}function yD(e,t,r,i,n){const s=e[t],o=e[t+1],l=e[t+2],d=Math.sqrt(s*s+o*o+l*l),f=wde(l/(d===0?1:d)),g=Math.atan2(o,s);r[i++]=Cg*g,r[i++]=Cg*f,r[i]=d-n}function d9(e,t,r,i){yD(e,t,r,i,Nd.radius)}function h9(e,t,r,i){yD(e,t,r,i,Ka.radius)}function tg(e,t,r,i){yD(e,t,r,i,gr.radius)}function Wge(e,t,r,i){tg(e,t,r,i),Km(r,i,r,i)}function Zge(e,t,r,i){tg(e,t,r,i),rg(r,i,r,i)}function Yge(e,t,r,i,n){const s=Rg*e[t],o=Rg*e[t+1],l=e[t+2],d=Math.sin(o),f=Math.cos(o),g=n.radius/Math.sqrt(1-n.eccentricitySquared*d*d);r[i++]=(g+l)*f*Math.cos(s),r[i++]=(g+l)*f*Math.sin(s),r[i++]=(g*(1-n.eccentricitySquared)+l)*d}function rg(e,t,r,i){Yge(e,t,r,i,gr)}function ig(e,t,r,i){const n=Lge,s=e[t],o=e[t+1],l=e[t+2];let d,f,g,v,b,S,T,E,x,O,C,I,P,k,D,H,re,K,ie,fe,ve;d=Math.abs(l),f=s*s+o*o,g=Math.sqrt(f),v=f+l*l,b=Math.sqrt(v),fe=Math.atan2(o,s),S=l*l/v,T=f/v,k=n.a2/b,D=n.a3-n.a4/b,T>.3?(E=d/b*(1+T*(n.a1+k+S*D)/b),ie=Math.asin(E),O=E*E,x=Math.sqrt(1-O)):(x=g/b*(1-S*(n.a5-k-T*D)/b),ie=Math.acos(x),O=1-x*x,E=Math.sqrt(O)),C=1-gr.eccentricitySquared*O,I=gr.radius/Math.sqrt(C),P=n.a6*I,k=g-I*x,D=d-P*E,re=x*k+E*D,H=x*D-E*k,K=H/(P/C+re),ie+=K,ve=re+H*K/2,l<0&&(ie=-ie),r[i++]=Cg*fe,r[i++]=Cg*ie,r[i]=ve}function Jge(e,t,r,i){ig(e,t,r,i),s_(r,i,r,i)}function Xge(e,t,r,i){ig(e,t,r,i),Km(r,i,r,i)}const Pl={source:{spatialReference:null,spatialReferenceId:B.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:B.UNKNOWN,metersPerUnit:1},projector:rr},Rg=sx(1),Cg=TW(1),EJ=.5*Math.PI,Jp=gr.radius,p9=Jp*Math.PI/180,f9=180/(Jp*Math.PI);function Iw(e,t,r,i,n,s,o=Math.floor(e.length/3)){const l=TJ(t,n);if(l==null)return!1;if(l===rr){if(e===i&&r===s)return!0;const f=r+3*o;for(let g=r,v=s;g<f;g++,v++)i[v]=e[g];return!0}const d=r+3*o;for(let f=r,g=s;f<d;f+=3,g+=3)l(e,f,i,g);return!0}const tFe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Iw},Symbol.toStringTag,{value:"Module"}));function y9(e,t,r,i,n,s){return $S[0]=e,$S[1]=t,$S[2]=r,Iw($S,i,0,n,s,0)}const $S=Jd();let xS=0,f3=class KC{static fromGE(t){const r=new KC;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=xS++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=xS++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=xS++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=xS++}getInverse(){const t=new KC;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},JE=class Uv{static cacheKey(t,r){var i,n,s,o,l,d;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((n=t.wkt)==null?void 0:n.toString())??"",((s=t.wkt2)==null?void 0:s.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((l=r.wkt)==null?void 0:l.toString())??"",((d=r.wkt2)==null?void 0:d.toString())??""].join()}static fromGE(t){const r=new Uv;let i="";for(const n of t.steps){const s=f3.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof f3?this.steps.push(r):this.steps.push(new f3({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new Uv;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[Uv.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const n=this._cachedProjection[Uv.cacheKey(t,r)];return n===void 0?null:n}};function $J(e,t,r){if(t==null||r==null||r.vcsWkid||ai(t,r)||Ld(t)||Ld(r))return null;const i=VE(t)/VE(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>Kge(n,i);case"polyline":case"esriGeometryPolyline":return n=>e0e(n,i);case"polygon":case"esriGeometryPolygon":return n=>Qge(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>t0e(n,i);case"extent":case"esriGeometryEnvelope":return n=>r0e(n,i);default:return null}}function Kge(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function Qge(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function e0e(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function t0e(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function r0e(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ia=null,Fd=null,o_=null,Z2={};const mD=new Aw;function Xd(){return!!ia&&jk()}function xJ(){return!!Xd()||(Fe(mD),Ud(),!1)}function AJ(e,t){return!e||!t||nl(e,t)||xJ()}function i0e(e,t){return!nl(e,t)&&!Xd()}function Ud(e){return o_==null&&(o_=Promise.all([oZ(),ne(()=>import("./geometryEngineBase-B0ZyeKAX.js"),__vite__mapDeps([12,3])).then(t=>t.g),ne(()=>import("./hydrated-C9jgLw5s.js"),[])])),o_.then(([,t,{hydratedAdapter:r}])=>{hr(e),Fd=r,ia=t.default,ia._enableProjection(Hhe),mD.notify()})}function Kd(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:(wpe(e),QC(Fd,e,e[0].spatialReference,t,r,i)):($g(e),QC(Fd,[e],e.spatialReference,t,r,i)[0])}function QC(e,t,r,i,n=null,s=null){if(r==null||i==null)return t;if(nl(r,i,n))return t.map(o=>Y2(o,r,i));if(n==null&&UE(r))return t.map(o=>Y2(o,r,Ge.WGS84)).map(o=>B_(o,i));if(n==null&&UE(i))return t.map(o=>B_(o,Ge.WGS84)).map(o=>Y2(o,Ge.WGS84,i));if(n==null){const o=JE.cacheKey(r,i);Z2[o]!==void 0?n=Z2[o]:((n=OJ(r,i,void 0))==null&&(n=new JE),Z2[o]=n)}if(ia==null||e==null)throw new Sx;return s!=null?ia._project(e,t,r,i,n,s):ia._project(e,t,r,i,n)}function n0e(e,t){const r=MJ([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function MJ(e,t){if(!Xd()){for(const r of e)if(r!=null&&!ai(r.spatialReference,t)&&ds(r.spatialReference)&&ds(t)&&!nl(r.spatialReference,t))return Fe(mD),{pending:Ud(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:ai(r.spatialReference,t)?r:ds(r.spatialReference)&&ds(t)?B_(r,t):null)}}function OJ(e,t,r=null){if(e==null||t==null)return null;if(ia==null||Fd==null)throw new Sx;const i=ia._getTransformation(Fd,e,t,r,r==null?void 0:r.spatialReference);return i!==null?JE.fromGE(i):null}function s0e(e,t,r=null){if(ia==null||Fd==null)throw new Sx;const i=ia._getTransformationBySuitability(Fd,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const n=[];for(const s of i)n.push(JE.fromGE(s));return n}return[]}let Sx=class extends V{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function o0e(){ia=null,Fd=null,o_=null,Z2={}}const a0e={get loadPromise(){return o_}};function B_(e,t){try{const r=Kd(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=$J(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof Sx))throw r;return null}}async function l0e(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await gD(i,t,null,r),B_(e,t)}function nl(e,t,r){return!r&&(!!ai(e,t)||ds(e)&&ds(t)&&!!TJ(e,t))}function u0e(e,t){if(ai(e,t))return!0;if(!ds(e)||!ds(t))return!1;const r=uf(e)||rl(e)||rU(e),i=uf(t)||rl(t)||rU(t);return r&&i}async function gD(e,t,r,i){if(Xd())return U8(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(n&&s&&!nl(n,s,o))return Ud(i)}else if(e&&t&&!nl(e,t,r))return Ud(i);return U8(i)}function Y2(e,t,r){return e?"x"in e?RJ(e,t,new Qe,r,0):"xmin"in e?PJ(e,t,new Ut,r,0):"rings"in e?NJ(e,t,new oo,r,0):"paths"in e?IJ(e,t,new Qs,r,0):"points"in e?CJ(e,t,new $w,r,0):null:null}function c0e(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&RJ(e,e.spatialReference,t,r,i)!=null}function RJ(e,t,r,i,n){Hi[0]=e.x,Hi[1]=e.y;const s=e.z;return Hi[2]=s!==void 0?s:n,Iw(Hi,t,0,Hi,i,0)?(r.x=Hi[0],r.y=Hi[1],r.spatialReference=i,s!==void 0||Ld(i)?(r.z=Hi[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function d0e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&CJ(e,e.spatialReference,t,r,i)!=null}function CJ(e,t,r,i,n){const{points:s,hasZ:o,hasM:l}=e,d=[],f=s.length,g=[];for(const b of s)g.push(b[0],b[1],o?b[2]:n);if(!Iw(g,t,0,g,i,0,f))return null;const v=o||Ld(i);for(let b=0;b<f;++b){const S=3*b,T=g[S],E=g[S+1];v&&l?d.push([T,E,g[S+2],s[b][3]]):v?d.push([T,E,g[S+2]]):l?d.push([T,E,s[b][2]]):d.push([T,E])}return r.points=d,r.spatialReference=i,r.hasZ=o,r.hasM=l,r}function h0e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&IJ(e,e.spatialReference,t,r,i)!=null}function IJ(e,t,r,i,n){const{paths:s,hasZ:o,hasM:l}=e,d=[];if(!LJ(s,o??!1,l??!1,t,d,i,n))return null;const f=o||Ld(i);return r.paths=d,r.spatialReference=i,r.hasZ=f,r.hasM=l,r}function p0e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&NJ(e,e.spatialReference,t,r,i)!=null}function NJ(e,t,r,i,n){const{rings:s,hasZ:o,hasM:l}=e,d=[];if(!LJ(s,o??!1,l??!1,t,d,i,n))return null;const f=o||Ld(i);return r.rings=d,r.spatialReference=i,r.hasZ=f,r.hasM=l,r}function f0e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&PJ(e,e.spatialReference,t,r,i)!=null}function PJ(e,t,r,i,n){const{xmin:s,ymin:o,xmax:l,ymax:d,hasZ:f,hasM:g}=e,v=f?e.zmin:n;if(!y9(s,o,v,t,Hi,i))return null;const b=f||Ld(i);r.xmin=Hi[0],r.ymin=Hi[1],b&&(r.zmin=Hi[2]);const S=f?e.zmax:n;return y9(l,d,S,t,Hi,i)?(r.xmax=Hi[0],r.ymax=Hi[1],b&&(r.zmax=Hi[2]),g&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function LJ(e,t,r,i,n,s,o=0){const l=new Array;for(const g of e)for(const v of g)l.push(v[0],v[1],t?v[2]:o);if(!Iw(l,i,0,l,s,0))return!1;let d=0;n.length=0;const f=t||Ld(s);for(const g of e){const v=new Array;for(const b of g)f&&r?v.push([l[d++],l[d++],l[d++],b[3]]):f?v.push([l[d++],l[d++],l[d++]]):r?(v.push([l[d++],l[d++],b[2]]),d++):(v.push([l[d++],l[d++]]),d++);n.push(v)}return!0}const Hi=Jd(),iFe=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:nl,getTransformation:OJ,getTransformations:s0e,initializeProjection:gD,isEqualBaseGCS:u0e,isLoaded:Xd,isLoadedOrLoad:xJ,isLoadedOrLoadFor:AJ,load:Ud,project:Kd,projectExtent:f0e,projectMany:QC,projectMultipoint:d0e,projectOrLoad:n0e,projectOrLoadMany:MJ,projectPoint:c0e,projectPolygon:p0e,projectPolyline:h0e,projectWithZConversion:l0e,projectWithoutEngine:Y2,requiresLoad:i0e,test:a0e,tryProjectWithZConversion:B_,unload:o0e},Symbol.toStringTag,{value:"Module"}));var eI;let Sa=eI=class extends W{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new eI({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};u([h({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Sa.prototype,"cols",void 0),u([h({type:at,json:{write:!0}})],Sa.prototype,"level",void 0),u([h({type:String,json:{write:!0}})],Sa.prototype,"levelValue",void 0),u([h({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Sa.prototype,"origin",void 0),u([h({type:Number,json:{write:!0}})],Sa.prototype,"resolution",void 0),u([h({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Sa.prototype,"rows",void 0),u([h({type:Number,json:{write:!0}})],Sa.prototype,"scale",void 0),Sa=eI=u([M("esri.layers.support.LOD")],Sa);const ud=Sa;let y0e=class{constructor(t,r,i,n,s=void 0){this.id=t,this.level=r,this.row=i,this.col=n,this.extent=s}};var Ic;const m9=new We({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Mi=Ic=class extends W{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=Ge.WebMercator,numLODs:s=24}=e;if(!ds(n)){const v=[];if(r)for(let b=0;b<r.length;b++){const S=r[b];v.push(new ud({level:b,scale:S,resolution:S}))}else{let b=5e-4;for(let S=s-1;S>=0;S--)v.unshift(new ud({level:S,scale:b,resolution:b})),b*=2}return new Ic({dpi:96,lods:v,origin:new Qe(0,0,n),size:[i,i],spatialReference:n})}const o=mn(n),l=e.origin?new Qe({x:e.origin.x,y:e.origin.y,spatialReference:n}):new Qe(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),d=96,f=1/(co(n)*39.37*d),g=[];if(r)for(let v=0;v<r.length;v++){const b=r[v],S=b*f;g.push(new ud({level:v,scale:b,resolution:S}))}else{let v=Wg(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const b=Math.ceil(s/t);g.push(new ud({level:0,scale:v,resolution:v*f}));for(let S=1;S<b;S++){const T=v/2**t,E=T*f;g.push(new ud({level:S,scale:T,resolution:E})),v=T}}return new Ic({dpi:d,lods:g,origin:l,size:[i,i],spatialReference:n})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=mn(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return Qe.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],n=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(s=>{i.push(s.scale),t=s.scale>t?s.scale:t,r=s.scale<r?s.scale:r,n[s.level]=s})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(ai(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const f=dx(t,this.spatialReference);if(f==null)return null;s=f.x,o=f.y,i=r}const l=n.resolution*this.size[0],d=n.resolution*this.size[1];return i||(i=new y0e(null,0,0,0,yn())),i.level=e,i.row=Math.floor((this.origin.y-o)/d+.001),i.col=Math.floor((s-this.origin.x)/l+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=Ic.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Ic.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=yn()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,n=i*this.size[0],s=i*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+n,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Ic.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let n=0;n<i;n++){const s=n+t,{scale:o,resolution:l}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new ud({level:n,scale:o,resolution:l}))}return new Ic({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};u([h({type:Number,json:{write:!0}})],Mi.prototype,"compressionQuality",void 0),u([h({type:Number,json:{write:!0}})],Mi.prototype,"dpi",void 0),u([h({type:String,json:{read:m9.read,write:m9.write,origins:{"web-scene":{read:!1,write:!1}}}})],Mi.prototype,"format",void 0),u([h({readOnly:!0})],Mi.prototype,"isWrappable",null),u([h({type:Qe,json:{write:!0}})],Mi.prototype,"origin",void 0),u([se("origin")],Mi.prototype,"readOrigin",null),u([h({type:[ud],value:null,json:{write:!0}})],Mi.prototype,"lods",null),u([h({readOnly:!0})],Mi.prototype,"scales",void 0),u([h({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Mi.prototype,"size",void 0),u([se("size",["rows","cols"])],Mi.prototype,"readSize",null),u([le("size",{cols:{type:at},rows:{type:at}})],Mi.prototype,"writeSize",null),u([h({type:Ge,json:{write:!0}})],Mi.prototype,"spatialReference",void 0),Mi=Ic=u([M("esri.layers.support.TileInfo")],Mi),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Mi||(Mi={}));const m0e=Mi,J2={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},y3={xsmall:544,small:768,medium:992,large:1200};function g0e(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function m3(e,t){return t?J2[e].valueToClassName[t].split(" "):[]}const v0e=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=y3}initialize(){this.addHandles(ze(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Xi))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!g0e(r)){const i=JSON.stringify(y3,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=y3}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=fn.acquire(),i=fn.acquire();let n,s=!1;for(n in J2){const o=this[n],l=J2[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==l&&(s=!0,this[n]=l,m3(n,o).forEach(d=>i.push(d)),m3(n,l).forEach(d=>r.push(d)))}s&&(this._applyClassNameChanges(r,i),fn.release(r),fn.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in J2)m3(i,this[i]).forEach(n=>r.classList.remove(n))}};return u([h()],t.prototype,"breakpoints",null),u([h()],t.prototype,"orientation",void 0),u([h()],t.prototype,"widthBreakpoint",void 0),u([h()],t.prototype,"heightBreakpoint",void 0),t=u([M("esri.views.BreakpointsOwner")],t),t};function vD(e){return typeof e=="string"?document.getElementById(e):e??null}function g9(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let Xp=class extends Ae{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,ze)}addWhen(t,r,i={}){return this._installWatch(t,r,i,ao)}addOnCollectionChange(t,r,{initial:i=!1,final:n=!1}={}){const s=++this._handleId;return this.addHandles([kd(t,"after-changes",this._createSyncUpdatingCallback(),il),kd(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:n?o=>r({added:[],removed:o.toArray()}):void 0})],s),vt(()=>this.removeHandles(s))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(vt(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(AS)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},n){const s=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,s);const o=n(t,r,i);return this.addHandles(o,s),vt(()=>this.removeHandles(s))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),n=ze(t,i,{sync:!0,equals:()=>!1});return this.addHandles(n,r),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(AS),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Sw(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(AS))}),AS)}}};u([h({readOnly:!0})],Xp.prototype,"updating",void 0),Xp=u([M("esri.core.support.UpdatingHandles")],Xp);const AS=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var XE=function(){return XE=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},XE.apply(this,arguments)},tI={exports:{}},vr={},rI={exports:{}},Af={};function kJ(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function b0e(e,t,r){}function _0e(e,t,r){}var w0e=/javascript\s*\:/img;function S0e(e,t){return w0e.test(t)?"":t}Af.whiteList=kJ();Af.getDefaultWhiteList=kJ;Af.onAttr=b0e;Af.onIgnoreAttr=_0e;Af.safeAttrValue=S0e;var T0e={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},gv=T0e;function E0e(e,t){e=gv.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function l(){if(!i){var g=gv.trim(e.slice(n,s)),v=g.indexOf(":");if(v!==-1){var b=gv.trim(g.slice(0,v)),S=gv.trim(g.slice(v+1));if(b){var T=t(n,o.length,b,S,g);T&&(o+=T+"; ")}}}n=s+1}for(;s<r;s++){var d=e[s];if(d==="/"&&e[s+1]==="*"){var f=e.indexOf("*/",s+2);if(f===-1)break;s=f+1,n=s+1,i=!1}else d==="("?i=!0:d===")"?i=!1:d===";"?i||l():d===`
`&&l()}return gv.trim(o)}var $0e=E0e,MS=Af,x0e=$0e;function v9(e){return e==null}function A0e(e){var t={};for(var r in e)t[r]=e[r];return t}function DJ(e){e=A0e(e||{}),e.whiteList=e.whiteList||MS.whiteList,e.onAttr=e.onAttr||MS.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||MS.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||MS.safeAttrValue,this.options=e}DJ.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,l=x0e(e,function(d,f,g,v,b){var S=i[g],T=!1;if(S===!0?T=S:typeof S=="function"?T=S(v):S instanceof RegExp&&(T=S.test(v)),T!==!0&&(T=!1),v=o(g,v),!!v){var E={position:f,sourcePosition:d,source:b,isWhite:T};if(T){var x=n(g,v,E);return v9(x)?g+":"+v:x}else{var x=s(g,v,E);if(!v9(x))return x}}});return l};var M0e=DJ;(function(e,t){var r=Af,i=M0e;function n(o,l){var d=new i(l);return d.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(rI,rI.exports);var bD=rI.exports,_D={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},O0e=bD.FilterCSS,R0e=bD.getDefaultWhiteList,KE=_D;function jJ(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var FJ=new O0e;function C0e(e,t,r){}function I0e(e,t,r){}function N0e(e,t,r){}function P0e(e,t,r){}function UJ(e){return e.replace(k0e,"&lt;").replace(D0e,"&gt;")}function L0e(e,t,r,i){if(r=HJ(r),t==="href"||t==="src"){if(r=KE.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(OS.lastIndex=0,OS.test(r))return""}else if(t==="style"){if(b9.lastIndex=0,b9.test(r)||(_9.lastIndex=0,_9.test(r)&&(OS.lastIndex=0,OS.test(r))))return"";i!==!1&&(i=i||FJ,r=i.process(r))}return r=WJ(r),r}var k0e=/</g,D0e=/>/g,j0e=/"/g,F0e=/&quot;/g,U0e=/&#([a-zA-Z0-9]*);?/gim,V0e=/&colon;?/gim,z0e=/&newline;?/gim,OS=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,b9=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_9=/u\s*r\s*l\s*\(.*/gi;function VJ(e){return e.replace(j0e,"&quot;")}function zJ(e){return e.replace(F0e,'"')}function GJ(e){return e.replace(U0e,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function BJ(e){return e.replace(V0e,":").replace(z0e," ")}function qJ(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return KE.trim(t)}function HJ(e){return e=zJ(e),e=GJ(e),e=BJ(e),e=qJ(e),e}function WJ(e){return e=VJ(e),e=UJ(e),e}function G0e(){return""}function B0e(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:KE.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,l,d){if(i(o))if(d.isClosing){var f="[/removed]",g=d.position+f.length;return n.push([s!==!1?s:d.position,g]),s=!1,f}else return s||(s=d.position),"[removed]";else return t(o,l,d)},remove:function(o){var l="",d=0;return KE.forEach(n,function(f){l+=o.slice(d,f[0]),d=f[1]}),l+=o.slice(d),l}}}function q0e(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function H0e(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}vr.whiteList=jJ();vr.getDefaultWhiteList=jJ;vr.onTag=C0e;vr.onIgnoreTag=I0e;vr.onTagAttr=N0e;vr.onIgnoreTagAttr=P0e;vr.safeAttrValue=L0e;vr.escapeHtml=UJ;vr.escapeQuote=VJ;vr.unescapeQuote=zJ;vr.escapeHtmlEntities=GJ;vr.escapeDangerHtml5Entities=BJ;vr.clearNonPrintableCharacter=qJ;vr.friendlyAttrValue=HJ;vr.escapeAttrValue=WJ;vr.onIgnoreTagStripAll=G0e;vr.StripTagBody=B0e;vr.stripCommentTag=q0e;vr.stripBlankChar=H0e;vr.cssFilter=FJ;vr.getDefaultCSSWhiteList=R0e;var Tx={},cd=_D;function W0e(e){var t=cd.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=cd.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function Z0e(e){return e.slice(0,2)==="</"}function Y0e(e,t,r){var i="",n=0,s=!1,o=!1,l=0,d=e.length,f="",g="";e:for(l=0;l<d;l++){var v=e.charAt(l);if(s===!1){if(v==="<"){s=l;continue}}else if(o===!1){if(v==="<"){i+=r(e.slice(n,l)),s=l,n=l;continue}if(v===">"){i+=r(e.slice(n,s)),g=e.slice(s,l+1),f=W0e(g),i+=t(s,i.length,f,g,Z0e(g)),n=l+1,s=!1;continue}if(v==='"'||v==="'")for(var b=1,S=e.charAt(l-b);S.trim()===""||S==="=";){if(S==="="){o=v;continue e}S=e.charAt(l-++b)}}else if(v===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var J0e=/[^a-zA-Z0-9\\_:.-]/gim;function X0e(e,t){var r=0,i=0,n=[],s=!1,o=e.length;function l(b,S){if(b=cd.trim(b),b=b.replace(J0e,"").toLowerCase(),!(b.length<1)){var T=t(b,S||"");T&&n.push(T)}}for(var d=0;d<o;d++){var f=e.charAt(d),g,v;if(s===!1&&f==="="){s=e.slice(r,d),r=d+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:Q0e(e,d+1);continue}if(s!==!1&&d===i){if(v=e.indexOf(f,d+1),v===-1)break;g=cd.trim(e.slice(i+1,v)),l(s,g),s=!1,d=v,r=d+1;continue}if(/\s|\n|\t/.test(f))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(v=K0e(e,d),v===-1){g=cd.trim(e.slice(r,d)),l(g),s=!1,r=d+1;continue}else{d=v-1;continue}else if(v=eve(e,d-1),v===-1){g=cd.trim(e.slice(r,d)),g=w9(g),l(s,g),s=!1,r=d+1;continue}else continue}return r<e.length&&(s===!1?l(e.slice(r)):l(s,w9(cd.trim(e.slice(r))))),cd.trim(n.join(" "))}function K0e(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function Q0e(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function eve(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function tve(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function w9(e){return tve(e)?e.substr(1,e.length-2):e}Tx.parseTag=Y0e;Tx.parseAttr=X0e;var rve=bD.FilterCSS,qo=vr,ZJ=Tx,ive=ZJ.parseTag,nve=ZJ.parseAttr,X2=_D;function RS(e){return e==null}function sve(e){var t=X2.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=X2.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=X2.trim(e.slice(0,-1))),{html:e,closing:r}}function ove(e){var t={};for(var r in e)t[r]=e[r];return t}function ave(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function YJ(e){e=ove(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=qo.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=ave(e.whiteList||e.allowList):e.whiteList=qo.whiteList,e.onTag=e.onTag||qo.onTag,e.onTagAttr=e.onTagAttr||qo.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||qo.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||qo.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||qo.safeAttrValue,e.escapeHtml=e.escapeHtml||qo.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new rve(e.css))}YJ.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,l=r.onIgnoreTagAttr,d=r.safeAttrValue,f=r.escapeHtml,g=t.cssFilter;r.stripBlankChar&&(e=qo.stripBlankChar(e)),r.allowCommentTag||(e=qo.stripCommentTag(e));var v=!1;r.stripIgnoreTagBody&&(v=qo.StripTagBody(r.stripIgnoreTagBody,s),s=v.onIgnoreTag);var b=ive(e,function(S,T,E,x,O){var C={sourcePosition:S,position:T,isClosing:O,isWhite:Object.prototype.hasOwnProperty.call(i,E)},I=n(E,x,C);if(!RS(I))return I;if(C.isWhite){if(C.isClosing)return"</"+E+">";var P=sve(x),k=i[E],D=nve(P.html,function(H,re){var K=X2.indexOf(k,H)!==-1,ie=o(E,H,re,K);return RS(ie)?K?(re=d(E,H,re,g),re?H+'="'+re+'"':H):(ie=l(E,H,re,K),RS(ie)?void 0:ie):ie});return x="<"+E,D&&(x+=" "+D),P.closing&&(x+=" /"),x+=">",x}else return I=s(E,x,C),RS(I)?f(x):I},f);return v&&(b=v.remove(b)),b};var lve=YJ;(function(e,t){var r=vr,i=Tx,n=lve;function s(l,d){var f=new n(d);return f.process(l)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n,function(){for(var l in r)t[l]=r[l];for(var d in i)t[d]=i[d]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(tI,tI.exports);var by=tI.exports,uve=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},cve=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=XE(XE({},by.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,l,d){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(l):by.safeAttrValue(s,o,l,d)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),n.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(l){return n.css.whiteList[l]=o[l]})}else n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new by.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",l=/^#/.test(t),d=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||l||d?by.escapeAttrValue(t):!s&&!n?by.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):by.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,n){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(n)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(l,d){var f=i.validate(d,r);return f.isValid?l.concat([d]):(n=!0,l.concat([f.sanitized]))},[]);else if(uve(t)){var o=Object.keys(t);s=o.reduce(function(l,d){var f=t[d],g=i.validate(f,r);return g.isValid?l[d]=f:(n=!0,l[d]=g.sanitized),l},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Ex=new Map;function JJ(){Ex.clear()}function dve(e){return Ex.get(e)}function hve(e,t){Ex.set(e,t)}function g3(e){Ex.delete(e)}function pve(...e){const t=fn.acquire();for(let i=0;i<e.length;i++){const n=e[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return fn.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var n;JJ();for(const s of i)(n=e.get(s.target))==null||n(s)}),r=(i,n,s)=>(e.set(i,n),t.observe(i,s),vt(()=>{t.unobserve(i),e.delete(i)}));return(i,n,s)=>{let o=null;return gw([ze(()=>typeof i=="function"?i():i,l=>{o==null||o.remove(),l&&(o=r(l,n,s))},Pn),vt(()=>o==null?void 0:o.remove())])}})();function fve(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function oFe(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function aFe(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const yve=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],mve=yve.reduce((e,t)=>(e[t]=[],e),{}),gve=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],XJ=new cve({whiteList:mve,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(gve.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function vve(e){return e==="Enter"||e===" "}async function bve(e,t){await ede(ww(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const KJ="http://www.w3.org/",$x=`${KJ}2000/svg`,QJ=`${KJ}1999/xlink`;let S9=[],wD=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},SD=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),eX=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},_ve=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(SD(e[i],t))return i}return-1},v3=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let l=e[o];if(SD(l,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},wve=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},iI=[],nI=!1,tX=e=>{(e.children||[]).forEach(tX),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},T9=()=>{nI=!1,iI.forEach(tX),iI.length=0},E9=e=>{iI.push(e),nI||(nI=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(T9,{timeout:16}):setTimeout(T9,16))},$9=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),E9(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),E9(e))},Sve=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let l=n[o],d=t[l];if(l==="className")throw new Error('Property "className" is not supported, use "class".');if(l==="class")oI(e,d,!0);else if(l==="classes"){let f=Object.keys(d),g=f.length;for(let v=0;v<g;v++){let b=f[v];d[b]&&e.classList.add(b)}}else if(l==="styles"){let f=Object.keys(d),g=f.length;for(let v=0;v<g;v++){let b=f[v],S=d[b];S&&(eX(S),r.styleApplyer(e,b,S))}}else if(l!=="key"&&d!=null){let f=typeof d;f==="function"?(l.lastIndexOf("on",0)===0&&(i&&(d=i(l,d,e,t)),l==="oninput"&&function(){let g=d;d=function(v){g.apply(this,[v]),v.target["oninput-value"]=v.target.value}}()),e[l]=d):r.namespace===$x?l==="href"?e.setAttributeNS(QJ,l,d):e.setAttribute(l,d):f==="string"&&l!=="value"?l==="innerHTML"?e[l]=XJ.sanitize(d):sI(e)&&l in e?e[l]=d:e.setAttribute(l,d):e[l]=d}}};function sI(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let QE,Tve=(e,t,r)=>{if(t)for(let i of t)a_(i,e,void 0,r)},rX=(e,t,r)=>{Tve(e,t.children,r),t.text&&(e.textContent=t.text),Sve(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},a_=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,l=t.ownerDocument;if(o==="")n=e.domNode=l.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let d=0;d<=o.length;++d){let f=o.charAt(d);if(d===o.length||f==="."||f==="#"){let g=o.charAt(s-1),v=o.slice(s,d);g==="."?n.classList.add(v):g==="#"?n.id=v:(v==="svg"&&(i=wD(i,{namespace:$x})),i.namespace!==void 0?n=e.domNode=l.createElementNS(i.namespace,v):(n=e.domNode=e.domNode||l.createElement(v),v==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=d+1}}rX(n,e,i)}},oI=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},Eve=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let l=0;l<o;l++){let d=s[l],f=r[d],g=t[d];if(d==="class")g!==f&&(oI(e,g,!1),oI(e,f,!0));else if(d==="classes"){let v=e.classList,b=Object.keys(f),S=b.length;for(let T=0;T<S;T++){let E=b[T],x=!!f[E];x!==!!g[E]&&(n=!0,x?v.add(E):v.remove(E))}}else if(d==="styles"){let v=Object.keys(f),b=v.length;for(let S=0;S<b;S++){let T=v[S],E=f[T];E!==g[T]&&(n=!0,E?(eX(E),i.styleApplyer(e,T,E)):i.styleApplyer(e,T,""))}}else if(f||typeof g!="string"||(f=""),d!=="value"||sI(e)){if(f!==g){let v=typeof f;v==="function"&&i.eventHandlerInterceptor||(i.namespace===$x?d==="href"?e.setAttributeNS(QJ,d,f):e.setAttribute(d,f):v==="string"?d==="innerHTML"?e[d]=XJ.sanitize(f):d==="role"&&f===""?e.removeAttribute(d):sI(e)&&d in e?e[d]=f:e.setAttribute(d,f):e[d]!==f&&(e[d]=f),n=!0)}}else{let v=e[d];v!==f&&(e["oninput-value"]?v===e["oninput-value"]:f!==g)&&(e[d]=f,e["oninput-value"]=void 0),f!==g&&(n=!0)}}return n},$ve=(e,t,r,i,n)=>{if(r===i)return!1;i=i||S9;let s,o=(r=r||S9).length,l=i.length,d=0,f=0,g=!1;for(;f<l;){let v=d<o?r[d]:void 0,b=i[f];if(v!==void 0&&SD(v,b))g=QE(v,b,n)||g,d++;else{let S=_ve(r,b,d+1);if(S>=0){for(s=d;s<S;s++)$9(r[s]),v3(r,s,e,"removed");g=QE(r[S],b,n)||g,d=S+1}else a_(b,t,d<o?r[d].domNode:void 0,n),wve(b),v3(i,f,e,"added")}f++}if(o>d)for(s=d;s<o;s++)$9(r[s]),v3(r,s,e,"removed");return g};QE=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=wD(r,{namespace:$x})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=$ve(t,i,e.children,t.children,r)||s,s=Eve(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let CS=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,QE(i,r,t)},domNode:e.domNode});const xve={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Vv=e=>wD(xve,e),Sd={append:(e,t,r)=>(r=Vv(r),a_(t,e,void 0,r),CS(t,r)),insertBefore:(e,t,r)=>(r=Vv(r),a_(t,e.parentNode,e,r),CS(t,r)),merge:(e,t,r)=>(r=Vv(r),t.domNode=e,rX(e,t,r),CS(t,r)),replace:(e,t,r)=>(r=Vv(r),a_(t,e.parentNode,e,r),e.parentNode.removeChild(e),CS(t,r))},iX,Ave=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};iX=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let Mve=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?iX(r.children,n=>n.domNode===i):void 0}),r},Ove=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=Ave(n.currentTarget,s.domNode);o.reverse();let l,d=Mve(s.getLastRender(),o);return e.scheduleRender(),d&&(l=d.properties[`on${n.type}`].apply(d.properties.bind||this,arguments)),r("domEventProcessed",n),l};return(n,s,o,l)=>i},x9=e=>{let t,r,i=Vv(e),n=i.performanceLogger,s=!0,o=!1,l=[],d=[],f=(v,b,S)=>{let T,E=()=>T;i.eventHandlerInterceptor=Ove(t,E,n),T=v(b,S(),i),l.push(T),d.push(S)},g=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let v=0;v<l.length;v++){let b=d[v]();n("rendered",void 0),l[v].update(b),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:g,scheduleRender:()=>{r||o||(r=requestAnimationFrame(g))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(v,b)=>{f(Sd.append,v,b)},insertBefore:(v,b)=>{f(Sd.insertBefore,v,b)},merge:(v,b)=>{f(Sd.merge,v,b)},replace:(v,b)=>{f(Sd.replace,v,b)},detach:v=>{for(let b=0;b<d.length;b++)if(d[b]===v)return d.splice(b,1),l.splice(b,1)[0];throw new Error("renderFunction was not found")}},t},Nc=class extends Ae{constructor(){super(...arguments),this.items=new ge,this._watchUpdatingTracking=new Xp,this._callbacks=new Map,this._projector=x9(),this._hiddenProjector=x9()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const n=()=>i.render();this._callbacks.set(i,n),this._projector.append(this.surface,n)}for(const i of r.removed){const n=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(n.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let n;const s=()=>(n=t.render(),n);i.append(r,s),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(n!=null&&n.domNode){const l=n.domNode.getBoundingClientRect();o.left=l.left,o.top=l.top,o.right=l.right,o.bottom=l.bottom}for(i.detach(s);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),n=this.computeBoundingRect(r);return Math.max(i.left,n.left)<=Math.min(i.right,n.right)&&Math.max(i.top,n.top)<=Math.min(i.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(s=>s.visible&&!(i&&s.isDecoration)))return;const n=t.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(s=>{i&&s.isDecoration||(n.save(),s.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};u([h({readOnly:!0})],Nc.prototype,"surface",void 0),u([h({readOnly:!0})],Nc.prototype,"items",void 0),u([h({readOnly:!0})],Nc.prototype,"needsRender",null),u([h({readOnly:!0})],Nc.prototype,"_watchUpdatingTracking",void 0),u([h({readOnly:!0})],Nc.prototype,"updating",null),Nc=u([M("esri.views.overlay.ViewOverlay")],Nc);const A9=Nc,b3=[0,0];function Rve(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return b3[0]=r.left+((t==null?void 0:t.pageXOffset)??0),b3[1]=r.top+((t==null?void 0:t.pageYOffset)??0),b3}function M9(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function Cve(e){const t=document.createElement("div");return e.appendChild(t),t}const _y=16,vv=750,Ive=512,Nve=2,Pve=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:_y,time:vv},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ze(()=>this.cursor,i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)}),ze(()=>this.navigating,i=>{const{surface:n}=this;n&&n.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([ze(()=>this.ui,(r,i)=>this._handleUIChange(r,i),Xi),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),n=vD(r);if(n||typeof r!="string"||ae.getLogger(this).error("#container",`element with id '${r}' not found`),i===n)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(M9(this.root),this._set("root",null)),this.userContent&&(g9(this.userContent,i),M9(this.userContent),this._set("userContent",null))),!n)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);n.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",g9(n,s),n.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",n.insertBefore(o,n.firstChild),this._set("root",o);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,o.appendChild(l),this._set("surface",l);const d=new A9;o.appendChild(d.surface),this._set("overlay",d),this.addHandles(ze(()=>d.needsRender,f=>{f&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=_g({render:()=>{var g;return(g=this.overlay)==null?void 0:g.render()}}):this._overlayRenderTaskHandle=nr(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",n),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s?s[0]:0,i-=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s?s[0]:0,i+=s?s[1]:0,n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(ze(()=>this.root,n=>{r.container=n?Cve(n):null},Xi),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=_y,r.time=vv;const i=_g({prepare:o=>{const l=this._measure(),d=this._freqInfo;if(d.time+=o.deltaTime,l&&(d.freq=_y,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const f=this._position();d.freq=f||l?_y:Math.min(vv,d.freq*Nve),!l&&d.freq>=Ive&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),n=new ResizeObserver(o=>{r.freq=_y,r.time=vv,i.resume()});this.container!=null&&n.observe(this.container);const s=vt(()=>n.disconnect());this.addHandles([_w(window,"resize",()=>{r.freq=_y,r.time=vv,i.resume()}),s,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=r&&Rve(r);return!!n&&(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return u([h()],t.prototype,"container",null),u([h({readOnly:!0})],t.prototype,"focused",null),u([h({readOnly:!0})],t.prototype,"height",void 0),u([h()],t.prototype,"messagesCommon",void 0),u([h({type:A9})],t.prototype,"overlay",void 0),u([h({readOnly:!0})],t.prototype,"position",void 0),u([h({readOnly:!0})],t.prototype,"resizing",void 0),u([h({readOnly:!0})],t.prototype,"root",void 0),u([h({value:null,readOnly:!0})],t.prototype,"size",null),u([h({readOnly:!0})],t.prototype,"surface",void 0),u([h({readOnly:!0})],t.prototype,"suspended",void 0),u([h({nonNullable:!0})],t.prototype,"ui",void 0),u([h({readOnly:!0})],t.prototype,"userContent",void 0),u([h({readOnly:!0})],t.prototype,"width",void 0),u([h()],t.prototype,"widthBreakpoint",void 0),t=u([M("esri.views.DOMContainer")],t),t},Lve=Z("mac")?"Meta":"Control",kve=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Dve=e=>kve.has(e);let jve=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},li=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new jve(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=g=>{const v=this._incoming[g.match.eventType];if(v){const b=v.indexOf(g);v.splice(b,1),o(),this._manager&&this._manager.updateDependencies()}},d=new Fve(s,i,{onPause:l,onRemove:l,onResume:g=>{const v=this._incoming[g.match.eventType];v&&!v.includes(g)&&(v.push(g),o(),this._manager&&this._manager.updateDependencies())}});let f=this._incoming[s.eventType];return f||(f=[],this._incoming[s.eventType]=f),f.push(d),o(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new Uve(t,{onEmit:(i,n,s,o)=>{var l;(l=this._manager)==null||l.emit(i.eventType,n,s,o)},onRemove:i=>{var n;delete this._outgoing[i.eventType],(n=this._manager)==null||n.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const n of r)if(n.match.matches(t)&&((i=n.callback)==null||i.call(n,t),t.shouldStopPropagation()))break}}},Fve=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Uve=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},Vve=class extends li{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:n}=t;r===this._value&&this._x===i&&this._y===n||(this._value=r,this._x=i,this._y=n,this._onChange(r,i,n))}},zve=class{constructor(t,r){this._observable=new Aw,this._value=t,this._equalityFunction=r}get value(){return Fe(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function Ig(e,t=xH){return new zve(e,t)}let Gve=class extends li{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Ig(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Bve=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const n=t[i],s=new sW(n,void 0,void 0,2,2);this._properties[i]={pool:s,acquired:[]}}this._afterDispatchHandle=pde(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)G8(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const n of r.acquired)G8(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}},Ns=class extends Ae{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Lve,this._latestPointerType="mouse",this._propertiesPool=new Bve({latestPointerLocation:Wve},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=Od.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const n={name:t,handlers:r.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=n;for(let s=n.handlers.length-1;s>=0;s--){const o=n.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,d,f,g,v)=>{this._emitInputEvent(o.priorityIndex+1,l,d,f,v,g)},setPointerCapture:(l,d)=>{this._setPointerCapture(n,o,l,d)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var n;i.removed=!0,(n=i.uninstallCallback)==null||n.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ae.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const n=this._handlers[i];n.priorityIndex=i,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const n=this._handlersPriority[i];n.priorityIndex=i;let s=n.handler.hasSideEffects;if(!s){for(const o of n.handler.outgoingEventTypes)if(t.has(o)){s=!0;break}}if(s)for(const o of n.handler.incomingEventMatches){t.add(o.eventType);for(const l of o.keyModifiers)Dve(l)||r.add(l)}n.active=s}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const n=this._get("latestPointerLocation");if(n==null||n.x!==r||n.y!==i){const s=this._propertiesPool.get("latestPointerLocation");s.x=r,s.y=i,this._set("latestPointerLocation",s)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const s=r;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,n=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,n)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const n=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},s=(l,d)=>{d&&!this._activeKeyModifiers.has(l)?(n(),this._activeKeyModifiers.add(l)):!d&&this._activeKeyModifiers.has(l)&&(n(),this._activeKeyModifiers.delete(l))};if(t==="key-down"||t==="key-up"){const l=r.key;this._keyModifiers.has(l)&&s(l,t==="key-down")}const o=r.native;s("Alt",!!(o!=null&&o.altKey)),s("Control",!!(o!=null&&o.ctrlKey)),s("Ctrl",!!(o!=null&&o.ctrlKey)),s("Shift",!!(o!=null&&o.shiftKey)),s("Meta",!!(o!=null&&o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Vve((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new Gve,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Od.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Od.INTERNAL)}_setPointerCapture(t,r,i,n){const s=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),n?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,n){this._emitInputEvent(0,t,r,i,n)}_emitInputEvent(t,r,i,n,s,o){const l=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=s!==void 0&&s,f={event:new qve(r,i,l,o||this._activeKeyModifiers,d),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(f):this._doNewPropagation(f)}_doNewPropagation(t){this._currentPropagation={events:new BE,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,n;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:s,priorityIndex:o}=t.events.pop(),l=(r=s.data)==null?void 0:r.eventId;if(!(l!=null&&this._stoppedPropagationEventIds.has(l)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!s.shouldStopPropagation()&&((n=(i=t.currentHandler).eventCallback)==null||n.call(i,s)),s.shouldStopPropagation()){l!=null&&this._stoppedPropagationEventIds.add(l);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new BE;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const n of r.handler.incomingEventMatches){if(i.eventType!==n.eventType)continue;const s=i.keyModifiers.filter(o=>n.keyModifiers.includes(o));if(s.length===i.keyModifiers.length!=(s.length===n.keyModifiers.length))return i.keyModifiers.length>n.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let n=0;for(;n<r.length&&this._compareHandlerPriority(i,r[n])>=0;)n++;r.splice(n,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>this._onEventReceived(r,i))},disablePointerCapture:t}}};u([h({readOnly:!0})],Ns.prototype,"hasPendingInputs",null),u([h({constructOnly:!0})],Ns.prototype,"eventSource",void 0),u([h({constructOnly:!0})],Ns.prototype,"recognizers",void 0),u([h()],Ns.prototype,"_latestPointerType",void 0),u([h()],Ns.prototype,"latestPointerType",null),u([h()],Ns.prototype,"multiTouchActive",null),u([h({readOnly:!0})],Ns.prototype,"latestPointerLocation",void 0),u([h()],Ns.prototype,"_paused",void 0),u([h({readOnly:!0})],Ns.prototype,"updating",null),Ns=u([M("esri.views.input.InputManager")],Ns);let qve=class{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=dd.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=dd.STOPPED}shouldStopPropagation(){return!!(this._propagationState&dd.STOPPED)}async(t){this._propagationState|=dd.PAUSED;const r=(i,n)=>{this._propagationState&=~dd.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&dd.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var dd;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(dd||(dd={}));const Od={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let Hve=class{};const Wve=Hve;function $c(e){return e!=null&&"open"in e&&"declaredClass"in e}function O9(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const Zve=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ze(()=>[this.ui,this.popup],([r,i],n)=>{const s="popup",o="manual";if(n){const[l,d]=n;l&&$c(d)&&(d.view=null,O9(d)&&l.remove(d,s))}r&&$c(i)&&(i.view=this,O9(i)&&r.add(i,{key:s,position:o,internal:!0}))},Xi),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&($c(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),$c(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},Od.WIDGET)]),yx(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{ne(()=>import("./Popup-C0NBTO3Y.js").then(r=>r.P),__vite__mapDeps([153,1,154,64,155,156,157,7,158,159,160,63,61,62,17,16,22,161,25,162,109,163]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if($c(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void ae.getLogger(this).error(new V("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),$c(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!$c(this.popup))return this._popupSetupTask=Mw(async i=>{const{default:n}=await ne(()=>import("./Popup-C0NBTO3Y.js").then(o=>o.P),__vite__mapDeps([153,1,154,64,155,156,157,7,158,159,160,63,61,62,17,16,22,161,25,162,109,163]));if(hr(i),!this.popup||$c(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new n(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},n){const s=[],o=[];let l=!1;const d=Bce(n,Z("popup-view-fetch-timeout")??Jve),f=b=>{const S=new Yve(b);return o.push(S),s.push(S.promise),S},g=b=>{const S=o.at(-1);return S&&S.layerView===b&&!l?S:f(b)};for(const b of i)"graphic"in b?(g(b.layerView).graphics.push(b.graphic),l=!1):(s.push(b.layerView.fetchPopupFeaturesAtLocation(b.mapPoint,d)),l=!0);o.map(b=>b.resolve(d));const v=Gce(s).then(b=>b.filter(S=>!!S).flat());return{pendingFeatures:s,allGraphicsPromise:v,location:r}}async _getPopupHits(r,i){const{hits:n,location:s}=await this.popupHitTest(r);hr(i);const o=[];for(const l of n)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,i)){const d=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;o.push({graphic:l.graphic,layerView:d})}}else this._isValidPopupLocationLayerView(l.layerView)&&o.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:o,location:s}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return u([h()],t.prototype,"popup",void 0),u([h()],t.prototype,"popupEnabled",void 0),t=u([M("esri.views.PopupView")],t),t};let Yve=class{constructor(t){this.layerView=t,this._resolver=gs(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:n}=this;if(!r)return n.resolve(i),n.promise;let s;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(s=o,null)).then(o=>{o?n.resolve(o):n.reject(s)}),n.promise}};const Jve=5e3;function ju(e,t,r=ge){return t||(t=new r),t===e||(t.removeAll(),Xve(e)?t.addMany(e):e&&t.add(e)),t}function nX(e){return e}function Xve(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var hd;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(hd||(hd={}));let Kve=class{constructor(){this._resolver=gs(),this._status=hd.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=hd.RESOLVED,this._cleanUp()},()=>{this._status=hd.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===hd.RESOLVED}isRejected(){return this._status===hd.REJECTED}isFulfilled(){return this._status!==hd.PENDING}abort(){this._resolver.reject(kt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=gs(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==i||Ni(n)||this._resolver.reject(n)}),t.resolve()}};const sX=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Kve,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=u([M("esri.core.Promise")],t),t};let zv=class extends sX(Ae){};zv=u([M("esri.core.Promise")],zv),function(e){e.EsriPromiseMixin=sX}(zv||(zv={}));const e0=zv,Qve="not-loaded",ebe="loading",tbe="failed",R9="loaded",oX=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((l,d)=>{const f=_k(s,d);this.destroyed&&d(new V("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,d).finally(()=>{f&&f.remove()})});if(this.loadStatus===Qve){this._set("loadStatus",ebe);const l=this._loadController=new AbortController;n({signal:l.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",R9),this._loadController=null},i=>{this._set("loadStatus",tbe),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=bg(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===R9}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new V("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return u([h({readOnly:!0})],t.prototype,"loaded",null),u([h({readOnly:!0})],t.prototype,"loadError",void 0),u([h({clonable:!1})],t.prototype,"loadStatus",void 0),u([h({type:[no],readOnly:!0})],t.prototype,"loadWarnings",null),t=u([M("esri.core.Loadable")],t),t};let Gv=class extends oX(e0){};Gv=u([M("esri.core.Loadable")],Gv),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=oX,e.isLoadable=t}(Gv||(Gv={}));const lo=Gv;async function xx(e,t){return await e.load(),rbe(e,t)}async function rbe(e,t){const r=[],i=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?i(...o):ge.isCollection(o)?o.forEach(l=>i(l)):lo.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await Afe(r,async s=>{const o=await fx(ibe(s)?s.loadAll():s.load());o.ok!==!1||n||(n=o)}),n)throw n.error;return e}function ibe(e){return"loadAll"in e&&typeof e.loadAll=="function"}let IS;function nbe(e){return IS&&!IS.destroyed||(IS=e()),IS}var aI;const sbe=new We({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Ps=aI=class extends Ae{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new aI({categories:this.categories?U(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=dx(this.extent,Ge.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>sbe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};u([h()],Ps.prototype,"categories",void 0),u([h()],Ps.prototype,"disableExtraQuery",void 0),u([h({type:Ut})],Ps.prototype,"extent",void 0),u([h()],Ps.prototype,"filter",void 0),u([h()],Ps.prototype,"num",void 0),u([h()],Ps.prototype,"query",void 0),u([h()],Ps.prototype,"sortField",void 0),u([h()],Ps.prototype,"sortOrder",null),u([h()],Ps.prototype,"start",void 0),Ps=aI=u([M("esri.portal.PortalQueryParams")],Ps);const Yo=Ps;var lI;let Ur=lI=class extends W{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new V("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new lI({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Or(Yo,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Yo,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Yo,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const n=i.contentCategorySetsGroupQuery;if(n){const s=new Yo({disableExtraQuery:!0,num:1,query:n});return r.queryGroups(s,t)}throw new V("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const n=i.results[0],s=new Yo({num:1,query:`typekeywords:"${e}"`});return n.queryItems(s,t)}throw new V("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(n=>{const s=n==null?void 0:n.categorySchema;return s!=null&&s.length?s:[]}):[])}};u([h()],Ur.prototype,"access",void 0),u([h({type:Date})],Ur.prototype,"created",void 0),u([h()],Ur.prototype,"description",void 0),u([h()],Ur.prototype,"id",void 0),u([h()],Ur.prototype,"isInvitationOnly",void 0),u([h({type:Date})],Ur.prototype,"modified",void 0),u([h()],Ur.prototype,"owner",void 0),u([h()],Ur.prototype,"portal",void 0),u([h()],Ur.prototype,"snippet",void 0),u([h()],Ur.prototype,"sortField",void 0),u([h()],Ur.prototype,"sortOrder",void 0),u([h()],Ur.prototype,"sourceJSON",void 0),u([h()],Ur.prototype,"tags",void 0),u([h()],Ur.prototype,"thumbnail",void 0),u([h({readOnly:!0})],Ur.prototype,"thumbnailUrl",null),u([h()],Ur.prototype,"title",void 0),u([h({readOnly:!0})],Ur.prototype,"url",null),Ur=lI=u([M("esri.portal.PortalGroup")],Ur);const uI=Ur;let Hh=class extends Ae{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};u([h()],Hh.prototype,"nextQueryParams",void 0),u([h()],Hh.prototype,"queryParams",void 0),u([h()],Hh.prototype,"results",void 0),u([h()],Hh.prototype,"total",void 0),Hh=u([M("esri.portal.PortalQueryResult")],Hh);const obe=Hh;let Ul=class extends W{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new V("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};u([h({type:Date})],Ul.prototype,"created",void 0),u([h()],Ul.prototype,"id",void 0),u([h()],Ul.prototype,"portal",void 0),u([h()],Ul.prototype,"title",void 0),u([h({readOnly:!0})],Ul.prototype,"url",null),u([h()],Ul.prototype,"username",void 0),Ul=u([M("esri.portal.PortalFolder")],Ul);const abe=Ul;var cI;let zt=cI=class extends W{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal.request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],n=e.map(s=>s.id);if(n.length){const s={method:"post",query:{items:n.join(","),permanentDelete:t}},o=await this.portal.request(r,s);for(const l of o.results){const d=e.find(v=>l.itemId===v.id),f=l.success;let g=null;f?(d.id=null,d.portal=null):l.error&&(g=new V("portal:delete-item-failed",l.error.message,l.error)),i.push({item:d,success:f,error:g})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=abe.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=uI.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await ne(()=>Promise.resolve().then(()=>aX),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},n=await this.portal.request(t,{query:i});let s;return n!=null&&n.items?(s=n.items.map(o=>{const l=r.fromJSON(o);return l.portal=this.portal,l}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:n.nextStart,total:n.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new uI({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new V("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new V("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new cI({sourceJSON:e});return t.read(e),t}};u([h()],zt.prototype,"access",void 0),u([h({type:Date})],zt.prototype,"created",void 0),u([h()],zt.prototype,"culture",void 0),u([h()],zt.prototype,"description",void 0),u([h()],zt.prototype,"email",void 0),u([h()],zt.prototype,"favGroupId",void 0),u([h()],zt.prototype,"fullName",void 0),u([h({type:Date})],zt.prototype,"modified",void 0),u([h()],zt.prototype,"orgId",void 0),u([h()],zt.prototype,"portal",void 0),u([h()],zt.prototype,"preferredView",void 0),u([h()],zt.prototype,"privileges",void 0),u([h()],zt.prototype,"region",void 0),u([h()],zt.prototype,"role",void 0),u([h()],zt.prototype,"roleId",void 0),u([h()],zt.prototype,"sourceJSON",void 0),u([h()],zt.prototype,"thumbnail",void 0),u([h({readOnly:!0})],zt.prototype,"thumbnailUrl",null),u([h()],zt.prototype,"units",void 0),u([h({readOnly:!0})],zt.prototype,"userContentUrl",null),u([h({readOnly:!0})],zt.prototype,"url",null),u([h()],zt.prototype,"username",void 0),u([h()],zt.prototype,"userLicenseTypeId",void 0),u([h()],zt.prototype,"userType",void 0),zt=cI=u([M("esri.portal.PortalUser")],zt);const TD=zt;var Kn;let bv;const C9={PortalGroup:()=>Promise.resolve({default:uI}),PortalItem:()=>ne(()=>Promise.resolve().then(()=>aX),void 0),PortalUser:()=>Promise.resolve({default:TD})};let he=Kn=class extends W.JSONSupportMixin(lo){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Mt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){I9.unregister(this),this.defaultBasemap=Zt(this.defaultBasemap),this.defaultDevBasemap=Zt(this.defaultDevBasemap),this.defaultVectorBasemap=Zt(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=nr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Mt.request.trustedServers.includes(t)||Mt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return rZ(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=TD.fromJSON(e),t.portal=this),t}load(e){const t=ne(()=>Promise.resolve().then(()=>Mbe),void 0).then(({default:r})=>{hr(e),bv=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(!this.hasAPIKey&&Ze){const n=Ze;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Kn.AUTH_MODE_AUTO&&this.authMode!==Kn.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",lbe(new WeakRef(this))),I9.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ne(async()=>{const{default:r}=await import("./ElevationLayer-doL5OcLe.js");return{default:r}},__vite__mapDeps([164,165,166,167,64,17,168]))).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new Yo;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(i=>i.type==="Web Scene");return r?new bv({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):ms(e)?Promise.reject(kt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(t=>t.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Yo({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return ms(e)?Promise.reject(kt()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Fn();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Fn();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return nbe(()=>new Kn)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Fn().toLowerCase()},withCredentials:!0,...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this.request(i,n)}queryPortal(e,t,r,i){const n=Or(Yo,t),s=o=>this.request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(l=>{const d=n.clone();return d.start=l.nextStart,new obe({nextQueryParams:d,queryParams:n,total:l.total,results:Kn._resultsToTypedArray(o,{portal:this},l,i)})}).then(l=>Promise.all(l.results.map(d=>typeof d.when=="function"?d.when():l)).then(()=>l,d=>(Ga(d),l)));return r&&C9[r]?C9[r]().then(({default:o})=>(hr(i),s(o))):s()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new V("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Kn.AUTH_MODE_ANONYMOUS||this.authMode===Kn.AUTH_MODE_NO_PROMPT&&!Ze)return Promise.reject(new V("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Ze?Ze.getCredential(this.restUrl,{prompt:this.authMode!==Kn.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const n=Kn._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===Kn.AUTH_MODE_ANONYMOUS||this.authMode===Kn.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:l="json",signal:d}=t,f={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:l,timeout:0,signal:d};return t.withCredentials&&(f.withCredentials=!0),mt(this._normalizeSSL(e),f).then(g=>g.data)}toJSON(){throw new V("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Kn({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new V("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Yo;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const n=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const s=await n.queryItems(r,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new bv({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(this.hasAPIKey)return[];const i=new Yo({query:r,disableExtraQuery:!0}),n=await this.queryGroups(i,t);if(!n.total)return[];const s=n.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(i,t);return o.total?o.results.filter(l=>l.type==="Web Scene").map(l=>new bv({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=bv.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=i!=null?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const l=Object.assign(e?e.fromJSON(o):o,t);return typeof l.load=="function"&&l.load(s),l}))}else n=[];return n}};he.AUTH_MODE_ANONYMOUS="anonymous",he.AUTH_MODE_AUTO="auto",he.AUTH_MODE_IMMEDIATE="immediate",he.AUTH_MODE_NO_PROMPT="no-prompt",u([h()],he.prototype,"access",void 0),u([h()],he.prototype,"allSSL",void 0),u([h()],he.prototype,"authMode",void 0),u([h()],he.prototype,"authorizedCrossOriginDomains",void 0),u([se("authorizedCrossOriginDomains")],he.prototype,"readAuthorizedCrossOriginDomains",null),u([h()],he.prototype,"basemapGalleryGroupQuery",void 0),u([h({json:{name:"3DBasemapGalleryGroupQuery"}})],he.prototype,"basemapGalleryGroupQuery3D",void 0),u([h()],he.prototype,"bingKey",void 0),u([h()],he.prototype,"canListApps",void 0),u([h()],he.prototype,"canListData",void 0),u([h()],he.prototype,"canListPreProvisionedItems",void 0),u([h()],he.prototype,"canProvisionDirectPurchase",void 0),u([h()],he.prototype,"canSearchPublic",void 0),u([h()],he.prototype,"canShareBingPublic",void 0),u([h()],he.prototype,"canSharePublic",void 0),u([h()],he.prototype,"canSignInArcGIS",void 0),u([h()],he.prototype,"canSignInIDP",void 0),u([h()],he.prototype,"colorSetsGroupQuery",void 0),u([h()],he.prototype,"commentsEnabled",void 0),u([h({type:Date})],he.prototype,"created",void 0),u([h()],he.prototype,"credential",void 0),u([h()],he.prototype,"culture",void 0),u([h()],he.prototype,"currentVersion",void 0),u([h()],he.prototype,"customBaseUrl",void 0),u([h()],he.prototype,"default3DBasemapQuery",void 0),u([h()],he.prototype,"defaultBasemap",void 0),u([se("defaultBasemap")],he.prototype,"readDefaultBasemap",null),u([h()],he.prototype,"defaultDevBasemap",void 0),u([se("defaultDevBasemap")],he.prototype,"readDefaultDevBasemap",null),u([h({type:Ut})],he.prototype,"defaultExtent",void 0),u([h()],he.prototype,"defaultVectorBasemap",void 0),u([se("defaultVectorBasemap")],he.prototype,"readDefaultVectorBasemap",null),u([h()],he.prototype,"description",void 0),u([h()],he.prototype,"devBasemapGalleryGroupQuery",void 0),u([h()],he.prototype,"eueiEnabled",void 0),u([h({readOnly:!0})],he.prototype,"extraQuery",null),u([h()],he.prototype,"featuredGroups",void 0),u([h()],he.prototype,"featuredItemsGroupQuery",void 0),u([h()],he.prototype,"galleryTemplatesGroupQuery",void 0),u([h()],he.prototype,"layoutGroupQuery",void 0),u([h()],he.prototype,"livingAtlasGroupQuery",void 0),u([h({readOnly:!0})],he.prototype,"hasAPIKey",null),u([h()],he.prototype,"hasCategorySchema",void 0),u([h()],he.prototype,"hasClassificationSchema",void 0),u([h()],he.prototype,"helpBase",void 0),u([h()],he.prototype,"helperServices",void 0),u([h()],he.prototype,"helpMap",void 0),u([h()],he.prototype,"homePageFeaturedContent",void 0),u([h()],he.prototype,"homePageFeaturedContentCount",void 0),u([h()],he.prototype,"httpPort",void 0),u([h()],he.prototype,"httpsPort",void 0),u([h()],he.prototype,"id",void 0),u([h()],he.prototype,"ipCntryCode",void 0),u([h({readOnly:!0})],he.prototype,"isOrganization",null),u([h()],he.prototype,"isPortal",void 0),u([h()],he.prototype,"isReadOnly",void 0),u([h({readOnly:!0})],he.prototype,"itemPageUrl",null),u([h()],he.prototype,"layerTemplatesGroupQuery",void 0),u([h()],he.prototype,"maxTokenExpirationMinutes",void 0),u([h({type:Date})],he.prototype,"modified",void 0),u([h()],he.prototype,"name",void 0),u([h()],he.prototype,"portalHostname",void 0),u([h()],he.prototype,"portalMode",void 0),u([h()],he.prototype,"portalProperties",void 0),u([h()],he.prototype,"region",void 0),u([h()],he.prototype,"recycleBinEnabled",void 0),u([h({readOnly:!0})],he.prototype,"restUrl",null),u([h()],he.prototype,"rotatorPanels",void 0),u([h()],he.prototype,"showHomePageDescription",void 0),u([h()],he.prototype,"sourceJSON",void 0),u([h()],he.prototype,"staticImagesUrl",void 0),u([h({json:{name:"2DStylesGroupQuery"}})],he.prototype,"stylesGroupQuery2d",void 0),u([h({json:{name:"stylesGroupQuery"}})],he.prototype,"stylesGroupQuery3d",void 0),u([h()],he.prototype,"supportsHostedServices",void 0),u([h()],he.prototype,"symbolSetsGroupQuery",void 0),u([h()],he.prototype,"templatesGroupQuery",void 0),u([h()],he.prototype,"thumbnail",void 0),u([h({readOnly:!0})],he.prototype,"thumbnailUrl",null),u([h()],he.prototype,"units",void 0),u([h()],he.prototype,"url",void 0),u([h()],he.prototype,"urlKey",void 0),u([se("urlKey")],he.prototype,"readUrlKey",null),u([h()],he.prototype,"user",void 0),u([se("user")],he.prototype,"readUser",null),u([h()],he.prototype,"use3dBasemaps",void 0),u([h()],he.prototype,"useDefault3dBasemap",void 0),u([h()],he.prototype,"useStandardizedQuery",void 0),u([h()],he.prototype,"useVectorBasemaps",void 0),u([h()],he.prototype,"vectorBasemapGalleryGroupQuery",void 0),he=Kn=u([M("esri.portal.Portal")],he);const Ki=he,I9=new FinalizationRegistry(e=>{e.remove()});function lbe(e){const t=Ze;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let Vl=class extends Ae{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:N9(t.path,t.portalItem)}:t}set path(t){t!=null&&fs(t)?ae.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return N9(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new V("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await ne(()=>import("./resourceUtils-CHnQ8dhZ.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function N9(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&fs(e)&&(e=Ck(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}u([h()],Vl.prototype,"portalItem",void 0),u([h({type:String,value:null})],Vl.prototype,"path",null),u([ft("path")],Vl.prototype,"_castPath",null),u([h({type:String,readOnly:!0})],Vl.prototype,"url",null),u([h({type:String,readOnly:!0})],Vl.prototype,"cdnUrl",null),u([h({type:String,readOnly:!0})],Vl.prototype,"itemRelativeUrl",null),Vl=u([M("esri.portal.PortalItemResource")],Vl);const ube=Vl;let Bv=class extends Ae{constructor(t){super(t),this.created=null,this.rating=null}};u([h({type:Date})],Bv.prototype,"created",void 0),u([h()],Bv.prototype,"rating",void 0),Bv=u([M("esri.portal.PortalRating")],Bv);const _3=Bv;var Wh;const cbe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),dbe=new Set(["KML","GeoJson","CSV"]);let Xe=Wh=class extends W.JSONSupportMixin(lo){static from(e){return mw(Wh,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new Ut(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var S;const e=((S=this.type)==null?void 0:S.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,l=!1,d=!1,f=!1,g=!1,v=!1,b=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),l=t.includes("Route Layer"),d=t.includes("Markup"),f=t.includes("Spatiotemporal"),g=t.includes("UtilityNetwork"),n=f&&o?"spatiotemporaltable":o?"table":l?"routelayer":d?"markup":f?"spatiotemporal":g?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(f=t.includes("Spatiotemporal"),v=t.includes("Relational"),n=f||v?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):n=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?n="maps":e==="web scene"?n=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?n="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?n="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?n="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?n="datafiles":e==="360 vr experience"?n="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?n="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?n="addindesktop":e==="pdf"?n="pdf":e==="microsoft word"?n="word":e==="microsoft excel"?n="excel":e==="microsoft powerpoint"?n="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?n="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?n="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?n="layersgray":e==="analysis model"?n="analysismodel":e==="scene package"?n="scenepackage":e==="3dtiles package"?n="3dtileslayerpackage":e==="3dtiles service"?n="3dtileslayer":e==="mobile scene package"?n="mobilescenepackage":e==="tile package"||e==="compact tile package"?n="tilepackage":e==="task file"?n="taskfile":e==="report template"?n="report-template":e==="statistical data collection"?n="statisticaldatacollection":e==="insights workbook"?n="workbook":e==="insights model"?n="insightsmodel":e==="insights page"?n="insightspage":e==="insights theme"?n="insightstheme":e==="hub initiative"?n="hubinitiative":e==="hub page"?n="hubpage":e==="hub site application"?n="hubsite":e==="hub event"?n="hubevent":e==="hub project"?n="hubproject":e==="relational database connection"?n="relationaldatabaseconnection":e==="big data file share"?n="datastorecollection":e==="image collection"?n="imagecollection":e==="desktop style"?n="desktopstyle":e==="style"?n=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?n="dashboard":e==="raster function template"?n="rasterprocessingtemplate":e==="vector tile package"?n="vectortilepackage":e==="ortho mapping project"?n="orthomappingproject":e==="ortho mapping template"?n="orthomappingtemplate":e==="solution"?n="solutions":e==="geopackage"?n="geopackage":e==="deep learning package"?n="deeplearningpackage":e==="real time analytic"?n="realtimeanalytics":e==="reality mapping project"?n="realitymappingproject":e==="big data analytic"?n="bigdataanalytics":e==="feed"?n="feed":e==="excalibur imagery project"?n="excaliburimageryproject":e==="notebook"?n="notebook":e==="storymap"?n="storymap":e==="survey123 add in"?n="survey123addin":e==="mission"?n="mission":e==="mission report"?n="missionreport":e==="mission template"?n="missiontemplate":e==="quickcapture project"?n="quickcaptureproject":e==="pro report"?n="proreport":e==="pro report template"?n="proreporttemplate":e==="urban model"?n="urbanmodel":e==="urban project"?n="urbanproject":e==="web experience"?n="experiencebuilder":e==="web experience template"?n="webexperiencetemplate":e==="experience builder widget"?n="experiencebuilderwidget":e==="experience builder widget package"?n="experiencebuilderwidgetpackage":e==="workflow"?n="workflow":e==="kernel gateway connection"?n="kernelgatewayconnection":e==="insights script"?n="insightsscript":e==="hub initiative template"?n="hubinitiativetemplate":e==="storymap theme"?n="storymaptheme":e==="knowledge graph"?n="knowledgegraph":e==="knowledge graph layer"?n="knowledgegraphlayer":e==="knowledge studio project"?n="knowledgestudio":e==="native application"?n="nativeapp":e==="native application installer"?n="nativeappinstaller":e==="web link chart"?n="linkchart":e==="knowledge graph web investigation"?n="investigation":e==="ogcfeatureserver"?n="features":e==="pro presentation"?n="propresentation":e==="pro project"?n="proproject":e==="insights workbook package"?n="insightsworkbookpackage":e==="apache parquet"?n="apacheparquet":e==="notebook code snippet library"?n="notebookcodesnippets":e==="suitability model"?n="suitabilitymodel":e==="esri classifier definition"?n="classifierdefinition":e==="esri classification schema"?n="classificationschema":e==="insights data engineering workbook"?n="dataengineeringworkbook":e==="insights data engineering model"?n="dataengineeringmodel":e==="deep learning studio project"?n="deeplearningproject":e==="discussion"?n="discussion":e==="allsource project"?n="allsourceproject":e==="api key"?n="apikey":e==="data pipeline"?n="datapipelines":e==="group layer"?(b=t.includes("Map"),n=b?"layergroup2d":"layergroup"):n=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",n?$r(r+n+i+".png"):null}get isLayer(){return this.type!=null&&cbe.has(this.type)}get itemCdnUrl(){return kk(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,n;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((n=(i=this.portal)==null?void 0:i.user)==null?void 0:n.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=Ki.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof _3?e.rating:e;return r==null||isNaN(r)||typeof e!="number"||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new _3({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:U(this.applicationProxies),avgRating:this.avgRating,categories:U(this.categories),classification:U(this.classification),created:U(this.created),culture:this.culture,description:this.description,extent:U(this.extent),groupCategories:U(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:U(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:U(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:U(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:U(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Wh({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new _3(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Wh)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new V("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new V("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:n,tags:s,title:o}=e||{},l={method:"post",query:{copyPrivateResources:i==="all",folder:typeof n=="string"?n:n==null?void 0:n.id,includeResources:!!i,tags:s==null?void 0:s.join(","),title:o}},{itemId:d}=await t.request(`${r}/copy`,l);return new Wh({id:d,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Fu(t)?i.query={data:t}:i.query={url:cs(t)},r!=null&&(i.query.filename=r);else{const n=new FormData;r!=null?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new V("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await ne(()=>import("./resourceUtils-CHnQ8dhZ.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await ne(()=>import("./resourceUtils-CHnQ8dhZ.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await ne(()=>import("./resourceUtils-CHnQ8dhZ.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new V("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ne(()=>import("./resourceUtils-CHnQ8dhZ.js"),[]);return t(this,e)}resourceFromPath(e){return new ube({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:U(this.categories),classification:U(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:U(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:U(this.typeKeywords),url:this.url};return _ue(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Wh({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};u([h({type:["private","shared","org","public"]})],Xe.prototype,"access",void 0),u([h()],Xe.prototype,"accessInformation",void 0),u([h({type:String})],Xe.prototype,"apiKey",void 0),u([h({json:{read:{source:"appProxies"}}})],Xe.prototype,"applicationProxies",void 0),u([h()],Xe.prototype,"avgRating",void 0),u([h()],Xe.prototype,"categories",void 0),u([h()],Xe.prototype,"classification",void 0),u([h({type:Date})],Xe.prototype,"created",void 0),u([h()],Xe.prototype,"culture",void 0),u([h()],Xe.prototype,"description",void 0),u([h({readOnly:!0})],Xe.prototype,"displayName",null),u([h({type:Ut})],Xe.prototype,"extent",void 0),u([se("extent")],Xe.prototype,"readExtent",null),u([h()],Xe.prototype,"groupCategories",void 0),u([h({readOnly:!0})],Xe.prototype,"iconUrl",null),u([h()],Xe.prototype,"id",void 0),u([h({readOnly:!0})],Xe.prototype,"isLayer",null),u([h({type:Boolean,readOnly:!0})],Xe.prototype,"isOrgItem",void 0),u([h()],Xe.prototype,"itemControl",void 0),u([h({readOnly:!0})],Xe.prototype,"itemPageUrl",null),u([h({readOnly:!0})],Xe.prototype,"itemUrl",null),u([h()],Xe.prototype,"licenseInfo",void 0),u([h({type:Date})],Xe.prototype,"modified",void 0),u([h()],Xe.prototype,"name",void 0),u([h()],Xe.prototype,"numComments",void 0),u([h()],Xe.prototype,"numRatings",void 0),u([h()],Xe.prototype,"numViews",void 0),u([h()],Xe.prototype,"owner",void 0),u([h()],Xe.prototype,"ownerFolder",void 0),u([h({type:Ki})],Xe.prototype,"portal",void 0),u([h()],Xe.prototype,"screenshots",void 0),u([h()],Xe.prototype,"size",void 0),u([h()],Xe.prototype,"snippet",void 0),u([h()],Xe.prototype,"sourceJSON",void 0),u([h({type:String})],Xe.prototype,"sourceUrl",void 0),u([h({type:String})],Xe.prototype,"spatialReference",void 0),u([h()],Xe.prototype,"tags",void 0),u([h()],Xe.prototype,"thumbnail",void 0),u([h({readOnly:!0})],Xe.prototype,"thumbnailUrl",null),u([h()],Xe.prototype,"title",void 0),u([h()],Xe.prototype,"type",void 0),u([h()],Xe.prototype,"typeKeywords",void 0),u([h({type:String,json:{read(e,t){var r;if(dbe.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],Xe.prototype,"url",void 0),u([h({readOnly:!0})],Xe.prototype,"userItemUrl",null),Xe=Wh=u([M("esri.portal.PortalItem")],Xe);const Qa=Xe,aX=Object.freeze(Object.defineProperty({__proto__:null,default:Qa},Symbol.toStringTag,{value:"Module"}));async function hbe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await pJ("esri/t9n/basemaps");return r[e]||r[t]}const dI={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return $r("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return $r("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return $r("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return $r("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}};let zl=class extends Ae{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let r=t==="local"||t==="global"?t:fJ(t??Fn())??"global";return r=r==="no"?"nb":r,r}};u([h()],zl.prototype,"apiKey",void 0),u([h()],zl.prototype,"id",void 0),u([h()],zl.prototype,"language",void 0),u([h()],zl.prototype,"places",void 0),u([h()],zl.prototype,"serviceUrl",void 0),u([h()],zl.prototype,"worldview",void 0),zl=u([M("esri.support.BasemapStyle")],zl);const pbe=zl;function fbe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function ybe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Hs(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const OFe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function hI(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function RFe(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function Ax(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function CFe(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e==null?void 0:e.source)==null?void 0:r.type)==="feature-layer"}async function ED(e,t){const r=Ze==null?void 0:Ze.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const n=`${e.slice(0,i)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await mt(n,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function lX(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function mbe(e){return lX(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function gbe(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function vbe(e){return!!gbe(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const bbe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),uX=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),_be=new Set([...uX,"link-chart"]);function wbe(e){switch(e.layerContainerType){case"basemap":return bbe;case"operational-layers":return e.origin==="link-chart"?_be:uX;default:return null}}function Sbe(e,t){if(t.restrictedWebMapWriting){const r=wbe(t);return r==null||r.has(e.type)&&!Ax(e)}return!0}function Tbe(e,t){var r;if(t)if(Ax(e)){const i=X$("featureCollection.layers",t),n=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;n&&P9(e,n)}else e.type!=="group"&&P9(e,t)}function P9(e,t){"maxScale"in e&&(t.maxScale=_E(e.maxScale)??void 0),"minScale"in e&&(t.minScale=_E(e.minScale)??void 0)}function Ebe(e,t){if(Tbe(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=_E(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Ax(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function pI(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new V("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Ax(e)&&!e.isTable)t=e.resourceInfo;else if(Sbe(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&Ebe(e,t=U(t)),t}var qv;let $be=0,Qn=qv=class extends W.JSONSupportMixin(lo){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+$be++,this.baseLayers=new ge,this.referenceLayers=new ge;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&ae.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{ae.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Zt(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",ju(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=pI(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=pI(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);s!=null&&(n.type!=="scene"&&(s.isReference=!0),i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",ju(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return xx(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>pE(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>pE(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new qv({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const n=U(i);return n.url&&tl(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&tl(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;hr(e);const n=[];if(t){const s=t.context?t.context.url:null;if(n.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;n.push(hbe(o).then(l=>{l&&this.read({title:l},t.context)}))}}else r?n.push(this._loadFromItem(r,e)):i&&n.push(this._loadFromStylesService(i,e));await Promise.all(n)}async _loadLayersFromJSON(e,t,r){var d,f;const i=(d=this.resourceInfo)==null?void 0:d.context,n=((f=this.portalItem)==null?void 0:f.portal)||(i==null?void 0:i.portal)||null,s=Abe[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await ne(async()=>{const{populateOperationalLayers:g}=await import("./layersCreator-Cchii-zJ.js");return{populateOperationalLayers:g}},__vite__mapDeps([169,170,171,172,173,174])),l=[];if(hr(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const g={context:{...i,origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},v=T=>s==="web-scene"&&T.layerType==="ArcGISSceneServiceLayer"||T.isReference,b=o(this.baseLayers,e.baseMapLayers.filter(T=>!v(T)),g);l.push(b);const S=o(this.referenceLayers,e.baseMapLayers.filter(v),g);l.push(S)}await Promise.allSettled(l)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=oi(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:xbe[e.type||""]??"web-map",portal:e.portal||Ki.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ki.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}async _loadFromStylesService(e,t){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,n=`${r}/webmaps/${e.id}`,[s,o]=await Promise.all([(await mt(i,{query:{token:e.apiKey},signal:t==null?void 0:t.signal})).data,(await mt(n,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=s.thumbnailUrl);const l=oi(n);if(this._set("resourceInfo",{data:o.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,t),e.apiKey)for(const d of[...this.baseLayers,...this.referenceLayers])"apiKey"in d&&(d.apiKey=e.apiKey)}static fromId(e){const t=dI[e];return t?t.itemId?new qv({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):qv.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};u([h({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ge}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Qn.prototype,"baseLayers",null),u([h({type:String,json:{origins:{"web-scene":{write:!0}}}})],Qn.prototype,"id",void 0),u([h({type:Qa})],Qn.prototype,"portalItem",void 0),u([h()],Qn.prototype,"referenceLayers",null),u([h({readOnly:!0})],Qn.prototype,"resourceInfo",void 0),u([h({type:Ge})],Qn.prototype,"spatialReference",void 0),u([h({type:pbe})],Qn.prototype,"style",void 0),u([h()],Qn.prototype,"thumbnailUrl",void 0),u([h({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Qn.prototype,"title",void 0),u([le("title")],Qn.prototype,"writeTitle",null),Qn=qv=u([M("esri.Basemap")],Qn);const xbe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Abe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},l_=Qn,Mbe=Object.freeze(Object.defineProperty({__proto__:null,default:l_},Symbol.toStringTag,{value:"Module"})),e$={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function cX(e){return!!e$[e]||!!e$[e.toLowerCase()]}function $D(e){return e$[e]??e$[e.toLowerCase()]}function Obe(e){return[...$D(e)]}function w3(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function dX(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*w3(o,s,n+1/3)),Math.round(255*w3(o,s,n)),Math.round(255*w3(o,s,n-1/3)),i]}function Rbe(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const l=[0,0,0,1];let d;return s&&(d=o&i,o>>=r,l[3]=n*d/255),d=o&i,o>>=r,l[2]=n*d,d=o&i,o>>=r,l[1]=n*d,d=o&i,o>>=r,l[0]=n*d,l}const IFe=2.2;function NS(e){return so(yk(e),0,255)}function PS(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function LS(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let De=class Kr{static blendColors(t,r,i,n=new Kr){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const l=n.map(d=>2.56*parseFloat(d));return n.length===4&&(l[3]=parseFloat(n[3])),Kr.fromArray(l,r)}return Kr.fromArray(n.map(l=>parseFloat(l)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Kr.fromArray(dX(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new Kr){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),s=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return Kr.fromArray([i+16*i,n+16*n,s+16*s,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return Kr.fromArray([i,n,s,o/255],r)}default:return null}}static fromArray(t,r=new Kr){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=cX(t)?$D(t):null;return i&&Kr.fromArray(i,r)||Kr.fromRgb(t,r)||Kr.fromHex(t,r)}static fromJSON(t){return t!=null?new Kr([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Kr.fromString(t,this):Array.isArray(t)?Kr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Kr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,n=i===3||i===4,s=i===4||i===8,o=`#${LS(this.r,n)}${LS(this.g,n)}${LS(this.b,n)}${s?LS(Math.round(255*this.a),n):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Kr.AlphaMode.ALWAYS){const r=NS(this.r),i=NS(this.g),n=NS(this.b);return t===Kr.AlphaMode.ALWAYS||this.a!==1?[r,i,n,NS(255*this.a)]:[r,i,n]}clone(){return new Kr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(PS(this.r,0,255)),this.g=Math.round(PS(this.g,0,255)),this.b=Math.round(PS(this.b,0,255)),this.a=PS(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}};De.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(De);function Ee(e,t={}){const r=e instanceof We?e:new We(e,t),{alwaysWriteDefaults:i,default:n,ignoreUnknown:s=!0,name:o,nonNullable:l,readOnly:d=!1}=t;return h({type:s?r.apiValues:String,json:{type:r.jsonValues,default:n,name:o,read:!d&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:l,readOnly:d})}var fI;let K2=fI=class extends W{constructor(e){super(e),this.type="none"}clone(){return new fI({type:this.type})}};u([Ee({none:"none",stayAbove:"stay-above"}),h({json:{write:{isRequired:!0}}})],K2.prototype,"type",void 0),K2=fI=u([M("esri.ground.NavigationConstraint")],K2);const Cbe=Symbol("GroundInstance");function Mx(e){const t=yk(100*(1-e));return Math.max(0,Math.min(t,100))}function q_(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var hX,yI;let Gl=yI=class extends W.JSONSupportMixin(lo){constructor(e){super(e),this[hX]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ge;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&ae.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{Ni(e)||ae.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Zt(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",ju(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};yue(s)().write(o,i)&&n.push(o)}else i!=null&&i.messages&&i.messages.push(new V("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return xx(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ne(()=>import("./ElevationQuery-Nw3kJixY.js"),[]);hr(t);const i=new r,n=this.layers.filter(L9).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await ne(()=>import("./ElevationQuery-Nw3kJixY.js"),[]);hr(t);const i=new r,n=this.layers.filter(L9).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:U(this.surfaceColor),navigationConstraint:U(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new yI({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",n=(t==null?void 0:t.portal)||null,s=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await ne(async()=>{const{populateOperationalLayers:d}=await import("./layersCreator-Cchii-zJ.js");return{populateOperationalLayers:d}},__vite__mapDeps([169,170,171,172,173,174]));hr(r);const l=[];if(e.layers&&Array.isArray(e.layers)){const d={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(o(this.layers,e.layers,d))}await Promise.allSettled(l)}};function Ibe(e){return e&&"createElevationSampler"in e}function L9(e){return e.type==="elevation"||Ibe(e)}hX=Cbe,u([h({json:{read:!1,write:{isRequired:!0}}})],Gl.prototype,"layers",null),u([le("layers")],Gl.prototype,"writeLayers",null),u([h({readOnly:!0})],Gl.prototype,"resourceInfo",void 0),u([h({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:at,read:{reader:q_,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Mx(e)},target:"transparency"}}})],Gl.prototype,"opacity",void 0),u([h({type:De,json:{type:[at],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Gl.prototype,"surfaceColor",void 0),u([h({type:K2,json:{write:!0}})],Gl.prototype,"navigationConstraint",void 0),Gl=yI=u([M("esri.Ground")],Gl);const t$=Gl,kS=new WeakMap;function pX(e){return!e.destroyed&&(kS.has(e)||e.addHandles([ze(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||pX(t))},t=>kS.set(e,t),Pn),vt(()=>kS.delete(e))]),kS.get(e))}function Nbe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Pbe(e){var t,r;return!(!Nbe(e)||!((r=(t=mbe(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!vbe(e)||pX(e))}const Lbe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,kbe="screenUtils.toPt: input not recognized!",fX=96;function Dbe(e){return e?e/72*fX:0}function uo(e){return e?72*e/fX:0}function pt(e){if(typeof e=="string"){const t=e.match(Lbe);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?uo(r):r;return n?-s:s}return console.warn(kbe),null}return e}function Si(e=0,t=0){return{x:e,y:t}}function NFe(e){return e?Si(e.x,e.y):null}function PFe(e=0,t=0){return[e,t]}function LFe(e=0,t=0,r=0){return[e,t,r]}function kFe(e){return e}function DFe(e){return e}function jFe(e){return e}function FFe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function Ox(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function jbe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Fbe(e,t,r,i,n,s,o,l,d,f,g,v,b,S,T,E){const x=new Float32Array(16);return x[0]=e,x[1]=t,x[2]=r,x[3]=i,x[4]=n,x[5]=s,x[6]=o,x[7]=l,x[8]=d,x[9]=f,x[10]=g,x[11]=v,x[12]=b,x[13]=S,x[14]=T,x[15]=E,x}function Ube(e,t){return new Float32Array(e,t,16)}const Vbe=Ox();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Vbe,clone:jbe,create:Ox,createView:Ube,fromValues:Fbe},Symbol.toStringTag,{value:"Module"}));let xD=1e-6;function gn(){return xD}function zbe(e){xD=e}const Rx=Math.random,Gbe=Math.PI/180,Bbe=180/Math.PI;function AD(e){return e*Gbe}function qbe(e){return e*Bbe}function Hbe(e,t){return Math.abs(e-t)<=xD*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Rx,equals:Hbe,getEpsilon:gn,setEpsilon:zbe,toDegree:qbe,toRadian:AD},Symbol.toStringTag,{value:"Module"}));function yX(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qd(e,t,r,i,n,s,o,l,d,f,g,v,b,S,T,E,x){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=l,e[7]=d,e[8]=f,e[9]=g,e[10]=v,e[11]=b,e[12]=S,e[13]=T,e[14]=E,e[15]=x,e}function Cx(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function eh(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Wbe(e,t){return mX(e,t)||Cx(e),e}function mX(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],d=t[6],f=t[7],g=t[8],v=t[9],b=t[10],S=t[11],T=t[12],E=t[13],x=t[14],O=t[15],C=r*l-i*o,I=r*d-n*o,P=r*f-s*o,k=i*d-n*l,D=i*f-s*l,H=n*f-s*d,re=g*E-v*T,K=g*x-b*T,ie=g*O-S*T,fe=v*x-b*E,ve=v*O-S*E,$e=b*O-S*x;let _e=C*$e-I*ve+P*fe+k*ie-D*K+H*re;return _e?(_e=1/_e,e[0]=(l*$e-d*ve+f*fe)*_e,e[1]=(n*ve-i*$e-s*fe)*_e,e[2]=(E*H-x*D+O*k)*_e,e[3]=(b*D-v*H-S*k)*_e,e[4]=(d*ie-o*$e-f*K)*_e,e[5]=(r*$e-n*ie+s*K)*_e,e[6]=(x*P-T*H-O*I)*_e,e[7]=(g*H-b*P+S*I)*_e,e[8]=(o*ve-l*ie+f*re)*_e,e[9]=(i*ie-r*ve-s*re)*_e,e[10]=(T*D-E*P+O*C)*_e,e[11]=(v*P-g*D-S*C)*_e,e[12]=(l*K-o*fe-d*re)*_e,e[13]=(r*fe-i*K+n*re)*_e,e[14]=(E*I-T*k-x*C)*_e,e[15]=(g*k-v*I+b*C)*_e,e):null}function Zbe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],d=t[6],f=t[7],g=t[8],v=t[9],b=t[10],S=t[11],T=t[12],E=t[13],x=t[14],O=t[15];return e[0]=l*(b*O-S*x)-v*(d*O-f*x)+E*(d*S-f*b),e[1]=-(i*(b*O-S*x)-v*(n*O-s*x)+E*(n*S-s*b)),e[2]=i*(d*O-f*x)-l*(n*O-s*x)+E*(n*f-s*d),e[3]=-(i*(d*S-f*b)-l*(n*S-s*b)+v*(n*f-s*d)),e[4]=-(o*(b*O-S*x)-g*(d*O-f*x)+T*(d*S-f*b)),e[5]=r*(b*O-S*x)-g*(n*O-s*x)+T*(n*S-s*b),e[6]=-(r*(d*O-f*x)-o*(n*O-s*x)+T*(n*f-s*d)),e[7]=r*(d*S-f*b)-o*(n*S-s*b)+g*(n*f-s*d),e[8]=o*(v*O-S*E)-g*(l*O-f*E)+T*(l*S-f*v),e[9]=-(r*(v*O-S*E)-g*(i*O-s*E)+T*(i*S-s*v)),e[10]=r*(l*O-f*E)-o*(i*O-s*E)+T*(i*f-s*l),e[11]=-(r*(l*S-f*v)-o*(i*S-s*v)+g*(i*f-s*l)),e[12]=-(o*(v*x-b*E)-g*(l*x-d*E)+T*(l*b-d*v)),e[13]=r*(v*x-b*E)-g*(i*x-n*E)+T*(i*b-n*v),e[14]=-(r*(l*x-d*E)-o*(i*x-n*E)+T*(i*d-n*l)),e[15]=r*(l*b-d*v)-o*(i*b-n*v)+g*(i*d-n*l),e}function Ybe(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],l=e[6],d=e[7],f=e[8],g=e[9],v=e[10],b=e[11],S=e[12],T=e[13],E=e[14],x=e[15];return(t*o-r*s)*(v*x-b*E)-(t*l-i*s)*(g*x-b*T)+(t*d-n*s)*(g*E-v*T)+(r*l-i*o)*(f*x-b*S)-(r*d-n*o)*(f*E-v*S)+(i*d-n*l)*(f*T-g*S)}function gX(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=t[6],g=t[7],v=t[8],b=t[9],S=t[10],T=t[11],E=t[12],x=t[13],O=t[14],C=t[15];let I=r[0],P=r[1],k=r[2],D=r[3];return e[0]=I*i+P*l+k*v+D*E,e[1]=I*n+P*d+k*b+D*x,e[2]=I*s+P*f+k*S+D*O,e[3]=I*o+P*g+k*T+D*C,I=r[4],P=r[5],k=r[6],D=r[7],e[4]=I*i+P*l+k*v+D*E,e[5]=I*n+P*d+k*b+D*x,e[6]=I*s+P*f+k*S+D*O,e[7]=I*o+P*g+k*T+D*C,I=r[8],P=r[9],k=r[10],D=r[11],e[8]=I*i+P*l+k*v+D*E,e[9]=I*n+P*d+k*b+D*x,e[10]=I*s+P*f+k*S+D*O,e[11]=I*o+P*g+k*T+D*C,I=r[12],P=r[13],k=r[14],D=r[15],e[12]=I*i+P*l+k*v+D*E,e[13]=I*n+P*d+k*b+D*x,e[14]=I*s+P*f+k*S+D*O,e[15]=I*o+P*g+k*T+D*C,e}function Jbe(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const o=t[0],l=t[1],d=t[2],f=t[3],g=t[4],v=t[5],b=t[6],S=t[7],T=t[8],E=t[9],x=t[10],O=t[11];e[0]=o,e[1]=l,e[2]=d,e[3]=f,e[4]=g,e[5]=v,e[6]=b,e[7]=S,e[8]=T,e[9]=E,e[10]=x,e[11]=O,e[12]=o*i+g*n+T*s+t[12],e[13]=l*i+v*n+E*s+t[13],e[14]=d*i+b*n+x*s+t[14],e[15]=f*i+S*n+O*s+t[15]}return e}function Xbe(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Kbe(e,t,r,i){let n=i[0],s=i[1],o=i[2],l=Math.sqrt(n*n+s*s+o*o);if(l<=gn())return void yX(e,t);l=1/l,n*=l,s*=l,o*=l;const d=Math.sin(r),f=Math.cos(r),g=1-f,v=t[0],b=t[1],S=t[2],T=t[3],E=t[4],x=t[5],O=t[6],C=t[7],I=t[8],P=t[9],k=t[10],D=t[11],H=n*n*g+f,re=s*n*g+o*d,K=o*n*g-s*d,ie=n*s*g-o*d,fe=s*s*g+f,ve=o*s*g+n*d,$e=n*o*g+s*d,_e=s*o*g-n*d,it=o*o*g+f;e[0]=v*H+E*re+I*K,e[1]=b*H+x*re+P*K,e[2]=S*H+O*re+k*K,e[3]=T*H+C*re+D*K,e[4]=v*ie+E*fe+I*ve,e[5]=b*ie+x*fe+P*ve,e[6]=S*ie+O*fe+k*ve,e[7]=T*ie+C*fe+D*ve,e[8]=v*$e+E*_e+I*it,e[9]=b*$e+x*_e+P*it,e[10]=S*$e+O*_e+k*it,e[11]=T*$e+C*_e+D*it,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function Qbe(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],l=t[6],d=t[7],f=t[8],g=t[9],v=t[10],b=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+f*i,e[5]=o*n+g*i,e[6]=l*n+v*i,e[7]=d*n+b*i,e[8]=f*n-s*i,e[9]=g*n-o*i,e[10]=v*n-l*i,e[11]=b*n-d*i,e}function e_e(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],l=t[2],d=t[3],f=t[8],g=t[9],v=t[10],b=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-f*i,e[1]=o*n-g*i,e[2]=l*n-v*i,e[3]=d*n-b*i,e[8]=s*i+f*n,e[9]=o*i+g*n,e[10]=l*i+v*n,e[11]=d*i+b*n,e}function t_e(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],l=t[2],d=t[3],f=t[4],g=t[5],v=t[6],b=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+f*i,e[1]=o*n+g*i,e[2]=l*n+v*i,e[3]=d*n+b*i,e[4]=f*n-s*i,e[5]=g*n-o*i,e[6]=v*n-l*i,e[7]=b*n-d*i,e}function r_e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function i_e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function n_e(e,t,r){if(t===0)return Cx(e);let i=r[0],n=r[1],s=r[2],o=Math.sqrt(i*i+n*n+s*s);if(o<=gn())return null;o=1/o,i*=o,n*=o,s*=o;const l=Math.sin(t),d=Math.cos(t),f=1-d;return e[0]=i*i*f+d,e[1]=n*i*f+s*l,e[2]=s*i*f-n*l,e[3]=0,e[4]=i*n*f-s*l,e[5]=n*n*f+d,e[6]=s*n*f+i*l,e[7]=0,e[8]=i*s*f+n*l,e[9]=n*s*f-i*l,e[10]=s*s*f+d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function s_e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o_e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a_e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vX(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=i+i,d=n+n,f=s+s,g=i*l,v=i*d,b=i*f,S=n*d,T=n*f,E=s*f,x=o*l,O=o*d,C=o*f;return e[0]=1-(S+E),e[1]=v+C,e[2]=b-O,e[3]=0,e[4]=v-C,e[5]=1-(g+E),e[6]=T+x,e[7]=0,e[8]=b+O,e[9]=T-x,e[10]=1-(g+S),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function l_e(e,t){const r=u_e,i=-t[0],n=-t[1],s=-t[2],o=t[3],l=t[4],d=t[5],f=t[6],g=t[7],v=i*i+n*n+s*s+o*o;return v>0?(r[0]=2*(l*o+g*i+d*s-f*n)/v,r[1]=2*(d*o+g*n+f*i-l*s)/v,r[2]=2*(f*o+g*s+l*n-d*i)/v):(r[0]=2*(l*o+g*i+d*s-f*n),r[1]=2*(d*o+g*n+f*i-l*s),r[2]=2*(f*o+g*s+l*n-d*i)),vX(e,t,r),e}const u_e=Jd();function c_e(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function d_e(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],l=t[6],d=t[8],f=t[9],g=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+l*l),e[2]=Math.sqrt(d*d+f*f+g*g),e}function h_e(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function p_e(e,t,r,i){const n=t[0],s=t[1],o=t[2],l=t[3],d=n+n,f=s+s,g=o+o,v=n*d,b=n*f,S=n*g,T=s*f,E=s*g,x=o*g,O=l*d,C=l*f,I=l*g,P=i[0],k=i[1],D=i[2];return e[0]=(1-(T+x))*P,e[1]=(b+I)*P,e[2]=(S-C)*P,e[3]=0,e[4]=(b-I)*k,e[5]=(1-(v+x))*k,e[6]=(E+O)*k,e[7]=0,e[8]=(S+C)*D,e[9]=(E-O)*D,e[10]=(1-(v+T))*D,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function f_e(e,t,r,i,n){const s=t[0],o=t[1],l=t[2],d=t[3],f=s+s,g=o+o,v=l+l,b=s*f,S=s*g,T=s*v,E=o*g,x=o*v,O=l*v,C=d*f,I=d*g,P=d*v,k=i[0],D=i[1],H=i[2],re=n[0],K=n[1],ie=n[2],fe=(1-(E+O))*k,ve=(S+P)*k,$e=(T-I)*k,_e=(S-P)*D,it=(1-(b+O))*D,pe=(x+C)*D,me=(T+I)*H,ye=(x-C)*H,Ve=(1-(b+E))*H;return e[0]=fe,e[1]=ve,e[2]=$e,e[3]=0,e[4]=_e,e[5]=it,e[6]=pe,e[7]=0,e[8]=me,e[9]=ye,e[10]=Ve,e[11]=0,e[12]=r[0]+re-(fe*re+_e*K+me*ie),e[13]=r[1]+K-(ve*re+it*K+ye*ie),e[14]=r[2]+ie-($e*re+pe*K+Ve*ie),e[15]=1,e}function y_e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,l=i+i,d=n+n,f=r*o,g=i*o,v=i*l,b=n*o,S=n*l,T=n*d,E=s*o,x=s*l,O=s*d;return e[0]=1-v-T,e[1]=g+O,e[2]=b-x,e[3]=0,e[4]=g-O,e[5]=1-f-T,e[6]=S+E,e[7]=0,e[8]=b+x,e[9]=S-E,e[10]=1-f-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function m_e(e,t,r,i,n,s,o){const l=1/(r-t),d=1/(n-i),f=1/(s-o);return e[0]=2*s*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*d,e[6]=0,e[7]=0,e[8]=(r+t)*l,e[9]=(n+i)*d,e[10]=(o+s)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*f,e[15]=0,e}function g_e(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function v_e(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),d=2/(o+l),f=2/(n+s);return e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-(o-l)*d*.5,e[9]=(n-s)*f*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function b_e(e,t,r,i,n,s,o){const l=1/(t-r),d=1/(i-n),f=1/(s-o);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+r)*l,e[13]=(n+i)*d,e[14]=(o+s)*f,e[15]=1,e}function __e(e,t,r,i){const n=t[0],s=t[1],o=t[2];let l=n-r[0],d=s-r[1],f=o-r[2];const g=gn();if(Math.abs(l)<g&&Math.abs(d)<g&&Math.abs(f)<g)return void Cx(e);let v=1/Math.sqrt(l*l+d*d+f*f);l*=v,d*=v,f*=v;const b=i[0],S=i[1],T=i[2];let E=S*f-T*d,x=T*l-b*f,O=b*d-S*l;v=Math.sqrt(E*E+x*x+O*O),v?(v=1/v,E*=v,x*=v,O*=v):(E=0,x=0,O=0);let C=d*O-f*x,I=f*E-l*O,P=l*x-d*E;v=Math.sqrt(C*C+I*I+P*P),v?(v=1/v,C*=v,I*=v,P*=v):(C=0,I=0,P=0),e[0]=E,e[1]=C,e[2]=l,e[3]=0,e[4]=x,e[5]=I,e[6]=d,e[7]=0,e[8]=O,e[9]=P,e[10]=f,e[11]=0,e[12]=-(E*n+x*s+O*o),e[13]=-(C*n+I*s+P*o),e[14]=-(l*n+d*s+f*o),e[15]=1}function w_e(e,t,r,i){const n=t[0],s=t[1],o=t[2],l=i[0],d=i[1],f=i[2];let g=n-r[0],v=s-r[1],b=o-r[2],S=g*g+v*v+b*b;S>0&&(S=1/Math.sqrt(S),g*=S,v*=S,b*=S);let T=d*b-f*v,E=f*g-l*b,x=l*v-d*g;return S=T*T+E*E+x*x,S>0&&(S=1/Math.sqrt(S),T*=S,E*=S,x*=S),e[0]=T,e[1]=E,e[2]=x,e[3]=0,e[4]=v*x-b*E,e[5]=b*T-g*x,e[6]=g*E-v*T,e[7]=0,e[8]=g,e[9]=v,e[10]=b,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function S_e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function T_e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function E_e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function bX(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function $_e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function x_e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function A_e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function M_e(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],g=e[8],v=e[9],b=e[10],S=e[11],T=e[12],E=e[13],x=e[14],O=e[15],C=t[0],I=t[1],P=t[2],k=t[3],D=t[4],H=t[5],re=t[6],K=t[7],ie=t[8],fe=t[9],ve=t[10],$e=t[11],_e=t[12],it=t[13],pe=t[14],me=t[15],ye=gn();return Math.abs(r-C)<=ye*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(i-I)<=ye*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(n-P)<=ye*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(s-k)<=ye*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(o-D)<=ye*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(l-H)<=ye*Math.max(1,Math.abs(l),Math.abs(H))&&Math.abs(d-re)<=ye*Math.max(1,Math.abs(d),Math.abs(re))&&Math.abs(f-K)<=ye*Math.max(1,Math.abs(f),Math.abs(K))&&Math.abs(g-ie)<=ye*Math.max(1,Math.abs(g),Math.abs(ie))&&Math.abs(v-fe)<=ye*Math.max(1,Math.abs(v),Math.abs(fe))&&Math.abs(b-ve)<=ye*Math.max(1,Math.abs(b),Math.abs(ve))&&Math.abs(S-$e)<=ye*Math.max(1,Math.abs(S),Math.abs($e))&&Math.abs(T-_e)<=ye*Math.max(1,Math.abs(T),Math.abs(_e))&&Math.abs(E-it)<=ye*Math.max(1,Math.abs(E),Math.abs(it))&&Math.abs(x-pe)<=ye*Math.max(1,Math.abs(x),Math.abs(pe))&&Math.abs(O-me)<=ye*Math.max(1,Math.abs(O),Math.abs(me))}function O_e(e){const t=gn(),r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],l=e[6],d=e[8],f=e[9],g=e[10];return Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(i*i+o*o+f*f))<=t&&Math.abs(1-(n*n+l*l+g*g))<=t}function R_e(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const C_e=gX,I_e=bX;Object.freeze(Object.defineProperty({__proto__:null,add:E_e,adjoint:Zbe,copy:yX,determinant:Ybe,equals:M_e,exactEquals:A_e,frob:T_e,fromQuat:y_e,fromQuat2:l_e,fromRotation:n_e,fromRotationTranslation:vX,fromRotationTranslationScale:p_e,fromRotationTranslationScaleOrigin:f_e,fromScaling:i_e,fromTranslation:r_e,fromXRotation:s_e,fromYRotation:o_e,fromZRotation:a_e,frustum:m_e,getRotation:h_e,getScaling:d_e,getTranslation:c_e,hasIdentityRotation:R_e,identity:Cx,invert:mX,invertOrIdentity:Wbe,isOrthoNormal:O_e,lookAt:__e,mul:C_e,multiply:gX,multiplyScalar:$_e,multiplyScalarAndAdd:x_e,ortho:b_e,perspective:g_e,perspectiveFromFieldOfView:v_e,rotate:Kbe,rotateX:Qbe,rotateY:e_e,rotateZ:t_e,scale:Xbe,set:Qd,str:S_e,sub:I_e,subtract:bX,targetTo:w_e,translate:Jbe,transpose:eh},Symbol.toStringTag,{value:"Module"}));const N_e=(e,t)=>{const r=Qd(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return eh(r,r)},P_e=(e,t)=>{const r=Qd(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return eh(r,r)},L_e=(e,t)=>{const r=1-t,i=Qd(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return eh(i,i)},k_e=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=Qd(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return eh(n,n)},D_e=(e,t)=>{const r=1-2*t,i=Qd(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return eh(i,i)},j_e=(e,t)=>{const r=Qd(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return eh(r,r)},F_e=(e,t)=>{const r=1-t,i=Qd(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return eh(i,i)};let _X=class wX{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Ln(t.strength,r.strength,i),this.radius=Ln(t.radius,r.radius,i),this.threshold=Ln(t.threshold,r.threshold,i)}clone(){return new wX(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:u_(this.radius),strength:this.strength,threshold:this.threshold}}},SX=class TX{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Ln(t.radius,r.radius,i))}clone(){return new TX(this.radius)}toJSON(){return{type:"blur",radius:u_(this.radius)}}},mI=class EX{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Ln(t.amount,r.amount,i),this._updateMatrix()}clone(){return new EX(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Ox();switch(this.type){case"brightness":this._colorMatrix=N_e(t,this.amount);break;case"contrast":this._colorMatrix=P_e(t,this.amount);break;case"grayscale":this._colorMatrix=L_e(t,this.amount);break;case"invert":this._colorMatrix=D_e(t,this.amount);break;case"saturate":this._colorMatrix=j_e(t,this.amount);break;case"sepia":this._colorMatrix=F_e(t,this.amount)}}},$X=class xX{constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Ln(t.offsetX,r.offsetX,i),this.offsetY=Ln(t.offsetY,r.offsetY,i),this.blurRadius=Ln(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Ln(t.color[0],r.color[0],i)),this.color[1]=Math.round(Ln(t.color[1],r.color[1],i)),this.color[2]=Math.round(Ln(t.color[2],r.color[2],i)),this.color[3]=Ln(t.color[3],r.color[3],i)}clone(){return new xX(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:u_(this.offsetX),yoffset:u_(this.offsetY),blurRadius:u_(this.blurRadius),color:t}}},AX=class MX{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Ln(t.angle,r.angle,i),this._updateMatrix()}clone(){return new MX(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Ox();this._colorMatrix=k_e(t,this.angle)}},OX=class RX{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Ln(t.amount,r.amount,i)}clone(){return new RX(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Ln(e,t,r){return e+(t-e)*r}function u_(e){return Math.round(1e3*uo(e))/1e3}function U_e(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new mI(e.type,0);case"saturate":case"brightness":case"contrast":return new mI(e.type,1);case"opacity":return new OX(1);case"hue-rotate":return new AX(0);case"blur":return new SX(0);case"drop-shadow":return new $X(0,0,0,[...$D("transparent")]);case"bloom":return new _X(0,0,1)}}function V_e(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function z_e(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(U_e(r[n]))}function G_e(e){const t=e[0];return!!t&&"type"in t}const S3=()=>ae.getLogger("esri.support.basemapUtils");function B_e(){return{}}function q_e(e){for(const t in e){const r=e[t];Zt(r),delete e[t]}}function H_e(e,t){let r;if(typeof e=="string"){const i=e in dI,n=!i&&e.includes("/");if(!i&&!n){if(Mt.apiKey)S3().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(dI).filter(([o,l])=>l.classic||l.is3d).map(([o])=>`"${o}"`).sort().join(", ");S3().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`)}return null}t&&(r=t[e]),r||(r=i?l_.fromId(e):new l_({style:{id:e}}),t&&(t[e]=r))}else r=Or(l_,e);return r!=null&&r.destroyed&&(S3().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function W_e(e){return new U_({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function T3(e){for(const t of e.values())t==null||t.destroy();e.clear()}const k9={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Z_e(e){let t=null;if(typeof e=="string")if(e in k9){const r=k9[e];t=new t$({resourceInfo:{data:{layers:[r]}}})}else ae.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Or(t$,e);return t}let CX=0;const IX=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+CX++})}};return t=u([M("esri.core.Identifiable")],t),t},Y_e=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:CX++})}};return t=u([M("esri.core.Identifiable.NumericIdentifiable")],t),t};let Hv=class extends IX(class{}){};Hv=u([M("esri.core.Identifiable")],Hv),function(e){e.IdentifiableMixin=IX,e.NumericIdentifiableMixin=Y_e}(Hv||(Hv={}));const t0=Hv;async function J_e(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await ne(async()=>{const{fromItem:n}=await import("./portalLayers-CK7Rr80-.js");return{fromItem:n}},__vite__mapDeps([174,172,171,170,173]));try{return await r(t)}catch(n){const s=t==null?void 0:t.portalItem,o=(s==null?void 0:s.id)||"unset",l=((i=s==null?void 0:s.portal)==null?void 0:i.url)||Mt.portalUrl;throw ae.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+l+"', id: '"+o+"')",n),n}}const D9={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function E3(e,t,r,i=la){const n=new zn(hD(i)),s=Pe.fromJSDate(e,{zone:n}),o=r==="decades"||r==="centuries"?"year":PX(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function VFe(e,t,r="milliseconds"){const i=e.getTime(),n=NX(t,r,"milliseconds");return new Date(i+n)}function j9(e,t,r=la){const i=new zn(hD(r)),n=Pe.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=n.startOf("year"),{year:l}=o,d=l-l%(t==="decades"?10:100);return o.set({year:d}).toJSDate()}const s=PX(t);return n.startOf(s).toJSDate()}function NX(e,t,r){return e===0?0:e*D9[t]/D9[r]}function zFe(e,t){return e&&t?e.intersection(t):e||t}function PX(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Ls;let as=Ls=class extends W{static get allTime(){return F9}static get empty(){return X_e}static fromArray(e){return new Ls({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Ls.allTime)}get isEmpty(){return this.equals(Ls.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Ls({end:this.end,start:this.start})}equals(e){var s,o,l,d;if(!e)return!1;const t=((s=this.start)==null?void 0:s.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((l=e.start)==null?void 0:l.getTime())??e.start,n=((d=e.end)==null?void 0:d.getTime())??e.end;return t===i&&r===n}expandTo(e,t=la){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=j9(r,e,t));let i=this.end;if(i){const n=j9(i,e,t);i=i.getTime()===n.getTime()?n:E3(n,1,e,t)}return new Ls({start:r,end:i})}intersection(e){var l,d,f,g;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Ls.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((l=this.start)==null?void 0:l.getTime())??-1/0,r=((d=this.end)==null?void 0:d.getTime())??1/0,i=((f=e.start)==null?void 0:f.getTime())??-1/0,n=((g=e.end)==null?void 0:g.getTime())??1/0;let s,o;return i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),s==null||o==null||isNaN(s)||isNaN(o)?Ls.empty:new Ls({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,r=la){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Ls,{start:n,end:s}=this;return n!=null&&(i.start=E3(n,e,t,r)),s!=null&&(i.end=E3(s,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return F9.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Ls({start:t,end:r})}};u([h({type:Date,json:{write:{allowNull:!0}}})],as.prototype,"end",void 0),u([se("end")],as.prototype,"readEnd",null),u([le("end")],as.prototype,"writeEnd",null),u([h({readOnly:!0,json:{read:!1}})],as.prototype,"isAllTime",null),u([h({readOnly:!0,json:{read:!1}})],as.prototype,"isEmpty",null),u([h({type:Date,json:{write:{allowNull:!0}}})],as.prototype,"start",void 0),u([se("start")],as.prototype,"readStart",null),u([le("start")],as.prototype,"writeStart",null),as=Ls=u([M("esri.time.TimeExtent")],as);const si=as,F9=new as,X_e=new as({start:void 0,end:void 0});let K_e=0,Sr=class extends aa.EventedMixin(t0.IdentifiableMixin(lo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ut(-180,-90,180,90,Ge.WGS84),this.id=Date.now().toString(16)+"-layer-"+K_e++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ge.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await ne(async()=>{const{fromUrl:i}=await import("./arcgisLayers-C_ThBKgd.js");return{fromUrl:i}},__vite__mapDeps([175,172,171,173]))).fromUrl(r)}static fromPortalItem(t){return J_e(t)}initialize(){this.when().catch(t=>{Ni(t)||ae.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return oi(this.url)}createLayerView(t,r){return Promise.reject(new V("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await mt(t,{query:{f:"json"},responseType:"json"})).data;throw new V("layer:no-attribution-data","Layer does not have attribution data")}};u([h({type:String})],Sr.prototype,"attributionDataUrl",void 0),u([h({readOnly:!0})],Sr.prototype,"effectiveVisible",null),u([h({type:Ut})],Sr.prototype,"fullExtent",void 0),u([h({readOnly:!0})],Sr.prototype,"hasAttributionData",null),u([h({type:String,clonable:!1})],Sr.prototype,"id",void 0),u([h({type:Boolean,nonNullable:!0})],Sr.prototype,"legendEnabled",void 0),u([h({type:["show","hide","hide-children"]})],Sr.prototype,"listMode",void 0),u([h({type:Number,range:{min:0,max:1},nonNullable:!0})],Sr.prototype,"opacity",void 0),u([h({clonable:!1})],Sr.prototype,"parent",void 0),u([h({readOnly:!0})],Sr.prototype,"parsedUrl",null),u([h({type:Boolean,readOnly:!0})],Sr.prototype,"persistenceEnabled",void 0),u([h({type:Boolean})],Sr.prototype,"popupEnabled",void 0),u([h({type:Boolean})],Sr.prototype,"attributionVisible",void 0),u([h({type:Ge})],Sr.prototype,"spatialReference",void 0),u([h({type:String})],Sr.prototype,"title",void 0),u([h({readOnly:!0,json:{read:!1}})],Sr.prototype,"type",void 0),u([h()],Sr.prototype,"url",void 0),u([h({type:si})],Sr.prototype,"visibilityTimeExtent",void 0),u([h({type:Boolean,nonNullable:!0})],Sr.prototype,"visible",void 0),Sr=u([M("esri.layers.Layer")],Sr);const MD=Sr;function gI(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.at(s),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(n=gI(i.layers,t,r),n))return n}}const Q_e=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new ge;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||ae.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void ae.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",ju(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof MD){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else ll(r)?r.then(s=>{this.destroyed||this.add(s,i)}):ae.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;let s=n.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(n.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(r){return gI(this.layers,"id",r)}findLayerByUid(r){return gI(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return u([h()],t.prototype,"layers",null),t=u([M("esri.support.LayersMixin")],t),t},ewe=new Set(["feature","subtype-group"]);function vI(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.at(i);if(s[t]===r)return s;if((s==null?void 0:s.type)==="group"){const o=vI(s.tables,t,r);if(o)return o}}}const twe=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new ge,this.addHandles([this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,ewe.has(n.type)||ae.getLogger(this).error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",ju(r,this._get("tables")))}findTableById(r){return vI(this.tables,"id",r)}findTableByUid(r){return vI(this.tables,"uid",r)}};return u([h()],t.prototype,"tables",null),t=u([M("esri.support.TablesMixin")],t),t};let Oo=class extends twe(Q_e(aa.EventedMixin(Ae))){constructor(t){super(t),this.allLayers=new U_({getCollections:()=>{var r,i,n;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(n=this.basemap)==null?void 0:n.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=W_e(this),this.basemap=null,this.editableLayers=new U_({getCollections:()=>[this.allLayers],itemFilterFunction:Pbe}),this.ground=new t$,this._basemapCache=B_e()}destroy(){q_e(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Zt(this.basemap),Zt(this.ground),this._set("ground",null)}castBasemap(t){return H_e(t,this._basemapCache)}castGround(t){return Z_e(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};u([h({readOnly:!0,dependsOn:[]})],Oo.prototype,"allLayers",void 0),u([h({readOnly:!0})],Oo.prototype,"allTables",void 0),u([h({type:l_,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Oo.prototype,"basemap",void 0),u([ft("basemap")],Oo.prototype,"castBasemap",null),u([h({readOnly:!0})],Oo.prototype,"editableLayers",void 0),u([h({type:t$,nonNullable:!0})],Oo.prototype,"ground",void 0),u([ft("ground")],Oo.prototype,"castGround",null),u([h()],Oo.prototype,"undoRedo",void 0),Oo=u([M("esri.Map")],Oo);const LX=Oo;let c_=class extends ge{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(ge.ofType(this.itemType.Type))(t):new ge(t)}};function U9(e,t){return{type:e,cast:nX,set(r){const i=ju(r,this._get(t),e);i.owner=this,this._set(t,i)}}}u([h()],c_.prototype,"owner",null),c_=u([M("esri.core.support.OwningCollection")],c_);var Wv;const r$=Wr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),kX=r$.jsonValues.slice();gue(kX,"orthometric");const d_=Wr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Ro=Wv=class extends W{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return r$.write(e,t,r)}readHeightModel(e,t,r){return r$.read(e)||(r!=null&&r.messages&&r.messages.push(rwe(e,{context:r})),null)}readHeightUnit(e,t,r){return d_.read(e)||(r!=null&&r.messages&&r.messages.push(V9(e,{context:r})),null)}readHeightUnitService(e,t,r){return zk(e)||d_.read(e)||(r!=null&&r.messages&&r.messages.push(V9(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Wv({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=_Z(t);return new Wv({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Wv;return t.read(e,{origin:"web-scene"}),t}};function V9(e,t){return new no("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function rwe(e,t){return new no("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}u([h({type:r$.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:kX,default:"ellipsoidal",write:{isRequired:!0}}}}})],Ro.prototype,"heightModel",void 0),u([le("web-scene","heightModel")],Ro.prototype,"writeHeightModel",null),u([se(["web-scene","service"],"heightModel")],Ro.prototype,"readHeightModel",null),u([h({type:d_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:d_.jsonValues,write:{writer:d_.write,isRequired:!0}}}}})],Ro.prototype,"heightUnit",void 0),u([se("web-scene","heightUnit")],Ro.prototype,"readHeightUnit",null),u([se("service","heightUnit")],Ro.prototype,"readHeightUnitService",null),u([h({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Ro.prototype,"vertCRS",void 0),u([se("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Ro.prototype,"readVertCRS",null),Ro=Wv=u([M("esri.geometry.HeightModelInfo")],Ro);const Nw=Ro;let i$=class extends c_{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(ae.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};i$=u([M("esri.support.AnalysesCollection")],i$);let $3;async function iwe(){return $3==null&&($3=ne(()=>import("./WhereClauseCache-BOgKODpj.js"),__vite__mapDeps([23,24,25])).then(e=>new e.WhereClauseCache(500,500))),$3}async function DX(e,t){const r=await iwe(),i=r.get(e,t);if(i==null)throw r.getError(e,t);return i}function nwe(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function swe(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function WFe(e,t){return t.length===0?null:`${e} IN (${owe(t)})`}function owe(e){return e.map(t=>typeof t=="string"?awe(t):t).join(",")}function awe(e){return`'${e.replaceAll("'","''")}'`}function z9(e){return typeof e=="number"}function ZFe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function YFe(e){return typeof e=="boolean"}function Pw(e){return typeof e=="string"||e instanceof String}function lwe(e){return e==null||Pw(e)}function JFe(e){return Array.isArray(e)}function uwe(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function XFe(e){return e instanceof Date}const cwe="HH:mm",dwe="HH:mm:ss",hwe="HH:mm:ss.SSS",pwe=[hwe,dwe,cwe,"TT"],fwe="yyyy-MM-dd";function G9(e){if(!e||!Pw(e))return null;const t=Pe.fromFormat(e,fwe);return t.isValid?t:null}function B9(e){return e&&Pw(e)?xce(pwe,t=>{const r=Pe.fromFormat(e,t);return r.isValid?r:null})??null:null}function q9(e){if(!e||!Pw(e))return null;const t=Pe.fromISO(e);return t.isValid?t:null}var n$;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(n$||(n$={}));const jX=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function ywe(e){return e!=null&&jX.has(e.type)}function FX(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function UX(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function VX(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const mwe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);Tk(jX,mwe);function KFe(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,n="range"in r?r.range[1]:r.maxValue,s=ywe(e);return FX(e)||VX(e)||UX(e)?{...gwe(e,n,i),isInteger:s}:{min:i!=null&&typeof i=="number"?i:null,max:n!=null&&typeof n=="number"?n:null,rawMin:i,rawMax:n,isInteger:s}}function gwe(e,t,r){var i,n,s,o,l,d;return FX(e)?{min:(i=G9(r))==null?void 0:i.toMillis(),max:(n=G9(t))==null?void 0:n.toMillis(),rawMin:r,rawMax:t}:VX(e)?{min:(s=B9(r))==null?void 0:s.toMillis(),max:(o=B9(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:UX(e)?{min:(l=q9(r))==null?void 0:l.toMillis(),max:(d=q9(t))==null?void 0:d.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}function vwe(e){if(!e)return;const t=e.match(bwe);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const bwe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function _we(e){var t,r;return((r=(t=e.match(wwe))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const wwe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Zo=class{};function Swe(e){return e instanceof xf?e===Zo.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function e6e(e){return Swe(e)?Zo.instance:e}Zo.instance=new zn("Etc/UTC");var s$;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(s$||(s$={}));const Twe={[s$.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let Ewe=class zX extends Error{constructor(t,r){super(K$(Twe[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,zX)}};function wy(e,t,r){return e<t?e-t:e>r?e-r:0}function Sy(e,t,r){return e<t?t:e>r?r:e}let DS=class Cr{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,n=0,s=0,o=0,l=0,d){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(n)||isNaN(s)||isNaN(o)||isNaN(l))return null;const f=Pe.local(t,r).daysInMonth;let g=Pe.fromObject({day:Sy(i,1,f),year:t,month:Sy(r,1,12),hour:Sy(n,0,23),minute:Sy(s,0,59),second:Sy(o,0,59),millisecond:Sy(l,0,999)},{zone:Ph(d)});return g=g.plus({months:wy(r,1,12),days:wy(i,1,f),hours:wy(n,0,23),minutes:wy(s,0,59),seconds:wy(o,0,59),milliseconds:wy(l,0,999)}),new Cr(g)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=Ph(r);return t.isUnknownTimeZone||i===Zo.instance?Cr.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new Cr(t._date.setZone(i))}static dateJSToArcadeDate(t){return new Cr(Pe.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=Ph(r);return new Cr(Pe.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new Cr(Pe.fromMillis(t,{zone:Zo.instance}))}static unknownDateJSToArcadeDate(t){return new Cr(Pe.fromMillis(t.getTime(),{zone:Zo.instance}))}static epochToArcadeDate(t,r="system"){const i=Ph(r);return new Cr(Pe.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new Cr(t)}clone(){return new Cr(this._date)}changeTimeZone(t){const r=Ph(t);return Cr.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=Ph(r);return t.zone===Zo.instance||i===Zo.instance?Cr.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new Cr(t.setZone(i))}static nowToArcadeDate(t){const r=Ph(t);return new Cr(Pe.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new Cr(Pe.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===Cr.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===Zo.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new Cr(this._date.plus(t))}diff(t,r="milliseconds"){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new Cr(this._date.toUTC())}toLocal(){return new Cr(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=Pe.fromISO(t,{setZone:!0});return new Cr(r)}};function Ph(e,t=!0){if(e instanceof xf)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return Zo.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=wi.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=zn.create(e);if(!r.isValid){if(t)throw new Ewe(s$.TimeZoneNotRecognized);return null}return r}const $we=()=>ae.getLogger("esri.support.arcadeOnDemand"),xwe=["geometry","scale","timeProperties"];function t6e(e,t){if(t!=null)for(const r of xwe)t.hasArcadeDependency(r)&&e.add(r);return e}let x3;function Vd(){return x3||(x3=(async()=>{const e=await ne(()=>import("./arcadeUtils-CVjqHQnc.js"),__vite__mapDeps([176,177,178,179,161,25,34,21,16,17,22,24]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),x3}const r6e=(e,t,r)=>GX.create(e,t,r,null,["$feature","$view"],[]),Awe=(e,t,r,i)=>GX.create(e,t,r,i,["$feature","$view"],[]);let GX=class BX{constructor(t,r,i,n,s,o,l){this._dependencies=new Map,this.services=null,this.script=t,this.evaluate=n;const d=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=d??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=s,this._spatialReference=l,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(t,r,i,n,s,o){const{arcade:l,Feature:d,Dictionary:f}=await Vd(),g=r instanceof Ge?r:Ge.fromJSON(r);let v;try{v=l.parseScript(t,o)}catch(re){return $we().error(new V("arcade-bad-expression","Failed to parse arcade script",{script:t,error:re})),null}const b=s.reduce((re,K)=>({...re,[K]:null}),{});let S=null;n!=null&&(S=new f(n),S.immutable=!0,b.$config=null);const T=l.scriptUsesGeometryEngine(v),E=T&&l.enableGeometrySupport(),x=l.scriptUsesFeatureSet(v)&&l.enableFeatureSetSupport(),O=l.scriptIsAsync(v),C=O&&l.enableAsyncSupport(),I={vars:b,spatialReference:g,useAsync:!!C};await Promise.all([E,x,C]);const P=new Set;await l.loadDependentModules(P,v,null,O,T);const k=new f;k.immutable=!1,k.setField("scale",0);const D=l.compileScript(v,I),H=(re,K)=>{var fe;const ie=(fe=re.$view)==null?void 0:fe.timeZone;if("$view"in re&&re.$view){let ve;if(k.setField("scale",typeof re.$view=="object"&&"scale"in re.$view?re.$view.scale:void 0),typeof re.$view=="object"&&"timeProperties"in re.$view&&re.$view.timeProperties!=null){const{currentStart:$e,currentEnd:_e}=re.$view.timeProperties;ve=new f({currentStart:$e!=null?ie!=null?DS.epochToArcadeDate($e,ie):DS.unknownEpochToArcadeDate($e):void 0,currentEnd:_e!=null?ie!=null?DS.epochToArcadeDate(_e,ie):DS.unknownEpochToArcadeDate(_e):void 0,startIncluded:!0,endIncluded:!0})}k.setField("timeProperties",ve),re.$view=k}return S&&(re.$config=S),D({vars:re,spatialReference:g,services:K,timeZone:ie})};return new BX(t,l,v,H,new d,i,g)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}references(t){return this._dependencies.get(t)??!1}};const Mwe=/^([0-9_])/,Owe=/[^a-z0-9_\u0080-\uffff]+/gi;function Rwe(e){return e==null?null:e.trim().replaceAll(Owe,"_").replace(Mwe,"F$1")||null}const Cwe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Iwe=["field","normalizationField"];function H9(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(W9(Cwe,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)W9(Iwe,i,t)}}function W9(e,t,r){if(e)for(const i of e){const n=X$(i,t),s=n&&typeof n!="function"&&r.get(n);s&&Nr(i,s.name,t)}}function qX(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),n=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(n==null?void 0:n.name)??null}else{const i=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(n==null?void 0:n.name)??null}}const A3=new Set;function Ix(e,t){return e&&t?(A3.clear(),yf(A3,e,t),Array.from(A3).sort()):[]}function yf(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)vn(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)n!=null&&e.add(n)}}function vn(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function i6e(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function n6e(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=Ix(e,t);return i.length/e.fields.length>=r?["*"]:i}async function Qi(e,t,r){var s;if(!r)return;let i;const n=vwe(r);if(n)i=[n];else{const{arcadeUtils:o}=await Vd();i=o.extractFieldNames(r,(s=t==null?void 0:t.fields)==null?void 0:s.map(l=>l.name))}for(const o of i)vn(e,t,o)}async function OD(e,t,r){if(r&&r!=="1=1"){const i=await DX(r,t);if(!i.isStandardized)throw new V("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});yf(e,t,i.fieldNames)}}function Nwe({displayField:e,fields:t}){return e||(t!=null&&t.length?M3(t,"name-or-title")||M3(t,"unique-identifier")||M3(t,"type-or-category")||Pwe(t):null)}function Pwe(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function M3(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function s6e(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Lwe(e,t,r){r.onStatisticExpression?Qi(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function o6e(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],n=r.popupTemplate;i.push(HX(e,t,n)),r.fields&&i.push(...r.fields.map(async s=>Lwe(e,t.fieldsIndex,s))),await Promise.all(i)}async function a6e(e,t){var s,o,l;const{fieldsIndex:r,trackInfo:i}=t;if(!t||!i||!r)return;const n=[(s=i.latestObservations.renderer)==null?void 0:s.collectRequiredFields(e,r),(o=i.previousObservations.renderer)==null?void 0:o.collectRequiredFields(e,r),(l=i.trackLines.renderer)==null?void 0:l.collectRequiredFields(e,r)];i.popupTemplate&&n.push(HX(e,t,i.popupTemplate));for(const d of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(d)for(const f of d)n.push(YX(e,r,f));await Promise.all(n)}async function HX(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(s=>Qi(e,t.fieldsIndex,s.expression)));const n=r==null?void 0:r.content;if(Array.isArray(n))for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(Qi(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(i)}async function l6e(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&yf(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&yf(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await OD(e,t.fieldsIndex,r.where))}async function u6e(e,t,r){t&&r&&await Promise.all(r.map(i=>kwe(e,t,i)))}async function kwe(e,t,r){t&&r&&(r.valueExpression?await Qi(e,t.fieldsIndex,r.valueExpression):r.field&&vn(e,t.fieldsIndex,r.field))}function c6e(e){return e?Ix(e.fieldsIndex,WX(e)):[]}function Dwe(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?Ix(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function d6e(e,t,r){if(!t||!r)return;const i=t.fieldsIndex;await Promise.all(r.filters.map(n=>OD(e,i,n.where)))}const jwe=new Set(["oid","global-id","guid"]),Fwe=new Set(["oid","global-id"]),Uwe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function Vwe(e){const t=new Set;ZX(e).forEach(i=>t.add(i)),Dwe(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function WX(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r,i,n,s].filter(Boolean)}function ZX(e){return WX(e).map(t=>t.toLowerCase())}function zwe(e,t){var r;return e.editable&&!jwe.has(e.type)&&!ZX(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function Gwe(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||Vwe(t).includes(r)||Fwe.has(e.type)||Uwe.some(n=>n.test(r)))}async function h6e(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(n=>YX(e,i,n)))}async function YX(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await Qi(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{vn(e,t,o.slice(1,-1))})}await OD(e,t,n)}function Bwe(e){const t=e.defaultValue;return t!==void 0&&XX(e,t)?t:e.nullable?null:void 0}function p6e(e){const t=typeof e=="string"?{type:e}:e;return eK(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function JX(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function qwe(e){return e===null||JX(e)}function Hwe(e){return e===null||Number.isInteger(e)}function Wwe(){return!0}function XX(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?Hwe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?qwe:JX;break;case"string":case"esriFieldTypeString":r=e.nullable?lwe:Pw;break;default:r=Wwe}return arguments.length===1?r:r(t)}const Zwe=["integer","small-integer","big-integer"],Ywe=["single","double"],Jwe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],Xwe=["esriFieldTypeSingle","esriFieldTypeDouble"],KX=new Set([...Zwe,...Jwe]),Kwe=new Set([...Ywe,...Xwe]),Qwe=Tk(KX,Kwe);function e1e(e){return e!=null&&KX.has(e.type)}function QX(e){return e!=null&&Qwe.has(e.type)}function eK(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function t1e(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function f6e(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function y6e(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function r1e(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Z9(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function Y9(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function m6e(e,t){return i1e(e,t)===null}var o$,a$;function g6e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function i1e(e,t){return e==null||e.nullable&&t===null?null:XX(e,t)?QX(e)&&!n1e(e.type,Number(t))?o$.OUT_OF_RANGE:null:a$.INVALID_TYPE}function n1e(e,t){const r=typeof e=="string"?tK(e):e;if(!r)return!1;const i=r.min,n=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=n:t>=i&&t<=n}function tK(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return s1e;case"esriFieldTypeInteger":case"integer":return o1e;case"esriFieldTypeBigInteger":case"big-integer":return a1e;case"esriFieldTypeSingle":case"single":return l1e;case"esriFieldTypeDouble":case"double":return u1e}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(o$||(o$={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(a$||(a$={}));const s1e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},o1e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},a1e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},l1e={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},u1e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function v6e(e,t,r){switch(e){case n$.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case n$.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case a$.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case o$.OUT_OF_RANGE:{const{min:i,max:n}=tK(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function c1e(e,t){return!d1e(e,t,null)}function d1e(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let n=!1;for(const s of e)if(!i.has(s)&&(n=!0,r==null))break;return n}function h1e(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function RD(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let Q2=class extends W{constructor(t){super(t),this.type=null}};u([h({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Q2.prototype,"type",void 0),Q2=u([M("esri.popup.content.Content")],Q2);const Vu=Q2,jS=new We({asc:"ascending",desc:"descending"});let Zv=class extends He.ClonableMixin(W){constructor(t){super(t),this.field=null,this.order="ascending"}};u([h({type:String,json:{write:!0}})],Zv.prototype,"field",void 0),u([h({type:jS.apiValues,json:{type:jS.jsonValues,read:jS.read,write:jS.write}})],Zv.prototype,"order",void 0),Zv=u([M("esri.popup.support.AttachmentsOrderByInfo")],Zv);const p1e=Zv;let Pc=class extends He.ClonableMixin(Vu){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};u([h({type:String,json:{write:!0}})],Pc.prototype,"description",void 0),u([h({type:["auto","preview","list"],json:{write:!0}})],Pc.prototype,"displayType",void 0),u([h({type:[p1e],json:{write:!0}})],Pc.prototype,"orderByFields",void 0),u([h({type:String,json:{write:!0}})],Pc.prototype,"title",void 0),u([h({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Pc.prototype,"type",void 0),Pc=u([M("esri.popup.content.AttachmentsContent")],Pc);const Ng=Pc;var bI;let Zh=bI=class extends Vu{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new bI({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?U(this.outFields):null})}};u([h()],Zh.prototype,"creator",void 0),u([h()],Zh.prototype,"destroyer",void 0),u([h()],Zh.prototype,"outFields",void 0),u([h({type:["custom"],readOnly:!0})],Zh.prototype,"type",void 0),Zh=bI=u([M("esri.popup.content.CustomContent")],Zh);const f1e=Zh;var _I;let Dy=_I=class extends W{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new _I({title:this.title,expression:this.expression})}};u([h({type:String,json:{write:!0}})],Dy.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],Dy.prototype,"expression",void 0),u([h({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Dy.prototype,"returnType",void 0),Dy=_I=u([M("esri.popup.ElementExpressionInfo")],Dy);const y1e=Dy;var wI;let Yv=wI=class extends Vu{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new wI({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};u([h({type:y1e,json:{write:!0}})],Yv.prototype,"expressionInfo",void 0),u([h({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Yv.prototype,"type",void 0),Yv=wI=u([M("esri.popup.content.ExpressionContent")],Yv);const Nx=Yv;let jy=class extends He.ClonableMixin(W){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};u([Ee(nge)],jy.prototype,"dateFormat",void 0),u([h({type:Boolean,json:{write:!0}})],jy.prototype,"digitSeparator",void 0),u([h({type:at,json:{write:!0}})],jy.prototype,"places",void 0),jy=u([M("esri.popup.support.FieldInfoFormat")],jy);const eT=jy;var SI;let Co=SI=class extends W{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new SI({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};u([h({type:String,json:{write:!0}})],Co.prototype,"fieldName",void 0),u([h({type:eT,json:{write:!0}})],Co.prototype,"format",void 0),u([h({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Co.prototype,"isEditable",void 0),u([h({type:String,json:{write:!0}})],Co.prototype,"label",void 0),u([Ee(new We({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Co.prototype,"stringFieldOption",void 0),u([h({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Co.prototype,"statisticType",void 0),u([h({type:String,json:{write:!0}})],Co.prototype,"tooltip",void 0),u([h({type:Boolean,json:{write:!0}})],Co.prototype,"visible",void 0),Co=SI=u([M("esri.popup.FieldInfo")],Co);const CD=Co;var TI;let Bl=TI=class extends Vu{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new TI(U({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};u([h({type:Object,json:{write:!0}})],Bl.prototype,"attributes",void 0),u([h({type:String,json:{write:!0}})],Bl.prototype,"description",void 0),u([h({type:[CD]})],Bl.prototype,"fieldInfos",void 0),u([le("fieldInfos")],Bl.prototype,"writeFieldInfos",null),u([h({type:String,json:{write:!0}})],Bl.prototype,"title",void 0),u([h({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Bl.prototype,"type",void 0),Bl=TI=u([M("esri.popup.content.FieldsContent")],Bl);const Pg=Bl;let Yh=class extends W{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};u([h({type:String,json:{write:!0}})],Yh.prototype,"altText",void 0),u([h({type:String,json:{write:!0}})],Yh.prototype,"caption",void 0),u([h({type:String,json:{write:!0}})],Yh.prototype,"title",void 0),u([h({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Yh.prototype,"type",void 0),Yh=u([M("esri.popup.content.mixins.MediaInfo")],Yh);const ID=Yh;var EI;let Jh=EI=class extends Ae{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new EI({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};u([h()],Jh.prototype,"color",void 0),u([h()],Jh.prototype,"fieldName",void 0),u([h()],Jh.prototype,"tooltip",void 0),u([h()],Jh.prototype,"value",void 0),Jh=EI=u([M("esri.popup.content.support.ChartMediaInfoValueSeries")],Jh);const m1e=Jh;var $I;let Lc=$I=class extends W{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new $I({colors:U(this.colors),fields:U(this.fields),normalizeField:this.normalizeField,series:U(this.series),tooltipField:this.tooltipField})}};u([h({type:[De],json:{type:[[at]],write:!0}})],Lc.prototype,"colors",void 0),u([h({type:[String],json:{write:{isRequired:!0}}})],Lc.prototype,"fields",void 0),u([h({type:String,json:{write:!0}})],Lc.prototype,"normalizeField",void 0),u([h({type:[m1e],json:{read:!1}})],Lc.prototype,"series",void 0),u([h({type:String,json:{write:!0}})],Lc.prototype,"tooltipField",void 0),Lc=$I=u([M("esri.popup.content.support.ChartMediaInfoValue")],Lc);const g1e=Lc;let Jv=class extends ID{constructor(t){super(t),this.type=null,this.value=void 0}};u([h({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Jv.prototype,"type",void 0),u([h({type:g1e,json:{write:{isRequired:!0}}})],Jv.prototype,"value",void 0),Jv=u([M("esri.popup.content.mixins.ChartMediaInfo")],Jv);const Px=Jv,Lx=Wr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var xI;let tT=xI=class extends Px{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new xI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([h({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:Lx.write,isRequired:!0}}})],tT.prototype,"type",void 0),tT=xI=u([M("esri.popup.content.BarChartMediaInfo")],tT);const rK=tT;var AI;let rT=AI=class extends Px{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new AI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([h({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:Lx.write,isRequired:!0}}})],rT.prototype,"type",void 0),rT=AI=u([M("esri.popup.content.ColumnChartMediaInfo")],rT);const iK=rT;var MI;let Xv=MI=class extends W{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new MI({linkURL:this.linkURL,sourceURL:this.sourceURL})}};u([h({type:String,json:{write:!0}})],Xv.prototype,"linkURL",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Xv.prototype,"sourceURL",void 0),Xv=MI=u([M("esri.popup.content.support.ImageMediaInfoValue")],Xv);const v1e=Xv;var OI;let Fy=OI=class extends ID{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new OI({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};u([h({type:Number,json:{write:!0}})],Fy.prototype,"refreshInterval",void 0),u([h({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Fy.prototype,"type",void 0),u([h({type:v1e,json:{write:{isRequired:!0}}})],Fy.prototype,"value",void 0),Fy=OI=u([M("esri.popup.content.ImageMediaInfo")],Fy);const nK=Fy;var RI;let iT=RI=class extends Px{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new RI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([h({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:Lx.write,isRequired:!0}}})],iT.prototype,"type",void 0),iT=RI=u([M("esri.popup.content.LineChartMediaInfo")],iT);const sK=iT;var CI;let nT=CI=class extends Px{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new CI({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};u([h({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:Lx.write,isRequired:!0}}})],nT.prototype,"type",void 0),nT=CI=u([M("esri.popup.content.PieChartMediaInfo")],nT);const oK=nT,II={base:ID,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":rK,"column-chart":iK,"line-chart":sK,"pie-chart":oK,image:nK}};var NI;let Io=NI=class extends Vu{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?nK.fromJSON(t):t.type==="barchart"?rK.fromJSON(t):t.type==="columnchart"?iK.fromJSON(t):t.type==="linechart"?sK.fromJSON(t):t.type==="piechart"?oK.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new NI(U({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};u([h()],Io.prototype,"activeMediaInfoIndex",void 0),u([h({type:Object,json:{write:!0}})],Io.prototype,"attributes",void 0),u([h({type:String,json:{write:!0}})],Io.prototype,"description",void 0),u([h({types:[II]})],Io.prototype,"mediaInfos",void 0),u([se("mediaInfos")],Io.prototype,"readMediaInfos",null),u([le("mediaInfos")],Io.prototype,"writeMediaInfos",null),u([h({type:String,json:{write:!0}})],Io.prototype,"title",void 0),u([h({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Io.prototype,"type",void 0),Io=NI=u([M("esri.popup.content.MediaContent")],Io);const H_=Io;var PI;let Kv=PI=class extends W{constructor(e){super(e),this.field=null,this.order=null}clone(){return new PI({field:this.field,order:this.order})}};u([h({type:String,json:{write:!0}})],Kv.prototype,"field",void 0),u([h({type:["asc","desc"],json:{write:!0}})],Kv.prototype,"order",void 0),Kv=PI=u([M("esri.popup.support.RelatedRecordsInfoFieldOrder")],Kv);const ND=Kv;let Ta=class extends He.ClonableMixin(Vu){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};u([h({type:String,json:{write:!0}})],Ta.prototype,"description",void 0),u([h({type:Number,json:{type:at,write:!0}})],Ta.prototype,"displayCount",void 0),u([h({type:["list"],json:{write:{isRequired:!0}}})],Ta.prototype,"displayType",void 0),u([h({type:[ND],json:{write:!0}})],Ta.prototype,"orderByFields",void 0),u([h({type:Number,json:{type:at,write:{isRequired:!0}}})],Ta.prototype,"relationshipId",void 0),u([h({type:String,json:{write:!0}})],Ta.prototype,"title",void 0),u([h({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ta.prototype,"type",void 0),Ta=u([M("esri.popup.content.RelationshipContent")],Ta);const W_=Ta;var LI;let Qv=LI=class extends Vu{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new LI({text:this.text})}};u([h({type:String,json:{write:!0}})],Qv.prototype,"text",void 0),u([h({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Qv.prototype,"type",void 0),Qv=LI=u([M("esri.popup.content.TextContent")],Qv);const Z_=Qv;let ql=class extends He.ClonableMixin(W){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};u([h({type:String,json:{write:!0}})],ql.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],ql.prototype,"description",void 0),u([h({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],ql.prototype,"type",void 0),u([h({type:Number,json:{type:at,write:!0}})],ql.prototype,"associatedNetworkSourceId",void 0),u([h({type:Number,json:{type:at,write:!0}})],ql.prototype,"associatedAssetGroup",void 0),u([h({type:Number,json:{type:at,write:!0}})],ql.prototype,"associatedAssetType",void 0),ql=u([M("esri.popup.support.UtilityNetworkAssociationType")],ql);const aK=ql;let kc=class extends He.ClonableMixin(Vu){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};u([h({type:String,json:{write:!0}})],kc.prototype,"description",void 0),u([h({type:Number,json:{type:at,write:!0}})],kc.prototype,"displayCount",void 0),u([h({type:String,json:{write:!0}})],kc.prototype,"title",void 0),u([h({type:[aK],json:{write:!0}})],kc.prototype,"associationTypes",void 0),u([Ee({utilityNetworkAssociations:"utility-network-associations"})],kc.prototype,"type",void 0),kc=u([M("esri.popup.content.UtilityNetworkAssociationsContent")],kc);const PD=kc,b1e={base:null,key:"type",typeMap:{attachment:Ng,media:H_,text:Z_,expression:Nx,field:Pg,relationship:W_,utilityNetworkAssociations:PD}},_1e={base:null,key:"type",typeMap:{attachment:Ng,media:H_,text:Z_,expression:Nx,field:Pg,relationship:W_}};var kI;let Xh=kI=class extends W{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new kI({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([h({type:String,json:{write:!0}})],Xh.prototype,"name",void 0),u([h({type:String,json:{write:!0}})],Xh.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],Xh.prototype,"expression",void 0),u([h({type:["string","number"],json:{write:!0}})],Xh.prototype,"returnType",void 0),Xh=kI=u([M("esri.popup.ExpressionInfo")],Xh);const w1e=Xh;var DI;let eb=DI=class extends W{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new DI({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};u([h({type:Boolean,json:{write:!0}})],eb.prototype,"returnTopmostRaster",void 0),u([h({type:Boolean,json:{write:!0}})],eb.prototype,"showNoDataRecords",void 0),eb=DI=u([M("esri.popup.LayerOptions")],eb);const S1e=eb;var jI;let tb=jI=class extends W{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new jI({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?U(this.orderByFields):null})}};u([h({type:Boolean,json:{write:!0}})],tb.prototype,"showRelatedRecords",void 0),u([h({type:[ND],json:{write:!0}})],tb.prototype,"orderByFields",void 0),tb=jI=u([M("esri.popup.RelatedRecordsInfo")],tb);const J9=tb;var FI;let ks=FI=class extends t0.IdentifiableMixin(Ae){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new FI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};u([h()],ks.prototype,"active",void 0),u([h()],ks.prototype,"className",void 0),u([h()],ks.prototype,"disabled",void 0),u([h()],ks.prototype,"icon",void 0),u([h()],ks.prototype,"id",void 0),u([h()],ks.prototype,"indicator",void 0),u([h()],ks.prototype,"title",void 0),u([h()],ks.prototype,"type",void 0),u([h()],ks.prototype,"visible",void 0),ks=FI=u([M("esri.support.actions.ActionBase")],ks);const LD=ks;var UI;let sT=UI=class extends LD{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new UI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};u([h()],sT.prototype,"image",void 0),sT=UI=u([M("esri.support.actions.ActionButton")],sT);const T1e=sT;var VI;let rb=VI=class extends LD{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new VI({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};u([h()],rb.prototype,"image",void 0),u([h()],rb.prototype,"value",void 0),rb=VI=u([M("esri.support.actions.ActionToggle")],rb);const E1e=rb,_v="relationships/",X9="expression/",$1e=ge.ofType({key:"type",defaultKeyValue:"button",base:LD,typeMap:{button:T1e,toggle:E1e}}),x1e={base:Vu,key:"type",typeMap:{media:H_,custom:f1e,text:Z_,attachments:Ng,fields:Pg,expression:Nx,relationship:W_,utilityNetworkAssociations:PD}},lK=new Set(["attachments","fields","media","text","expression","relationship"]),A1e=new Set([...lK,"utility-network-associations"]);let Vr=class extends He.ClonableMixin(W){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>oa(x1e,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||ll(t)?t:(ae.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeWebMapContent(t,r,i,n){this._writePopupTemplateContent(t,r,n)}writeFieldInfos(t,r,i,n){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const l=o?o.filter(f=>f.type==="fields"):[],d=l.length&&l.every(f=>{var g;return(g=f.fieldInfos)==null?void 0:g.length});r.fieldInfos=t.filter(Boolean).map(f=>{const g=f.toJSON(n);return d&&(g.visible=!1),g})}if(o)for(const l of o)l.type==="fields"&&this._writeFieldsContent(l,r)}writeLayerOptions(t,r,i,n){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(n)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),yf(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(n=>(i==null?void 0:i.origin)==="web-scene"?lK.has(n.type):A1e.has(n.type)).map(n=>n==null?void 0:n.toJSON(i)),r.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(r):n.type==="media"?this._writeMediaContent(n,r):n.type==="text"?this._writeTextContent(n,r):n.type==="relationship"&&this._writeRelationshipContent(n,r)})):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=U(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(n=>{const s=r.fieldInfos.find(o=>{var l,d;return((l=o.fieldName)==null?void 0:l.toLowerCase())===((d=n.fieldName)==null?void 0:d.toLowerCase())});s?s.visible=!0:r.fieldInfos.push(n)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var s,o;const i=((s=t.orderByFields)==null?void 0:s.map(l=>this._toFieldOrderJSON(l,t.relationshipId)))||[],n=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(n==null?void 0:n.length)&&{orderByFields:n}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=U(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const n={description:!1,mediaInfos:!1};return i.map(s=>s.type==="media"?(s.mediaInfos||!r||n.mediaInfos||(s.mediaInfos=r,n.mediaInfos=!0),H_.fromJSON(s)):s.type==="text"?(s.text||!t||n.description||(s.text=t,n.description=!0),Z_.fromJSON(s)):s.type==="attachments"?Ng.fromJSON(s):s.type==="fields"?Pg.fromJSON(s):s.type==="expression"?Nx.fromJSON(s):s.type==="relationship"?W_.fromJSON(s):s.type==="utilityNetworkAssociations"?PD.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(_v)))return null;const n=r.replace(_v,"").split("/");if(n.length!==2)return null;const s=parseInt(n[0],10),o=n[1];return!Number.isNaN(s)&&o?W_.fromJSON({relationshipId:s,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:n}=t;return{field:`${_v}${r}/${n}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:n={showRelatedRecords:!1}}){const s=[];t?s.push(new Z_({text:t})):s.push(new Pg),Array.isArray(r)&&r.length&&s.push(H_.fromJSON({mediaInfos:r})),i&&s.push(Ng.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:l}=n;return o&&(l!=null&&l.length)&&l.forEach(d=>{const f=this._toRelationshipContent(d);f&&s.push(f)}),s.length?s:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((n,s)=>[...n,...this._getMediaInfoFields(s)],[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:n}=t,s=n||{},{fields:o,normalizeField:l,tooltipField:d,sourceURL:f,linkURL:g}=s,v=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(f),...this._extractFieldNames(g),...o??[]];return l&&v.push(l),d&&v.push(d),v}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,n)=>[...i,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(n=>Qi(t,r,n.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(_v)||r.startsWith(X9))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:n}=t,s=n==="button"||n==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return RD(t).filter(r=>!(r.indexOf(_v)===0||r.indexOf(X9)===0))}};u([h({type:$1e})],Vr.prototype,"actions",void 0),u([h()],Vr.prototype,"content",void 0),u([ft("content")],Vr.prototype,"castContent",null),u([se("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Vr.prototype,"readContent",null),u([le("web-scene","content",{popupElements:{type:ge.ofType(_1e)},showAttachments:{type:Boolean},mediaInfos:{type:ge.ofType(II)},description:{type:String},relatedRecordsInfo:{type:J9}})],Vr.prototype,"writeWebSceneContent",null),u([le("content",{popupElements:{type:ge.ofType(b1e)},showAttachments:{type:Boolean},mediaInfos:{type:ge.ofType(II)},description:{type:String},relatedRecordsInfo:{type:J9}})],Vr.prototype,"writeWebMapContent",null),u([h({type:[w1e],json:{write:!0}})],Vr.prototype,"expressionInfos",void 0),u([h({type:[CD]})],Vr.prototype,"fieldInfos",void 0),u([le("fieldInfos")],Vr.prototype,"writeFieldInfos",null),u([h({type:S1e})],Vr.prototype,"layerOptions",void 0),u([le("layerOptions")],Vr.prototype,"writeLayerOptions",null),u([h({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Vr.prototype,"lastEditInfoEnabled",void 0),u([h()],Vr.prototype,"outFields",void 0),u([h()],Vr.prototype,"overwriteActions",void 0),u([h()],Vr.prototype,"returnGeometry",void 0),u([h({json:{type:String}})],Vr.prototype,"title",void 0),u([le("title")],Vr.prototype,"writeTitle",null),Vr=u([M("esri.PopupTemplate")],Vr);const r0=Vr,K9=new We({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let M1e=0,Uy=class extends W{constructor(t){super(t),this.id="sym"+M1e++,this.type=null,this.color=new De([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};u([h({type:K9.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:K9.write,isRequired:!0}}})],Uy.prototype,"type",void 0),u([h({type:De,json:{write:{allowNull:!0}}})],Uy.prototype,"color",void 0),u([se("color")],Uy.prototype,"readColor",null),Uy=u([M("esri.symbols.Symbol")],Uy);const Pi=Uy;var zI;let Dc=zI=class extends Pi{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const n=i.map(s=>{const o=s.valueExpressionInfo;return o?Qi(e,t,o.expression):null});await Promise.all(n)}}}clone(){return new zI({data:U(this.data)})}hash(){return OH(JSON.stringify(this.data)).toString()}};u([h({json:{write:!1}})],Dc.prototype,"color",void 0),u([h({json:{write:!0}})],Dc.prototype,"data",void 0),u([se("data",["symbol"])],Dc.prototype,"readData",null),u([le("data",{})],Dc.prototype,"writeData",null),u([Ee({CIMSymbolReference:"cim"},{readOnly:!0})],Dc.prototype,"type",void 0),Dc=zI=u([M("esri.symbols.CIMSymbol")],Dc);const th=Dc;let Vy=class extends W{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};u([h({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Vy.prototype,"enabled",void 0),u([le("enabled")],Vy.prototype,"writeEnabled",null),u([h({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Vy.prototype,"type",void 0),Vy=u([M("esri.symbols.Symbol3DLayer")],Vy);const ul=Vy;function O1e(e,t){const r=t.transparency!=null?q_(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new De([i[0]||0,i[1]||0,i[2]||0,r]):null}function R1e(e,t){t.color=e.toJSON().slice(0,3);const r=Mx(e.a);r!==0&&(t.transparency=r)}function rh(e){return{type:De,nonNullable:e==null?void 0:e.nonNullable,json:{type:[at],default:null,read:{source:["color","transparency"],reader:O1e},write:{target:{color:{type:[at],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:at}},writer:R1e}}}}const sl={type:Number,cast:pt,json:{write:!0}};let Kh=class extends W{constructor(t){super(t),this.color=new De([0,0,0,1]),this.extensionLength=0,this.size=uo(1)}clone(){}cloneProperties(){return{color:U(this.color),size:this.size,extensionLength:this.extensionLength}}};u([h({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Kh.prototype,"type",void 0),u([h(rh({colorRequiredOnWrite:!0}))],Kh.prototype,"color",void 0),u([h({...sl,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Kh.prototype,"extensionLength",void 0),u([h(sl)],Kh.prototype,"size",void 0),Kh=u([M("esri.symbols.edges.Edges3D")],Kh);const kD=Kh;var GI;let oT=GI=class extends kD{constructor(e){super(e),this.type="sketch"}clone(){return new GI(this.cloneProperties())}};u([Ee({sketch:"sketch"},{readOnly:!0})],oT.prototype,"type",void 0),oT=GI=u([M("esri.symbols.edges.SketchEdges3D")],oT);const C1e=oT;var BI;let aT=BI=class extends kD{constructor(e){super(e),this.type="solid"}clone(){return new BI(this.cloneProperties())}};u([Ee({solid:"solid"},{readOnly:!0})],aT.prototype,"type",void 0),aT=BI=u([M("esri.symbols.edges.SolidEdges3D")],aT);const uK=aT,cK={types:{key:"type",base:kD,typeMap:{solid:uK,sketch:C1e}},json:{write:!0}};var qI;let hs=qI=class extends W{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?pD(this.emissiveFactor):null};return new qI(e)}};u([h(rh())],hs.prototype,"color",void 0),u([h({type:[Number],json:{write:!1}})],hs.prototype,"emissiveFactor",void 0),hs=qI=u([M("esri.symbols.support.Symbol3DMaterial")],hs);var HI;let jc=HI=class extends ul{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new HI({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};u([Ee({Extrude:"extrude"},{readOnly:!0})],jc.prototype,"type",void 0),u([h({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],jc.prototype,"size",void 0),u([h({type:hs,json:{write:!0}})],jc.prototype,"material",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],jc.prototype,"castShadows",void 0),u([h(cK)],jc.prototype,"edges",void 0),jc=HI=u([M("esri.symbols.ExtrudeSymbol3DLayer")],jc);const dK=jc;let lT=class extends W{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};u([h({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],lT.prototype,"type",void 0),lT=u([M("esri.symbols.patterns.LinePattern3D")],lT);const hK=lT,I1e=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var WI;const N1e=Wr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let ib=WI=class extends hK{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new WI(e)}};u([h({type:["style"],json:{write:{isRequired:!0}}})],ib.prototype,"type",void 0),u([Ee(N1e),h({type:I1e,json:{write:{isRequired:!0}}})],ib.prototype,"style",void 0),ib=WI=u([M("esri.symbols.patterns.LineStylePattern3D")],ib);const DD=ib;let uT=class extends W{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};u([h({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],uT.prototype,"type",void 0),uT=u([M("esri.symbols.patterns.Pattern3D")],uT);const pK=uT,P1e=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var ZI;let nb=ZI=class extends pK{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new ZI({style:this.style})}};u([h({type:["style"],json:{write:{isRequired:!0}}})],nb.prototype,"type",void 0),u([h({type:P1e,json:{read:!0,write:{isRequired:!0}}})],nb.prototype,"style",void 0),nb=ZI=u([M("esri.symbols.patterns.StylePattern3D")],nb);const fK=nb,L1e={types:{key:"type",base:pK,typeMap:{style:fK}},json:{write:!0}},yK={types:{key:"type",base:hK,typeMap:{style:DD}},json:{write:!0}},h_=new De("white"),k1e=new De([255,255,255,0]);function D1e(e){return e.r===0&&e.g===0&&e.b===0}var YI;let p_=YI=class extends hs{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?pD(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new YI(e)}};u([Ee({multiply:"multiply",replace:"replace",tint:"tint"})],p_.prototype,"colorMixMode",void 0),p_=YI=u([M("esri.symbols.support.Symbol3DFillMaterial")],p_);function j1e(e,t=!1){return e<=SH?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function P6e(e){return(bue(e)?e.byteLength/8:e.length)<=SH?Array.from(e):new Float64Array(e)}function L6e(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function Lw(e=z1e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function jD(e,t,r,i,n,s,o=Lw()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function k6e(e,t=Lw()){return F1e(e,0,e.length/3,t)}function F1e(e,t,r,i=Lw()){return mK(i,JI),U1e(i,e,t,r),i}function D6e(e,t=j1e(24)){const[r,i,n,s,o,l]=e;return t[0]=r,t[1]=i,t[2]=n,t[3]=r,t[4]=i,t[5]=l,t[6]=r,t[7]=o,t[8]=n,t[9]=r,t[10]=o,t[11]=l,t[12]=s,t[13]=i,t[14]=n,t[15]=s,t[16]=i,t[17]=l,t[18]=s,t[19]=o,t[20]=n,t[21]=s,t[22]=o,t[23]=l,t}function j6e(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new Ut(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function F6e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function U6e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function V6e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function U1e(e,t,r=0,i=t.length/3){let n=e[0],s=e[1],o=e[2],l=e[3],d=e[4],f=e[5];for(let g=0;g<i;g++)n=Math.min(n,t[r+3*g]),s=Math.min(s,t[r+3*g+1]),o=Math.min(o,t[r+3*g+2]),l=Math.max(l,t[r+3*g]),d=Math.max(d,t[r+3*g+1]),f=Math.max(f,t[r+3*g+2]);e[0]=n,e[1]=s,e[2]=o,e[3]=l,e[4]=d,e[5]=f}function z6e(e,t,r){const i=t.length;let n=e[0],s=e[1],o=e[2],l=e[3],d=e[4],f=e[5];if(r)for(let g=0;g<i;g++){const v=t[g];n=Math.min(n,v[0]),s=Math.min(s,v[1]),o=Math.min(o,v[2]),l=Math.max(l,v[0]),d=Math.max(d,v[1]),f=Math.max(f,v[2])}else for(let g=0;g<i;g++){const v=t[g];n=Math.min(n,v[0]),s=Math.min(s,v[1]),l=Math.max(l,v[0]),d=Math.max(d,v[1])}e[0]=n,e[1]=s,e[2]=o,e[3]=l,e[4]=d,e[5]=f}function G6e(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function kw(e){return e[0]>=e[3]?0:e[3]-e[0]}function Dw(e){return e[1]>=e[4]?0:e[4]-e[1]}function jw(e){return e[2]>=e[5]?0:e[5]-e[2]}function B6e(e){const t=kw(e),r=jw(e),i=Dw(e);return Math.sqrt(t*t+r*r+i*i)}function q6e(e,t=[0,0,0]){return t[0]=e[0]+kw(e)/2,t[1]=e[1]+Dw(e)/2,t[2]=e[2]+jw(e)/2,t}function H6e(e,t=[0,0,0]){return t[0]=kw(e),t[1]=Dw(e),t[2]=jw(e),t}function W6e(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function V1e(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function Z6e(e,t){return t==null||V1e(e,t)}function Y6e(e,t,r,i,n=e){return n[0]=e[0]+t,n[1]=e[1]+r,n[2]=e[2]+i,n[3]=e[3]+t,n[4]=e[4]+r,n[5]=e[5]+i,n}function J6e(e,t,r=e){const i=e[0]+kw(e)/2,n=e[1]+Dw(e)/2,s=e[2]+jw(e)/2;return r[0]=i+(e[0]-i)*t,r[1]=n+(e[1]-n)*t,r[2]=s+(e[2]-s)*t,r[3]=i+(e[3]-i)*t,r[4]=n+(e[4]-n)*t,r[5]=s+(e[5]-s)*t,r}function X6e(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function K6e(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Q6e(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function mK(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function e8e(e){return e?mK(e,JI):Lw(JI)}function t8e(e,t){return t||(t=yn()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function r8e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function i8e(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=n,e[5]=Number.POSITIVE_INFINITY,e}function Q9(e){return e.length===6}function n8e(e){return kw(e)===0&&Dw(e)===0&&jw(e)===0}function s8e(e,t,r){if(e==null||t==null)return e===t;if(!Q9(e)||!Q9(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const JI=[1/0,1/0,1/0,-1/0,-1/0,-1/0],z1e=[0,0,0,0,0,0];Lw();function o8e(e,{isPrimitive:t,width:r,depth:i,height:n}){const s=t?10:1;if(r==null&&n==null&&i==null)return[s*e[0],s*e[1],s*e[2]];const o=Qg(r,i,n);let l;for(let d=0;d<3;d++){const f=o[d];if(f!=null){l=f/e[d];break}}for(let d=0;d<3;d++)o[d]==null&&(o[d]=e[d]*l);return o}const G1e=jD(-.5,-.5,-.5,.5,.5,.5),B1e=jD(-.5,-.5,0,.5,.5,1),q1e=jD(-.5,-.5,0,.5,.5,.5);function a8e(e){switch(e){case"sphere":case"cube":case"diamond":return G1e;case"cylinder":case"cone":case"inverted-cone":return B1e;case"tetrahedron":return q1e;default:return}}const FD=["butt","square","round"],H1e=[...FD,"none"],gK=["miter","bevel","round"];var XI;let Qh=XI=class extends W{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=uo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new XI(e)}};u([h(rh({colorRequiredOnWrite:!0}))],Qh.prototype,"color",void 0),u([h({...sl,json:{write:{isRequired:!0}}})],Qh.prototype,"size",void 0),u([h(yK)],Qh.prototype,"pattern",void 0),u([h({type:FD,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Qh.prototype,"patternCap",void 0),Qh=XI=u([M("esri.symbols.support.Symbol3DOutline")],Qh);var cT;let Hl=cT=class extends ul{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new cT(e)}static fromSimpleFillSymbol(e){var i,n,s;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new DD({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((n=e.outline)==null?void 0:n.color)??h_).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(r.patternCap=e.outline.cap),new cT({material:new p_({color:(e.color??k1e).clone()}),pattern:e.style&&e.style!=="solid"?new fK({style:e.style}):null,outline:r})}};u([Ee({Fill:"fill"},{readOnly:!0})],Hl.prototype,"type",void 0),u([h({type:p_,json:{write:!0}})],Hl.prototype,"material",void 0),u([h(L1e)],Hl.prototype,"pattern",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Hl.prototype,"castShadows",void 0),u([h({type:Qh,json:{write:!0}})],Hl.prototype,"outline",void 0),u([h(cK)],Hl.prototype,"edges",void 0),Hl=cT=u([M("esri.symbols.FillSymbol3DLayer")],Hl);const Mf=Hl;var KI;const W1e=Wr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ep=KI=class extends W{constructor(e){super(e)}readHref(e,t,r){return e?Hg(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Fu(e)?t.dataURI=e:(t.href=Tw(e,i),fs(t.href)&&(t.href=ta(t.href))))}clone(){return new KI({href:this.href,primitive:this.primitive})}};u([h({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ep.prototype,"href",void 0),u([se("href")],ep.prototype,"readHref",null),u([le("href",{href:{type:String},dataURI:{type:String}})],ep.prototype,"writeHref",null),u([Ee(W1e)],ep.prototype,"primitive",void 0),ep=KI=u([M("esri.symbols.support.IconSymbol3DLayerResource")],ep);const l8e="circle";var QI;let Vm=QI=class extends Ae{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new QI({x:this.x,y:this.y})}};u([h({type:Number})],Vm.prototype,"x",void 0),u([h({type:Number})],Vm.prototype,"y",void 0),Vm=QI=u([M("esri.symbols.support.Symbol3DAnchorPosition2D")],Vm);var eN;let sb=eN=class extends W{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=uo(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new eN(e)}};u([h(rh({colorRequiredOnWrite:!0}))],sb.prototype,"color",void 0),u([h({...sl,json:{write:{isRequired:!0}}})],sb.prototype,"size",void 0),sb=eN=u([M("esri.symbols.support.Symbol3DIconOutline")],sb);var zy;const vK="esri.symbols.IconSymbol3DLayer";let No=zy=class extends ul{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new zy({anchor:this.anchor,anchorPosition:U(this.anchorPosition),enabled:this.enabled,material:U(this.material),outline:U(this.outline),resource:U(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||h_,r=eV(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||h_).clone()}:null;return new zy({size:e.size,angle:e.angle,resource:{primitive:Y1e(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||D1e(e.color)?h_:e.color,r=eV(e);return new zy({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new zy({resource:{href:zW({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};u([h({type:hs,json:{write:!0}})],No.prototype,"material",void 0),u([h({type:ep,json:{write:!0}})],No.prototype,"resource",void 0),u([Ee({Icon:"icon"},{readOnly:!0})],No.prototype,"type",void 0),u([h({...sl,json:{write:{isRequired:!0}}})],No.prototype,"size",void 0),u([Ee({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],No.prototype,"anchor",void 0),u([h({type:Vm,json:{type:[Number],read:{reader:e=>new Vm({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],No.prototype,"anchorPosition",void 0),u([h({type:sb,json:{write:!0}})],No.prototype,"outline",void 0),u([h({type:Number,json:{write:!0,default:0}})],No.prototype,"angle",void 0),No=zy=u([M(vK)],No);const Up=No;function eV(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=tV(e.xoffset),n=tV(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function tV(e){return isFinite(e)?e:0}const Z1e={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Y1e(e){return Z1e[e]||(ae.getLogger(vK).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const J1e=["begin","end","begin-end"],bK=["arrow","circle","square","diamond","cross","x"];let tp=class extends He.ClonableMixin(W){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};u([h({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],tp.prototype,"type",void 0),u([h({type:J1e,json:{default:"begin-end",write:!0}})],tp.prototype,"placement",void 0),u([h({type:bK,json:{default:"arrow",write:!0}})],tp.prototype,"style",void 0),u([h({type:De,json:{type:[at],default:null,write:!0}})],tp.prototype,"color",void 0),tp=u([M("esri.symbols.LineStyleMarker3D")],tp);const tN=tp;var dT;let Ea=dT=class extends ul{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=uo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new dT(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??uo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new DD({style:e.style}):null,material:new hs({color:(e.color||h_).clone()}),marker:e.marker?new tN({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new dT(t)}};u([h({type:hs,json:{write:!0}})],Ea.prototype,"material",void 0),u([Ee({Line:"line"},{readOnly:!0})],Ea.prototype,"type",void 0),u([h({type:gK,json:{write:!0,default:"miter"}})],Ea.prototype,"join",void 0),u([h({type:FD,json:{write:!0,default:"butt"}})],Ea.prototype,"cap",void 0),u([h({...sl,json:{write:{isRequired:!0}}})],Ea.prototype,"size",void 0),u([h(yK)],Ea.prototype,"pattern",void 0),u([h({types:{key:"type",base:tN,typeMap:{style:tN}},json:{write:!0}})],Ea.prototype,"marker",void 0),Ea=dT=u([M("esri.symbols.LineSymbol3DLayer")],Ea);const i0=Ea;var rN;const X1e=Wr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let ob=rN=class extends W{clone(){return new rN({href:this.href,primitive:this.primitive})}};u([h({type:String,json:{read:Lk,write:af}})],ob.prototype,"href",void 0),u([Ee(X1e)],ob.prototype,"primitive",void 0),ob=rN=u([M("esri.symbols.support.ObjectSymbol3DLayerResource")],ob);const c8e="sphere";var iN;let Np=iN=class extends Ae{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new iN({x:this.x,y:this.y,z:this.z})}};u([h({type:Number})],Np.prototype,"x",void 0),u([h({type:Number})],Np.prototype,"y",void 0),u([h({type:Number})],Np.prototype,"z",void 0),Np=iN=u([M("esri.symbols.support.Symbol3DAnchorPosition3D")],Np);var nN;let Vi=nN=class extends ul{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new nN({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};u([h({type:hs,json:{write:!0}})],Vi.prototype,"material",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Vi.prototype,"castShadows",void 0),u([h({type:ob,json:{write:!0}})],Vi.prototype,"resource",void 0),u([Ee({Object:"object"},{readOnly:!0})],Vi.prototype,"type",void 0),u([h({type:Number,json:{write:!0}})],Vi.prototype,"width",void 0),u([h({type:Number,json:{write:!0}})],Vi.prototype,"height",void 0),u([h({type:Number,json:{write:!0}})],Vi.prototype,"depth",void 0),u([Ee({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Vi.prototype,"anchor",void 0),u([h({type:Np,json:{type:[Number],read:{reader:e=>new Np({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Vi.prototype,"anchorPosition",void 0),u([h({type:Number,json:{write:!0}})],Vi.prototype,"heading",void 0),u([h({type:Number,json:{write:!0}})],Vi.prototype,"tilt",void 0),u([h({type:Number,json:{write:!0}})],Vi.prototype,"roll",void 0),u([h({readOnly:!0})],Vi.prototype,"isPrimitive",null),Vi=nN=u([M("esri.symbols.ObjectSymbol3DLayer")],Vi);const UD=Vi;var sN;let ln=sN=class extends ul{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new sN({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};u([h({type:hs,json:{write:!0}})],ln.prototype,"material",void 0),u([h({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ln.prototype,"castShadows",void 0),u([Ee({Path:"path"},{readOnly:!0})],ln.prototype,"type",void 0),u([h({type:["circle","quad"],json:{write:!0,default:"circle"}})],ln.prototype,"profile",void 0),u([h({type:gK,json:{write:!0,default:"miter"}})],ln.prototype,"join",void 0),u([h({type:H1e,json:{write:!0,default:"butt"}})],ln.prototype,"cap",void 0),u([h({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ln.prototype,"width",void 0),u([se("width",["width","size","height"])],ln.prototype,"readWidth",null),u([h({type:Number,json:{write:!0}})],ln.prototype,"height",void 0),u([se("height",["height","size","width"])],ln.prototype,"readHeight",null),u([h({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ln.prototype,"anchor",void 0),u([h({type:["heading","all"],json:{write:!0,default:"all"}})],ln.prototype,"profileRotation",void 0),ln=sN=u([M("esri.symbols.PathSymbol3DLayer")],ln);const VD=ln,K1e=["none","underline","line-through"],Q1e=["normal","italic","oblique"],eSe=["normal","lighter","bold","bolder"],_K={type:Number,cast:e=>{const t=pn(e);return t===0?1:so(t,.1,4)},nonNullable:!0},tSe=["left","right","center"],rSe=["baseline","top","middle","bottom"],wK={type:tSe,nonNullable:!0},SK={type:rSe,nonNullable:!0},d8e=8;var oN;let Wl=oN=class extends W{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return pt(e)}clone(){return new oN({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};u([h({type:K1e,json:{default:"none",write:!0}})],Wl.prototype,"decoration",void 0),u([h({type:String,json:{write:!0}})],Wl.prototype,"family",void 0),u([h({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Wl.prototype,"size",void 0),u([ft("size")],Wl.prototype,"castSize",null),u([h({type:Q1e,json:{default:"normal",write:!0}})],Wl.prototype,"style",void 0),u([h({type:eSe,json:{default:"normal",write:!0}})],Wl.prototype,"weight",void 0),Wl=oN=u([M("esri.symbols.Font")],Wl);const kx=Wl;var aN;let zm=aN=class extends W{constructor(){super(...arguments),this.color=new De([0,0,0,1]),this.size=0}clone(){const e={color:U(this.color),size:this.size};return new aN(e)}};u([h(rh())],zm.prototype,"color",void 0),u([h(sl)],zm.prototype,"size",void 0),zm=aN=u([M("esri.symbols.support.Symbol3DHalo")],zm);let f_=class extends He.ClonableMixin(W){constructor(t){super(t),this.color=null}};u([h(rh())],f_.prototype,"color",void 0),f_=u([M("esri.symbols.support.Symbol3DTextBackground")],f_);var hT;let En=hT=class extends ul{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new hT({enabled:this.enabled,font:this.font&&U(this.font),halo:this.halo&&U(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:U(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new hT({font:e.font!=null?e.font.clone():new kx,halo:iSe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new hs({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new f_({color:e.backgroundColor.clone()}):null})}};function iSe(e,t){return e&&t!=null&&t>0?new zm({color:U(e),size:t}):null}u([h({type:kx,json:{write:!0}})],En.prototype,"font",null),u([le("font")],En.prototype,"writeFont",null),u([h({type:zm,json:{write:!0}})],En.prototype,"halo",void 0),u([h({...wK,json:{default:"center",write:!0}})],En.prototype,"horizontalAlignment",void 0),u([h({..._K,json:{default:1,write:!0}})],En.prototype,"lineHeight",void 0),u([h({type:hs,json:{write:!0}})],En.prototype,"material",void 0),u([h({type:f_,json:{write:!0}})],En.prototype,"background",void 0),u([h(sl)],En.prototype,"size",null),u([h({type:String,json:{write:!0}})],En.prototype,"text",void 0),u([Ee({Text:"text"},{readOnly:!0})],En.prototype,"type",void 0),u([h({...SK,json:{default:"baseline",write:!0}})],En.prototype,"verticalAlignment",void 0),En=hT=u([M("esri.symbols.TextSymbol3DLayer")],En);const n0=En;var lN;let Fc=lN=class extends ul{constructor(e){super(e),this.color=uN.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new lN({color:U(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};u([h({type:De,nonNullable:!0,json:{type:[at],write:(e,t,r)=>t[r]=e.toArray(De.AlphaMode.UNLESS_OPAQUE),default:()=>uN.clone(),defaultEquals:e=>e.toCss(!0)===uN.toCss(!0)}})],Fc.prototype,"color",void 0),u([Ee({Water:"water"},{readOnly:!0})],Fc.prototype,"type",void 0),u([h({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Fc.prototype,"waterbodySize",void 0),u([h({type:Number,json:{write:!0,default:null}})],Fc.prototype,"waveDirection",void 0),u([h({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Fc.prototype,"waveStrength",void 0),Fc=lN=u([M("esri.symbols.WaterSymbol3DLayer")],Fc);const TK=Fc,uN=new De([0,119,190]);var cN;let rp=cN=class extends Ae{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new cN({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};u([h({type:String})],rp.prototype,"name",void 0),u([h({type:String})],rp.prototype,"styleUrl",void 0),u([h({type:String})],rp.prototype,"styleName",void 0),u([h({type:Ki})],rp.prototype,"portal",void 0),rp=cN=u([M("esri.symbols.support.StyleOrigin")],rp);const dN=rp;var hN;let y_=hN=class extends Ae{constructor(){super(...arguments),this.url=""}clone(){return new hN({url:this.url})}};u([h({type:String})],y_.prototype,"url",void 0),y_=hN=u([M("esri.symbols.support.Thumbnail")],y_);const EK={icon:Up,object:UD,line:i0,path:VD,fill:Mf,extrude:dK,text:n0,water:TK},nSe=ge.ofType({base:ul,key:"type",typeMap:EK,errorContext:"symbol-layer"});let $a=class extends Pi{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,n=i||ge;this._set("symbolLayers",new n)}get color(){return null}set color(t){this.constructed&&ae.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){ju(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const n=Hg(t.styleUrl,i);return new dN({styleUrl:n,name:t.name})}if(t.styleName&&t.name)return new dN({portal:(i==null?void 0:i.portal)||Ki.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new no("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,n){if(t.styleUrl&&t.name){let s=Tw(t.styleUrl,n);fs(s)&&(s=ta(s)),r.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&(n!=null&&n.portal)&&!VW(t.portal.restUrl,n.portal.restUrl)?n!=null&&n.messages&&n.messages.push(new no("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof ul||t&&EK[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};u([h({json:{read:!1,write:!1}})],$a.prototype,"color",null),u([h({type:nSe,nonNullable:!0,json:{write:!0}}),ft(nX)],$a.prototype,"symbolLayers",null),u([h({type:dN})],$a.prototype,"styleOrigin",void 0),u([se("styleOrigin")],$a.prototype,"readStyleOrigin",null),u([le("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],$a.prototype,"writeStyleOrigin",null),u([h({type:y_,json:{read:!1}})],$a.prototype,"thumbnail",void 0),u([h({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],$a.prototype,"type",void 0),$a=u([M("esri.symbols.Symbol3D")],$a);const Fw=$a;let ab=class extends W{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};u([h({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],ab.prototype,"type",void 0),u([h({readOnly:!0})],ab.prototype,"visible",void 0),ab=u([M("esri.symbols.callouts.Callout3D")],ab);const $K=ab;var pN;let pT=pN=class extends W{constructor(e){super(e),this.color=new De("white")}clone(){return new pN({color:U(this.color)})}};u([h(rh({colorRequiredOnWrite:!0}))],pT.prototype,"color",void 0),pT=pN=u([M("esri.symbols.callouts.LineCallout3DBorder")],pT);const sSe=pT;var fN;let Uc=fN=class extends $K{constructor(e){super(e),this.type="line",this.color=new De([0,0,0,1]),this.size=uo(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new fN({color:U(this.color),size:this.size,border:U(this.border)})}};u([Ee({line:"line"})],Uc.prototype,"type",void 0),u([h(rh({colorRequiredOnWrite:!0}))],Uc.prototype,"color",void 0),u([h({...sl,json:{write:{isRequired:!0}}})],Uc.prototype,"size",void 0),u([h({type:sSe,json:{write:!0}})],Uc.prototype,"border",void 0),u([h({readOnly:!0})],Uc.prototype,"visible",null),Uc=fN=u([M("esri.symbols.callouts.LineCallout3D")],Uc);const xK=Uc;function zD(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function AK(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!zD(e)}function y8e(e){return e.type==="point-3d"||e.type==="label-3d"}function m8e(e){return e.horizontalAlignment==="center"}const MK={types:{key:"type",base:$K,typeMap:{line:xK}},json:{write:!0}};var yN;let Gy=yN=class extends W{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new yN({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};u([h({...sl,json:{write:{isRequired:!0}}})],Gy.prototype,"screenLength",void 0),u([h({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Gy.prototype,"minWorldLength",void 0),u([h({type:Number,json:{write:!0}})],Gy.prototype,"maxWorldLength",void 0),Gy=yN=u([M("esri.symbols.support.Symbol3DVerticalOffset")],Gy);const GD=Gy;var fT;const OK=ge.ofType({base:null,key:"type",typeMap:{text:n0}});let Vc=fT=class extends Fw{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new OK,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return AK(this)}hasVisibleVerticalOffset(){return zD(this)}clone(){return new fT({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail),callout:U(this.callout),verticalOffset:U(this.verticalOffset)})}static fromTextSymbol(e){return new fT({symbolLayers:new ge([n0.fromTextSymbol(e)])})}};u([h({type:GD,json:{write:!0}})],Vc.prototype,"verticalOffset",void 0),u([h(MK)],Vc.prototype,"callout",void 0),u([h({json:{read:!1,write:!1}})],Vc.prototype,"styleOrigin",void 0),u([h({type:OK})],Vc.prototype,"symbolLayers",void 0),u([Ee({LabelSymbol3D:"label-3d"},{readOnly:!0})],Vc.prototype,"type",void 0),Vc=fT=u([M("esri.symbols.LabelSymbol3D")],Vc);const Dx=Vc;var yT;const RK=ge.ofType({base:null,key:"type",typeMap:{line:i0,path:VD}}),oSe=ge.ofType({base:null,key:"type",typeMap:{line:i0,path:VD}});let lb=yT=class extends Fw{constructor(e){super(e),this.symbolLayers=new RK,this.type="line-3d"}clone(){return new yT({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleLineSymbol(e){return new yT({symbolLayers:new ge([i0.fromSimpleLineSymbol(e)])})}};u([h({type:RK,json:{type:oSe}})],lb.prototype,"symbolLayers",void 0),u([Ee({LineSymbol3D:"line-3d"},{readOnly:!0})],lb.prototype,"type",void 0),lb=yT=u([M("esri.symbols.LineSymbol3D")],lb);const Of=lb;var mT;const CK=ge.ofType({base:null,key:"type",typeMap:{fill:Mf}});let ub=mT=class extends Fw{constructor(e){super(e),this.symbolLayers=new CK,this.type="mesh-3d"}clone(){return new mT({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleFillSymbol(e){return new mT({symbolLayers:new ge([Mf.fromSimpleFillSymbol(e)])})}};u([h({type:CK})],ub.prototype,"symbolLayers",void 0),u([Ee({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],ub.prototype,"type",void 0),ub=mT=u([M("esri.symbols.MeshSymbol3D")],ub);const Uw=ub;let cb=class extends Pi{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};u([Ee({esriSLS:"simple-line"},{readOnly:!0})],cb.prototype,"type",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],cb.prototype,"width",void 0),cb=u([M("esri.symbols.LineSymbol")],cb);const aSe=cb;var mN;let xa=mN=class extends W{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new mN({color:U(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};u([h({type:["begin","end","begin-end"],json:{write:!0}})],xa.prototype,"placement",void 0),u([Ee({"line-marker":"line-marker"},{readOnly:!0}),h({json:{origins:{"web-map":{write:!1}}}})],xa.prototype,"type",void 0),u([h({type:bK})],xa.prototype,"style",void 0),u([le("style")],xa.prototype,"writeStyle",null),u([h({type:De,value:null,json:{write:{allowNull:!0}}})],xa.prototype,"color",null),u([se("color")],xa.prototype,"readColor",null),u([le("color")],xa.prototype,"writeColor",null),xa=mN=u([M("esri.symbols.LineSymbolMarker")],xa);const lSe=xa;var gN;const O3=new We({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Zl=gN=class extends aSe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=pt(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=pt(s)),o}clone(){var e;return new gN({color:U(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};u([Ee({esriSLS:"simple-line"},{readOnly:!0})],Zl.prototype,"type",void 0),u([h({type:O3.apiValues,json:{read:O3.read,write:O3.write}})],Zl.prototype,"style",void 0),u([h({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Zl.prototype,"cap",void 0),u([h({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Zl.prototype,"join",void 0),u([h({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":lSe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Zl.prototype,"marker",void 0),u([h({type:Number,json:{read:!1,write:!1}})],Zl.prototype,"miterLimit",void 0),Zl=gN=u([M("esri.symbols.SimpleLineSymbol")],Zl);const bs=Zl;let db=class extends Pi{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};u([h({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":bs}},json:{default:null,write:!0}})],db.prototype,"outline",void 0),u([h({type:["simple-fill","picture-fill"],readOnly:!0})],db.prototype,"type",void 0),db=u([M("esri.symbols.FillSymbol")],db);const IK=db;function uSe(e,t,r){return t.imageData?zW({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):NK(t.url,r)}function NK(e,t){if(!fs(e)){const r=dSe(t);if(r)return Sg(r,"images",e)}return Hg(e,t)}function cSe(e,t,r,i){if(Fu(e)){const n=of(e);if(!n)return;t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&af(r.url,t,"url",i)}else af(e,t,"url",i)}const PK={json:{read:{source:["imageData","url"],reader:uSe},write:{writer(e,t,r,i){cSe(e,t,this.source,i)}}}},LK={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=NK(t.url,r)),i}}}};function dSe(e){var n,s;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(n=r.parsedUrl)==null?void 0:n.path:i==="map-image"||i==="tile"?(s=e.url)==null?void 0:s.path:null}var vN;let Ds=vN=class extends IK{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=pt(r)),i!=null&&(n.height=pt(i)),n}clone(){const e=new vN({color:U(this.color),height:this.height,outline:U(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",U(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};u([Ee({esriPFS:"picture-fill"},{readOnly:!0})],Ds.prototype,"type",void 0),u([h(PK)],Ds.prototype,"url",void 0),u([h({type:Number,json:{write:!0}})],Ds.prototype,"xscale",void 0),u([h({type:Number,json:{write:!0}})],Ds.prototype,"yscale",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],Ds.prototype,"width",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],Ds.prototype,"height",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],Ds.prototype,"xoffset",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],Ds.prototype,"yoffset",void 0),u([h(LK)],Ds.prototype,"source",void 0),Ds=vN=u([M("esri.symbols.PictureFillSymbol")],Ds);const BD=Ds;let zc=class extends Pi{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};u([h({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],zc.prototype,"angle",void 0),u([h({type:["simple-marker","picture-marker"],readOnly:!0})],zc.prototype,"type",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],zc.prototype,"xoffset",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],zc.prototype,"yoffset",void 0),u([h({cast:e=>e==="auto"?e:pn(pt(e)),json:{write:!0}})],zc.prototype,"size",void 0),zc=u([M("esri.symbols.MarkerSymbol")],zc);const kK=zc;var bN;let Po=bN=class extends kK{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=pt(t)),r!=null&&(i.height=pt(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new bN({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",U(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};u([h({json:{write:!1}})],Po.prototype,"color",void 0),u([Ee({esriPMS:"picture-marker"},{readOnly:!0})],Po.prototype,"type",void 0),u([h(PK)],Po.prototype,"url",void 0),u([h(LK)],Po.prototype,"source",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],Po.prototype,"height",void 0),u([se("height",["height","size"])],Po.prototype,"readHeight",null),u([h({type:Number,cast:pt,json:{write:!0}})],Po.prototype,"width",void 0),u([h({json:{write:!1}})],Po.prototype,"size",void 0),Po=bN=u([M("esri.symbols.PictureMarkerSymbol")],Po);const Vw=Po;var ip;const DK=ge.ofType({base:null,key:"type",typeMap:{icon:Up,object:UD,text:n0}});let np=ip=class extends Fw{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new DK,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return AK(this)}hasVisibleVerticalOffset(){return zD(this)}clone(){return new ip({verticalOffset:U(this.verticalOffset),callout:U(this.callout),styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new ip({symbolLayers:new ge([Up.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new ip({symbolLayers:new ge([Up.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,n;if(((n=(i=e.data)==null?void 0:i.symbol)==null?void 0:n.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new ip(r!=null&&r.callout?{symbolLayers:new ge([Up.fromCIMSymbol(e)]),callout:new xK({size:.5,color:new De([0,0,0])}),verticalOffset:new GD({screenLength:40})}:{symbolLayers:new ge([Up.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new ip({symbolLayers:new ge([n0.fromTextSymbol(e)])})}};u([h({type:GD,json:{write:!0}})],np.prototype,"verticalOffset",void 0),u([h(MK)],np.prototype,"callout",void 0),u([h({type:DK,json:{origins:{"web-scene":{write:!0}}}})],np.prototype,"symbolLayers",void 0),u([Ee({PointSymbol3D:"point-3d"},{readOnly:!0})],np.prototype,"type",void 0),np=ip=u([M("esri.symbols.PointSymbol3D")],np);const $u=np;var hb;const jK=ge.ofType({base:null,key:"type",typeMap:{extrude:dK,fill:Mf,icon:Up,line:i0,object:UD,text:n0,water:TK}});let pb=hb=class extends Fw{constructor(e){super(e),this.symbolLayers=new jK,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&N_(ae.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&N_(ae.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(kd(()=>this.symbolLayers,"after-add",({item:t})=>e(t),il))}clone(){return new hb({styleOrigin:U(this.styleOrigin),symbolLayers:U(this.symbolLayers),thumbnail:U(this.thumbnail)})}static fromJSON(e){var r;const t=new hb;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new hb({symbolLayers:new ge([Mf.fromSimpleFillSymbol(e)])})}};u([h({type:jK,json:{write:!0}})],pb.prototype,"symbolLayers",void 0),u([Ee({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],pb.prototype,"type",void 0),pb=hb=u([M("esri.symbols.PolygonSymbol3D")],pb);const ih=pb;var _N;const R3=new We({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let sp=_N=class extends IK{constructor(...e){super(...e),this.color=new De([0,0,0,.25]),this.outline=new bs,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new _N({color:U(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};u([h()],sp.prototype,"color",void 0),u([h()],sp.prototype,"outline",void 0),u([Ee({esriSFS:"simple-fill"},{readOnly:!0})],sp.prototype,"type",void 0),u([h({type:R3.apiValues,json:{read:R3.read,write:R3.write}})],sp.prototype,"style",void 0),sp=_N=u([M("esri.symbols.SimpleFillSymbol")],sp);const Rf=sp;var wN;const C3=new We({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Aa=wN=class extends kK{constructor(...e){super(...e),this.color=new De([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new bs}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=pt(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new wN({angle:this.angle,color:U(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};u([h()],Aa.prototype,"color",void 0),u([le("color")],Aa.prototype,"writeColor",null),u([Ee({esriSMS:"simple-marker"},{readOnly:!0})],Aa.prototype,"type",void 0),u([h()],Aa.prototype,"size",void 0),u([h({type:C3.apiValues,json:{read:C3.read,write:C3.write}})],Aa.prototype,"style",void 0),u([h({type:String,json:{write:!0}})],Aa.prototype,"path",null),u([h({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":bs}},json:{default:null,write:!0}})],Aa.prototype,"outline",void 0),Aa=wN=u([M("esri.symbols.SimpleMarkerSymbol")],Aa);const cl=Aa;var SN;let er=SN=class extends Pi{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new kx,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return pt(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new SN({angle:this.angle,backgroundColor:U(this.backgroundColor),borderLineColor:U(this.borderLineColor),borderLineSize:this.borderLineSize,color:U(this.color),font:this.font&&this.font.clone(),haloColor:U(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};u([h({type:De,json:{write:!0}})],er.prototype,"backgroundColor",void 0),u([h({type:De,json:{write:!0}})],er.prototype,"borderLineColor",void 0),u([h({type:Number,json:{write:!0},cast:pt})],er.prototype,"borderLineSize",void 0),u([h({type:kx,json:{write:!0}})],er.prototype,"font",void 0),u([h({...wK,json:{write:!0}})],er.prototype,"horizontalAlignment",void 0),u([h({type:Boolean,json:{write:!0}})],er.prototype,"kerning",void 0),u([h({type:De,json:{write:!0}})],er.prototype,"haloColor",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],er.prototype,"haloSize",void 0),u([h({type:Boolean,json:{write:!0}})],er.prototype,"rightToLeft",void 0),u([h({type:Boolean,json:{write:!0}})],er.prototype,"rotated",void 0),u([h({type:String,json:{write:!0}})],er.prototype,"text",void 0),u([Ee({esriTS:"text"},{readOnly:!0})],er.prototype,"type",void 0),u([h({...SK,json:{write:!0}})],er.prototype,"verticalAlignment",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],er.prototype,"xoffset",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],er.prototype,"yoffset",void 0),u([h({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],er.prototype,"angle",void 0),u([h({type:Number,json:{write:!0}})],er.prototype,"width",void 0),u([h({type:Number})],er.prototype,"lineWidth",void 0),u([le("lineWidth")],er.prototype,"writeLineWidth",null),u([ft("lineWidth")],er.prototype,"castLineWidth",null),u([h(_K)],er.prototype,"lineHeight",void 0),u([le("lineHeight")],er.prototype,"writeLineHeight",null),er=SN=u([M("esri.symbols.TextSymbol")],er);const s0=er;var TN;let Lo=TN=class extends Pi{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:Ki.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new TN({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new V("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,r=t?this._fetchCacheKey:null;if(t!=null){const o=r&&t.get(r);if(o)return o.clone()}const{resolveWebStyleSymbol:i}=await ne(()=>import("./webStyleSymbolUtils-eOKnt7Sa.js"),__vite__mapDeps([180,181,182]));hr(e);const n=i(this,{portal:this.portal},e);n.catch(o=>{ae.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await n;return t!=null&&t.set(r,s.clone()),s}};u([h({json:{write:!1}})],Lo.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],Lo.prototype,"styleName",void 0),u([h({type:Ki,json:{write:!1}})],Lo.prototype,"portal",void 0),u([h({type:String,json:{read:Lk,write:af}})],Lo.prototype,"styleUrl",void 0),u([h({type:y_,json:{read:!1}})],Lo.prototype,"thumbnail",void 0),u([h({type:String,json:{write:!0}})],Lo.prototype,"name",void 0),u([Ee({styleSymbolReference:"web-style"},{readOnly:!0})],Lo.prototype,"type",void 0),u([h()],Lo.prototype,"_fetchCacheKey",null),Lo=TN=u([M("esri.symbols.WebStyleSymbol")],Lo);const zd=Lo;function _8e(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function FK(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Td={base:Pi,key:"type",typeMap:{"simple-fill":Rf,"picture-fill":BD,"picture-marker":Vw,"simple-line":bs,"simple-marker":cl,text:s0,"label-3d":Dx,"line-3d":Of,"mesh-3d":Uw,"point-3d":$u,"polygon-3d":ih,"web-style":zd,cim:th},errorContext:"symbol"},w8e={base:Pi,key:"type",typeMap:{"picture-marker":Vw,"simple-marker":cl,"point-3d":$u,cim:th},errorContext:"symbol"},S8e={base:Pi,key:"type",typeMap:{"simple-line":bs,"line-3d":Of,cim:th},errorContext:"symbol"},T8e={base:Pi,key:"type",typeMap:{"simple-fill":Rf,"picture-fill":BD,"polygon-3d":ih,cim:th},errorContext:"symbol"},hSe={base:Pi,key:"type",typeMap:{"picture-marker":Vw,"simple-marker":cl,text:s0,"web-style":zd,cim:th},errorContext:"symbol"},pSe=zg({types:Td}),UK={base:Pi,key:"type",typeMap:{"simple-fill":Rf,"picture-fill":BD,"picture-marker":Vw,"simple-line":bs,"simple-marker":cl,text:s0,"line-3d":Of,"mesh-3d":Uw,"point-3d":$u,"polygon-3d":ih,"web-style":zd,cim:th},errorContext:"symbol"},fSe={base:Pi,key:"type",typeMap:{text:s0,"label-3d":Dx},errorContext:"symbol"},rV={base:Pi,key:"type",typeMap:{"line-3d":Of,"mesh-3d":Uw,"point-3d":$u,"polygon-3d":ih,"web-style":zd,cim:th},errorContext:"symbol"},ySe={base:Pi,key:"type",typeMap:{"label-3d":Dx},errorContext:"symbol"},VK=oa(Td);var EN;function mSe(e){if(!e)return null;const t={};for(const r in e){const i=Du(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function gSe(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let $n=EN=class extends He.ClonableMixin(W){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:C2(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Tce(ae.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new EN({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:gSe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:W.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(n.action=i),e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}_watchMeshGeometryChanges(){this.addHandles([ao(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),ao(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};u([h({value:null,json:{read:mSe}})],$n.prototype,"aggregateGeometries",null),u([h({value:null})],$n.prototype,"attributes",null),u([h({value:null,types:Zg,json:{read:Du}})],$n.prototype,"geometry",null),u([h({type:Boolean})],$n.prototype,"isAggregate",void 0),u([h({clonable:"reference"})],$n.prototype,"layer",void 0),u([h({clonable:"reference"})],$n.prototype,"origin",void 0),u([h({type:r0})],$n.prototype,"popupTemplate",void 0),u([h({clonable:"reference"})],$n.prototype,"sourceLayer",void 0),u([h({value:null,types:Td})],$n.prototype,"symbol",null),u([h({clonable:!1,json:{read:!1,write:!1}})],$n.prototype,"_version",void 0),u([h({type:Boolean,value:!0})],$n.prototype,"visible",null),$n=EN=u([M("esri.Graphic")],$n);const ol=$n;let m_=class extends c_{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};u([Xk({Type:ol,ensureType:Or(ol)})],m_.prototype,"itemType",void 0),m_=u([M("esri.support.GraphicsCollection")],m_);let Gc=class extends Ae{constructor(t){super(t),this.view=null,this.baseLayerViews=new ge,this.referenceLayerViews=new ge,this._loadingHandle=ze(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},Xi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var r,i,n;if((r=this.view)!=null&&r.suspended)return!1;const t=(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};u([h({constructOnly:!0})],Gc.prototype,"view",void 0),u([h({readOnly:!0})],Gc.prototype,"baseLayerViews",void 0),u([h({readOnly:!0})],Gc.prototype,"referenceLayerViews",void 0),u([h({readOnly:!0})],Gc.prototype,"suspended",null),u([h({type:Boolean,readOnly:!0})],Gc.prototype,"updating",null),Gc=u([M("esri.views.BasemapView")],Gc);const vSe=Gc;function bSe(e){return"tryRecycleWith"in e}function _Se(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let wSe=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=gs(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ro(this._controller.signal,()=>{const n=new V("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}tryRecycle(t){if(!this.done||!this.layerView||!bSe(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let n=0;n<t.length;n++){const s=t[n];if(s.type!==r)continue;const o=this.layerView.tryRecycleWith(s,{signal:i});if(o){t.splice(n,1),this.layer=s;const l=this.layerView,d=l.view;return this.promise=Promise.race([o.then(()=>(hr(this._controller.signal),s.emit("layerview-destroy",{view:d,layerView:l}),d.emit("layerview-destroy",{view:d,layerView:l}),s.emit("layerview-create",{view:d,layerView:l}),d.emit("layerview-create",{view:d,layerView:l}),l)),new Promise((f,g)=>ro(this._controller.signal,()=>g(kt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var n,s;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,l;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),TSe(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new V("layer:view-not-supported","No layerview implementation was found");const g=await this.layerViewImporter.importLayerView(r);hr(t),o="default"in g?new g.default({layer:r,view:i}):new g({layer:r,view:i})}const d=()=>{l=nr(l),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};l=ro(t,d),hr(t);try{await o.when()}catch(g){throw d(),g}if(!((s=(n=this._map)==null?void 0:n.allLayers)==null?void 0:s.includes(r)))return d(),void this._deferred.reject(new V("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new V("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},js=class extends Ae{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Xp,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const n of r)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=gs(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Sw(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var d,f,g;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,n=[],s=this.view.ready,o=v=>{if(v!=null){for(const b of v)if(b){i.add(b);const S=this._layerLayerViewInfoMap.get(b);S&&s?S.start():S||this._recyclingInfoMap.has(b)||n.push(b),"layers"in b&&b.layers&&o(b.layers)}}};for(const v of this._rootCollectionNames)o(Xa(this,v));for(const[v,b]of this._layerLayerViewInfoMap)if(!i.has(v)){this._layerLayerViewInfoMap.delete(b.layer);const S=b.tryRecycle(n);S?(this.notifyChange("updating"),this._recyclingInfoMap.set(b.layer,b),S.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),this._layerLayerViewInfoMap.set(b.layer,b),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),b.destroy(),this._reschedule()})):b.destroy()}for(const[v,b]of this._recyclingInfoMap)i.has(v)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(b.layer),b.destroy());for(const v of n)this._createLayerView(v);this._refreshCollections();const l=[(d=r==null?void 0:r.ground)==null?void 0:d.layers,(f=r==null?void 0:r.basemap)==null?void 0:f.baseLayers,(g=r==null?void 0:r.basemap)==null?void 0:g.referenceLayers,r==null?void 0:r.layers].filter(v=>!!v);i.forEach(v=>"layers"in v&&l.push(v.layers)),this.addHandles(l.map(v=>this._watchUpdatingTracking.addOnCollectionChange(()=>v,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([kd(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ze(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),Pn)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),T3(this._recyclingInfoMap),T3(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(kt()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Aue(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(T3(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new V("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var s;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const n=i.layerView;return!(!n||!r||n.parent===r)||!!(i.done&&n&&"layers"in t&&((s=t.layers)!=null&&s.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,n))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Xa(this,t),Xa(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let n=0;for(const s of t){const o=this._layerLayerViewInfoMap.get(s);if(!(o!=null&&o.layerView))continue;const l=o.layerView;l.layer=s,l.parent=i,r.at(n)!==l&&r.splice(n,0,l),"layers"in s&&_Se(l)&&this._populateLayerViewsOwners(s.layers,l.layerViews,l),n+=1}n<r.length&&r.splice(n,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new wSe(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(Ni(i)||i.name==="cancelled:layerview-create")||ae.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};u([h()],js.prototype,"_workPromise",void 0),u([h({readOnly:!0})],js.prototype,"_watchUpdatingTracking",void 0),u([h({readOnly:!0})],js.prototype,"_layersToLayerViews",null),u([h({readOnly:!0})],js.prototype,"_rootCollectionNames",null),u([h()],js.prototype,"layerViewImporter",void 0),u([h()],js.prototype,"supportsGround",void 0),u([h({readOnly:!0})],js.prototype,"updating",null),u([h({readOnly:!0})],js.prototype,"updatingRemaining",null),u([h({constructOnly:!0})],js.prototype,"view",void 0),js=u([M("esri.views.LayerViewManager")],js);const SSe=js;function TSe(e){return e.createLayerView!==MD.prototype.createLayerView}let es=class extends Ae{constructor(t){super(t),this.factor=1.5,this.offset=Si(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};u([h({type:Number})],es.prototype,"factor",void 0),u([h({nonNullable:!0})],es.prototype,"offset",void 0),u([h()],es.prototype,"position",void 0),u([h({type:Number,range:{min:0}})],es.prototype,"size",void 0),u([h()],es.prototype,"maskUrl",void 0),u([h()],es.prototype,"maskEnabled",void 0),u([h()],es.prototype,"overlayUrl",void 0),u([h()],es.prototype,"overlayEnabled",void 0),u([h({readOnly:!0})],es.prototype,"version",null),u([h({type:Boolean})],es.prototype,"visible",void 0),es=u([M("esri.views.Magnifier")],es);const zK=es;let gT=class{constructor(t){this._observable=new Aw,this._map=new Map(t)}get size(){return Fe(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return Fe(this._observable),this._map.entries()}forEach(t,r){Fe(this._observable),this._map.forEach((i,n)=>t.call(r,i,n,this),r)}get(t){return Fe(this._observable),this._map.get(t)}has(t){return Fe(this._observable),this._map.has(t)}keys(){return Fe(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return Fe(this._observable),this._map.values()}[Symbol.iterator](){return Fe(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var $N;let Vp=$N=class extends W{constructor(e){super(e),this.name=null,this.code=null}clone(){return new $N({name:this.name,code:this.code})}};u([h({type:String,json:{write:{isRequired:!0}}})],Vp.prototype,"name",void 0),u([h({type:[String,Number],json:{write:{isRequired:!0}}})],Vp.prototype,"code",void 0),Vp=$N=u([M("esri.layers.support.CodedValue")],Vp);const ESe=new We({inherited:"inherited",codedValue:"coded-value",range:"range"});let fb=class extends W{constructor(t){super(t),this.name=null,this.type=null}};u([h({type:String,json:{write:!0}})],fb.prototype,"name",void 0),u([Ee(ESe),h({json:{write:{isRequired:!0}}})],fb.prototype,"type",void 0),fb=u([M("esri.layers.support.Domain")],fb);const jx=fb;var xN;let yb=xN=class extends jx{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new xN({codedValues:U(this.codedValues),name:this.name})}};u([h({type:[Vp],json:{write:{isRequired:!0}}})],yb.prototype,"codedValues",void 0),u([Ee({codedValue:"coded-value"})],yb.prototype,"type",void 0),yb=xN=u([M("esri.layers.support.CodedValueDomain")],yb);const Fx=yb;var AN;let vT=AN=class extends jx{constructor(e){super(e),this.type="inherited"}clone(){return new AN}};u([Ee({inherited:"inherited"})],vT.prototype,"type",void 0),vT=AN=u([M("esri.layers.support.InheritedDomain")],vT);const GK=vT;var MN;let By=MN=class extends jx{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new MN({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};u([h({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],By.prototype,"maxValue",void 0),u([h({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],By.prototype,"minValue",void 0),u([Ee({range:"range"})],By.prototype,"type",void 0),By=MN=u([M("esri.layers.support.RangeDomain")],By);const BK=By,qK={key:"type",base:jx,typeMap:{range:BK,"coded-value":Fx,inherited:GK}};function Ux(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return BK.fromJSON(e);case"codedValue":return Fx.fromJSON(e);case"inherited":return GK.fromJSON(e)}return null}const qD=new We({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var ON;const $Se=new We({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let zi=ON=class extends W{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?$Se.fromJSON(r.fieldValueType):null}clone(){var e;return new ON({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};u([h({type:String,json:{write:!0}})],zi.prototype,"alias",void 0),u([h({type:[String,Number],json:{write:{allowNull:!0}}})],zi.prototype,"defaultValue",void 0),u([h()],zi.prototype,"description",void 0),u([se("description")],zi.prototype,"readDescription",null),u([h({types:qK,json:{read:{reader:Ux},write:!0}})],zi.prototype,"domain",void 0),u([h({type:Boolean,json:{write:!0}})],zi.prototype,"editable",void 0),u([h({type:at,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],zi.prototype,"length",void 0),u([h({type:String,json:{write:!0}})],zi.prototype,"name",void 0),u([h({type:Boolean,json:{write:!0}})],zi.prototype,"nullable",void 0),u([Ee(qD)],zi.prototype,"type",void 0),u([h()],zi.prototype,"valueType",void 0),u([se("valueType",["description"])],zi.prototype,"readValueType",null),u([h({type:Boolean,json:{read:!1}})],zi.prototype,"visible",void 0),zi=ON=u([M("esri.layers.support.Field")],zi);const HD=zi;var RN;let qy=RN=class extends W{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new RN({mapLayerId:e,gdbVersion:t})}};u([Ee({mapLayer:"map-layer"}),h({json:{write:{isRequired:!0}}})],qy.prototype,"type",void 0),u([h({type:at,json:{write:{isRequired:!0}}})],qy.prototype,"mapLayerId",void 0),u([h({type:String,json:{write:!0}})],qy.prototype,"gdbVersion",void 0),qy=RN=u([M("esri.layers.support.source.MapLayerSource")],qy);var CN;let Yl=CN=class extends W{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:n};return new CN(s)}};u([Ee({queryTable:"query-table"}),h({json:{write:{isRequired:!0}}})],Yl.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Yl.prototype,"workspaceId",void 0),u([h({type:String,json:{write:!0}})],Yl.prototype,"query",void 0),u([h({type:String,json:{write:!0}})],Yl.prototype,"oidFields",void 0),u([h({type:Ge,json:{write:!0}})],Yl.prototype,"spatialReference",void 0),u([Ee(Sfe)],Yl.prototype,"geometryType",void 0),Yl=CN=u([M("esri.layers.support.source.QueryTableDataSource")],Yl);var IN;let Hy=IN=class extends W{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new IN({workspaceId:e,dataSourceName:t})}};u([Ee({raster:"raster"}),h({json:{write:{isRequired:!0}}})],Hy.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Hy.prototype,"dataSourceName",void 0),u([h({type:String,json:{write:!0}})],Hy.prototype,"workspaceId",void 0),Hy=IN=u([M("esri.layers.support.source.RasterDataSource")],Hy);var NN;let op=NN=class extends W{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new NN({workspaceId:e,gdbVersion:t,dataSourceName:r})}};u([Ee({table:"table"}),h({json:{write:{isRequired:!0}}})],op.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],op.prototype,"workspaceId",void 0),u([h({type:String,json:{write:!0}})],op.prototype,"gdbVersion",void 0),u([h({type:String,json:{write:!0}})],op.prototype,"dataSourceName",void 0),op=NN=u([M("esri.layers.support.source.TableDataSource")],op);var PN,LN;const xSe=Wr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ts=PN=class extends W{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return iV()(e,t,r)}castLeftTableSource(e){return oa(kN(),e)}readRightTableSource(e,t,r){return iV()(e,t,r)}castRightTableSource(e){return oa(kN(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:n};return new PN(s)}};u([Ee({joinTable:"join-table"}),h({json:{write:{isRequired:!0}}})],ts.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],ts.prototype,"leftTableKey",void 0),u([h({type:String,json:{write:!0}})],ts.prototype,"rightTableKey",void 0),u([h({json:{write:!0}})],ts.prototype,"leftTableSource",void 0),u([se("leftTableSource")],ts.prototype,"readLeftTableSource",null),u([ft("leftTableSource")],ts.prototype,"castLeftTableSource",null),u([h({json:{write:!0}})],ts.prototype,"rightTableSource",void 0),u([se("rightTableSource")],ts.prototype,"readRightTableSource",null),u([ft("rightTableSource")],ts.prototype,"castRightTableSource",null),u([Ee(xSe)],ts.prototype,"joinType",void 0),ts=PN=u([M("esri.layers.support.source.JoinTableDataSource")],ts);let I3=null;function iV(){return I3||(I3=zg({types:kN()})),I3}let N3=null;function kN(){return N3||(N3={key:"type",base:null,typeMap:{"data-layer":Ho,"map-layer":qy}}),N3}const ASe={key:"type",base:null,typeMap:{"join-table":ts,"query-table":Yl,raster:Hy,table:op}};let Ho=LN=class extends W{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new LN({fields:e,dataSource:t})}};u([Ee({dataLayer:"data-layer"}),h({json:{write:{isRequired:!0}}})],Ho.prototype,"type",void 0),u([h({type:[HD],json:{write:!0}})],Ho.prototype,"fields",void 0),u([h({types:ASe,json:{write:!0}})],Ho.prototype,"dataSource",void 0),Ho=LN=u([M("esri.layers.support.source.DataLayerSource")],Ho),Ho.from=Or(Ho);let ap=class extends He.ClonableMixin(W){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};u([h({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],ap.prototype,"onFields",void 0),u([h({type:String,json:{write:!0}})],ap.prototype,"operator",void 0),u([h({type:String,json:{write:!0}})],ap.prototype,"searchTerm",void 0),u([h({type:String,json:{write:!0}})],ap.prototype,"searchType",void 0),ap=u([M("esri.rest.support.FullTextSearch")],ap);const MSe=ap;var DN;const nV=new We({upperLeft:"upper-left",lowerLeft:"lower-left"});let lp=DN=class extends W{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new DN(U({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};u([h({type:Ut,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],lp.prototype,"extent",void 0),u([h({type:["view","edit"],json:{write:!0}})],lp.prototype,"mode",void 0),u([h({type:String,json:{read:nV.read,write:nV.write}})],lp.prototype,"originPosition",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],lp.prototype,"tolerance",void 0),lp=DN=u([M("esri.rest.support.QuantizationParameters")],lp);const HK=lp,OSe=new We({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var jN;const sV=new We({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let ko=jN=class extends W{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=U(e))}clone(){return new jN({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:U(this.statisticParameters)})}};u([h({type:Number,json:{write:!0}})],ko.prototype,"maxPointCount",void 0),u([h({type:Number,json:{write:!0}})],ko.prototype,"maxRecordCount",void 0),u([h({type:Number,json:{write:!0}})],ko.prototype,"maxVertexCount",void 0),u([h({type:String,json:{write:!0}})],ko.prototype,"onStatisticField",void 0),u([h({type:String,json:{write:!0}})],ko.prototype,"outStatisticFieldName",void 0),u([h({type:String,json:{read:{source:"statisticType",reader:sV.read},write:{target:"statisticType",writer:sV.write}}})],ko.prototype,"statisticType",void 0),u([h({type:Object})],ko.prototype,"statisticParameters",void 0),u([le("statisticParameters")],ko.prototype,"writeStatisticParameters",null),ko=jN=u([M("esri.rest.support.StatisticDefinition")],ko);const RSe=ko;var bT;const CSe=new We({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let je=bT=class extends W{static from(e){return mw(bT,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new bT(U({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};je.MAX_MAX_RECORD_COUNT_FACTOR=5,u([h({json:{write:!0}})],je.prototype,"aggregateIds",void 0),u([h({type:Boolean,json:{write:!0}})],je.prototype,"cacheHint",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"compactGeometryEnabled",void 0),u([h({json:{write:!0}})],je.prototype,"datumTransformation",void 0),u([ft("datumTransformation")],je.prototype,"castDatumTransformation",null),u([h({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"defaultSpatialReferenceEnabled",void 0),u([h({type:Number,json:{write:!0}})],je.prototype,"distance",void 0),u([h({type:Ho,json:{write:!0}})],je.prototype,"dynamicDataSource",void 0),u([h({type:String,json:{write:!0}})],je.prototype,"formatOf3DObjects",void 0),u([h({type:[MSe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],je.prototype,"fullText",void 0),u([h({type:String,json:{write:!0}})],je.prototype,"gdbVersion",void 0),u([h({types:Zg,json:{read:Du,write:!0}})],je.prototype,"geometry",void 0),u([h({type:Number,json:{write:!0}})],je.prototype,"geometryPrecision",void 0),u([h({type:[String],json:{write:!0}})],je.prototype,"groupByFieldsForStatistics",void 0),u([h({type:String,json:{write:!0}})],je.prototype,"having",void 0),u([h({type:Date})],je.prototype,"historicMoment",void 0),u([le("historicMoment")],je.prototype,"writeHistoricMoment",null),u([h({type:Number,json:{write:!0}})],je.prototype,"maxAllowableOffset",void 0),u([h({type:Number,cast:e=>e<1?1:e>je.MAX_MAX_RECORD_COUNT_FACTOR?je.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],je.prototype,"maxRecordCountFactor",void 0),u([h({type:["xyFootprint"],json:{write:!0}})],je.prototype,"multipatchOption",void 0),u([h({type:Number,json:{read:{source:"resultRecordCount"}}})],je.prototype,"num",void 0),u([h({json:{write:!0}})],je.prototype,"objectIds",void 0),u([h({type:[String],json:{write:!0}})],je.prototype,"orderByFields",void 0),u([h({type:[String],json:{write:!0}})],je.prototype,"outFields",void 0),u([h({type:Ge,json:{name:"outSR",write:!0}})],je.prototype,"outSpatialReference",void 0),u([h({type:[RSe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],je.prototype,"outStatistics",void 0),u([h({json:{write:!0}})],je.prototype,"parameterValues",void 0),u([le("parameterValues")],je.prototype,"writeParameterValues",null),u([h({type:Qe,json:{write:!0}})],je.prototype,"pixelSize",void 0),u([h({type:HK,json:{write:!0}})],je.prototype,"quantizationParameters",void 0),u([h({type:[Object],json:{write:!0}})],je.prototype,"rangeValues",void 0),u([h({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],je.prototype,"relationParameter",void 0),u([h({type:String,json:{write:!0}})],je.prototype,"resultType",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnCentroid",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnDistinctValues",void 0),u([h({type:Boolean,json:{default:!0,write:!0}})],je.prototype,"returnExceededLimitFeatures",void 0),u([h({type:Boolean,json:{write:!0}})],je.prototype,"returnGeometry",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnQueryGeometry",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"returnM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],je.prototype,"returnZ",void 0),u([h({type:Boolean,json:{write:!0}})],je.prototype,"returnTrueCurves",void 0),u([h({type:Ge,json:{write:!0}})],je.prototype,"sourceSpatialReference",void 0),u([Ee(OSe,{ignoreUnknown:!1,name:"spatialRel"})],je.prototype,"spatialRelationship",void 0),u([h({type:Number,json:{read:{source:"resultOffset"}}})],je.prototype,"start",void 0),u([le("start"),le("num")],je.prototype,"writeStart",null),u([h({type:String,json:{write:!0}})],je.prototype,"sqlFormat",void 0),u([h({type:String,json:{write:!0}})],je.prototype,"text",void 0),u([h({type:si,json:{write:!0}})],je.prototype,"timeExtent",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],je.prototype,"timeReferenceUnknownClient",void 0),u([Ee(CSe,{ignoreUnknown:!1}),h({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],je.prototype,"units",void 0),u([h({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],je.prototype,"where",void 0),u([le("where")],je.prototype,"writeWhere",null),je=bT=u([M("esri.rest.support.Query")],je);const al=je;function FS(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let Ma=class extends aa.EventedAccessor{constructor(t){super(t),this._selectionMap=new gT,this._sources=new ge,this._trashCan=[],this._layerEditHandles=new ge,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([ze(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),kd(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const n of r.removed)i.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new ge;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(FS(r)&&!ybe(r)||Hs(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(nr)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){ju(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:n,selections:s}=this,o=(t!==void 0?s.filter(l=>t.includes(l.layer)):s).filter(l=>l.selection.length>0).map(async l=>{const{layer:d,selection:f}=l,g=Hs(d)?d.parent:d;if(g==null||!aV(g))return null;if(i==="layer")return lV(g,f,r);if(oV(g))return null;const v=await n.whenLayerView(g).catch(()=>null);return v?lV(v,f,r):null});return(await Promise.all(o)).filter(l=>l!=null)}updateSelection(t){const r=new Map;for(const[s,o]of this._selectionMap)r.set(s,[...o.selection]);let i=!1;const n=t.current.concat(t.added);for(const s of n){const o=s.sourceLayer,l=s.getObjectId();if(this.sources.includes(o)&&(FS(o)||Hs(o))&&l!==null){const d=fw(r,o,()=>[]);d.includes(l)||(d.push(l),i=!0)}}for(const s of t.removed){const o=s.sourceLayer,l=s.getObjectId();if(this.sources.includes(o)&&(FS(o)||Hs(o))&&l!==null){const d=r.get(o),f=d==null?void 0:d.indexOf(l);f!==void 0&&f>=0&&(d==null||d.splice(f,1),i=!0)}}if(i){const{_selectionMap:s,_trashCan:o}=this,l=[];for(const[d,f]of r){const g=s.get(d);g!==void 0&&o.push(g),s.set(d,{selection:f}),l.push({layer:d,selection:f,...h8(g!==void 0?g.selection:[],f)})}this._onSelectionChange(l)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),n=i!==void 0?[...i.selection]:[];for(const s of r)n.includes(s)||n.push(s);this._setSelection(t,n)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const n=[];for(const s of i.selection)r.includes(s)||n.push(s);this._setSelection(t,n)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const n=new Set(i.selection),s=new Set(r),o=sde(n,s);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,n]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const l=this._trashCan.pop();(o=l==null?void 0:l.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:n}=this,s=this._vizTaskId;for(const l of t){const d=i.get(l),f=Hs(l)?l.parent:l;if(f!=null&&aV(f)){if(oV(f))continue;r.whenLayerView(f).then(g=>{var v;(v=d==null?void 0:d.highlightHandle)==null||v.remove(),d!=null&&n&&s===this._vizTaskId&&"highlight"in g&&typeof g.highlight=="function"&&d.selection.length>0&&(d.highlightHandle=g.highlight(d.selection,this.highlightName))}).catch(()=>{var g;(g=d==null?void 0:d.highlightHandle)==null||g.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(nr);for(const t of this.sources){const r=Hs(t)?t.parent:t;if(r!=null&&FS(r)){const i=r.on("edits",n=>{this._handleEditChanges(n,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(Lu);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!NSe(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const n={layer:t,selection:[...r],...h8(i!==void 0?i.selection:[],r)};this._onSelectionChange([n])}}};u([h({readOnly:!0,nonNullable:!0})],Ma.prototype,"selections",null),u([h({readOnly:!0,nonNullable:!0})],Ma.prototype,"count",null),u([h({constructOnly:!0,nonNullable:!0})],Ma.prototype,"view",void 0),u([h({readOnly:!0,nonNullable:!0})],Ma.prototype,"hasSelection",null),u([h()],Ma.prototype,"showHighlight",void 0),u([h()],Ma.prototype,"sources",null),u([h()],Ma.prototype,"highlightName",void 0),Ma=u([M("esri.views.SelectionManager")],Ma);const oV=e=>{var t;return Hs(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},ISe=e=>e.layer!==void 0,aV=e=>(e==null?void 0:e.when)!==void 0,NSe=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1}return!0},lV=async(e,t,r={})=>{let i;if(ISe(e)){const n=e;i=n===void 0?null:await n.queryFeatures(new al({...r,objectIds:t})).then(s=>({data:s,layer:e.layer}))}else{const n=e;i=n===void 0?null:await n.queryFeatures(new al({...r,objectIds:t})).then(s=>({data:s,layer:n}))}return i},PSe=Ma;let mb=class extends He.ClonableMixin(Ae){constructor(t){super(t),this.accentColor=new De([255,127,0]),this.textColor=new De([255,255,255])}};u([h({type:De,nonNullable:!0})],mb.prototype,"accentColor",void 0),u([h({type:De,nonNullable:!0})],mb.prototype,"textColor",void 0),mb=u([M("esri.views.Theme")],mb);const FN=mb;var uV;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(uV||(uV={}));const WK=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],ZK={};function YK(e){return!!ZK[e]}function LSe(e){for(const t of e)if(!YK(t))return!1;return!0}WK.forEach(e=>{ZK[e]=!0});let JK=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},n)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(n,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!LSe(s))return s.some(YK)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,l;Array.isArray(r)?l=r:(o=r,l=[]),typeof i=="function"?o=i:n=i,n=n??Od.DEFAULT;const d=this._createUniqueGroupName(),f=new kSe(this.view,s,l,o);this._handlers.set(d,{handler:f,priority:n});for(const g of s){const v=this._handlerCounts.get(g)||0;this._handlerCounts.set(g,v+1)}return this.inputManager&&this.inputManager.installHandlers(d,[f],n),vt(()=>this._removeHandler(d,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const n=this._handlerCounts.get(i);n===void 0||(n===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},kSe=class extends li{constructor(t,r,i,n){super(!0),this._latestDragStart=void 0,this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(FSe(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(USe(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(VSe(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(zSe(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>n(GSe(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const l=this._wrapDrag(o);l&&n(l)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(BSe(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(qSe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(wv(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(wv(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(wv(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(HSe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(WSe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(wv(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(wv(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(ZSe(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(DSe(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(jSe(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:l}=r;if(s==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const d=r.pointer.native,f=r.buttons,{cancelable:g,timestamp:v}=t,b={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:b,pointerType:o,button:l,buttons:f,radius:r.radius,angle:TW(r.angle),native:d,timestamp:v,cancelable:g,stopPropagation:()=>t.stopPropagation(),async:S=>t.async(S),preventDefault:()=>t.preventDefault()}}};function DSe(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function jSe(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function FSe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:l,eventId:d}=t.data,{cancelable:f,timestamp:g}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:l,timestamp:g,screenPoint:Si(s,o),mapPoint:zw(e,s,o),eventId:d,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:v=>t.async(v),preventDefault:()=>t.preventDefault()}}function USe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:l,eventId:d}=t.data,{cancelable:f,timestamp:g}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:l,timestamp:g,mapPoint:zw(e,s,o),eventId:d,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:v=>t.async(v),preventDefault:()=>t.preventDefault()}}function VSe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:l,eventId:d}=t.data,f=l.pointerId,{cancelable:g,timestamp:v}=t;return{type:"immediate-click",pointerId:f,pointerType:r,button:i,buttons:n,x:s,y:o,native:l,timestamp:v,mapPoint:zw(e,s,o),eventId:d,cancelable:g,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}function zSe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:l,eventId:d}=t.data,f=l.pointerId,{cancelable:g,timestamp:v}=t;return{type:"immediate-double-click",pointerId:f,pointerType:r,button:i,buttons:n,x:s,y:o,native:l,timestamp:v,mapPoint:zw(e,s,o),eventId:d,cancelable:g,stopPropagation:()=>t.stopPropagation(),async:b=>t.async(b),preventDefault:()=>t.preventDefault()}}function GSe(e,t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:l}=t.data,{cancelable:d,timestamp:f}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:l,timestamp:f,mapPoint:zw(e,s,o),cancelable:d,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}function zw(e,t,r){return e.toMap(Si(t,r),{exclude:[]})}function BSe(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:n,timestamp:s}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function qSe(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:n}=e;return{type:"key-up",key:t,native:r,timestamp:n,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function wv(e,t){const{x:r,y:i,button:n,buttons:s,native:o,eventId:l}=e.data,d=o.pointerId,f=o.pointerType,{cancelable:g,timestamp:v}=e;return{type:t,x:r,y:i,pointerId:d,pointerType:f,button:n,buttons:s,native:o,timestamp:v,eventId:l,cancelable:g,stopPropagation:()=>e.stopPropagation(),async:b=>e.async(b),preventDefault:()=>e.preventDefault()}}function HSe(e){const{x:t,y:r,buttons:i,native:n,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,l=e.data.startEvent.native.pointerId,d=e.data.startEvent.native.pointerType,f=e.data.action,g={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:v,timestamp:b}=e;return{type:"pointer-drag",x:t,y:r,pointerId:l,pointerType:d,button:o,buttons:i,action:f,origin:g,native:n,timestamp:b,eventId:s,cancelable:v,stopPropagation:()=>e.stopPropagation(),async:S=>e.async(S),preventDefault:()=>e.preventDefault()}}function WSe(e){const{cancelable:t,data:r,timestamp:i}=e,{x:n,y:s,deltaY:o,native:l}=r;return{type:"mouse-wheel",x:n,y:s,deltaY:o,native:l,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}function ZSe(e){const{action:t,state:r,device:i}=e.data,{cancelable:n,timestamp:s}=e,{buttons:o,axes:l}=r;return{type:"gamepad",device:i,timestamp:s,action:t,buttons:o,axes:l,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}var Y_,cV,dV;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Y_||(Y_={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(cV||(cV={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(dV||(dV={}));function YSe(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return ae.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function UN(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Y_.USER)&&e.getEditableFlag(Y_.MANAGER)}function Oa(e){return Si(e.x,e.y)}function XK(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?Si(t.clientX-r.left,t.clientY-r.top):Si(0,0)}function KK(e,t){return t instanceof Event?XK(e,t):Oa(t)}function QK(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let JSe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":pV(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!fV(t))break;const n=Oa(t),s=Ty(n,t.pointerType,r.forEachTool);if(s==null)break;const o=s.manipulator,l=s.tool;o==null||l==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&l!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:l,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!fV(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=n==null?void 0:n.manipulator,o=n==null?void 0:n.tool;if(s==null||o==null)break;const l=Oa(t);l.x=so(l.x,0,r.view.width),l.y=so(l.y,0,r.view.height);const d=n.start,f=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,f?s.events.emit("drag",{action:"update",start:d,screenPoint:l}):s.events.emit("drag",{action:"start",start:d,screenPoint:l,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:s,start:d}));break;case"end":s.dragging=!1,f&&s.events.emit("drag",{action:"end",start:d,screenPoint:l}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=Oa(t),s=Ty(n,t.pointerType,r.forEachTool);if(XSe(t)||r.forEachTool(f=>{if((s==null||s.tool!==f||f.automaticManipulatorSelection)&&f.manipulators){let g=!1;f.manipulators.forEach(({manipulator:v})=>{v.selected&&(v.selected=!1,g=!0)}),g&&f.onManipulatorSelectionChanged&&f.onManipulatorSelectionChanged()}}),s==null)break;const{manipulator:o,tool:l}=s;if(!o.interactive)break;o.selectable&&l.automaticManipulatorSelection&&(o.selected=!o.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const d=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:d,stopPropagation:i}),P3(o,i);break}case"click":{const n=Oa(t),s=Ty(n,t.pointerType,r.forEachTool),o=s==null?void 0:s.manipulator;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:l}),i();break}case"double-click":{const n=Oa(t),s=Ty(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),P3(o,i);break}case"immediate-double-click":{const n=Oa(t),s=Ty(n,t.pointerType,r.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const l=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),t.pointerType==="mouse"&&P3(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:Oa(r)}),this._grabbedManipulators.forEach(({manipulator:n},s)=>{n===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var n;const i=(n=this._grabbedManipulators.get(t.pointerId))==null?void 0:n.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Oa(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=hV(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=hV(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:n})=>{r.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{i.add(n)}),t(n=>{n.hasGrabbedManipulators=r.has(n),n.hasHoveredManipulators=i.has(n);const s=this._grabbedManipulators.values(),o=Ece(s,({tool:l})=>l===n);n.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},n=!0,s){const o=(l,d)=>l===t&&(s==null||s===d);this._grabbedManipulators.forEach(({tool:l,manipulator:d,pointerType:f},g)=>{o(l,d)&&(this._grabbedManipulators.delete(g),d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:f}))}),this._draggedManipulators.forEach(({tool:l,manipulator:d},f)=>{o(l,d)&&(this._draggedManipulators.delete(f),d.dragging=!1,d.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:l,manipulator:d},f)=>{o(l,d)&&(this._hoveredManipulators.delete(f),d.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Si(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!pV(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Oa(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){var l;let s=Ty(t,i,n);const o=(l=this._hoveredManipulators.get(r))==null?void 0:l.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(r,s)):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)})}};function hV(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Ty(e,t,r){let i=null;return r(n=>{if(n.manipulators==null||!UN(n))return!1;const s=n.manipulators.intersect(e,t);return s!=null&&(i={tool:n,manipulator:s},!0)}),i}function pV(e){return e==="mouse"}function fV(e){return e.pointerType!=="mouse"||e.button===0}function XSe(e){return!!e.native.shiftKey}function P3(e,t){e!=null&&e.consumesClicks&&t()}const yV="attached",L3="tools",KSe=1e3;let Ra=class extends Ae{constructor(t){super(t),this._updatingHandles=new Xp,this._clock=Bg,this._manipulatorState=new JSe,this.tools=new ge,this.cursor=null,this._interacting=!1,this._interactingTimeout=KSe,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(WK,t=>{this._handleInputEvent(t)},Od.TOOL),...YSe(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void ae.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const n=UN(i);this.activeTool!=null&&n||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=nr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([ze(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],yV):this.addHandles(ze(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(yV),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(n=>{!r&&n.visible&&n.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(L3),this._forEachTool(t=>{if(t instanceof Ae){const r=ze(()=>[t.cursor,t.visible,t.editable],()=>{UN(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,L3)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],L3)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,Y_.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};u([h({constructOnly:!0,nonNullable:!0})],Ra.prototype,"view",void 0),u([h({value:null})],Ra.prototype,"activeTool",null),u([h({readOnly:!0,type:ge})],Ra.prototype,"tools",void 0),u([h({readOnly:!0})],Ra.prototype,"cursor",void 0),u([h({readOnly:!0})],Ra.prototype,"updating",null),u([h()],Ra.prototype,"_interacting",void 0),u([h({readOnly:!0})],Ra.prototype,"interacting",null),Ra=u([M("esri.views.ToolViewManager")],Ra);const QSe=new De("cyan"),e2e=1,t2e=.25,r2e=new De("black"),i2e=.4,n2e=.2,j8e=.25,eQ="default",s2e="temporary",o2e=new De("yellow");var VN;let rs=VN=class extends Ae{constructor(e){super(e),this.name=eQ,this.color=QSe.clone(),this.haloColor=null,this.haloOpacity=e2e,this.fillOpacity=t2e,this.shadowColor=r2e.clone(),this.shadowOpacity=i2e,this.shadowDifference=n2e,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new VN({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};u([h({type:String,constructOnly:!0,nonNullable:!0})],rs.prototype,"name",void 0),u([h({type:De,nonNullable:!0})],rs.prototype,"color",void 0),u([h({type:De})],rs.prototype,"haloColor",void 0),u([h({nonNullable:!0})],rs.prototype,"haloOpacity",void 0),u([h({nonNullable:!0})],rs.prototype,"fillOpacity",void 0),u([h({type:De,nonNullable:!0})],rs.prototype,"shadowColor",void 0),u([h({nonNullable:!0})],rs.prototype,"shadowOpacity",void 0),u([h({nonNullable:!0})],rs.prototype,"shadowDifference",void 0),u([h({nonNullable:!0})],rs.prototype,"haloWidth",void 0),u([h({nonNullable:!0})],rs.prototype,"haloBlur",void 0),rs=VN=u([M("esri.views.support.HighlightOptions")],rs);const Rd=rs;function a2e(){return new(ge.ofType(Rd))([new Rd({name:eQ}),new Rd({name:s2e,color:o2e})])}let Wy=class extends Ae{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":l2e.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return u2e[this.deviceType]}};u([h({nonNullable:!0,readOnly:!0})],Wy.prototype,"nativeIndex",void 0),u([h({type:String,readOnly:!0})],Wy.prototype,"deviceType",null),u([h({type:Number,readOnly:!0})],Wy.prototype,"axisThreshold",null),Wy=u([M("esri.views.input.gamepad.GamepadInputDevice")],Wy);const WD=Wy,l2e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),u2e={standard:.15,spacemouse:.025,unknown:0};let gb=class extends Ae{constructor(...t){super(...t),this.devices=new ge,this.enabledFocusMode="document"}};u([h({type:ge.ofType(WD),readOnly:!0})],gb.prototype,"devices",void 0),u([h({type:["document","view","none"]})],gb.prototype,"enabledFocusMode",void 0),gb=u([M("esri.views.input.gamepad.GamepadSettings")],gb);const c2e=gb;let _T=class extends Ae{constructor(){super(...arguments),this.gamepad=new c2e}};u([h({readOnly:!0})],_T.prototype,"gamepad",void 0),_T=u([M("esri.views.input.Input")],_T);const d2e=_T,tQ=()=>Mt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,k3=()=>h({type:["pan","rotate","zoom","none"],nonNullable:!0});let up=class extends Ae{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};u([k3()],up.prototype,"dragPrimary",void 0),u([k3()],up.prototype,"dragSecondary",void 0),u([k3()],up.prototype,"dragTertiary",void 0),u([h({type:["zoom","none"],nonNullable:!0})],up.prototype,"mouseWheel",void 0),up=u([M("esri.views.navigation.NavigationActionMap")],up);const ZD=up;let Bc=class extends Ae{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};u([h({type:Boolean,nonNullable:!0})],Bc.prototype,"enabled",void 0),u([h({type:WD})],Bc.prototype,"device",void 0),u([h({type:["pan","zoom"],nonNullable:!0})],Bc.prototype,"mode",void 0),u([h({type:["forward-down","forward-up"],nonNullable:!0})],Bc.prototype,"tiltDirection",void 0),u([h({type:Number,nonNullable:!0})],Bc.prototype,"velocityFactor",void 0),Bc=u([M("esri.views.navigation.gamepad.GamepadSettings")],Bc);const rQ=Bc;let qc=class extends Ae{constructor(t){super(t),this.actionMap=new ZD,this.browserTouchPanEnabled=!0,this.gamepad=new rQ,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!tQ()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){Sce(ae.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};u([h({type:ZD,nonNullable:!0})],qc.prototype,"actionMap",void 0),u([h({type:Boolean})],qc.prototype,"browserTouchPanEnabled",void 0),u([h({type:rQ,nonNullable:!0})],qc.prototype,"gamepad",void 0),u([h({type:Boolean})],qc.prototype,"momentumEnabled",void 0),u([h({type:Boolean})],qc.prototype,"mouseWheelZoomEnabled",null),qc=u([M("esri.views.navigation.Navigation")],qc);const Vx=qc;function q8e(e,t,r){const i=iQ(e),n=t,s=h2e(i,n,r);if(i){const o=Nw.deriveUnitFromSR(i,e.spatialReference).heightUnit;if(!r&&o!==i.heightUnit){const l=new V("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new V("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:l})}}if(!p2e(e)||s===Nn.Unsupported)return new V("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(s){case Nn.Units:{const o=(i==null?void 0:i.heightUnit)||"unknown",l=(n==null?void 0:n.heightUnit)||"unknown",d=new V("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${l})`,{layerUnit:o,sceneUnit:l});return new V("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:d})}case Nn.HeightModel:{const o=(i==null?void 0:i.heightModel)||"unknown",l=(n==null?void 0:n.heightModel)||"unknown",d=new V("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${l})`,{layerHeightModel:o,sceneHeightModel:l});return new V("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:d})}case Nn.CRS:{const o=(i==null?void 0:i.vertCRS)||"unknown",l=(n==null?void 0:n.vertCRS)||"unknown",d=new V("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${l})`,{layerDatum:o,sceneDatum:l});return new V("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:n,error:d})}}return null}function h2e(e,t,r){if(!mV(e)||!mV(t))return Nn.Unsupported;if(e==null||t==null)return Nn.Ok;if(!r&&e.heightUnit!==t.heightUnit)return Nn.Units;if(e.heightModel!==t.heightModel)return Nn.HeightModel;switch(e.heightModel){case"gravity-related-height":return Nn.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Nn.Ok:Nn.CRS;default:return Nn.Unsupported}}var Nn;function mV(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function p2e(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!oQ(e)}function iQ(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?Pd(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&nQ(e)&&e.heightModelInfo?e.heightModelInfo:oQ(e)?Nw.deriveUnitFromSR(y2e,e.spatialReference):null}function nQ(e){return"heightModelInfo"in e}function sQ(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function oQ(e){return sQ(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):aQ(e)}function f2e(e){return e.layers!=null||aQ(e)||sQ(e)||nQ(e)}function aQ(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Nn||(Nn={}));const y2e=new Nw({heightModel:"gravity-related-height"});var l$;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(l$||(l$={}));let zN,D3=null;async function m2e(e){D3||(D3=ne(()=>import("./geometryServiceUtils-Z81LwfSn.js"),[]).then(t=>zN=t)),await D3,hr(e)}async function lQ(e,t,r,i){if(!e)return null;const n=e.spatialReference;return Xd()||nl(n,t)?Kd(e,t):zN?zN.projectGeometry(e,t,r,i):(await Promise.race([m2e(i),Ud(i)]),lQ(e,t,r,i))}let Ft=class extends Ae{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=bg(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,n,s,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(n=t==null?void 0:t.basemap)==null?void 0:n.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(s=t==null?void 0:t.ground)==null?void 0:s.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,i=>{const n=this._getSupportedSpatialReferences(i);if(n.length>0){const s=this._narrowDownSpatialReferenceCandidates(t,n);s!=null&&(t=s)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:(r==null?void 0:r.spatialReference)??null,viewingMode:(r==null?void 0:r.viewingMode)??null,updating:!1}}get _tileInfoTask(){var s,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(s=this.map)==null?void 0:s.call(this),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const n=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],l=>{var d;return!(!("tileInfo"in l)||!((d=l.tileInfo)!=null&&d.spatialReference.equals(r)))&&(i=l,!0)},l=>"tileInfo"in l);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,n=>{var o,l;const s=iQ(n);return!!s&&(t={heightModelInfo:s,vcsWkid:(o=n.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(l=n.spatialReference)==null?void 0:l.latestVcsWkid},!0)},n=>f2e(n));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,i=>{const n="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(l=>l.spatialReference.equals(this.spatialReference))??s;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const l of n)t.push({extent:l,layer:i});return!1});return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),n=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=bg(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:n.clone(),task:Mw(async s=>{try{const o=await lQ(i.extent,n,"portalItem"in i.layer?i.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(ms(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const n of t)for(const s of r){if(!n.spatialReference.equals(s.spatialReference))continue;const o=v2e(n.viewingMode,s.viewingMode);if(o!==!1){i.push({spatialReference:n.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==l$.Local)&&(t=t.filter(({viewingMode:i})=>i!==l$.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const n of r){const s=this.getSpatialReferenceSupport(n,t);if(s!=null){const o=s.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:l,viewingMode:d}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!l.equals(this.userSpatialReference)||i.push({spatialReference:l,viewingMode:d})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t,r,i=()=>!0){var s;switch(this._loadMaybe((s=this.map)==null?void 0:s.call(this))){case"loading":return!0;case"failed":return!1}const n=new g2e(i,r);for(const o of t)if(this._collectCollection(o,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{Ni(r)}),"loading"):t.loadStatus:"loaded"}};u([h()],Ft.prototype,"required",void 0),u([h({constructOnly:!0})],Ft.prototype,"map",void 0),u([h({constructOnly:!0})],Ft.prototype,"getSpatialReferenceSupport",void 0),u([h()],Ft.prototype,"defaultSpatialReference",void 0),u([h()],Ft.prototype,"userSpatialReference",void 0),u([h()],Ft.prototype,"sourcePreloadCount",void 0),u([h()],Ft.prototype,"priorityCollection",void 0),u([h()],Ft.prototype,"requiresExtentInSpatialReference",void 0),u([h()],Ft.prototype,"suspended",void 0),u([h({readOnly:!0})],Ft.prototype,"ready",null),u([h({readOnly:!0})],Ft.prototype,"heightModelInfoReady",null),u([h({readOnly:!0})],Ft.prototype,"spatialReference",null),u([h({readOnly:!0})],Ft.prototype,"extent",null),u([h({readOnly:!0})],Ft.prototype,"heightModelInfo",null),u([h({readOnly:!0})],Ft.prototype,"vcsWkid",null),u([h({readOnly:!0})],Ft.prototype,"latestVcsWkid",null),u([h({readOnly:!0})],Ft.prototype,"viewingMode",null),u([h({readOnly:!0})],Ft.prototype,"tileInfo",null),u([h({readOnly:!0})],Ft.prototype,"mapCollections",null),u([h({readOnly:!0})],Ft.prototype,"_spatialReferenceTask",null),u([h({readOnly:!0})],Ft.prototype,"_tileInfoTask",null),u([h({readOnly:!0})],Ft.prototype,"_heightModelInfoTask",null),u([h({readOnly:!0})],Ft.prototype,"_extentCandidatesTask",null),u([h()],Ft.prototype,"_extentTask",null),u([h()],Ft.prototype,"_projectExtentTask",void 0),Ft=u([M("esri.views.support.DefaultsFromMap")],Ft);let g2e=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function v2e(e,t){return e!=null?t!=null?e===t&&e:e:t}let Zy=class extends Ae{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};u([h()],Zy.prototype,"featureTitleFields",void 0),u([h()],Zy.prototype,"utilityNetworkFields",void 0),u([h()],Zy.prototype,"globalIdField",void 0),Zy=u([M("esri.views.support.RequiredFieldsOptions")],Zy);const b2e=Zy;var vb;let Me=vb=class extends aa.EventedMixin(e0.EsriPromiseMixin(Ae)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Gg,this.updatingHandles=new Xp,this.allLayerViews=new U_({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:w2e}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new m_,this.analyses=new i$,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ge,this.magnifier=new zK,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new d2e,this.navigation=new Vx,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new JK(this),this.persistableViewModels=new ge,this.requiredFieldsOptions=new b2e,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(ze(()=>this.preconditionsReady,t=>{var i,n;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,vb.views.add(this)):(this._lockedSpatialReference=null,vb.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(s){return void queueMicrotask(()=>{this.fatalError=new V("startup-error",null,s)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},il))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,yx(()=>this.ready)))),this.basemapView=new vSe({view:this}),this.layerViewManager=new SSe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Ra({view:this}),this.selectionManager=new PSe({view:this}),this.addHandles([ao(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{ae.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),ze(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Pn),ze(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},il),ze(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Pn)])}destroy(){var e,t;this.destroyed||(vb.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Zt(this.graphics),this.analyses=Zt(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Zt(this.analysisViewManager),this.toolViewManager=Zt(this.toolViewManager),this.layerViewManager=Zt(this.layerViewManager),this.selectionManager=Zt(this.selectionManager),this.basemapView=Zt(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Zt(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return ae.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ft({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??a2e()}set highlights(e){this._set("highlights",ju(e,this._get("highlights"),ge.ofType(Rd)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||lo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(ae.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),lo.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,t,r,i;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const n=!("loaded"in this.map)||this.map.loaded,s=this.map.ground.loaded,o=((t=this.map.basemap)==null?void 0:t.loaded)??!0;return n&&o&&s&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Mw(l=>uW(Z("view-readyState-waiting-delay"),null,l)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(i=this._readyStateWaitingTask)!=null&&i.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=bg(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!ai(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??la}set timeZone(e){this._userTimeZone=e,tge(e)||ae.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new FN}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new V("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&ae.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(ao(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Me.views=new ge,u([h()],Me.prototype,"_userSpatialReference",void 0),u([h()],Me.prototype,"activeTool",null),u([h({readOnly:!0})],Me.prototype,"allLayerViews",void 0),u([h()],Me.prototype,"groundView",void 0),u([h()],Me.prototype,"animation",null),u([h()],Me.prototype,"basemapView",void 0),u([h()],Me.prototype,"center",null),u([h()],Me.prototype,"defaultsFromMapSettings",null),u([h()],Me.prototype,"defaultsFromMap",null),u([h()],Me.prototype,"displayFilterEnabled",void 0),u([h()],Me.prototype,"fatalError",void 0),u([h({type:Ut})],Me.prototype,"extent",null),u([h(U9(m_,"graphics"))],Me.prototype,"graphics",void 0),u([h(U9(i$,"analyses"))],Me.prototype,"analyses",void 0),u([h({readOnly:!0,type:Nw})],Me.prototype,"heightModelInfo",null),u([h({type:ge.ofType(Rd)})],Me.prototype,"highlights",null),u([h({readOnly:!0})],Me.prototype,"interacting",null),u([h({readOnly:!0})],Me.prototype,"navigating",null),u([h({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Me.prototype,"preconditionsReady",null),u([h({readOnly:!0})],Me.prototype,"typeSpecificPreconditionsReady",void 0),u([h({type:ge,readOnly:!0})],Me.prototype,"layerViews",void 0),u([h()],Me.prototype,"resolution",null),u([h({type:zK})],Me.prototype,"magnifier",void 0),u([h({value:null,type:LX})],Me.prototype,"map",null),u([h()],Me.prototype,"padding",void 0),u([h({readOnly:!0})],Me.prototype,"ready",void 0),u([h()],Me.prototype,"_readyStateWaitingTask",void 0),u([h({readOnly:!0})],Me.prototype,"readyState",null),u([h({type:Ge})],Me.prototype,"spatialReference",null),u([h()],Me.prototype,"stationary",null),u([h({readOnly:!0})],Me.prototype,"supportsGround",void 0),u([h({type:si})],Me.prototype,"timeExtent",null),u([h({type:String,nonNullable:!0})],Me.prototype,"timeZone",null),u([h()],Me.prototype,"tools",null),u([h()],Me.prototype,"toolViewManager",void 0),u([h({readOnly:!0})],Me.prototype,"type",void 0),u([h({type:Number})],Me.prototype,"scale",void 0),u([h({readOnly:!0})],Me.prototype,"updating",void 0),u([h({readOnly:!0})],Me.prototype,"initialExtentRequired",void 0),u([h({readOnly:!0})],Me.prototype,"initialExtent",null),u([h()],Me.prototype,"cursor",null),u([h({readOnly:!0})],Me.prototype,"input",void 0),u([h({type:Vx,nonNullable:!0})],Me.prototype,"navigation",void 0),u([h()],Me.prototype,"layerViewManager",void 0),u([h()],Me.prototype,"analysisViewManager",void 0),u([h()],Me.prototype,"selectionManager",void 0),u([h()],Me.prototype,"width",void 0),u([h()],Me.prototype,"height",void 0),u([h({readOnly:!0})],Me.prototype,"resizing",void 0),u([h({value:null,readOnly:!0})],Me.prototype,"size",null),u([h({readOnly:!0})],Me.prototype,"suspended",void 0),u([h({readOnly:!0})],Me.prototype,"viewEvents",void 0),u([h({readOnly:!0})],Me.prototype,"persistableViewModels",void 0),u([h()],Me.prototype,"_isValid",void 0),u([h()],Me.prototype,"_readyCycleForced",void 0),u([h()],Me.prototype,"_lockedSpatialReference",void 0),u([h()],Me.prototype,"_userTimeZone",void 0),u([h()],Me.prototype,"_lockedTimeZone",void 0),u([h()],Me.prototype,"_userTimeExtent",void 0),u([h()],Me.prototype,"_lockedTimeExtent",void 0),u([h({type:FN})],Me.prototype,"theme",void 0),u([h({readOnly:!0,type:FN})],Me.prototype,"effectiveTheme",null),Me=vb=u([M("esri.views.View")],Me);const j3=globalThis.$arcgis;j3&&!j3.views&&Object.defineProperty(j3,"views",{configurable:!1,enumerable:!0,writable:!1,value:Me.views});const _2e=Me;function w2e(e){return e.layerViews}function ng(e,t){return e[0]=t[0],e[1]=t[1],e}function vi(e,t,r){return e[0]=t,e[1]=r,e}function uQ(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function J_(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function cQ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function dQ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function S2e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function T2e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function E2e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function $2e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function x2e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Gw(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function A2e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function zx(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function u$(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function c$(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function hQ(e){const t=e[0],r=e[1];return t*t+r*r}function pQ(e,t){return e[0]=-t[0],e[1]=-t[1],e}function M2e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function GN(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function fQ(e,t){return e[0]*t[0]+e[1]*t[1]}function yQ(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function O2e(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function R2e(e,t=1){const r=2*Rx()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function C2e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function Ba(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function I2e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function N2e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function P2e(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),l=Math.cos(i);return e[0]=n*l-s*o+r[0],e[1]=n*o+s*l+r[1],e}function L2e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let l=n*n+s*s;l>0&&(l=1/Math.sqrt(l));const d=(r*n+i*s)*o*l;return d>1?0:d<-1?Math.PI:Math.acos(d)}function k2e(e){return"vec2("+e[0]+", "+e[1]+")"}function D2e(e,t){return e[0]===t[0]&&e[1]===t[1]}function j2e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1],o=gn();return Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))}function F2e(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const l=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*l,o=i[1]*l,e[0]=t[0]+s,e[1]=t[1]+o,e}const U2e=c$,YD=J_,V2e=cQ,z2e=dQ,G2e=zx,B2e=u$,q2e=hQ;Object.freeze(Object.defineProperty({__proto__:null,add:uQ,angle:L2e,ceil:S2e,copy:ng,cross:yQ,dist:G2e,distance:zx,div:z2e,divide:dQ,dot:fQ,equals:j2e,exactEquals:D2e,floor:T2e,inverse:M2e,len:U2e,length:c$,lerp:O2e,max:$2e,min:E2e,mul:V2e,multiply:cQ,negate:pQ,normalize:GN,projectAndScale:F2e,random:R2e,rotate:P2e,round:x2e,scale:Gw,scaleAndAdd:A2e,set:vi,sqrDist:B2e,sqrLen:q2e,squaredDistance:u$,squaredLength:hQ,str:k2e,sub:YD,subtract:J_,transformMat2:C2e,transformMat2d:Ba,transformMat3:I2e,transformMat4:N2e},Symbol.toStringTag,{value:"Module"}));function mr(){return[0,0]}function H2e(e){return[e[0],e[1]]}function Bw(e,t){return[e,t]}function W2e(e,t){return[e,t]}function Z2e(e,t=mr()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Y2e(e,t){return new Float64Array(e,t,2)}function mQ(){return mr()}function gQ(){return Bw(1,1)}function vQ(){return Bw(1,0)}function bQ(){return Bw(0,1)}const J2e=mQ(),X2e=gQ(),K2e=vQ(),Q2e=bQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:X2e,UNIT_X:K2e,UNIT_Y:Q2e,ZEROS:J2e,clone:H2e,create:mr,createView:Y2e,freeze:W2e,fromArray:Z2e,fromValues:Bw,ones:gQ,unitX:vQ,unitY:bQ,zeros:mQ},Symbol.toStringTag,{value:"Module"}));function eTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function tTe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function rTe(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function JD(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5];let d=r*s-i*n;return d?(d=1/d,e[0]=s*d,e[1]=-i*d,e[2]=-n*d,e[3]=r*d,e[4]=(n*l-s*o)*d,e[5]=(i*o-r*l)*d,e):null}function iTe(e){return e[0]*e[3]-e[1]*e[2]}function _Q(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=r[0],g=r[1],v=r[2],b=r[3],S=r[4],T=r[5];return e[0]=i*f+s*g,e[1]=n*f+o*g,e[2]=i*v+s*b,e[3]=n*v+o*b,e[4]=i*S+s*T+l,e[5]=n*S+o*T+d,e}function Gx(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=Math.sin(r),g=Math.cos(r);return e[0]=i*g+s*f,e[1]=n*g+o*f,e[2]=i*-f+s*g,e[3]=n*-f+o*g,e[4]=l,e[5]=d,e}function XD(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=r[0],g=r[1];return e[0]=i*f,e[1]=n*f,e[2]=s*g,e[3]=o*g,e[4]=l,e[5]=d,e}function X_(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=r[0],g=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*f+s*g+l,e[5]=n*f+o*g+d,e}function wQ(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function SQ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function KD(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function nTe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function sTe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function oTe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function TQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function aTe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function lTe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function uTe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function cTe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],l=e[5],d=t[0],f=t[1],g=t[2],v=t[3],b=t[4],S=t[5],T=gn();return Math.abs(r-d)<=T*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=T*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-g)<=T*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(s-v)<=T*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-b)<=T*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(l-S)<=T*Math.max(1,Math.abs(l),Math.abs(S))}const dTe=_Q,hTe=TQ;Object.freeze(Object.defineProperty({__proto__:null,add:oTe,copy:eTe,determinant:iTe,equals:cTe,exactEquals:uTe,frob:sTe,fromRotation:wQ,fromScaling:SQ,fromTranslation:KD,identity:tTe,invert:JD,mul:dTe,multiply:_Q,multiplyScalar:aTe,multiplyScalarAndAdd:lTe,rotate:Gx,scale:XD,set:rTe,str:nTe,sub:hTe,subtract:TQ,translate:X_},Symbol.toStringTag,{value:"Module"}));function Ou(){return[1,0,0,1,0,0]}function pTe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function fTe(e,t,r,i,n,s){return[e,t,r,i,n,s]}function yTe(e,t){return new Float64Array(e,t,6)}const mTe=Ou();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:mTe,clone:pTe,create:Ou,createView:yTe,fromValues:fTe},Symbol.toStringTag,{value:"Module"}));const US={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Qs({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ge.WebMercator}),minus180Line:new Qs({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ge.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Qs({paths:[[[180,-180],[180,180]]],spatialReference:Ge.WGS84}),minus180Line:new Qs({paths:[[[-180,-180],[-180,180]]],spatialReference:Ge.WGS84})}};function zp(e,t){return Math.ceil((e-t)/(2*t))}function EQ(e,t){const r=g_(e);for(const i of r)for(const n of i)n[0]+=t;return e}function g_(e){return Yp(e)?e.rings:e.paths}function gTe(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function $Q(e){return typeof e=="string"?oi(e):U(e)}function vTe(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s))i[n]=s.map(o=>vTe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r==null?void 0:r[n]);i[n]=t?o:JSON.stringify(o)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}async function bTe(e,t,r,i){const n=$Q(e),s=t[0].spatialReference,o={...i,responseType:"json",query:{...n.query,f:"json",sr:FE(s),target:JSON.stringify({geometryType:xw(t[0]),geometries:t}),cutter:JSON.stringify(r)}},l=await mt(n.path+"/cut",o),{cutIndexes:d,geometries:f=[]}=l.data;return{cutIndexes:d,geometries:f.map(g=>{const v=Du(g);return v.spatialReference=s,v})}}function _Te(e){return{geometryType:xw(e[0]),geometries:e.map(t=>t.toJSON())}}function xQ(e,t,r){const i=wfe(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}async function wTe(e,t,r){const i=typeof e=="string"?oi(e):e,n=t[0].spatialReference,s=xw(t[0]),o={...r,query:{...i.query,f:"json",sr:FE(n),geometries:JSON.stringify(_Te(t))}},{data:l}=await mt(i.path+"/simplify",o);return xQ(l.geometries,s,n)}const AQ=()=>ae.getLogger("esri.geometry.support.normalizeUtils");function STe(e){return e.type==="polygon"}function TTe(e){return e[0].type==="polygon"}function ETe(e){return e[0].type==="polyline"}function gV(e){const t=[];let r=0,i=0;for(let n=0;n<e.length;n++){const s=e[n];let o=null;for(let l=0;l<s.length;l++)o=s[l],t.push(o),l===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function $Te(e,t){if(!(e instanceof Qs||e instanceof oo)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw AQ().error(n),new V(n)}const r=g_(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const l=n[o][0],d=n[o][1],f=n[o+1][0],g=n[o+1][1],v=Math.sqrt((f-l)*(f-l)+(g-d)*(g-d)),b=(g-d)/v,S=(f-l)/v,T=v/t;if(T>1){for(let C=1;C<=T-1;C++){const I=C*t,P=S*I+l,k=b*I+d;s.push([P,k])}const E=(v+Math.floor(T-1)*t)/2,x=S*E+l,O=b*E+d;s.push([x,O])}s.push([f,g])}}return STe(e)?new oo({rings:i,spatialReference:e.spatialReference}):new Qs({paths:i,spatialReference:e.spatialReference})}function vV(e,t,r){if(t){const i=$Te(e,1e6);e=Fm(i,!0)}return r&&(e=EQ(e,r)),e}function bV(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=zp(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=zp(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=zp(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=zp(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function xTe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=g_(s);for(let l=0;l<o.length;l++){const d=o[l];d.some(f=>{if(f[0]<180)return!0;{let g=0;for(let b=0;b<d.length;b++){const S=d[b][0];g=S>g?S:g}g=Number(g.toFixed(9));const v=-360*zp(g,180);for(let b=0;b<d.length;b++){const S=s.getPoint(l,b);s.setPoint(l,b,S.clone().offset(v,0))}return!0}})}if(n===r){if(TTe(e))for(const l of g_(s))e[n]=e[n].addRing(l);else if(ETe(e))for(const l of g_(s))e[n]=e[n].addPath(l)}else r=n,e[n]=s}return e}async function ATe(e,t,r){if(!Array.isArray(e))return ATe([e],t);t&&typeof t!="string"&&AQ().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??Mt.geometryServiceUrl;let n,s,o,l,d,f,g,v,b=0;const S=[],T=[];for(const P of e)if(P!=null)if(n||(n=P.spatialReference,s=mn(n),o=n.isWebMercator,f=o?102100:4326,l=US[f].maxX,d=US[f].minX,g=US[f].plus180Line,v=US[f].minus180Line),s)if(P.type==="mesh")T.push(P);else if(P.type==="point")T.push(bV(P.clone(),l,d));else if(P.type==="multipoint"){const k=P.clone();k.points=k.points.map(D=>bV(D,l,d)),T.push(k)}else if(P.type==="extent"){const k=P.clone()._normalize(!1,!1,s);T.push(k.rings?new oo(k):k)}else if(P.extent){const k=P.extent,D=zp(k.xmin,d)*(2*l);let H=D===0?P.clone():EQ(P.clone(),D);k.offset(D,0);let{xmin:re,xmax:K}=k;re=Number(re.toFixed(9)),K=Number(K.toFixed(9)),k.intersects(g)&&K!==l?(b=K>b?K:b,H=vV(H,o),S.push(H),T.push("cut")):k.intersects(v)&&re!==d?(b=K*(2*l)>b?K*(2*l):b,H=vV(H,o,360),S.push(H),T.push("cut")):T.push(H)}else T.push(P.clone());else T.push(P);else T.push(P);let E=zp(b,l),x=-90;const O=E,C=new Qs;for(;E>0;){const P=360*E-180;C.addPath([[P,x],[P,-1*x]]),x*=-1,E--}if(S.length>0&&O>0){const P=xTe(S,await bTe(i,S,C,r)),k=[],D=[];for(let K=0;K<T.length;K++){const ie=T[K];if(ie!=="cut")D.push(ie);else{const fe=P.shift(),ve=e[K];ve!=null&&ve.type==="polygon"&&ve.rings&&ve.rings.length>1&&fe.rings.length>=ve.rings.length?(k.push(fe),D.push("simplify")):D.push(o?Ad(fe):fe)}}if(!k.length)return D;const H=await wTe(i,k,r),re=[];for(let K=0;K<D.length;K++){const ie=D[K];ie!=="simplify"?re.push(ie):re.push(o?Ad(H.shift()):H.shift())}return re}const I=[];for(let P=0;P<T.length;P++){const k=T[P];if(k!=="cut")I.push(k);else{const D=S.shift();I.push(o===!0?Ad(D):D)}}return I}function MTe(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&mn(e.spatialReference);if(!r)return t;const[i,n]=r.valid,s=2*n,{width:o}=t;let l,{xmin:d,xmax:f}=t;if([d,f]=[f,d],e.type==="extent"||o===0||o<=n||o>s||d<i||f>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;l=gV(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;l=gV(e.paths);break;case"multipoint":l=e.points}const g=t.clone();for(let v=0;v<l.length;v++){let b=l[v][0];b<0?(b+=n,f=Math.max(b,f)):(b-=n,d=Math.min(b,d))}return g.xmin=d,g.xmax=f,g.width<o?(g.xmin-=n,g.xmax-=n,g):t}function QD(e,t,r){const i=mn(r);if(i==null)return e;const[n,s]=i.valid,o=2*s;let l=0,d=0;t>s?l=Math.ceil(Math.abs(t-s)/o):t<n&&(l=-Math.ceil(Math.abs(t-n)/o)),e>s?d=Math.ceil(Math.abs(e-s)/o):e<n&&(d=-Math.ceil(Math.abs(e-n)/o));let f=e+(l-d)*o;const g=f-t;return g>s?f-=o:g<n&&(f+=o),f}function Y8e(e,t){const r=mn(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}const MQ=96,OQ=39.37,OTe=180/Math.PI;function RQ(e){return e.wkid?e:e.spatialReference||Ge.WGS84}function e5(e,t){return t.type?vi(e,t.x,t.y):ng(e,t)}function CQ(e){return co(e)}function Bx(e,t,r=0){let i=e.width,n=e.height;if(r!==0){const l=sx(r),d=Math.abs(Math.cos(l)),f=Math.abs(Math.sin(l));i=e.width*d+e.height*f,n=e.width*f+e.height*d}const s=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/s,n/o)*DTe(e.spatialReference)}async function bb(e,t,r,i){var l,d,f;let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(ge.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const g=e.every(S=>"attributes"in S),v=e.some(S=>!S.geometry);let b=e;if(g&&v&&t&&t.allLayerViews){const S=new Map;for(const O of e){const C=O.layer,I=S.get(C)||[],P=O.attributes[C.objectIdField];P!=null&&I.push(P),S.set(C,I)}const T=[];S.forEach((O,C)=>{var P;const I=(P=t.allLayerViews)==null?void 0:P.find(k=>k.layer.id===C.id);if(I&&"queryFeatures"in I){const k=C.createQuery();k.objectIds=O,k.returnGeometry=!0,T.push(I.queryFeatures(k))}});const E=await Promise.all(T),x=[];for(const O of E)if(O&&O.features&&O.features.length)for(const C of O.features)C.geometry!=null&&x.push(C.geometry);b=x}for(const S of b)i=await bb(S,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new Qe(e);else if(e instanceof Uu)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const g=e.layer,v=(l=t.allLayerViews)==null?void 0:l.find(b=>b.layer.id===g.id);if(v&&"queryFeatures"in v){const b=g.createQuery();b.objectIds=[e.attributes[g.objectIdField]],b.returnGeometry=!0;const S=await v.queryFeatures(b);n=(f=(d=S==null?void 0:S.features)==null?void 0:d[0])==null?void 0:f.geometry}}}if(n==null)return null;switch(n.type){case"point":s=new Ut({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=MTe(n);break;default:s=n.extent}if(!s)return null;Xd()||nl(s.spatialReference,r)||await Ud();const o=Kd(s,r);if(!o)return null;if(i){const g=o.center,v=g.clone();v.x=QD(g.x,i.center.x,r),v.x!==g.x&&o.centerAt(v),i=i.union(o)}else i=o;return i}function RTe(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const n of e){const s=n.layer;s!=null&&s.minScale&&s.maxScale&&(r=s.minScale<r?s.minScale:r,i=s.maxScale>i?s.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function _V(e,t){const r=RQ(e);return ai(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:Kd(e,t)}async function CTe(e,t){var x;if(!e||!t)return new ni({targetGeometry:new Qe,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,l=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let d=null;e instanceof ni?d=e:e.viewpoint?d=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(d=e.target);let f=null;d!=null&&d.targetGeometry?f=d.targetGeometry:e instanceof Ut?f=e:e instanceof Uu?f=await bb(e,t,r):e&&(f=await bb(e.center,t,r)||await bb(e.target,t,r)||await bb(e,t,r)),!f&&(s!=null&&s.targetGeometry)?f=s.targetGeometry:!f&&t.extent&&(f=t.extent),r||(r=RQ(t.spatialReference||t.extent||f)),Xd()||ai(f.spatialReference,r)||nl(f.spatialReference,r)||await Ud();const g=_V(f,r),v="center"in g?g.center:g;t.pickClosestTarget!==!1&&v.type==="point"&&((x=s.targetGeometry)==null?void 0:x.type)==="point"&&(v.x=QD(v.x,s.targetGeometry.x,v.spatialReference));let b=0;d?b=d.rotation:e.hasOwnProperty("rotation")?b=e.rotation:s&&(b=s.rotation);let S=0;S=(d==null?void 0:d.targetGeometry)!=null&&d.targetGeometry.type==="point"?d.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(f)||f.type==="point"||f.type==="extent"&&f.width===0&&f.height===0?s.scale:Bx(_V(f.extent,r),l,b);const T=RTe(e.target??e);T&&(T.min&&T.min<S?S=T.min:T.max&&T.max>S&&(S=T.max));let E=new ni({targetGeometry:v,scale:S,rotation:b});return i&&(E=i.fit(E),i.constrainByGeometry(E),i.rotationEnabled||(E.rotation=s.rotation)),E}function Ji(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function ITe(e,t,r){return r?vi(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):Gw(e,t,.5)}const NTe=function(){const e=mr();return function(t,r,i){const n=r.targetGeometry;e5(e,n);const s=.5*o0(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function PTe(e,t,r,i,n){var s;return BN(e,t,r.center),e.scale=Bx(r,i),(s=n==null?void 0:n.constraints)==null||s.constrain(e),e}function LTe(e,t,r,i){return i5(e,t,r,i),JD(e,e)}const IQ=function(){const e=mr();return function(t,r,i){return YD(t,jTe(t,r),ITe(e,r,i))}}(),kTe=function(){const e=Ou(),t=mr();return function(r,i,n,s){const o=o0(i),l=t5(i);return vi(t,o,o),SQ(e,t),Gx(e,e,l),X_(e,e,IQ(t,n,s)),X_(e,e,[0,s.top-s.bottom]),vi(r,e[4],e[5])}}();function o0(e){var t;return e.scale*NQ((t=e.targetGeometry)==null?void 0:t.spatialReference)}function NQ(e){return ds(e)?1/(CQ(e)*OQ*MQ):1}function t5(e){return AD(e.rotation)||0}function DTe(e){return ds(e)?CQ(e)*OQ*MQ:1}function jTe(e,t){return Gw(e,t,.5)}const r5=function(){const e=mr(),t=mr(),r=mr();return function(i,n,s,o,l,d){return pQ(e,n),Gw(t,s,.5*d),vi(r,1/o*d,-1/o*d),KD(i,t),l&&Gx(i,i,l),XD(i,i,r),X_(i,i,e),i}}(),i5=function(){const e=mr();return function(t,r,i,n){const s=o0(r),o=t5(r);return e5(e,r.targetGeometry),r5(t,e,i,s,o,n)}}(),FTe=function(){const e=mr();return function(t,r,i,n){const s=o0(r);return e5(e,r.targetGeometry),r5(t,e,i,s,0,n)}}();function PQ(e){const t=mn(e);return t?t.valid[1]-t.valid[0]:0}function UTe(e,t){return Math.round(PQ(e)/t)}const VTe=function(){const e=mr(),t=mr(),r=[0,0,0];return function(i,n,s){J_(e,i,n),GN(e,e),J_(t,i,s),GN(t,t),yQ(r,e,t);let o=Math.acos(fQ(e,t)/(c$(e)*c$(t)))*OTe;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),zTe=function(){const e=mr();return function(t,r,i,n){const s=t.targetGeometry;return Ji(t,r),kTe(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),BN=function(e,t,r){Ji(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},GTe=function(){const e=mr();return function(t,r,i,n,s){s||(s="center"),YD(e,i,n),Gw(e,e,.5);const o=e[0],l=e[1];switch(s){case"center":vi(e,0,0);break;case"left":vi(e,-o,0);break;case"top":vi(e,0,l);break;case"right":vi(e,o,0);break;case"bottom":vi(e,0,-l);break;case"top-left":vi(e,-o,l);break;case"bottom-left":vi(e,-o,-l);break;case"top-right":vi(e,o,l);break;case"bottom-right":vi(e,o,-l)}return qx(t,r,e),t}}();function J8e(e,t,r){return Ji(e,t),e.rotation+=r,e}function BTe(e,t,r){return Ji(e,t),e.rotation=r,e}const qTe=function(){const e=mr();return function(t,r,i,n,s){return Ji(t,r),isNaN(i)||i===0||(kQ(e,n,r,s),t.scale=r.scale*i,DQ(e,e,t,s),qx(t,t,vi(e,e[0]-n[0],n[1]-e[1]))),t}}();function wV(e,t,r){return Ji(e,t),e.scale=r,e}const LQ=function(){const e=mr();return function(t,r,i,n,s,o){return Ji(t,r),isNaN(i)||i===0||(kQ(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,DQ(e,e,t,o),qx(t,t,vi(e,e[0]-s[0],s[1]-e[1]))),t}}(),X8e=function(){const e=mr(),t=mr();return function(r,i,n,s,o,l,d){return IQ(t,l,d),uQ(e,o,t),s?LQ(r,i,n,s,e,l):qTe(r,i,n,e,l)}}(),kQ=function(){const e=Ou();return function(t,r,i,n){return Ba(t,r,LTe(e,i,n,1))}}(),DQ=function(){const e=Ou();return function(t,r,i,n){return Ba(t,r,i5(e,i,n,1))}}(),qx=function(){const e=mr(),t=Ou();return function(r,i,n){Ji(r,i);const s=o0(i),o=r.targetGeometry;return wQ(t,t5(i)),XD(t,t,Bw(s,s)),Ba(e,n,t),o.x+=e[0],o.y+=e[1],r}}();function jQ(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function HTe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function WTe(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function ZTe(e,t){return new Float32Array(e,t,6)}function FQ(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function YTe(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let l=i;l<o;l++)FQ(e,t,r,l*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:HTe,create:jQ,createView:ZTe,fromValues:WTe,transform:FQ,transformMany:YTe},Symbol.toStringTag,{value:"Module"}));function JTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function XTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function UQ(e,t,r,i,n,s,o,l,d,f){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=l,e[7]=d,e[8]=f,e}function VQ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function KTe(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function QTe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],d=t[6],f=t[7],g=t[8],v=g*o-l*f,b=-g*s+l*d,S=f*s-o*d;let T=r*v+i*b+n*S;return T?(T=1/T,e[0]=v*T,e[1]=(-g*i+n*f)*T,e[2]=(l*i-n*o)*T,e[3]=b*T,e[4]=(g*r-n*d)*T,e[5]=(-l*r+n*s)*T,e[6]=S*T,e[7]=(-f*r+i*d)*T,e[8]=(o*r-i*s)*T,e):null}function eEe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],d=t[6],f=t[7],g=t[8];return e[0]=o*g-l*f,e[1]=n*f-i*g,e[2]=i*l-n*o,e[3]=l*d-s*g,e[4]=r*g-n*d,e[5]=n*s-r*l,e[6]=s*f-o*d,e[7]=i*d-r*f,e[8]=r*o-i*s,e}function tEe(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],l=e[6],d=e[7],f=e[8];return t*(f*s-o*d)+r*(-f*n+o*l)+i*(d*n-s*l)}function n5(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=t[6],g=t[7],v=t[8],b=r[0],S=r[1],T=r[2],E=r[3],x=r[4],O=r[5],C=r[6],I=r[7],P=r[8];return e[0]=b*i+S*o+T*f,e[1]=b*n+S*l+T*g,e[2]=b*s+S*d+T*v,e[3]=E*i+x*o+O*f,e[4]=E*n+x*l+O*g,e[5]=E*s+x*d+O*v,e[6]=C*i+I*o+P*f,e[7]=C*n+I*l+P*g,e[8]=C*s+I*d+P*v,e}function qN(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=t[6],g=t[7],v=t[8],b=r[0],S=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=l,e[5]=d,e[6]=b*i+S*o+f,e[7]=b*n+S*l+g,e[8]=b*s+S*d+v,e}function zQ(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],d=t[5],f=t[6],g=t[7],v=t[8],b=Math.sin(r),S=Math.cos(r);return e[0]=S*i+b*o,e[1]=S*n+b*l,e[2]=S*s+b*d,e[3]=S*o-b*i,e[4]=S*l-b*n,e[5]=S*d-b*s,e[6]=f,e[7]=g,e[8]=v,e}function rEe(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function iEe(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function nEe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function sEe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function oEe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function aEe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function lEe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,l=i+i,d=n+n,f=r*o,g=i*o,v=i*l,b=n*o,S=n*l,T=n*d,E=s*o,x=s*l,O=s*d;return e[0]=1-v-T,e[3]=g-O,e[6]=b+x,e[1]=g+O,e[4]=1-f-T,e[7]=S-E,e[2]=b-x,e[5]=S+E,e[8]=1-f-v,e}function uEe(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],l=t[6],d=t[8],f=t[9],g=t[10],v=g*o-l*f,b=-g*s+l*d,S=f*s-o*d,T=r*v+i*b+n*S;if(!T)return null;const E=1/T;return e[0]=v*E,e[1]=(-g*i+n*f)*E,e[2]=(l*i-n*o)*E,e[3]=b*E,e[4]=(g*r-n*d)*E,e[5]=(-l*r+n*s)*E,e[6]=S*E,e[7]=(-f*r+i*d)*E,e[8]=(o*r-i*s)*E,e}function cEe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],l=t[5],d=t[6],f=t[7],g=t[8],v=t[9],b=t[10],S=t[11],T=t[12],E=t[13],x=t[14],O=t[15],C=r*l-i*o,I=r*d-n*o,P=r*f-s*o,k=i*d-n*l,D=i*f-s*l,H=n*f-s*d,re=g*E-v*T,K=g*x-b*T,ie=g*O-S*T,fe=v*x-b*E,ve=v*O-S*E,$e=b*O-S*x;let _e=C*$e-I*ve+P*fe+k*ie-D*K+H*re;return _e?(_e=1/_e,e[0]=(l*$e-d*ve+f*fe)*_e,e[1]=(d*ie-o*$e-f*K)*_e,e[2]=(o*ve-l*ie+f*re)*_e,e[3]=(n*ve-i*$e-s*fe)*_e,e[4]=(r*$e-n*ie+s*K)*_e,e[5]=(i*ie-r*ve-s*re)*_e,e[6]=(E*H-x*D+O*k)*_e,e[7]=(x*P-T*H-O*I)*_e,e[8]=(T*D-E*P+O*C)*_e,e):null}function dEe(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function hEe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function pEe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function fEe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function GQ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function yEe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function mEe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function gEe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function vEe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],g=e[8],v=t[0],b=t[1],S=t[2],T=t[3],E=t[4],x=t[5],O=t[6],C=t[7],I=t[8],P=gn();return Math.abs(r-v)<=P*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(i-b)<=P*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(n-S)<=P*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(s-T)<=P*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-E)<=P*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(l-x)<=P*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(d-O)<=P*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(f-C)<=P*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(g-I)<=P*Math.max(1,Math.abs(g),Math.abs(I))}function bEe(e){const t=gn(),r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],l=e[5],d=e[6],f=e[7],g=e[8];return Math.abs(1-(r*r+s*s+d*d))<=t&&Math.abs(1-(i*i+o*o+f*f))<=t&&Math.abs(1-(n*n+l*l+g*g))<=t}const _Ee=n5,wEe=GQ;Object.freeze(Object.defineProperty({__proto__:null,add:fEe,adjoint:eEe,copy:XTe,determinant:tEe,equals:vEe,exactEquals:gEe,frob:pEe,fromMat2d:aEe,fromMat4:JTe,fromQuat:lEe,fromRotation:sEe,fromScaling:oEe,fromTranslation:nEe,identity:VQ,invert:QTe,isOrthoNormal:bEe,mul:_Ee,multiply:n5,multiplyScalar:yEe,multiplyScalarAndAdd:mEe,normalFromMat4:cEe,normalFromMat4Legacy:uEe,projection:dEe,rotate:zQ,scale:rEe,scaleByVec2:iEe,set:UQ,str:hEe,sub:wEe,subtract:GQ,translate:qN,transpose:KTe},Symbol.toStringTag,{value:"Module"}));function wT(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function SEe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function TEe(e,t,r,i,n,s,o,l,d){const f=new Float32Array(9);return f[0]=e,f[1]=t,f[2]=r,f[3]=i,f[4]=n,f[5]=s,f[6]=o,f[7]=l,f[8]=d,f}function EEe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:SEe,create:wT,createView:EEe,fromValues:TEe},Symbol.toStringTag,{value:"Module"}));function BQ(){return new Float32Array(2)}function $Ee(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Lg(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function xEe(e,t){return new Float32Array(e,t,2)}function qQ(){return BQ()}function HQ(){return Lg(1,1)}function WQ(){return Lg(1,0)}function ZQ(){return Lg(0,1)}const AEe=qQ(),MEe=HQ(),OEe=WQ(),REe=ZQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:MEe,UNIT_X:OEe,UNIT_Y:REe,ZEROS:AEe,clone:$Ee,create:BQ,createView:xEe,fromValues:Lg,ones:HQ,unitX:WQ,unitY:ZQ,zeros:qQ},Symbol.toStringTag,{value:"Module"}));function CEe(e){return e instanceof Float32Array&&e.length>=2}function IEe(e){return Array.isArray(e)&&e.length>=2}function F3(e){return CEe(e)||IEe(e)}var HN;const Ll=[0,0];let Jl=HN=class extends W{constructor(e){super(e),this._viewpoint2D={center:mr(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ut,this.id=0,this.inverseTransform=Ou(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ou(),this.transformNoRotation=Ou(),this.displayMat3=wT(),this.displayViewMat3=wT(),this.viewMat3=wT(),this.viewMat2d=jQ(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=Ji(r,e.viewpoint),this._set("size",ng(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new HN({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return F3(t)?Ba(e,t,this.inverseTransform):(Ll[0]=t,Ll[1]=r,Ba(e,Ll,this.inverseTransform))}toScreen(e,t,r){return F3(t)?Ba(e,t,this.transform):(Ll[0]=t,Ll[1]=r,Ba(e,Ll,this.transform))}toScreenNoRotation(e,t,r){return F3(t)?Ba(e,t,this.transformNoRotation):(Ll[0]=t,Ll[1]=r,Ba(e,Ll,this.transformNoRotation))}wrapMapCoordinate(e,t){ng(e,t);const[r]=t,[i]=this.center,{extent:n,spatialReference:s}=this;let{xmin:o,xmax:l}=n;if(s.isWrappable){const d=PQ(s)/2;o=Math.max(o,i-d),l=Math.min(l,i+d)}return(r<o||r>l)&&(e[0]=QD(r,i,s)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return r5(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new ni({targetGeometry:new Qe(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=o0(o),this.rotation=i,this.scale=r,this.spatialReference=t,ng(this.center,e);const l=s[0]!==0?2/s[0]:0,d=s[1]!==0?-2/s[1]:0;UQ(this.displayMat3,l,0,0,0,d,0,-1,1,1);const f=VQ(this.viewMat3),g=Lg(s[0]/2,s[1]/2),v=Lg(-s[0]/2,-s[1]/2),b=AD(i);qN(f,f,g),zQ(f,f,b),qN(f,f,v),n5(this.displayViewMat3,this.displayMat3,f);const S=KD(this.viewMat2d,g);return Gx(S,S,b),X_(S,S,v),NTe(this.extent,o,s),i5(this.transform,o,s,n),JD(this.inverseTransform,this.transform),FTe(this.transformNoRotation,o,s,n),this.worldScreenWidth=UTe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};u([h({readOnly:!0})],Jl.prototype,"id",void 0),u([h({value:1,json:{write:!0}})],Jl.prototype,"pixelRatio",null),u([h({json:{write:!0}})],Jl.prototype,"size",null),u([h()],Jl.prototype,"spatialReference",void 0),u([h({type:ni,json:{write:!0}})],Jl.prototype,"viewpoint",null),u([h({readOnly:!0})],Jl.prototype,"visibleArea",null),Jl=HN=u([M("esri.views.2d.ViewState")],Jl);const SV=Jl;var WN,ZN;let bu=WN=class extends Ae{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new WN({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};u([h()],bu.prototype,"left",void 0),u([h()],bu.prototype,"top",void 0),u([h()],bu.prototype,"right",void 0),u([h()],bu.prototype,"bottom",void 0),bu=WN=u([M("esri.views.2d.PaddedViewState.Padding")],bu);let Yy=ZN=class extends SV{constructor(...e){super(...e),this.paddedViewState=new SV,this._updateContent=(()=>{const t=mr();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;vi(t,i.left+i.right,i.top+i.bottom),J_(t,r,t),ng(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(ze(()=>[this.size,this.padding],()=>this._updateContent(),il)),this.padding=new bu,this.size=[0,0]}set padding(e){this._set("padding",e||new bu)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=zTe(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:n,scale:s}=t,{x:o,y:l,spatialReference:d}=i,f=this._viewpoint2D;f.center[0]=o,f.center[1]=l,f.rotation=n,f.scale=s,f.spatialReference=d,this._update()}}clone(){return new ZN({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};u([h()],Yy.prototype,"paddedViewState",void 0),u([h({type:bu})],Yy.prototype,"padding",null),u([h()],Yy.prototype,"viewpoint",null),Yy=ZN=u([M("esri.views.2d.PaddedViewState")],Yy);const s5=Yy;var Ri;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Ri||(Ri={}));const YQ=Symbol("Yield");let NEe=class{constructor(){this._tasks=new Array,this._runningTasks=Ig(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return YQ;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.push(new TV(n,s,t,r,i))).finally(()=>--this._runningTasks.value)}unshift(t,r,i){return++this._runningTasks.value,new Promise((n,s)=>this._tasks.unshift(new TV(n,s,t,r,i))).finally(()=>--this._runningTasks.value)}_process(t){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const n=ms(r.signal);if(n&&!r.abortCallback)r.reject(kt());else{const s=n?(i=r.abortCallback)==null?void 0:i.call(r,kt()):r.callback(t);ll(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(n){r.reject(n)}return!0}cancelAll(){const t=kt();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0}},TV=class{constructor(t,r,i,n=void 0,s=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}},_b=class extends Ae{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};u([h()],_b.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),u([h()],_b.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),_b=u([M("esri.views.support.debugFlags")],_b);const PEe=new _b;function LEe(){return new d$.Scheduler}var rt;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(rt||(rt={}));const Gs=0,EV=new Map([[rt.RESOURCE_CONTROLLER_IMMEDIATE,Gs],[rt.RESOURCE_CONTROLLER,4],[rt.SLIDE,Gs],[rt.STREAM_DATA_LOADER,Gs],[rt.ELEVATION_QUERY,Gs],[rt.TERRAIN_SURFACE,1],[rt.SURFACE_GEOMETRY_UPDATES,1],[rt.LOD_RENDERER,2],[rt.GRAPHICS_CORE,2],[rt.I3S_CONTROLLER,2],[rt.POINT_CLOUD_LAYER,2],[rt.FEATURE_TILE_FETCHER,2],[rt.CLOUDS_GENERATOR,2],[rt.OVERLAY,4],[rt.STAGE,4],[rt.GRAPHICS_DECONFLICTOR,4],[rt.FILTER_VISIBILITY,4],[rt.SCALE_VISIBILITY,4],[rt.FRUSTUM_VISIBILITY,4],[rt.POINT_OF_INTEREST_FREQUENT,6],[rt.POINT_OF_INTEREST_INFREQUENT,30],[rt.LABELER,8],[rt.FEATURE_QUERY_ENGINE,8],[rt.FEATURE_TILE_TREE,16],[rt.FEATURE_TILE_TREE_ACTIVE,Gs],[rt.ELEVATION_ALIGNMENT,12],[rt.ELEVATION_ALIGNMENT_SCENE,14],[rt.TEXT_TEXTURE_ATLAS,12],[rt.TEXTURE_UNLOAD,12],[rt.LINE_OF_SIGHT_TOOL,16],[rt.LINE_OF_SIGHT_TOOL_INTERACTIVE,Gs],[rt.SNAPPING,Gs],[rt.SHADOW_ACCUMULATOR,30],[rt.MAPVIEW_FETCH_QUEUE,Gs],[rt.MAPVIEW_LAYERVIEW_UPDATE,2],[rt.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Gs]]);function $V(e){return EV.has(e)?EV.get(e):typeof e=="number"?e:1}const kEe=6.5,xV=1,DEe=30,jEe=1e3/30,FEe=100,AV=.9;var d$,Lh;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=Ig(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Qb("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=Ri.INTERACTING,this._tasks=new Hp,this._runQueue=new Hp,this._load=0,this._idleStateCallbacks=new Hp,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=ze(()=>PEe.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,Xi);for(const s of Object.keys(rt))this.performanceInfo.tasks.set(rt[s],new Qb(rt[s]))}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),nr(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(s,o){const l=new r(this,s,o);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new Qb(s)),l}registerIdleStateCallbacks(s,o){const l={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(l),this.state===Ri.IDLE&&this._idleUpdatesStartFired&&l.idleBegin();const d=this;return{remove:()=>this._removeIdleStateCallbacks(l),set idleBegin(f){d._idleUpdatesStartFired&&(l.idleEnd(),d._state===Ri.IDLE&&f()),l.idleBegin=f},set idleEnd(f){l.idleEnd=f}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==Ri.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(s){this._startFrameTaskTimes();const o=this._updateBudget(s);if(o){const l=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-l)}else this._recordFrameTaskTimes(0);return o}_updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=kEe,l=s.frameDuration,d=xV;switch(this.state){case Ri.IDLE:o=0,l=Math.max(FEe,s.frameDuration),d=DEe;break;case Ri.INTERACTING:l=Math.max(jEe,s.frameDuration);case Ri.ANIMATING:}return l=l-s.elapsedFrameTime-o,this.state!==Ri.IDLE&&l<xV&&!this._forceTask?(this._forceTask=!0,!1):(l=Math.max(l,d),this._budget.reset(l,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Ri.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case Ri.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(l=>l.name===s))return Lh.SCHEDULED;let o=Lh.IDLE;return this._tasks.forAll(l=>{l.name===s&&l.needsUpdate&&(l.schedulePriority<=1?o=Lh.READY:o!==Lh.READY&&(o=Lh.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(l=>{l.name===s&&(o+=l.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(l=>{l.needsUpdate&&s.set(l.name,(s.get(l.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((l,d)=>{o+=l>1?` ${l}x ${d}`:` ${d}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,l)=>l.needsUpdate?++o:o,0);this._load=this._load*AV+s*(1-AV)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===Gs&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(l=>{l.needsUpdate&&l.schedulePriority!==0&&l.basePriority!==Gs&&l.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,l.basePriority),l.schedulePriority===1?(l.schedulePriority=0,this._runQueue.push(l)):--l.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===YQ&&(o.blockFrame=this._frameNumber)}catch(d){ae.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,d),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,rt.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const l=this._budget.now()-s;if(o.runtime+=l,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+l),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const s of Object.keys(rt))this._frameTaskTimes.set(rt[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,l)=>this.performanceInfo.tasks.get(l).push(o)),this.performanceInfo.total.push(s)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,l){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new NEe,this._handles=new Gg,this._basePriority=$V(o),this.schedulePriority=this._basePriority,this._task=Ig(l??this._queue),this._handles.add(ao(()=>this.task.running,d=>s.taskRunningChanged(d)))}remove(){this.processQueue(JQ),this._scheduler.removeTask(this),this.schedule=MV.schedule,this.reschedule=MV.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=$V(s);this._basePriority!==Gs&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,l){return this._queue.push(s,o,l)}reschedule(s,o,l){return this._queue.unshift(s,o,l)}processQueue(s){return this._queue.runTask(s)}}class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Ri.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})(d$||(d$={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Lh||(Lh={}));const JQ=(()=>{const e=new d$.Budget;return e.enabled=!1,e})();let UEe=class{remove(){}processQueue(){}schedule(t,r,i){try{if(ms(r)){const n=kt();return i?Promise.resolve(i(n)):Promise.reject(n)}return cC(t(JQ))}catch(n){return Promise.reject(n)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const MV=new UEe;let VEe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=LEe(),this._schedulerHandle=ao(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var r;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((r=this.view.animation)==null?void 0:r.target)==null||ll(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{var l,d,f;if(this._updateRequested=!1,(l=this.view)==null?void 0:l.destroyed)return;const{allLayerViews:i,graphicsView:n,labelManager:s,state:{id:o}}=this.view;i==null||i.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),(d=this.view.graphicsTileStore)==null||d.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Ri.ANIMATING:this.view.interacting?this._scheduler.state=Ri.INTERACTING:this._scheduler.state=Ri.IDLE,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==Ri.IDLE||((f=this._frameTaskHandle)==null||f.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new s5,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ze(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=_g(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var n;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((n=t.layerViews)==null||n.forEach(this._updateLayerView,this))}},Hc=class extends e0{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=gs(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new V("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=ll(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};u([h({readOnly:!0})],Hc.prototype,"done",null),u([h({readOnly:!0,type:String})],Hc.prototype,"state",void 0),u([h()],Hc.prototype,"target",void 0),Hc=u([M("esri.views.ViewAnimation")],Hc),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Hc||(Hc={}));const YN=Hc;let ST=class extends Ae{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void ae.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new YN;this.view.animation=i,await yx(()=>this.view.ready,r);const n={...r,animate:(r==null?void 0:r.animate)??!tQ(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:s,spatialReference:o,size:l,viewpoint:d,constraints:f,padding:g,allLayerViews:v}=this.view,b=CTe(t,{extent:s,spatialReference:o,size:l,viewpoint:d,constraints:f,padding:g,allLayerViews:v,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(b),this._gotoTask={},n.animate?this._gotoAnimated(b,n):this._gotoImmediate(b,n)}_gotoImmediate(t,r){const i=this._gotoTask,n=this.view.animation,s=t.then(o=>{if(hr(r),i!==this._gotoTask)throw new V("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=o,n.finish()});return this._cancellableGoTo(i,n,s,r)}_gotoAnimated(t,r){const i=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const s=t.then(o=>{if(hr(r),i!==this._gotoTask)throw new V("view:goto-interrupted","Goto was interrupted");return n.update(o),this.view.animationManager.animate(n,this.view.viewpoint,r),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,n,s,r)}_cancellableGoTo(t,r,i,n){const s=()=>t===this._gotoTask;return lW(i,n).finally(()=>{s()&&(r.done||r.stop())})}};u([h({constructOnly:!0})],ST.prototype,"view",void 0),ST=u([M("esri.views.2d.GoToManager")],ST);function zEe(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n,s,o,l;const d=[0,0],f=GEe(e);for(let b=0;b<f.length;b++){const S=f[b];for(let T=0;T<S.length-1;T++){Gpe(d,i,S,T);const E=zx(i,d);(n==null||E<n)&&(n=E,s=[...d],o=b,l=T)}}if(n==null||!s||o==null||l==null)throw new V("nearest-coordinate:failed","Failed to find the nearest coordinate");const[g,v]=s;return{coordinate:new Qe({x:g,y:v,spatialReference:r}),distance:n}}function GEe(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var JN;let Pp=JN=class extends t0.NumericIdentifiableMixin(Ae){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Kd(this.geometry,this.spatialReference)}catch(e){return ae.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Ew(this.normalizedGeometry,r):Gk(this.normalizedGeometry,r))return e;const{coordinate:i}=zEe(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new JN({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};u([h({constructOnly:!0})],Pp.prototype,"geometry",void 0),u([h({readOnly:!0})],Pp.prototype,"normalizedGeometry",null),u([h({constructOnly:!0})],Pp.prototype,"spatialReference",void 0),Pp=JN=u([M("esri.views.2d.constraints.GeometryConstraint")],Pp);var XN;let wb=XN=class extends t0.NumericIdentifiableMixin(Ae){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new XN({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};u([h()],wb.prototype,"enabled",void 0),u([h()],wb.prototype,"rotationEnabled",void 0),wb=XN=u([M("esri.views.2d.constraints.RotationConstraint")],wb);const XQ=wb;var KN;let xn=KN=class extends t0.NumericIdentifiableMixin(Ae){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,l=-1,d=!1,f=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(g=>g.clone()),t.sort((g,v)=>v.scale-g.scale),t.forEach((g,v)=>g.level=v);for(const g of t)!d&&r>0&&r>=g.scale&&(o=g.level,d=!0),!f&&i>0&&i>=g.scale&&(l=e?e.level:-1,f=!0),e=g;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:l),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((g,v)=>{this._lodByScale[g.scale]=g,this._scales[v]=g.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,l=r!==0&&e.scale>r;if(o||l){const d=l?r:i;if(t&&s){const f=(d-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*f,n.y=s.y+(n.y-s.y)*f}e.scale=d}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new KN({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};u([h({readOnly:!0})],xn.prototype,"effectiveLODs",void 0),u([h({readOnly:!0})],xn.prototype,"effectiveMinZoom",void 0),u([h({readOnly:!0})],xn.prototype,"effectiveMaxZoom",void 0),u([h({readOnly:!0})],xn.prototype,"effectiveMinScale",void 0),u([h({readOnly:!0})],xn.prototype,"effectiveMaxScale",void 0),u([h()],xn.prototype,"lods",void 0),u([h()],xn.prototype,"minZoom",void 0),u([h()],xn.prototype,"maxZoom",void 0),u([h()],xn.prototype,"minScale",void 0),u([h()],xn.prototype,"maxScale",void 0),u([h()],xn.prototype,"snapToZoom",void 0),xn=KN=u([M("esri.views.2d.constraints.ZoomConstraint")],xn);const KQ=xn,BEe={base:null,key:"type",typeMap:{extent:Ut,polygon:oo}};let Tr=class extends Ae{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ge}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new Pp({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new XQ({rotationEnabled:this.rotationEnabled})}get _zoom(){var d;const t=this._get("_zoom"),r=this.lods||((d=this.view)==null?void 0:d.constraintsInfo.lods),i=this.minZoom,n=this.maxZoom,s=this.minScale,o=this.maxScale,l=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===n&&t.minScale===s&&t.maxScale===o&&t.snapToZoom===l?t:new KQ({lods:r,minZoom:i,maxZoom:n,minScale:s,maxScale:o,snapToZoom:l})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};u([h({readOnly:!0})],Tr.prototype,"effectiveLODs",null),u([h({readOnly:!0})],Tr.prototype,"effectiveMinScale",null),u([h({readOnly:!0})],Tr.prototype,"effectiveMaxScale",null),u([h({readOnly:!0})],Tr.prototype,"effectiveMinZoom",null),u([h({readOnly:!0})],Tr.prototype,"effectiveMaxZoom",null),u([h({types:BEe,value:null})],Tr.prototype,"geometry",null),u([h({type:[ud]})],Tr.prototype,"lods",void 0),u([h()],Tr.prototype,"minScale",void 0),u([h()],Tr.prototype,"maxScale",void 0),u([h()],Tr.prototype,"minZoom",void 0),u([h()],Tr.prototype,"maxZoom",void 0),u([h()],Tr.prototype,"rotationEnabled",void 0),u([h()],Tr.prototype,"snapToZoom",void 0),u([h({type:ge})],Tr.prototype,"customConstraints",void 0),u([h()],Tr.prototype,"view",void 0),u([h({readOnly:!0})],Tr.prototype,"version",null),u([h({type:Pp,readOnly:!0})],Tr.prototype,"_geometry",null),u([h({type:XQ})],Tr.prototype,"_rotation",null),u([h({readOnly:!0,type:KQ})],Tr.prototype,"_zoom",null),Tr=u([M("esri.views.2d.MapViewConstraints")],Tr);const OV=Tr;let Gi=class extends Ae{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ze(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},il)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new Qe({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void ae.getLogger(this).error(new V("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:n}))}const i=this.viewpoint;BN(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void ae.getLogger(this).error(new V("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(n){return void ae.getLogger(this).error(new V("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const i=this.viewpoint;PTe(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;BTe(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;wV(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var s;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new V("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new V("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new V("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void ae.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const n=new ni({targetGeometry:new Qe,scale:0,rotation:0});Ji(n,r),(s=this.constraints)==null||s.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var n,s;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((n=this.constraints)==null?void 0:n.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;wV(i,i,r),this.viewpoint=i,this._set("zoom",((s=this.constraints)==null?void 0:s.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,n=this._get("center"),s=this._get("extent"),o=this._get("scale"),l=this._get("rotation"),d=this._get("viewpoint"),f=this._get("zoom"),g=f!=null&&i!=null&&i.zoomToScale(f)||void 0;let v,b,S;const T=d==null?void 0:d.rotation,E=d==null?void 0:d.targetGeometry;(E==null?void 0:E.type)==="extent"?v=E:(E==null?void 0:E.type)==="point"&&(b=E,S=d==null?void 0:d.scale);const x=s??v;return{center:n??b??(x==null?void 0:x.center),rotation:l??T,scale:(o??g??S??(x&&Bx(x,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,n){var o;const s=t.targetGeometry;try{this._project(t,i)}catch(l){ae.getLogger(this).warn(new no("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:i,error:l})),t.targetGeometry=n||new Qe({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new s5({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:n,scale:s}=this.state.paddedViewState,o=new Qe({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("state",null)}changeSpatialReference(t){var d;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const f=r.viewpoint.clone();f.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=f}const i=r.clone(),[n,s]=r.center;let o=null;try{o=this._project(new Qe({x:n,y:s,spatialReference:r.spatialReference}),t)}catch(f){jk()||ae.getLogger(this).warn(new no("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:f}))}o||(o=new Qe({x:0,y:0,spatialReference:t}));const l=BN(new ni({targetGeometry:new Qe,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=l;try{const g=[r.size[0]/2,r.size[1]/2],v=[g[0]+20,g[1]],b=r.toMap([0,0],v),{x:S,y:T}=this._project(new Qe({x:b[0],y:b[1],spatialReference:r.spatialReference}),t);b[0]=S,b[1]=T,i.toScreen(b,b);const E=VTe(g,b,v),x=Math.hypot(b[0]-g[0],b[1]-g[1])/20;!Number.isFinite(x)||Math.abs(x)>4?(l.rotation=0,l.targetGeometry=new Qe({x:0,y:0,spatialReference:t})):(l.scale*=x,l.scale>Z("mapview-srswitch-adjust-rotation-scale-threshold")?l.rotation=0:l.rotation+=Number.isFinite(E)?E:0)}catch{}(d=this._get("constraints"))==null||d.constrain(l,void 0),this._get("state").viewpoint=l}resize(t,r){var o;if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();i.size=[t,r],GTe(n,n,s,this.state.paddedViewState.size,this.resizeAlign),n=((o=this.constraints)==null?void 0:o.constrain(n,void 0))??n,this.state.viewpoint=n}toMap(t){if(!this.ready)return null;const r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.state.spatialReference;return new Qe({x:i,y:n,spatialReference:s})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),n=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Si(n[0],n[1])}_project(t,r){var s;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(s=i.spatialReference)!=null&&s.imageCoordinateSystem||ai(r,i.spatialReference))return t;const n=Kd(i,r);if(!n)throw new V("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return qEe(t)?(t.targetGeometry=n,t):n}};function qEe(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}u([h({type:Qe})],Gi.prototype,"center",null),u([h()],Gi.prototype,"constraints",void 0),u([h({type:Ut})],Gi.prototype,"extent",null),u([h({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Gi.prototype,"padding",null),u([h()],Gi.prototype,"ready",void 0),u([h()],Gi.prototype,"resizeAlign",void 0),u([h({readOnly:!0})],Gi.prototype,"resolution",null),u([h({type:Number})],Gi.prototype,"rotation",null),u([h({type:Number})],Gi.prototype,"scale",null),u([h({readOnly:!0})],Gi.prototype,"state",void 0),u([h({type:ni})],Gi.prototype,"viewpoint",null),u([h({readOnly:!0})],Gi.prototype,"visibleArea",null),u([h()],Gi.prototype,"zoom",null),Gi=u([M("esri.views.2d.ViewStateManager")],Gi);function QQ(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function eee(e,t){return t.some(r=>QQ(e,r))}function RV(e,{dragPrimary:t,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:t},{key:"secondary",value:r},{key:"tertiary",value:i}].filter(n=>n.value===e).map(n=>n.key)}let CV=class extends li{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){QQ(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},HEe=class extends li{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:l}=o;switch(n){case"begin":{const{scale:d}=o;this._startScale=d,this._currentScale=d,this._previousDelta=s,l.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const d=1.015**s.y,f=this._startScale*d,g=f/this._currentScale;l.setViewpointImmediate(g),this._currentScale=f;break}case"end":{const{constraints:d}=o,{effectiveLODs:f,snapToZoom:g}=d;if(!g||!f)return void l.end();const v=d.snapScale(this._currentScale),b=(s.y>0?Math.max(v,d.snapToPreviousScale(this._startScale)):Math.min(v,d.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(b).then(()=>{l.end()});break}}}},Hx=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},WEe=class extends li{constructor(t,r,i){super(!0),this.view=t,this.pointerActions=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new Hx({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&eee(i.data,this.pointerActions)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},ZEe=class extends li{constructor(t,r,i){super(!0),this._view=t,this.pointerActions=r;const n=this._view.mapViewNavigation;this._dragEventSeparator=new Hx({start:(s,o)=>{n.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&eee(o.data,this.pointerActions)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function tee(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function YEe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function JEe(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function XEe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function ree(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function iee(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function nee(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function KEe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function QEe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function e$e(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function t$e(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function r$e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function i$e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function n$e(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function s$e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function see(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function o$e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function oee(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function aee(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function lee(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function a$e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function l$e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function QN(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function uee(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function u$e(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],l=r[1],d=r[2];return e[0]=n*d-s*l,e[1]=s*o-i*d,e[2]=i*l-n*o,e}function c$e(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],l=r[1],d=r[2],f=n*d-s*l,g=s*o-i*d,v=i*l-n*o,b=Math.sqrt(f*f+g*g+v*v);return e[0]=f/b,e[1]=g/b,e[2]=v/b,e}function d$e(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function h$e(e,t,r,i,n,s){const o=s*s,l=o*(2*s-3)+1,d=o*(s-2)+s,f=o*(s-1),g=o*(3-2*s);return e[0]=t[0]*l+r[0]*d+i[0]*f+n[0]*g,e[1]=t[1]*l+r[1]*d+i[1]*f+n[1]*g,e[2]=t[2]*l+r[2]*d+i[2]*f+n[2]*g,e}function p$e(e,t,r,i,n,s){const o=1-s,l=o*o,d=s*s,f=l*o,g=3*s*l,v=3*d*o,b=d*s;return e[0]=t[0]*f+r[0]*g+i[0]*v+n[0]*b,e[1]=t[1]*f+r[1]*g+i[1]*v+n[1]*b,e[2]=t[2]*f+r[2]*g+i[2]*v+n[2]*b,e}function f$e(e,t=1){const r=Rx,i=2*r()*Math.PI,n=2*r()-1,s=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=n*t,e}function y$e(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function m$e(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function g$e(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],l=t[0],d=t[1],f=t[2],g=n*f-s*d,v=s*l-i*f,b=i*d-n*l,S=n*b-s*v,T=s*g-i*b,E=i*v-n*g,x=2*o;return e[0]=l+g*x+2*S,e[1]=d+v*x+2*T,e[2]=f+b*x+2*E,e}function v$e(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function b$e(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function _$e(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function w$e(e,t){QN(IV,e),QN(NV,t);const r=uee(IV,NV);return r>1?0:r<-1?Math.PI:Math.acos(r)}const IV=Jd(),NV=Jd();function S$e(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function T$e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function E$e(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],l=t[2],d=gn();return Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=d*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))}function $$e(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const x$e=ree,A$e=iee,M$e=nee,O$e=oee,R$e=aee,C$e=tee,I$e=lee;Object.freeze(Object.defineProperty({__proto__:null,abs:e$e,add:XEe,angle:w$e,bezier:p$e,ceil:KEe,clamp:n$e,copy:YEe,cross:u$e,crossAndNormalize:c$e,direction:$$e,dist:O$e,distance:oee,div:M$e,divide:nee,dot:uee,equals:E$e,exactEquals:T$e,floor:QEe,hermite:h$e,inverse:l$e,len:C$e,length:tee,lerp:d$e,max:i$e,min:r$e,mul:A$e,multiply:iee,negate:a$e,normalize:QN,random:f$e,rotateX:v$e,rotateY:b$e,rotateZ:_$e,round:s$e,scale:see,scaleAndAdd:o$e,set:JEe,sign:t$e,sqrDist:R$e,sqrLen:I$e,squaredDistance:aee,squaredLength:lee,str:S$e,sub:x$e,subtract:ree,transformMat3:m$e,transformMat4:y$e,transformQuat:g$e},Symbol.toStringTag,{value:"Module"}));function xo(e){let t=e*e;return e<0&&(t*=-1),t}function N$e(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function P$e(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,l=1;return s.deviceType==="standard"?(i.translation[0]=xo(n.axes[0]),i.translation[1]=xo(n.axes[1]),i.translation[2]=xo(n.buttons[7])-xo(n.buttons[6]),i.heading=xo(n.axes[2]),i.tilt=xo(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*xo(n.axes[0]),i.translation[1]=1.2*xo(n.axes[1]),i.translation[2]=2*-xo(n.axes[2]),i.heading=1.2*xo(n.axes[5]),i.tilt=1.2*xo(n.axes[3])),i.tilt*=o,see(i.translation,i.translation,l),i}function L$e(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let k$e=class extends li{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Gg,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ze(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=_g({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Xi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var i;const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,N$e(this._transformation)):(this._currentDevice=t.data.device,P$e(t.data,this._view.navigation.gamepad,this._transformation)),(i=this._frameTask)==null||i.resume())}_frameUpdate(t){var v;const r=this._transformation;if(L$e(r))return void((v=this._frameTask)==null?void 0:v.pause());const i=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,s=j$e*n*t;qx(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*F$e*t,l=this._view.constraints.rotationEnabled?-r.heading*D$e*t:0,d=this._view.size,f=[d[0]/2,d[1]];LQ(i,i,o,l,f,d);const g=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=g}};const D$e=.06,j$e=.7,F$e=6e-4;function cee(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),vt(()=>document.removeEventListener("visibilitychange",t))}let U$e=class extends li{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const s=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;n.stopPropagation(),n.preventDefault();const o=n.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const l=this._timeout===void 0,d=this._pressedKeys.size>0;l||d?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=cee(n=>n?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},V$e=class extends li{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=cee(n=>n?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,r){for(const i of t)this._keyToDirection.set(i,r)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection.get(t.data.key);if(this._pressed=n!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Gm;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Gm||(Gm={}));let z$e=class extends li{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=Gm.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=Gm.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case Gm.IN:o=s.zoomIn();break;case Gm.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}};const G$e=.6;let B$e=class extends li{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/G$e**(1/60*s),l=r.zoom(o,[i,n]);l&&(this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},q$e=class extends li{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new Hx({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function PV(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>Z$e(r,e.axisThreshold))}:{buttons:[],axes:[]}}function H$e(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function W$e(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function Z$e(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let Y$e=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,l=o.index,d=this._inputDevices[l];d&&(this._emitGamepadEvent(o,PV(d),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(d),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(LV(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new WD(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=_g({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;LV(n=>{const s=this._inputDevices[n.index];if(!s)return;const o=this._latestUpdate[n.index],l=PV(s),d=i||W$e(l);o&&(o.timestamp===n.timestamp||!o.active&&d||H$e(o.state,l))||this._emitGamepadEvent(n,l,!d)})}_emitGamepadEvent(t,r,i){const n=this._latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function J$e(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function LV(e){for(const t of navigator.getGamepads())J$e(t)&&e(t)}const kV=Z("edge"),X$e=Z("chrome"),K$e=Z("ff"),Q$e=Z("safari"),DV="esri-view-surface",Ey={touchNone:`${DV}--touch-none`,touchPan:`${DV}--touch-pan`};let dee=class hee{constructor(t,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Y$e(t,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>this._releasePointerCaptureSafe(t)),this._activePointerCaptures.clear(),this._gamepadSource=Zt(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(U3[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&U3[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(U3[r],i),this._active[r]=i}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,r){r?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ey.touchNone:Ey.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ey.touchPan:Ey.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ey.touchNone),this._element.classList.remove(Ey.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=XK(this._element,t);return hee.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&Z("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:kV&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}kV?i*=.7:X$e||Q$e?i*=.6:K$e&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};dee.test={disableSubpixelCoordinates:!1};const U3={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let exe=class extends li{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const Ii={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function h$(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function txe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function rxe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Si()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[I,P]=e,[k,D]=[P.x-I.x,P.y-I.y];return t.radius=Math.sqrt(k*k+D*D)/2,t.center.x=(I.x+P.x)/2,t.center.y=(I.y+P.y)/2,t}let r=0,i=0;for(let I=0;I<e.length;I++)r+=e[I].x,i+=e[I].y;r/=e.length,i/=e.length;const n=e.map(I=>I.x-r),s=e.map(I=>I.y-i);let o=0,l=0,d=0,f=0,g=0,v=0,b=0;for(let I=0;I<n.length;I++){const P=n[I],k=s[I],D=P*P,H=k*k;o+=D,l+=H,d+=P*k,f+=D*P,g+=H*k,v+=P*H,b+=k*D}const S=.5*(f+v),T=.5*(g+b),E=o*l-d*d,x=(S*l-T*d)/E,O=(o*T-d*S)/E,C=Si(x+r,O+i);return{radius:Math.sqrt(x*x+O*O+(o+l)/e.length),center:C}}function Kp(e){const{native:t}=e,{pointerId:r,button:i,pointerType:n}=t;return n==="mouse"?`${r}:${i}`:`${n}`}let ixe=class extends li{constructor(t=Ii.maximumDoubleClickDelay,r=Ii.maximumDoubleClickDistance,i=Ii.maximumDoubleTouchDelay,n=Ii.maximumDoubleTouchDistance,s=Bg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Si(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Hx({start:(o,l)=>this._dragStart(o,l),update:(o,l)=>this._dragUpdate(l),end:(o,l)=>this._dragEnd(l)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=nr(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=nr(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=V3("begin",Si(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=V3("update",Si(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=V3("end",Si(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=Kp(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),h$(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=Kp(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function V3(e,t,r){const{button:i,buttons:n,pointer:s,pointers:o,pointerType:l,timestamp:d}=r;return{action:e,delta:t,button:i,buttons:n,pointer:s,pointers:o,pointerType:l,timestamp:d}}let nxe=class extends li{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:n,pointers:sxe(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=VS(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,n);const s=TT(n,pee(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=VS(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=VS(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=TT(i,r)-t,i.lastAngle=TT(i,r)-t})}_emitEvent(t,r,i){const n=VS(this._activePointerMap);this._drag.emit(this._createPayload(t,r,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function pee(e){const t=[];return e.forEach(r=>{t.push(Si(r.event.x,r.event.y))}),rxe(t)}function VS(e){const t=pee(e);let r=0;return e.forEach(i=>{let n=TT(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n;const o=n-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function sxe(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function TT(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var jV;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(jV||(jV={}));let oxe=class extends li{constructor(t=Ii.maximumDoubleClickDelay,r=Ii.maximumDoubleClickDistance,i=Ii.maximumDoubleTouchDelay,n=Ii.maximumDoubleTouchDistance,s=Bg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=Kp(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=Kp(r),n=this._pointerState.get(i);if(n&&n.downButton===r.native.button){const s=n.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),h$(s,t.data)>o?this._startImmediateDoubleClick(t,n):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(r))):h$(n,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,n)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=Kp(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},axe=class extends li{constructor(t=Ii.maximumClickDelay,r=Ii.movementUntilMouseDrag,i=Ii.movementUntilPenDrag,n=Ii.movementUntilTouchDrag,s=Ii.holdDelay,o=Bg){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=n,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",l=>this._handlePointerDown(l)),this.registerIncoming("pointer-up",l=>this._handlePointerLoss(l,"pointer-up")),this.registerIncoming("pointer-capture-lost",l=>this._handlePointerLoss(l,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",l=>this._handlePointerLoss(l,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",l=>this._handlePointerMove(l)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=nr(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const l=o.previousEvent;this._pointerHold.emit(l,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(zS("update",n,r),void 0,n.modifiers):txe(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(zS("start",n,r)):this._pointerDrag.emit(zS("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(zS("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function zS(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let lxe=class extends li{constructor(t=Ii.maximumDoubleClickDelay,r=Ii.maximumDoubleClickDistance,i=Ii.maximumDoubleTouchDelay,n=Ii.maximumDoubleTouchDistance,s=Bg){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=nr(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=nr(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,n=uxe(r);if(!this._pointerState.has(n))return void this._startClick(t);const s=this._pointerState.get(n),{data:o,modifiers:l}=s.event,d=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;h$(o,r)>d?(this._clearDoubleClickTimer(n,!0),this._startClick(t)):(this._clearDoubleClickTimer(n,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,l))}_handlePointerDown(t){const r=Kp(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,n=Kp(r),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),s);this._pointerState.set(n,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function uxe(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const GS={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},FV=Symbol("handles");let cp=class extends Ae{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([ao(()=>!t(),()=>this._disconnect()),ao(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(FV),this._inputManager=Zt(this._inputManager)}_connect(){const t=this.view.surface,r=new dee(t,this.view.input),i=[new oxe,new axe,new lxe,new nxe(this.view.navigation),new ixe],n=new Ns({eventSource:r,recognizers:i}),s=new WEe(this.view,["primary"]),o=new ZEe(this.view,["secondary"]);n.installHandlers("prevent-context-menu",[new exe],Od.INTERNAL),n.installHandlers("navigation",[new q$e(this.view),new k$e(this.view),new B$e(this.view),new CV(this.view),new CV(this.view,[GS.counter]),s,new U$e(this.view,GS.pan),new z$e(this.view,GS.zoom),new V$e(this.view,GS.rotate),o,new HEe(this.view,"touch")],Od.INTERNAL),this.view.viewEvents.connect(n),this._source=r,this._inputManager=n,this.addHandles([ze(()=>{var l,d;return(d=(l=this.view)==null?void 0:l.navigation)==null?void 0:d.browserTouchPanEnabled},l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)},Xi),ze(()=>{const{actionMap:l}=this.view.navigation;return{panActions:RV("pan",l),rotateActions:RV("rotate",l)}},({panActions:l,rotateActions:d})=>{s.pointerActions=l,o.pointerActions=d},Pn)],FV)}get test(){}};u([h()],cp.prototype,"view",void 0),u([h()],cp.prototype,"latestPointerType",null),u([h()],cp.prototype,"latestPointerLocation",null),u([h()],cp.prototype,"multiTouchActive",null),cp=u([M("esri.views.2d.input.MapViewInputManager")],cp);const cxe=cp,UV=160;let Sb=class extends Ae{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=UV&&this.clear()},UV))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};u([h()],Sb.prototype,"_timer",void 0),u([h()],Sb.prototype,"stationary",null),Sb=u([M("esri.views.2d.support.StationaryManager")],Sb);const dxe=e=>{let t=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Gi({constraints:new OV({view:this})}),this.goToManager=new ST({view:this}),this.stationaryManager=new Sb,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new VEe(this),this.inputManager=new cxe({view:this}),this.viewEvents=new JK(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ze(()=>this.viewpoint,()=>this.stationaryManager.flip(),il),this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const n=()=>{var s;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(s=this.frameTask)==null||s.requestFrame())};r.when(n,n)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i==null||i.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}on(r,i,n,s){return this.inputManager&&this.viewEvents.on(r,i,n,s)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}};return u([h({readOnly:!0})],t.prototype,"animationManager",void 0),u([h({readOnly:!0})],t.prototype,"fullOpacity",void 0),u([h()],t.prototype,"stateManager",void 0),u([h()],t.prototype,"constraintsInfo",null),u([h()],t.prototype,"extent",null),u([h()],t.prototype,"goToManager",void 0),u([h({readOnly:!0})],t.prototype,"state",null),u([h({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),u([h()],t.prototype,"renderingOptions",void 0),u([h({readOnly:!0})],t.prototype,"interacting",null),u([h()],t.prototype,"stationary",null),u([h()],t.prototype,"animation",null),u([h({type:OV})],t.prototype,"constraints",null),u([h({readOnly:!0})],t.prototype,"inputManager",void 0),u([h()],t.prototype,"padding",null),u([h()],t.prototype,"resizeAlign",null),u([h()],t.prototype,"rotation",null),u([h({readOnly:!0})],t.prototype,"viewEvents",void 0),u([h({type:ni})],t.prototype,"viewpoint",null),t=u([M("esri.views.Viewport2DMixin")],t),t};let VV=class{constructor(t){this._view=t,this.viewpoint=new ni({targetGeometry:new Qe,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return NQ(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=EZ(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=sx(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:n,rotate:s,zoom:o,zoomOffset:l}=i,{center:d}=this;d.spatialReference=t.center.spatialReference,d.x=Lv(t.center.x,r.center.x,n),d.y=Lv(t.center.y,r.center.y,n),this.viewpoint.scale=Lv(t.scale,r.scale+l,o);let f=t.rotation;const g=r.rotation;Math.abs(g-f)>=180&&(f+=360*(f<g?1:-1)),this.viewpoint.rotation=Lv(f,g,s)}copyFrom(t){Ji(this.viewpoint,t.viewpoint),this._view=t.view}};function Sv(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,l=3*t,d=3*(i-t)-l,f=1-l-d;function g(T){return((o*T+s)*T+n)*T}function v(T){return((f*T+d)*T+l)*T}function b(T){return(3*o*T+2*s)*T+n}function S(T,E){let x,O,C,I,P,k;for(C=T,k=0;k<8;k++){if(I=g(C)-T,Math.abs(I)<E)return C;if(P=b(C),Math.abs(P)<1e-6)break;C-=I/P}if(x=0,O=1,C=T,C<x)return x;if(C>O)return O;for(;x<O;){if(I=g(C),Math.abs(I-T)<E)return C;T>I?x=C:O=C,C=.5*(O-x)+x}return C}return function(T,E=1e-6){return v(S(T,E))}}const Bs={};Bs.ease=Sv(.25,.1,.25,1),Bs.linear=Sv(0,0,1,1),Bs.easeIn=Bs["ease-in"]=Sv(.42,0,1,1),Bs.easeOut=Bs["ease-out"]=Sv(0,0,.58,1),Bs.easeInOut=Bs["ease-in-out"]=Sv(.42,0,.58,1);const hxe=e=>e,Wx=e=>e*e,o5=e=>1-Wx(1-e),pxe=e=>e<.5?Wx(2*e)/2:(o5(2*(e-.5))+1)/2,a5=e=>e*e*e,fee=e=>1-a5(1-e),fxe=e=>e<.5?a5(2*e)/2:(fee(2*(e-.5))+1)/2,l5=e=>e*e*e*e,yee=e=>1-l5(1-e),yxe=e=>e<.5?l5(2*e)/2:(yee(2*(e-.5))+1)/2,u5=e=>e*e*e*e*e,mee=e=>1-u5(1-e),mxe=e=>e<.5?u5(2*e)/2:(mee(2*(e-.5))+1)/2,c5=e=>1-Math.cos(e*Math.PI/2),gee=e=>1-c5(1-e),gxe=e=>e<.5?c5(2*e)/2:(gee(2*(e-.5))+1)/2,d5=e=>2**(10*(e-1)),h5=e=>1-d5(1-e),vxe=e=>e<.5?d5(2*e)/2:(h5(2*(e-.5))+1)/2,p5=e=>-(Math.sqrt(1-e*e)-1),vee=e=>1-p5(1-e),bxe=e=>e<.5?p5(2*e)/2:(vee(2*(e-.5))+1)/2;function ho(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function po(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const _xe=po(ho(1),1),wxe=po(ho(1),0),eP=po(ho(1),.5),Sxe=po(ho(2),1),Txe=po(ho(2),0),Exe=po(ho(2),.5),$xe=po(ho(3),1),xxe=po(ho(3),0),Axe=po(ho(3),.5),Mxe=po(ho(4),1),Oxe=po(ho(4),0),Rxe=po(ho(4),.5),zV={linear:hxe,"in-quad":Wx,"out-quad":o5,"in-out-quad":pxe,"in-coast-quad":_xe,"out-coast-quad":wxe,"in-out-coast-quad":eP,"in-cubic":a5,"out-cubic":fee,"in-out-cubic":fxe,"in-coast-cubic":Sxe,"out-coast-cubic":Txe,"in-out-coast-cubic":Exe,"in-quart":l5,"out-quart":yee,"in-out-quart":yxe,"in-coast-quart":$xe,"out-coast-quart":xxe,"in-out-coast-quart":Axe,"in-quint":u5,"out-quint":mee,"in-out-quint":mxe,"in-coast-quint":Mxe,"out-coast-quint":Oxe,"in-out-coast-quint":Rxe,"in-sine":c5,"out-sine":gee,"in-out-sine":gxe,"in-expo":d5,"out-expo":h5,"in-out-expo":vxe,"in-circ":p5,"out-circ":vee,"in-out-circ":bxe,ease:e=>Bs.ease(e),"ease-in":e=>Bs.easeIn(e),"ease-out":e=>Bs.easeOut(e),"ease-in-out":e=>Bs.easeInOut(e)};let Cxe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const p$={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},bee={maxDuration:4e3};let Ixe=class _ee{constructor(t){this._createCamera=t,this.compared=new Cxe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:p$.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new _ee(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??p$.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>gn()}get hasFov(){return Math.abs(this.compared.fov)>gn()}get hasRotate(){return this.compared.rotate>gn()}},Nxe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Pxe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,n=0;const s=this.definition,o=this.segments.reduce((l,d)=>l||d.definition.hasZoom,!1);for(let l=0;l<this.segments.length;l++){const d=this.segments[l],f=d.definition;if(t<=d.time||l===this.segments.length-1){if(this.segmentInterpolateComponentsAt(d,d.time===0?0:t/d.time,r),s.hasPan&&!isNaN(r.pan)&&isFinite(s.compared.pan)?r.pan=(i+f.compared.pan*r.pan)/s.compared.pan:r.pan=1,s.hasRotate&&!isNaN(r.rotate)&&isFinite(s.compared.rotate)?r.rotate=(n+f.compared.rotate*r.rotate)/s.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(f.compared.targetZoom)){const{sourceZoom:g,targetZoom:v}=f.compared,b=r.zoom*(v-g)+g,S=this.segments[0].definition.compared.sourceZoom,T=this.segments[this.segments.length-1].definition.compared.targetZoom,E=Math.abs(v-S)>Math.abs(g-S)?v:g;r.zoomOffset=E-T,r.zoom=(b-S)/(E-S)}else r.zoom=1;return r}t-=d.time,i+=f.compared.pan,n+=f.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},z3=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,n=r.targetZoom;this._zoomSign=i>n?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const s=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*s}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:n,hasRotate:s}=this.definition;let o=0,l=0;i&&(n&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(l=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const d=this.definition.desiredPixelFlow;if(i&&n&&s){const f=o+l+o*l;this._zoomPixelFlow=o*l/f*d,this._panPixelFlow=l/f*d,this._rotatePixelFlow=o/f*d}else if(i&&n){const f=1+o;this._zoomPixelFlow=o/f*d,this._panPixelFlow=1/f*d}else if(i&&s){const f=1+l;this._zoomPixelFlow=l/f*d,this._rotatePixelFlow=1/f*d}else if(n&&s){const f=this._panPixelsAtSource/this._rotatePixels,g=1+f;this._panPixelFlow=f/g*d,this._rotatePixelFlow=1/g*d}else n?this._panPixelFlow=d:i?this._zoomPixelFlow=d:s&&(this._rotatePixelFlow=d);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const f=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=f,this._panPixelFlow/=f,this._rotatePixelFlow/=f}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Lxe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const Lxe=sx(45);function kxe(e,t,r){const i=t-e.compared.sourceZoom,n=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+n)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*n)}function Dxe(e,t,r){const i=1/t,n=Math.log(e.compared.sourceZoom*i),s=1/e.desiredPixelFlow,o=1/Math.LN2,l=t-e.compared.sourceZoom,d=1/l,f=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(l))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*s*o*d*f-e.halfWindowSize*n*s*o*d+e.halfWindowSize*n*s*o*f/(l*l)}function jxe(e,t,r){const i=t-e.compared.sourceZoom,n=1/i,s=1/t,o=Math.log(e.compared.sourceZoom*s),l=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*l+2*n*o+2*s-2*o*l/(i*i)-l/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Fxe(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Uxe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Vxe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function zxe(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function Gxe(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function Bxe(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function qxe(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function Hxe(e,t,r){const i=Math.log(t/e.compared.targetZoom),n=1/e.desiredPixelFlow,s=1/Math.LN2,o=-t+e.compared.targetZoom,l=1/o,d=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*n*s*l+e.halfWindowSize*i*n*s*d/(o*o)+e.halfWindowSize*n*s*l*d/t}function Wxe(e,t,r){const i=t-e.compared.targetZoom,n=1/i,s=1/t,o=Math.log(t/e.compared.targetZoom),l=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*(-2*n*s*l-2*n*o+2*s+2*o*l/(i*i)-l/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Zxe(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function Yxe(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Jxe(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Xxe(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,n=e.halfWindowPanAtZoom(i),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*n);return e.compared.sourceZoom<=e.compared.targetZoom?s*(r-n):s*(r+n)}function Kxe(e,t){let r=Qxe(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},n=i.ascensionFactor===0,s=i.descensionFactor===0,o=n?Fxe:kxe,l=n?Uxe:Dxe,d=n?Vxe:jxe,f=s?Zxe:qxe,g=s?Yxe:Hxe,v=s?Jxe:Wxe,b=P=>o(e,P,i)+zxe(e,P,i)+f(e,P,i),S=P=>l(e,P,i)+Gxe(e,P,i)+g(e,P,i),T=P=>d(e,P,i)+Bxe(e,P,i)+v(e,P,i);let E=b(r);const x=Xxe(e);let O;const C=t.maximumIterations||20,I=t.maximumDistance!=null?t.maximumDistance:1/0;for(O=0;O<C;O++){const P=t.desiredSlope??1e-6;let k=S(r);Math.abs(k)>P&&(k+=P);const D=k/T(r);if(isNaN(D)||r>=I&&D<0){if(!isFinite(I))return null;r=I,E=b(r);break}if(r-=D,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const H=b(r);if(Math.abs(H-E)/E<=.005)break;E=H}return E>x*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function Qxe(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let eAe=class extends Pxe{constructor(t,r){super(),this._preallocSegments=[new z3,new z3,new z3],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?Kxe(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=o5(i.zoom):t===this._descensionSegment&&(i.zoom=Wx(i.zoom))}_updateWithApex(t,r){const[i,n,s]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,l=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),d=1-o-l;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),d>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=t,n.definition.compared.targetZoom=t,n.definition.compared.pan=this.definition.compared.pan*d,n.definition.compared.rotate=this.definition.compared.rotate*d,n.definition.segmentStart=i.definition.segmentEnd,n.definition.segmentEnd=i.definition.segmentEnd+d,n.update(),this.segments.push(n)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=o+d,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const tAe=new Nxe;let rAe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=eP,this.definition=new Ixe(t),this.path=new eAe}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(qce(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?eP:h5)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,tAe);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,n=r.minDuration??p$.minDuration/i,s=r.maxDuration??p$.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,n),s)}};const iAe=2e3,nAe=64;let sAe=class{constructor(t){this._view=t,this._animation=new rAe(()=>new VV(this._view)),this._current=new VV(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){Ji(this._current.viewpoint,t),Ji(this._source.viewpoint,t),Ji(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),Ji(t,this._current.viewpoint)}},Jy=class extends Ae{constructor(t){super(t),this._animation=null,this._destinationViewState=new s5,this.updateFunction=null,this.easing=zV.ease,this.viewpoint=new ni({targetGeometry:new Qe,scale:0,rotation:0}),this._updateTask=_g({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new sAe(t.view)}destroy(){this._updateTask=nr(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const n=this.viewpoint;Ji(n,r);const s=t.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(r.scale,s.scale)*nAe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??bee.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:(typeof(i==null?void 0:i.easing)=="string"?zV[i.easing]:i==null?void 0:i.easing)||this.easing}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,oAe(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new YN({target:t.clone()}),n=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,n;const r=this.animation;if(r&&r.state!==YN.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const s=performance.now()-this._startTime,o=this._transition.duration,l=o>0?s/o:1,d=l>=1;this._transition.applyRatio(this.viewpoint,l),d&&((n=this.animation)==null||n.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function oAe(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:n,isLinear:s}=e,o=(t==null?void 0:t.speedFactor)||1;if(n>((t==null?void 0:t.maxDuration)??bee.maxDuration/o))return!1;if(s){const d=mr(),f=Si(...i.toScreen(d,...r.center)),g=Si(...r.toScreen(d,...i.center)),v=g!=null&&g.x>-1*r.size[0]&&g.x<(1.5+.5)*r.size[0]&&g.y>-1*r.size[1]&&g.y<(1.5+.5)*r.size[1],b=f!=null&&f.x>-1*i.size[0]&&f.x<(1.5+.5)*i.size[0]&&f.y>-1*i.size[1]&&f.y<(1.5+.5)*i.size[1];if(n>iAe/o&&!v&&!b)return!1}return!0}u([h()],Jy.prototype,"easing",void 0),u([h()],Jy.prototype,"view",void 0),u([h()],Jy.prototype,"viewpoint",void 0),Jy=u([M("esri.views.2d.AnimationManager")],Jy);const aAe=Jy;function Ht(){return Promise.all([ne(()=>import("./webglDeps-CgGSnfMr.js"),__vite__mapDeps([183,144,17,184,185,186])),ne(()=>import("./mapViewDeps-G1XEDaxQ.js"),__vite__mapDeps([187,109,75,76,16,17,77,78,79,80,74,46,188,83,189,184,144,185,148,124,190,101,191,131,130,87,21,22,81,89,192,84,85,86,193,6,129,183,186,194,96,195,73,19,13,26,25,196,137,138,122,146,197,62,198,88,199,200,82,201,51,93,71,202,203,204,205,140,206,207]))])}const Tv=()=>Ht().then(()=>ne(()=>import("./TileLayerView2D-DDuAQUOR.js"),__vite__mapDeps([208,109,79,75,76,16,17,77,78,80,74,46,193,6,191,190,185,144,101,131,130,87,21,22,129,194,189,184,148,124,188,83,81,89,96,195,73,19,13,26,25,62,84,85,86,137,138,122,201,51,93,71,209,210,205,211,163,212,203,204,213,214,215,216,217,218]))),kh=()=>Ht().then(()=>ne(()=>import("./FeatureLayerView2D-HL1aZ2bW.js").then(e=>e.F),__vite__mapDeps([219,191,21,16,17,22,220,221,222,19,13,29,211,163,204,75,76,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,188,83,189,148,124,81,89,96,192,223,95,215,218,213]))),GV={"base-dynamic":()=>Ht().then(()=>ne(()=>import("./BaseDynamicLayerView2D-D0-DmkfU.js"),__vite__mapDeps([224,225,190,74,46,185,144,17,101,191,131,130,87,21,16,22,210,189,184,148,124,83,211,163,226,213]))),"base-tile":Tv,"bing-maps":Tv,catalog:()=>Ht().then(()=>ne(()=>import("./CatalogLayerView2D-fYGm5nYN.js"),__vite__mapDeps([227,211,191,163]))),"catalog-dynamic-group":()=>Ht().then(()=>ne(()=>import("./CatalogDynamicGroupLayerView2D-CMB0Z87M.js"),__vite__mapDeps([228,211,191,163]))),"catalog-footprint":()=>Ht().then(()=>ne(()=>import("./CatalogFootprintLayerView2D-CMbgK5gO.js"),__vite__mapDeps([229,219,191,21,16,17,22,220,221,222,19,13,29,211,163,204,75,76,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,188,83,189,148,124,81,89,96,192,223,95,215,218,213]))),csv:kh,"geo-rss":()=>Ht().then(()=>ne(()=>import("./GeoRSSLayerView2D-B3JgAwo8.js"),__vite__mapDeps([230,211,191,163,202,203,204,75,76,16,17,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,21,22,188,83,189,148,124,81,89,201,193,109,6,73,19,13,26,25,51,93,71]))),feature:kh,geojson:kh,parquet:kh,graphics:()=>Ht().then(()=>ne(()=>import("./GraphicsLayerView2D-DFlvVzL4.js"),__vite__mapDeps([231,211,191,163,202,203,204,75,76,16,17,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,21,22,188,83,189,148,124,81,89,201,193,109,6,73,19,13,26,25,51,93,71]))),group:()=>Ht().then(()=>ne(()=>import("./GroupLayerView2D-CWCEHo3o.js"),__vite__mapDeps([232,211,191,163]))),imagery:()=>Ht().then(()=>ne(()=>import("./ImageryLayerView2D-BGNSeAPI.js"),__vite__mapDeps([233,234,144,17,46,107,190,74,185,101,191,131,130,87,21,16,22,211,163,201,75,76,77,78,79,80,193,109,6,73,19,13,26,25,188,83,189,184,148,124,81,89,51,93,71,212,203,204,205,225,210,226,111,220,218,213]))),"imagery-tile":()=>Ht().then(()=>ne(()=>import("./ImageryTileLayerView2D-tgpstXxS.js"),__vite__mapDeps([235,236,234,144,17,46,107,190,74,185,101,191,131,130,87,21,16,22,211,163,237,199,86,184,205,238,111,220,218,213]))),kml:()=>Ht().then(()=>ne(()=>import("./KMLLayerView2D-DBfkaG8r.js"),__vite__mapDeps([239,240,210,191,189,184,144,17,185,148,124,83,225,190,74,46,101,131,130,87,21,16,22,211,163,202,203,204,75,76,77,78,79,80,205,188,81,89,201,193,109,6,73,19,13,26,25,51,93,71,111,199,86,196,183,186,137,138,122,195,146,237]))),"knowledge-graph":()=>Ht().then(()=>ne(()=>import("./KnowledgeGraphLayerView2D-D0l6bOsM.js"),__vite__mapDeps([241,211,191,163]))),"link-chart":()=>Ht().then(()=>ne(()=>import("./KnowledgeGraphLayerView2D-D0l6bOsM.js"),__vite__mapDeps([241,211,191,163]))),"knowledge-graph-sublayer":kh,"map-image":()=>Ht().then(()=>ne(()=>import("./MapImageLayerView2D-Dk20UdrD.js"),__vite__mapDeps([242,225,190,74,46,185,144,17,101,191,131,130,87,21,16,22,210,189,184,148,124,83,211,163,201,75,76,77,78,79,80,193,109,6,73,19,13,26,25,188,81,89,51,93,71,212,203,204,205,226,243,215,217,220,213,214,216,218]))),"map-notes":()=>Ht().then(()=>ne(()=>import("./MapNotesLayerView2D-Cy_p4hx0.js"),__vite__mapDeps([244,211,191,163,202,203,204,75,76,16,17,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,21,22,188,83,189,148,124,81,89,201,193,109,6,73,19,13,26,25,51,93,71]))),media:()=>Ht().then(()=>ne(()=>import("./MediaLayerView2D-BB21RNtP.js"),__vite__mapDeps([245,246,93,51,109,79,75,76,16,17,77,78,80,74,46,193,6,191,190,185,144,101,131,130,87,21,22,129,194,189,184,148,124,188,83,81,89,96,195,73,19,13,26,25,62,84,85,86,137,138,122,201,71,198,88,247,200,211,163]))),"ogc-feature":()=>Ht().then(()=>ne(()=>import("./OGCFeatureLayerView2D-Cp2oy1z0.js"),__vite__mapDeps([248,219,191,21,16,17,22,220,221,222,19,13,29,211,163,204,75,76,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,188,83,189,148,124,81,89,96,192,223,95,215,218,213]))),"open-street-map":Tv,"oriented-imagery":kh,route:()=>Ht().then(()=>ne(()=>import("./RouteLayerView2D-Dtlk8M4m.js"),__vite__mapDeps([249,250,251,211,191,163,202,203,204,75,76,16,17,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,21,22,188,83,189,148,124,81,89,201,193,109,6,73,19,13,26,25,51,93,71]))),stream:()=>Ht().then(()=>ne(()=>import("./StreamLayerView2D-C3e2JcFo.js"),__vite__mapDeps([252,219,191,21,16,17,22,220,221,222,19,13,29,211,163,204,75,76,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,188,83,189,148,124,81,89,96,192,223,95,215,218,213]))),"subtype-group":()=>Ht().then(()=>ne(()=>import("./SubtypeGroupLayerView2D-DgwKz2Ij.js"),__vite__mapDeps([253,219,191,21,16,17,22,220,221,222,19,13,29,211,163,204,75,76,77,78,79,80,74,46,184,144,205,190,185,101,131,130,87,188,83,189,148,124,81,89,96,192,223,95,215,218,213]))),tile:Tv,"vector-tile":()=>Ht().then(()=>ne(()=>import("./VectorTileLayerView2D-B6c3By6p.js"),__vite__mapDeps([254,129,80,62,17,78,79,77,144,130,190,74,46,185,101,191,131,87,21,16,22,205,32,132,133,109,211,163,213]))),video:()=>Ht().then(()=>ne(()=>import("./VideoLayerView2D-BRM0PTfp.js"),__vite__mapDeps([255,256,257,247,101,190,74,46,185,144,17,191,131,130,87,21,16,22,188,75,76,77,78,79,80,83,189,184,148,124,81,89,200,211,163,202,203,204,205,201,193,109,6,73,19,13,26,25,51,93,71]))),wcs:()=>Ht().then(()=>ne(()=>import("./ImageryTileLayerView2D-tgpstXxS.js"),__vite__mapDeps([235,236,234,144,17,46,107,190,74,185,101,191,131,130,87,21,16,22,211,163,237,199,86,184,205,238,111,220,218,213]))),"web-tile":Tv,wfs:kh,wms:()=>Ht().then(()=>ne(()=>import("./WMSLayerView2D-Bej5Y6Pm.js"),__vite__mapDeps([258,225,190,74,46,185,144,17,101,191,131,130,87,21,16,22,210,189,184,148,124,83,211,163,226,213,259,220]))),wmts:()=>Ht().then(()=>ne(()=>import("./WMTSLayerView2D-CPeef8aV.js"),__vite__mapDeps([260,209,210,191,189,184,144,17,185,148,124,83,190,74,46,101,131,130,87,21,16,22,205,211,163,213]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function lAe(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new V(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const BV={hasLayerViewModule:e=>GV[e.type]!=null,importLayerView:e=>{const t=GV[e.type];if(t==null)throw lAe(e);return t(e)}};let Gd=class dp{static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}constructor(t,r,i,n){this.set(t,r,i,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new dp(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,l,d]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(l),this.world=parseFloat(d)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new dp(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const n=this.clone();return n.col+=t,n.row+=r,i.normalizeKey(n),n}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new dp(t,r,i,n),new dp(t,r,i+1,n),new dp(t,r+1,i,n),new dp(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};Gd.pool=new Tf(Gd,null,null,25,50);function $y(e,t){return[e,t]}function Dh(e,t,r){return e[0]=t,e[1]=r,e}function uAe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const Ao=new Gd("0/0/0/0");let cAe=class wee{static create(t,r,i=null){const n=mn(t.spatialReference),s=r.origin||$y(t.origin.x,t.origin.y),o=$y(t.size[0]*r.resolution,t.size[1]*r.resolution),l=$y(-1/0,-1/0),d=$y(1/0,1/0),f=$y(1/0,1/0);i!=null&&(Dh(l,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),Dh(d,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),Dh(f,d[0]-l[0]+1,d[1]-l[1]+1));const{cols:g,rows:v}=r;let b,S,T,E;return!i&&g&&v&&(Dh(l,g[0],v[0]),Dh(d,g[1],v[1]),Dh(f,g[1]-g[0]+1,v[1]-v[0]+1)),t.isWrappable?(b=$y(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),f[1]),S=!0,T=n.origin,E=n.valid):(b=f,S=!1),new wee(r.level,r.resolution,r.scale,s,l,d,f,o,b,S,T,E)}constructor(t,r,i,n,s,o,l,d,f,g,v,b){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=l,this.norm=d,this.worldSize=f,this.wrap=g,this._spatialReferenceOrigin=v,this._spatialReferenceValid=b}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,n=this._spatialReferenceValid;return this.wrap&&i&&n?r===i[0]?n[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?n[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){Ao.set(r);const n=i?Ao.col:this.denormalizeCol(Ao.col,Ao.world),s=Ao.row;return uAe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){Ao.set(r);const n=i?Ao.col:this.denormalizeCol(Ao.col,Ao.world);return Array.isArray(t)?Dh(t,this.getXForColumn(n),this.getYForRow(Ao.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Ao.row)),t}},K_=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:n}of this.spans)for(let s=i;s<=n;s++){const o=t.getWorldForColumn(s);yield new Gd(t.level,r,t.normalizeCol(s),o)}}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:l,colTo:d}of i)for(let f=l;f<=d;f++)t.call(r,s,o,n.normalizeCol(f),n.getWorldForColumn(f))}};K_.pool=new Tf(K_);let G3=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Kt=new Gd("0/0/0/0");let dAe=class See{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,l=s-i,d=o-n,f=d!==0?l/d:0,g=(Math.ceil(n)-n)*f,v=(Math.floor(n)-n)*f;return new See(i,Math.floor(n),Math.ceil(o),f,l<0?g:v,l<0?v:g,l<0?s:i,l<0?i:s)}constructor(t,r,i,n,s,o,l,d){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=l,this.rightBound=d}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Jn=[[0,0],[0,0],[0,0],[0,0]],hAe=1e-6;let pAe=class{constructor(t,r=null,i=t.lods[0].level,n=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=t.lods.filter(l=>l.level>=i&&l.level<=n);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(l=>cAe.create(t,l,r));s.forEach((l,d)=>{this._infoByLevel[l.level]=o[d],this._infoByScale[l.scale]=o[d],this.scales[d]=l.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Kt.set(r);const n=this._infoByLevel[Kt.level];return n?n.getTileBounds(t,Kt,i):t}getTileCoords(t,r,i=!1){Kt.set(r);const n=this._infoByLevel[Kt.level];return n?n.getTileCoords(t,Kt,i):t}getTileCoverage(t,r=192,i=!0,n="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const s=n==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=K_.pool.acquire(s),l=this._wrap;let d,f,g,v=1/0,b=-1/0;const S=o.spans;Jn[0][0]=Jn[0][1]=Jn[1][1]=Jn[3][0]=-r,Jn[1][0]=Jn[2][0]=t.size[0]+r,Jn[2][1]=Jn[3][1]=t.size[1]+r;for(const O of Jn)t.toMap(O,O),O[0]=s.getColumnForX(O[0]),O[1]=s.getRowForY(O[1]);const T=[];let E=3;for(let O=0;O<4;O++){if(Jn[O][1]===Jn[E][1]){E=O;continue}const C=dAe.create(Jn[O],Jn[E]);v=Math.min(C.ymin,v),b=Math.max(C.ymax,b),T[C.ymin]===void 0&&(T[C.ymin]=[]),T[C.ymin].push(C),E=O}if(v==null||b==null||b-v>100)return null;let x=[];for(d=v;d<b;){T[d]!=null&&(x=x.concat(T[d])),f=1/0,g=-1/0;for(let O=x.length-1;O>=0;O--){const C=x[O];f=Math.min(f,C.getLeftCol()),g=Math.max(g,C.getRightCol())}if(f=Math.floor(f),g=Math.floor(g),d>=s.first[1]&&d<=s.last[1])if(l)if(s.size[0]<s.worldSize[0]){const O=Math.floor(g/s.worldSize[0]);for(let C=Math.floor(f/s.worldSize[0]);C<=O;C++)S.push(new G3(d,Math.max(s.getFirstColumnForWorld(C),f),Math.min(s.getLastColumnForWorld(C),g)))}else S.push(new G3(d,f,g));else f>s.last[0]||g<s.first[0]||(f=Math.max(f,s.first[0]),g=Math.min(g,s.last[0]),S.push(new G3(d,f,g)));d+=1;for(let O=x.length-1;O>=0;O--){const C=x[O];C.ymax>=d?C.incrRow():x.splice(O,1)}}return o}getTileParentId(t){Kt.set(t);const r=this._infoByLevel[Kt.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Kt,this._lodInfos[i],Kt),Kt.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Kt.set(r);const i=this._infoByLevel[Kt.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(Kt,n,Kt);const o=n.denormalizeCol(Kt.col,Kt.world);for(const l of t.spans)if(l.row===Kt.row&&l.colFrom<=o&&l.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,l,d,f]=t.spans.reduce((E,x)=>(E[0]=Math.min(E[0],x.row),E[1]=Math.max(E[1],x.row),E[2]=Math.min(E[2],x.colFrom),E[3]=Math.max(E[3],x.colTo),E),[1/0,-1/0,1/0,-1/0]),g=i.denormalizeCol(Kt.col,Kt.world),v=n.getColumnForX(i.getXForColumn(g)),b=n.getRowForY(i.getYForRow(Kt.row)),S=n.getColumnForX(i.getXForColumn(g+1))-1,T=n.getRowForY(i.getYForRow(Kt.row+1))-1;return!(v>f||S<d||b>l||T<o)}const s=n.denormalizeCol(Kt.col,Kt.world);return t.spans.some(o=>o.row===Kt.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=mn(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+hAe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}},fAe=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},yAe=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new gT,this._controllers=new gT,this._processingItems=new gT,this._pausedSignal=Ig(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new BE(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=nr(this._schedule),this._task=nr(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=ro(r,()=>n.abort()));const o=()=>{const g=this._processingItems.get(t);g&&g.controller.abort(),l(),f.reject(kt())},l=()=>{d.remove(),s!=null&&s.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},d=_k(n.signal,o),f=gs();return this._deferreds.set(t,f),this._controllers.set(t,n),f.promise.then(l,l),this._queue.push(t),this._scheduleNext(),f.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(kt()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Sw(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,n=new fAe(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}ll(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){}};const qV=[0,0];let Xl=class extends Ae{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:n}=this;this._queue=new yAe({concurrency:t,scheduler:i,priority:n,process:(s,o)=>{const l=this._keyToItem.get(s);return r(l,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Zt(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),n=this.tileInfoView.getTileScale(t.key),s=fw(this._tilesByScale,n,()=>new Set),o=()=>{s.delete(t.key),s.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(r)};return s.add(t.key),this._keyToItem.set(r,t),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const o of t)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let n,s=Number.POSITIVE_INFINITY;for(const[o,l]of this._tilesByScale)if(pW(l,d=>r.has(d))){const d=Math.abs(o-i);d<s&&(n=l,s=d)}return this._getClosestTileKey(n,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,n=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const l of t)if(r.has(l.id)){i.getTileCoords(qV,l);const d=zx(qV,n);d<o&&(o=d,s=l)}return s}};u([h({constructOnly:!0})],Xl.prototype,"concurrency",void 0),u([h({constructOnly:!0})],Xl.prototype,"priority",void 0),u([h({constructOnly:!0})],Xl.prototype,"process",void 0),u([h({constructOnly:!0})],Xl.prototype,"scheduler",void 0),u([h()],Xl.prototype,"state",void 0),u([h({constructOnly:!0})],Xl.prototype,"tileInfoView",void 0),Xl=u([M("esri.views.2d.tiling.TileQueue")],Xl);const zUe=Xl;let mAe=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,n=this._tileKeysPerLevel[i];HV(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:l}=this._tileInfoView.tileInfo,d=i*o[0],f=i*o[1],g=[0,0],v=[0,0];for(s.sort((b,S)=>(g[0]=l.x+d*(b.col+.5),g[1]=l.y-f*(b.row+.5),v[0]=l.x+d*(S.col+.5),v[1]=l.y-f*(S.row+.5),u$(g,r)-u$(v,r)));s.length>0;){const b=s.pop();if(this._removeTile(b.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),HV(this._tilePerId,t)}};function HV(e,t){e.delete(t)}const jh=new Gd(0,0,0,0),kl=new Map,Ev=[],B3=[];let BUe=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new mAe(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var O,C;const{resampling:r,tileIndex:i}=this,{scale:n,center:s,resolution:o}=t.state,{minScale:l,maxScale:d}=this.tileInfoView,f=!t.stationary&&n>this._previousScale;if(this._previousScale=n,!r&&(n>l||n<d))return this.tiles.length=0,void this.clear();const g=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!g)return this.tiles.length=0,void this.clear();const{spans:v,lodInfo:b}=g,{level:S}=b;this.tiles.length=0,i.forEach(I=>I.visible=!0);let T=0,E=0;if(v.length>0)for(const{row:I,colFrom:P,colTo:k}of v)for(let D=P;D<=k;D++){T++;const H=jh.set(S,I,b.normalizeCol(D),b.getWorldForColumn(D)).id;let re=i.get(H);if(re)re.isReady?(kl.set(H,re),E++):f||this._addParentTile(H,kl);else{if((O=this._tileCache)!=null&&O.has(H)){if(re=this._tileCache.pop(H),this.tileIndex.set(H,re),re.isReady){kl.set(H,re),E++;continue}}else re=this.acquireTile(jh),this.tileIndex.set(H,re);f||this._addParentTile(H,kl)}}const x=E===T;for(const[I,P]of i){if(kl.has(I))continue;jh.set(I);const k=this.tileInfoView.intersects(g,jh),D=this.cachePolicy==="purge"?jh.level!==S:jh.level>S;!k||!f&&x?!D&&k||Ev.push(P):P.isReady?D&&this.cachePolicy==="purge"&&this._hasReadyAncestor(jh,S)?Ev.push(P):B3.push(P):D&&Ev.push(P)}for(const I of B3)I.isReady&&kl.set(I.key.id,I);for(const I of Ev)this._tileCache?this._tileCache.add(I):this.releaseTile(I),i.delete(I.key.id);for(const I of kl.values())this.tiles.push(I);for(const I of i.values())kl.has(I.key.id)||(I.visible=!1);(C=this._tileCache)==null||C.prune(S,s,o),K_.pool.release(g),B3.length=0,Ev.length=0,kl.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())t(i);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var s;let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n==null?void 0:n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if((s=this._tileCache)!=null&&s.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n==null?void 0:n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=yn();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=yn();if(this.tileInfoView.getTileBounds(s,n.key,!0),sfe(s,i))return!0}return!1}};function gAe(e,t,r,i,n){Tee(e,t,r||0,i||e.length-1,n||vAe)}function Tee(e,t,r,i,n){for(;i>r;){if(i-r>600){var s=i-r+1,o=t-r+1,l=Math.log(s),d=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*d*(s-d)/s)*(o-s/2<0?-1:1);Tee(e,t,Math.max(r,Math.floor(t-o*d/s+f)),Math.min(i,Math.floor(t+(s-o)*d/s+f)),n)}var g=e[t],v=r,b=i;for($v(e,r,t),n(e[i],g)>0&&$v(e,r,i);v<b;){for($v(e,v,b),v++,b--;n(e[v],g)<0;)v++;for(;n(e[b],g)>0;)b--}n(e[r],g)===0?$v(e,r,b):$v(e,++b,i),b<=t&&(r=b+1),t<=b&&(i=b-1)}}function $v(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function vAe(e,t){return e<t?-1:e>t?1:0}function f$(e,t){if(!(this instanceof f$))return new f$(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function bAe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function xy(e,t){Tb(e,0,e.children.length,t,e)}function Tb(e,t,r,i,n){n||(n=Xy(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],Eb(n,e.leaf?i(s):s);return n}function Eb(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function WV(e,t){return e.minX-t.minX}function ZV(e,t){return e.minY-t.minY}function q3(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function BS(e){return e.maxX-e.minX+(e.maxY-e.minY)}function _Ae(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function wAe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function H3(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function qS(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Xy(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function YV(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,gAe(e,s,t,r,n),o.push(t,s,s,r))}f$.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!qS(e,t))return r;for(var n,s,o,l,d=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],qS(e,l=t.leaf?i(o):o)&&(t.leaf?r.push(o):H3(e,l)?this._all(o,r):d.push(o));t=d.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!qS(e,t))return!1;for(var i,n,s,o,l=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],qS(e,o=t.leaf?r(s):s)){if(t.leaf||H3(e,o))return!0;l.push(s)}t=l.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Xy([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,n,s,o=this.data,l=this.toBBox(e),d=[],f=[];o||d.length;){if(o||(o=d.pop(),i=d[d.length-1],r=f.pop(),s=!0),o.leaf&&(n=bAe(e,o.children,t))!==-1)return o.children.splice(n,1),d.push(o),this._condense(d),this;s||o.leaf||!H3(o,l)?i?(r++,o=i.children[r],s=!1):o=null:(d.push(o),f.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:WV,compareMinY:ZV,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return xy(n=Xy(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=Xy([])).leaf=!1,n.height=i;var l,d,f,g,v=Math.ceil(s/o),b=v*Math.ceil(Math.sqrt(o));for(YV(e,t,r,b,this.compareMinX),l=t;l<=r;l+=b)for(YV(e,l,f=Math.min(l+b-1,r),v,this.compareMinY),d=l;d<=f;d+=v)g=Math.min(d+v-1,f),n.children.push(this._build(e,d,g,i-1));return xy(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,l,d,f,g,v;i.push(t),!t.leaf&&i.length-1!==r;){for(g=v=1/0,n=0,s=t.children.length;n<s;n++)d=q3(o=t.children[n]),(f=_Ae(e,o)-d)<v?(v=f,g=d<g?d:g,l=o):f===v&&d<g&&(g=d,l=o);t=l||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),Eb(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=Xy(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,xy(r,this.toBBox),xy(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=Xy([e,t]),this.data.height=e.height+1,this.data.leaf=!1,xy(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,l,d,f,g;for(d=f=1/0,i=t;i<=r-t;i++)o=wAe(n=Tb(e,0,i,this.toBBox),s=Tb(e,i,r,this.toBBox)),l=q3(n)+q3(s),o<d?(d=o,g=i,f=l<f?l:f):o===d&&l<f&&(f=l,g=i);return g},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:WV,n=e.leaf?this.compareMinY:ZV;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,l=Tb(e,0,t,o),d=Tb(e,r-t,r,o),f=BS(l)+BS(d);for(n=t;n<r-t;n++)s=e.children[n],Eb(l,e.leaf?o(s):s),f+=BS(l);for(n=r-t-1;n>=t;n--)s=e.children[n],Eb(d,e.leaf?o(s):s),f+=BS(d);return f},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Eb(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():xy(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function SAe(e,{timeZone:t,timeExtent:r}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:r==null?void 0:r.start,currentEnd:r==null?void 0:r.end}}}}let JV=class Eee{constructor(t,r){this.key=new Gd(0,0,0,0),this.bounds=yn(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return ife(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return SAe(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),r=fn.acquire();for(let i=0;i<t.length;i++)r[i]=new Eee(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return HK.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Fh={added:[],removed:[]},W3=new Set,TAe=new Gd(0,0,0,0);function EAe(e,t){const r=mn(t);if(!r)return null;const[i,n]=r.valid;return e[2]>n?[yn([e[0],e[1],n,e[3]]),yn([i,e[1],i+e[2]-n,e[3]])]:e[0]<i?[yn([i,e[1],e[2],e[3]]),yn([n-(i-e[0]),e[1],n,e[3]])]:null}let $Ae=class extends aa{constructor(t){super(),this._tiles=new Map,this._index=f$(9,Z("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||qk(t)===0||Hk(t)===0)return[];const r=EAe(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new JV(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:l,colTo:d}of i)for(let f=l;f<=d;f++){const g=TAe.set(s,o,n.normalizeCol(f),n.getWorldForColumn(f)).id;if(W3.add(g),!this.has(g)){const v=new JV(this.tileScheme,g);this._tiles.set(g,v),this._index.insert(v),this.tiles.push(v),Fh.added.push(v)}}for(let o=this.tiles.length-1;o>=0;o--){const l=this.tiles[o];W3.has(l.id)||(this._tiles.delete(l.id),this.tiles.splice(o,1),this._index.remove(l),Fh.removed.push(l))}(Fh.added.length||Fh.removed.length)&&this.emit("update",Fh),K_.pool.release(r),W3.clear(),Fh.added.length=0,Fh.removed.length=0}};const WUe=1e-30,XV=512,HS=16777216,ZUe=8,YUe=29,JUe=24,XUe=4,KUe=0,QUe=0,e9e=0,t9e=1,r9e=2,i9e=3,n9e=4,s9e=5,o9e=6,a9e=12,l9e=13,u9e=5,xAe=6,c9e=5,d9e=6;var KV;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(KV||(KV={}));const $ee=6,AAe=1<<$ee,h9e=AAe<<1,p9e=1.05,f9e=3,y9e=1,m9e=3,g9e=3,v9e=5,b9e=6,_9e=1.15,MAe=4,w9e=128,OAe=256,S9e=OAe-2*MAe,T9e=2,E9e=128,$9e=1,x9e=10,A9e=1024,M9e=128,O9e=4,R9e=1,C9e=1<<20,I9e=.75,N9e=10,P9e=.75,L9e=256,k9e=32,D9e=512,j9e=0,F9e=1,RAe=1,U9e=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],V9e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],xv=256;var QV,ez,tz,rz,tP,iz,nz,ja,rP,v_,ti,y$,Ys,Wt,Oe,Q_,fu,sz,oz,az;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(QV||(QV={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(ez||(ez={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(tz||(tz={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(rz||(rz={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(tP||(tP={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(iz||(iz={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(nz||(nz={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(ja||(ja={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(rP||(rP={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(v_||(v_={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(ti||(ti={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(y$||(y$={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Ys||(Ys={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Wt||(Wt={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(Oe||(Oe={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(Q_||(Q_={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(fu||(fu={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(sz||(sz={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(oz||(oz={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(az||(az={}));const z9e=33984;var m$,lz,uz;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(m$||(m$={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(lz||(lz={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(uz||(uz={}));const G9e=33306;var gi,cz,dz,hz,pz,fz,yz;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(gi||(gi={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(cz||(cz={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(dz||(dz={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(hz||(hz={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(pz||(pz={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(fz||(fz={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(yz||(yz={}));const CAe=()=>ae.getLogger("esri.views.webgl.checkWebGLError");function IAe(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const xee=!!Z("enable-feature:webgl-debug");function Aee(){return xee}function B9e(){return xee}function Ay(e){if(Aee()){const t=e.getError();if(t){const r=IAe(e,t),i=new Error().stack;CAe().error(new V("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}var iP;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(iP||(iP={}));function NAe(e){switch(e){case ja.BYTE:case ja.UNSIGNED_BYTE:return 1;case ja.SHORT:case ja.UNSIGNED_SHORT:case ja.HALF_FLOAT:return 2;case ja.FLOAT:case ja.INT:case ja.UNSIGNED_INT:return 4}}function PAe(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function q9e(e,t,r,i,n=0){var o;const s=e.gl;e.bindBuffer(r);for(const l of i){const d=t.get(l.name);if(d==null){console.warn(`There is no location for vertex attribute '${l.name}' defined.`);continue}const f=n*l.stride;if(l.count<=4)s.vertexAttribPointer(d,l.count,l.type,l.normalized,l.stride,l.offset+f),s.enableVertexAttribArray(d),l.divisor>0&&e.gl.vertexAttribDivisor(d,l.divisor);else if(l.count===9)for(let g=0;g<3;g++)s.vertexAttribPointer(d+g,3,l.type,l.normalized,l.stride,l.offset+12*g+f),s.enableVertexAttribArray(d+g),l.divisor>0&&e.gl.vertexAttribDivisor(d+g,l.divisor);else if(l.count===16)for(let g=0;g<4;g++)s.vertexAttribPointer(d+g,4,l.type,l.normalized,l.stride,l.offset+16*g+f),s.enableVertexAttribArray(d+g),l.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(d+g,l.divisor));else console.error("Unsupported vertex attribute element count: "+l.count);if(Aee()){const g=PAe(e),v=NAe(l.type),b=l.offset,S=Math.round(v/b)!==v/b?`. Offset not a multiple of stride. DataType requires ${v} bytes, but descriptor has an offset of ${b}`:"";g&&console.error(`Unable to bind vertex attribute "${l.name}" with baseInstanceOffset ${f}${S}:`,g,l)}}}function H9e(e,t,r,i){var s,o,l;const n=e.gl;e.bindBuffer(r);for(const d of i){const f=t.get(d.name);if(d.count<=4)n.disableVertexAttribArray(f),d.divisor&&d.divisor>0&&((s=e.gl)==null||s.vertexAttribDivisor(f,0));else if(d.count===9)for(let g=0;g<3;g++)n.disableVertexAttribArray(f+g),d.divisor&&d.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(f+g,0));else if(d.count===16)for(let g=0;g<4;g++)n.disableVertexAttribArray(f+g),d.divisor&&d.divisor>0&&((l=e.gl)==null||l.vertexAttribDivisor(f+g,0));else console.error("Unsupported vertex attribute element count: "+d.count)}e.unbindBuffer(tP.ARRAY_BUFFER)}function LAe(e){switch(e){case Wt.ALPHA:case Wt.LUMINANCE:case Wt.RED:case Wt.RED_INTEGER:case Oe.R8:case Oe.R8I:case Oe.R8UI:case Oe.R8_SNORM:case fu.STENCIL_INDEX8:return 1;case Wt.LUMINANCE_ALPHA:case Wt.RG:case Wt.RG_INTEGER:case Oe.RGBA4:case Oe.R16F:case Oe.R16I:case Oe.R16UI:case Oe.RG8:case Oe.RG8I:case Oe.RG8UI:case Oe.RG8_SNORM:case Oe.RGB565:case Oe.RGB5_A1:case fu.DEPTH_COMPONENT16:return 2;case Wt.DEPTH_COMPONENT:case Wt.RGB:case Wt.RGB_INTEGER:case Oe.RGB8:case Oe.RGB8I:case Oe.RGB8UI:case Oe.RGB8_SNORM:case Oe.SRGB8:case fu.DEPTH_COMPONENT24:return 3;case Wt.DEPTH_STENCIL:case Wt.DEPTH24_STENCIL8:case Wt.RGBA:case Wt.RGBA_INTEGER:case Oe.RGBA8:case Oe.R32F:case Oe.R11F_G11F_B10F:case Oe.RG16F:case Oe.R32I:case Oe.R32UI:case Oe.RG16I:case Oe.RG16UI:case Oe.RGBA8I:case Oe.RGBA8UI:case Oe.RGBA8_SNORM:case Oe.SRGB8_ALPHA8:case Oe.RGB9_E5:case Oe.RGB10_A2UI:case Oe.RGB10_A2:case fu.DEPTH_STENCIL:case fu.DEPTH_COMPONENT32F:case fu.DEPTH24_STENCIL8:return 4;case fu.DEPTH32F_STENCIL8:return 5;case Oe.RGB16F:case Oe.RGB16I:case Oe.RGB16UI:return 6;case Oe.RG32F:case Oe.RG32I:case Oe.RG32UI:case Oe.RGBA16F:case Oe.RGBA16I:case Oe.RGBA16UI:return 8;case Oe.RGB32F:case Oe.RGB32I:case Oe.RGB32UI:return 12;case Oe.RGBA32F:case Oe.RGBA32I:case Oe.RGBA32UI:return 16;case gi.COMPRESSED_RGB_S3TC_DXT1_EXT:case gi.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case gi.COMPRESSED_RGBA_S3TC_DXT3_EXT:case gi.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case gi.COMPRESSED_R11_EAC:case gi.COMPRESSED_SIGNED_R11_EAC:case gi.COMPRESSED_RGB8_ETC2:case gi.COMPRESSED_SRGB8_ETC2:case gi.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case gi.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case gi.COMPRESSED_RG11_EAC:case gi.COMPRESSED_SIGNED_RG11_EAC:case gi.COMPRESSED_RGBA8_ETC2_EAC:case gi.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let Mee=class{constructor(t=0,r=t){this.width=t,this.height=r,this.target=Ys.TEXTURE_2D,this.pixelFormat=Wt.RGBA,this.dataType=Q_.UNSIGNED_BYTE,this.samplingMode=ti.LINEAR,this.wrapMode=y$.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function kAe(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:LAe(e.internalFormat))*(e.target===Ys.TEXTURE_CUBE_MAP?6:1))}const DAe=()=>ae.getLogger("esri/views/webgl/textureUtils");function WS(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&DAe().error("Negative dimension parameters are not allowed!")}function jAe(e){return e in Oe}function FAe(e){return e in gi}function Ky(e){return e!=null&&"type"in e&&e.type==="compressed"}function UAe(e){return e!=null&&"byteLength"in e}function mz(e){return e!=null&&!Ky(e)&&!UAe(e)}function My(e){return e===Ys.TEXTURE_3D||e===Ys.TEXTURE_2D_ARRAY}function gz(e,t,r,i=1){let n=Math.max(t,r);return e===Ys.TEXTURE_3D&&(n=Math.max(n,i)),Math.floor(Math.log2(n))+1}function ZS(e){if(e.internalFormat!=null)return e.internalFormat===Wt.DEPTH_STENCIL?Wt.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case Q_.FLOAT:switch(e.pixelFormat){case Wt.RGBA:return Oe.RGBA32F;case Wt.RGB:return Oe.RGB32F;default:throw new V("Unable to derive format")}case Q_.UNSIGNED_BYTE:switch(e.pixelFormat){case Wt.RGBA:return Oe.RGBA8;case Wt.RGB:return Oe.RGB8}}return e.internalFormat=e.pixelFormat===Wt.DEPTH_STENCIL?Wt.DEPTH24_STENCIL8:e.pixelFormat}function VAe(e){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),{width:t,height:r,depth:1}}let zAe=class Oee extends Mee{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case Oe.R16F:case Oe.R16I:case Oe.R16UI:case Oe.R32F:case Oe.R32I:case Oe.R32UI:case Oe.R8_SNORM:case Oe.R8:case Oe.R8I:case Oe.R8UI:this.pixelFormat=Wt.RED}}static validate(t,r){return new Oee(t,r)}};const xc=()=>ae.getLogger("esri/views/webgl/Texture");let nP=class un{constructor(t,r=null,i=null){if(this.type=iP.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=Ig(null),"context"in t)this._descriptor=t,i=r;else{const n=zAe.validate(t,r);if(!n)throw new V("Texture descriptor invalid");this._descriptor=n}this._descriptor.target===Ys.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return kAe(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(m$.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new V("Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===Ys.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!Ky(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in gi&&(this._descriptor.internalFormat=void 0),this._setData(t),!Ky(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(t,r,i,n,s,o,l=0){o||xc().error("An attempt to use uninitialized data!"),this._glName||xc().error("An attempt to update uninitialized texture!");const d=this._descriptor;d.internalFormat=ZS(d);const{context:f,pixelFormat:g,dataType:v,target:b,isImmutable:S}=d;if(S&&!this._wasImmutablyAllocated)throw new V("Cannot update immutable texture before allocation!");const T=f.bindTexture(this,un.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+n>d.width||i+s>d.height)&&xc().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:E}=f;l&&(n&&s||xc().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),E.pixelStorei(E.UNPACK_SKIP_ROWS,l)),mz(o)?E.texSubImage2D(b,t,r,i,n,s,g,v,o):Ky(o)?E.compressedTexSubImage2D(b,t,r,i,n,s,d.internalFormat,o.levels[t]):E.texSubImage2D(b,t,r,i,n,s,g,v,o),l&&E.pixelStorei(E.UNPACK_SKIP_ROWS,0),f.bindTexture(T,un.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,n,s,o,l,d){d||xc().error("An attempt to use uninitialized data!"),this._glName||xc().error("An attempt to update an uninitialized texture!");const f=this._descriptor;f.internalFormat=ZS(f);const{context:g,pixelFormat:v,dataType:b,isImmutable:S,target:T}=f;if(S&&!this._wasImmutablyAllocated)throw new V("Cannot update immutable texture before allocation!");My(T)||xc().warn("Attempting to set 3D texture data on a non-3D texture");const E=g.bindTexture(this,un.TEXTURE_UNIT_FOR_UPDATES);g.setActiveTexture(un.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||n<0||r+s>f.width||i+o>f.height||n+l>f.depth)&&xc().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=g;if(Ky(d))d=d.levels[t],x.compressedTexSubImage3D(T,t,r,i,n,s,o,l,f.internalFormat,d);else{const O=d;x.texSubImage3D(T,t,r,i,n,s,o,l,v,b,O)}g.bindTexture(E,un.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new V("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,WS(t)}t.samplingMode===ti.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=ti.LINEAR_MIPMAP_NEAREST):t.samplingMode===ti.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=ti.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,un.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(un.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,un.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new V("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,WS(t)}t.samplingMode===ti.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=ti.LINEAR):t.samplingMode===ti.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=ti.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,WS(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=bg(this._compressionAbortController.value))}_setData(t,r){var d;const i=this._descriptor,n=(d=i.context)==null?void 0:d.gl;if(!n)return;Ay(n),this._glName||(this._glName=n.createTexture(),this._glName&&i.context.instanceCounter.increment(m$.Texture,this)),WS(i);const s=i.context.bindTexture(this,un.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(un.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Ay(n);const o=r??i.target,l=My(o);if(mz(t))this._setDataFromTexImageSource(t,o);else{const{width:f,height:g,depth:v}=i;if(f==null||g==null)throw new V("Width and height must be specified!");if(l&&v==null)throw new V("Depth must be specified!");if(i.internalFormat=ZS(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,i.internalFormat,i.hasMipmap,f,g,v),Ky(t)){if(!FAe(i.internalFormat))throw new V("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,i.internalFormat,o)}else this._texImage(o,0,i.internalFormat,f,g,v,t),Ay(n),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),Ay(n),i.context.bindTexture(s,un.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let r=Ys.TEXTURE_CUBE_MAP_POSITIVE_X;r<=Ys.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:n}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n?1:0)}_setDataFromTexImageSource(t,r){const{gl:i}=this._descriptor.context,n=this._descriptor;n.internalFormat=ZS(n);const s=My(r),{width:o,height:l,depth:d}=VAe(t);n.width&&n.height,n.width||(n.width=o),n.height||(n.height=l),s&&n.depth,s&&(n.depth=d),n.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,n.internalFormat,n.hasMipmap,o,l,d),this._texImage(r,0,n.internalFormat,o,l,d,t),Ay(i),n.hasMipmap&&(this.generateMipmap(),Ay(i))}_setDataFromCompressedSource(t,r,i){const n=this._descriptor,{width:s,height:o,depth:l}=n,d=t.levels,f=gz(i,s,o,l),g=Math.min(f,d.length)-1;this._descriptor.context.gl.texParameteri(n.target,n.context.gl.TEXTURE_MAX_LEVEL,g),this._forEachMipmapLevel((v,b,S,T)=>{const E=d[Math.min(v,d.length-1)];this._compressedTexImage(i,v,r,b,S,T,E)},g)}_texStorage(t,r,i,n,s,o){const{gl:l}=this._descriptor.context;if(!jAe(r))throw new V("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const d=i?gz(t,n,s,o):1;if(My(t)){if(o==null)throw new V("Missing depth dimension for 3D texture upload");l.texStorage3D(t,d,r,n,s,o)}else l.texStorage2D(t,d,r,n,s);this._wasImmutablyAllocated=!0}_texImage(t,r,i,n,s,o,l){const d=this._descriptor.context.gl,f=My(t),{isImmutable:g,pixelFormat:v,dataType:b}=this._descriptor;if(g){if(l!=null){const S=l;if(f){if(o==null)throw new V("Missing depth dimension for 3D texture upload");d.texSubImage3D(t,r,0,0,0,n,s,o,v,b,S)}else d.texSubImage2D(t,r,0,0,n,s,v,b,S)}}else{const S=l;if(f){if(o==null)throw new V("Missing depth dimension for 3D texture upload");d.texImage3D(t,r,i,n,s,o,0,v,b,S)}else d.texImage2D(t,r,i,n,s,0,v,b,S)}}_compressedTexImage(t,r,i,n,s,o,l){const d=this._descriptor.context.gl,f=My(t);if(this._descriptor.isImmutable){if(l!=null)if(f){if(o==null)throw new V("Missing depth dimension for 3D texture upload");d.compressedTexSubImage3D(t,r,0,0,0,n,s,o,i,l)}else d.compressedTexSubImage2D(t,r,0,0,n,s,i,l)}else if(f){if(o==null)throw new V("Missing depth dimension for 3D texture upload");d.compressedTexImage3D(t,r,i,n,s,o,0,l)}else d.compressedTexImage2D(t,r,i,n,s,0,l)}async _compressOnWorker(t){var n,s;if(!un.compressionWorkerHandle||!un.compressionWorkerHandle.isCompressible(t))return;const r=(n=this._descriptor.context)==null?void 0:n.gl.getExtension("WEBGL_compressed_texture_etc"),i=(s=this._descriptor.context)==null?void 0:s.gl.getExtension("WEBGL_compressed_texture_s3tc");if(r||i){const o=new AbortController;this._compressionAbortController.value=o;const l={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!r,hasS3TC:!!i};un.compressionWorkerHandle.invoke(l,this._compressionAbortController.value.signal).then(d=>{d&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=d.internalFormat,this._setData(d.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(d=>{Ni(d)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(t,r=1/0){let{width:i,height:n,depth:s,hasMipmap:o,target:l}=this._descriptor;const d=l===Ys.TEXTURE_3D;if(i==null||n==null||d&&s==null)throw new V("Missing texture dimensions for mipmap calculation");for(let f=0;t(f,i,n,s),o&&(i!==1||n!==1||d&&s!==1)&&!(f>=r);++f)i=Math.max(1,i>>1),n=Math.max(1,n>>1),d&&(s=Math.max(1,s>>1))}_applySamplingMode(){var s;const t=this._descriptor,r=(s=t.context)==null?void 0:s.gl;let i=t.samplingMode,n=t.samplingMode;i===ti.LINEAR_MIPMAP_NEAREST||i===ti.LINEAR_MIPMAP_LINEAR?(i=ti.LINEAR,t.hasMipmap||(n=ti.LINEAR)):i!==ti.NEAREST_MIPMAP_NEAREST&&i!==ti.NEAREST_MIPMAP_LINEAR||(i=ti.NEAREST,t.hasMipmap||(n=ti.NEAREST)),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,n)}_applyWrapMode(){var i;const t=this._descriptor,r=(i=t.context)==null?void 0:i.gl;typeof t.wrapMode=="number"?(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode)):(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode.s),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,r=t.context.capabilities.textureFilterAnisotropic;r&&t.context.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};nP.TEXTURE_UNIT_FOR_UPDATES=0,nP.compressionWorkerHandle=null;const Z3=()=>ae.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function GAe(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const BAe=[0,0,0,0];let Ree=class{constructor(){this.type="single",this._highlightOptions=new Rd,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*xv),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,xAe),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<$ee)-1,activeGradient:this}]}_updateGradientTexture(t){const r=qAe(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,GAe(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,n=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,s=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,l=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,d=Math.sqrt(Math.PI/2)*RAe,f=Math.abs(n)>d?Math.round(10*(Math.abs(n)-d))/10:0,g=Math.abs(l)>d?Math.round(10*(Math.abs(l)-d))/10:0;let v;f&&!g?Z3().error("The outer rim of the highlight is "+f+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!f&&g?Z3().error("The inner rim of the highlight is "+g+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):f&&g&&Z3().error("The highlight is "+Math.max(f,g)+"px away from the edge of the feature; consider reducing some width values.");const b=[void 0,void 0,void 0,void 0];function S(E,x,O){b[0]=(1-O)*E[0]+O*x[0],b[1]=(1-O)*E[1]+O*x[1],b[2]=(1-O)*E[2]+O*x[2],b[3]=(1-O)*E[3]+O*x[3]}const{_texelData:T}=this;for(let E=0;E<xv;++E)v=n+E/(xv-1)*(l-n),v<n?(b[0]=0,b[1]=0,b[2]=0,b[3]=0):v<s?S(BAe,i.outlineColor,(v-n)/(s-n)):v<o?[b[0],b[1],b[2],b[3]]=i.outlineColor:v<l?S(i.outlineColor,i.fillColor,(v-o)/(l-o)):[b[0],b[1],b[2],b[3]]=i.fillColor,T[4*E]=255*b[0],T[4*E+1]=255*b[1],T[4*E+2]=255*b[2],T[4*E+3]=255*b[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=l,!this._shadeTex){const E=new Mee;E.wrapMode=y$.CLAMP_TO_EDGE,E.width=xv,E.height=1,this._shadeTex=new nP(t,E)}this._shadeTex.updateData(0,0,0,xv,1,this._texelData)}};function qAe(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let HAe=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new Ree),this.gradients[r].setHighlightOptions(t[r]);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const n=this.gradients[i];r.push({activeReasons:t,activeGradient:n}),t<<=1}return r}};var vz,bz,_z,wz,Sz,Tz,g$,Ez,$z;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(vz||(vz={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(bz||(bz={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(_z||(_z={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(wz||(wz={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(Sz||(Sz={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(Tz||(Tz={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(g$||(g$={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(Ez||(Ez={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}($z||($z={}));const Cee={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:rP.EQUAL,mask:255,op:{fail:v_.KEEP,zFail:v_.KEEP,zPass:v_.REPLACE}}}},WAe={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},ZAe={...Cee,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function YAe({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},n){const s=1/2**(r-n.key.level),o=1/2**(i-n.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:n.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:n.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[n.x,n.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:co(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function Iee(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function Nee(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function JAe(e){if(!Nee(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:n}}function XAe(e){if(!Iee(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function J9e(e,t,r){const i={};for(const n in r)r[n]instanceof Function?i[n]=r[n](e,t):i[n]=r[n];return i}function X9e(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:YAe(e,t),hittestRequest:JAe(e),highlight:XAe(e)}}function K9e(e){return{inside:e.selection===g$.InsideEffect,outside:e.selection===g$.OutsideEffect}}function KAe(e){return Nee(e)?WAe:Iee(e)&&e.passOptions.stepType==="clear"?ZAe:Cee}function Q9e(e){const{row:t,col:r}=e.key,i=r*XV,n=t*XV;return{tileOffsetFromLocalOrigin:[i%HS,n%HS],maxIntsToLocalOrigin:[Math.floor(i/HS),Math.floor(n/HS)]}}const QAe=new We({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function eVe(e){return QAe.toJSON(e)}function tVe(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:n}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||n==="u8"||n==="s8")}function eMe(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new HAe:new Ree),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function rVe(e,t,r,i){const{painter:n,highlightGradient:s}=e,{highlight:o}=n.effects;if(!s)return;const l=e.passOptions,d=s.getReasonsWithGradients();for(let f=0;f<d.length;f++){const g={...e,passOptions:{type:"highlight",activeGradient:d[f].activeGradient,activeReasons:d[f].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(g),r(g),f<d.length-1){let b=0;for(let S=f+1;S<d.length;S++)b|=d[S].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:d[f].activeGradient,activeReasons:b,stepType:"clear",highlightAll:t}})}const v={...e,passOptions:{type:"highlight",activeGradient:d[f].activeGradient,activeReasons:d[f].activeReasons,stepType:"draw",highlightAll:t}};n.setPipelineState(KAe(e)),n.updatePipelineState(e.context),o.draw(v),o.unbind()}e.passOptions=l}function iVe(e){if(!e)return[];let t=uwe(e)?[e]:ge.isCollection(e)?e.toArray():Array.isArray(e)?e:[];return t=t==null?void 0:t.filter(Lu),((t==null?void 0:t.length)??0)===0?[]:t}const YS=e=>parseFloat(e)/100;function tMe(e,t,r){const i=typeof e.left=="string"?YS(e.left)*t:e.left,n=typeof e.right=="string"?YS(e.right)*t:e.right,s=typeof e.top=="string"?YS(e.top)*r:e.top,o=typeof e.bottom=="string"?YS(e.bottom)*r:e.bottom,l=s;return{xmin:i,xmax:Math.max(t-n,i),ymin:l,ymax:Math.max(r-o,s)}}function Pee(e,t,r,i){switch(t.type){case"rect":{const{width:n,height:s}=e,{xmin:o,xmax:l,ymin:d,ymax:f}=tMe(t,n,s),{x:g,y:v}=r;return g>o&&g<l&&v>d&&v<f}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||Bk(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?Gk(t.geometry,i):Ew(t.geometry,i))}}function rMe(e){if(!e.highlights)return null;const t=e.highlights.findIndex(r=>r.name==="default");return t===-1?null:e.highlights.items[t]}function iMe(e,t){if(!e.highlights){if(!t)return;e.highlights=new ge([new Rd])}const r=e.highlights.findIndex(i=>i.name==="default");t?e.highlights.items[r].assignFrom(t):(e.highlights.removeAt(r),e.highlights.length===0&&(e.highlights=null))}async function nMe(e,t,r){const i=QK(t)?KK(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let n=new Set;const s=new Set;let o=!1,l=null,d=null;r!=null&&r.include?Az(r.include,xz(e,b=>{n.add(b),Y3(b,S=>s.add(S))},(b,S)=>{s.add(b),n.add(S)},b=>{l||(l=new Set),l.add(b)},b=>n.add(b),()=>o=!0)):(o=!0,n=new Set(e.allLayerViews),n.forEach(b=>{Y3(b,S=>s.add(S))})),r!=null&&r.exclude&&Az(r.exclude,xz(e,b=>{n.delete(b),Y3(b,S=>s.delete(S))},b=>s.delete(b),b=>{d||(d=new Set),d.add(b)}));const f=e.toMap(i),g=e.allLayerViews.filter(b=>!b.suspended&&n.has(b)&&b.clips.every(S=>Pee(e,S,i,f))).reverse();let v=[...o?e.graphicsView.hitTest(f).map(b=>({type:"graphic",graphic:b,layer:null,mapPoint:f})):[],...await Promise.all(g.map(b=>b.hitTest(f,i)).toArray())].filter(Lu).flat().filter(Lu);return v=v.filter(b=>{var S;return b.type!=="graphic"||((S=b.layer)==null?void 0:S.type)!=="subtype-group"||s.has(b.graphic.layer)}),l&&(v=v.filter(b=>!("graphic"in b)||!b.graphic||(l==null?void 0:l.has(sP(b.graphic))))),d&&(v=v.filter(b=>!("graphic"in b)||!b.graphic||!(d!=null&&d.has(sP(b.graphic))))),{screenPoint:i,results:v}}function xz(e,t,r,i,n,s){return o=>{if(o instanceof ol){if(o.layer===e)s==null||s();else{const l=e.allLayerViews.find(d=>d.layer===o.layer);l&&(n==null||n(l))}i(sP(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const l=e.allLayerViews.find(d=>d.layer===o.parent);l&&r(o,l)}else{const l=e.allLayerViews.find(d=>d.layer===o);l&&t(l)}}}function Az(e,t){if(e)if(wE(e))for(const r of e)if(wE(r))for(const i of r)t(i);else t(r);else t(e)}function sP(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function Y3({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}let Av=null,v$=!0;function sMe(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(v$)try{return new ImageData(e,t)}catch{v$=!1}return Lee(e,t,r)}function nVe(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(v$)try{return new ImageData(e,t,r)}catch{v$=!1}const n=Lee(t,r,i);return n.data.set(e,0),n}function oMe(){return Av||(Av=document.createElement("canvas"),Av.width=1,Av.height=1),Av}function Lee(e,t,r){return r||(r=oMe()),r.getContext("2d").createImageData(e,t)}async function aMe(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await mt(r,{...t,responseType:"image"});return i}catch(i){throw Ni(i)?i:new V("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function sVe(e,t){const{arrayBuffer:r,mediaType:i}=await lMe(e,t),n=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await ne(()=>import("./gif-brAYmUXR.js"),[]);if(s(r))return o(r,t)}if(n){const{isAnimatedPNG:s,parseApng:o}=await ne(()=>import("./apng-WmvM-sRy.js"),__vite__mapDeps([261,3]));if(s(r))return o(r,t)}return aMe(new Blob([r],{type:i}),t)}async function lMe(e,t){var n;const r=of(e);if(r!=null&&r.isBase64)return{arrayBuffer:kW(r.data),mediaType:r.mediaType};const i=await mt(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:((n=i.getHeader)==null?void 0:n.call(i,"Content-Type"))??""}}function kee(e,t,r){const{ctx:i,canvas:n}=jee(e,r),s=i.getImageData(0,0,e.width,e.height),o=Uee(n,t);return Fee(n),{dataUrl:o,data:s}}function Dee(e,t){const{ctx:r,canvas:i}=jee(e,t),n=r.getImageData(0,0,e.width,e.height);return Fee(i),n}function jee(e,t){const r=uMe();t.premultipliedAlpha&&pMe(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&hMe(i),{ctx:i,canvas:r}}function Fee(e){e.width=0,e.height=0}function uMe(){return J3==null&&(J3=document.createElement("canvas")),J3}let J3=null;function Uee(e,t){const r=fMe[t.format],i=t.quality/100;return e.toDataURL(r,i)}function Vee(e,t){const r=dMe(e),i=mMe[r];return{format:r,quality:so(t??i,0,100)}}function zee(e,t){return t/Math.max(e[0],e[1])}function cMe(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,l=!1){const{data:d}=e,{width:f,height:g,data:v}=t,b=s/f,S=o/g,T=Math.ceil(b/2),E=Math.ceil(S/2),x=e.width;for(let O=0;O<g;O++)for(let C=0;C<f;C++){const I=4*(C+(l?g-O-1:O)*f);let P=0,k=0,D=0,H=0,re=0,K=0;const ie=(O+.5)*S;for(let fe=Math.floor(O*S);fe<(O+1)*S;fe++){const ve=Math.abs(ie-(fe+.5))/E,$e=(C+.5)*b,_e=ve*ve;for(let it=Math.floor(C*b);it<(C+1)*b;it++){const pe=Math.abs($e-(it+.5))/T,me=Math.sqrt(_e+pe*pe);if(me>=1)continue;let ye=2*me*me*me-3*me*me+1;const Ve=4*(i+it+(n+fe)*x);K+=ye*d[Ve+3],k+=ye,!r&&d[Ve+3]<255&&(ye=ye*d[Ve+3]/255),D+=ye*d[Ve],H+=ye*d[Ve+1],re+=ye*d[Ve+2],P+=ye}}v[I]=D/P,v[I+1]=H/P,v[I+2]=re/P,v[I+3]=K/k}return t}function dMe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return yMe}}function hMe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function pMe(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i]=t[i]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const fMe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Mz=98,yMe="png",mMe={png:100,jpg:Mz,jpeg:Mz},oVe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:sMe,encode:kee,encodeData:Dee,getFormatAndQuality:Vee,getMaximumResolutionScale:zee,resampleHermite:cMe,toDataUrl:Uee},Symbol.toStringTag,{value:"Module"})),Gee={flipY:!0,premultipliedAlpha:!0};async function gMe(e,t){const r=await Bee(e,t),{format:i,quality:n}=Vee(t==null?void 0:t.format,t==null?void 0:t.quality);return kee(r,{format:i,quality:n},Gee)}async function vMe(e,t){const r=await Bee(e,t);return Dee(r,Gee)}function Bee(e,t){const r=wMe(t||{},_Me(e.stage,e.size),e.size,e.padding),i=bMe(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function bMe(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const n=t.find(s=>s.layer.id===i.id);n!=null&&n.container&&r.push(n.container)}),r}function _Me(e,t){return Math.min(4,zee(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function wMe(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let n=null;e.width!=null&&e.height!=null?n=[e.width,e.height]:e.width==null&&e.height!=null?n=[e.height,e.height]:e.width!=null&&e.height==null?n=[e.width,e.width]:e.width==null&&e.height==null&&(n=null);const s=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let l,d,f=e.area||{x:0,y:0,width:s,height:o};if(n){const g=s/o,v=n[0]/n[1];if(v>g){const b=f.width/v;f={x:f.x,y:Math.round(f.y+(f.height-b)/2),width:f.width,height:Math.round(b)}}else{const b=f.height*v;f={x:Math.round(f.x+(f.width-b)/2),y:f.y,width:Math.round(b),height:f.height}}}else n=[f.width,f.height];return n[0]>f.width?(l=Math.min(n[0]/f.width,t),d=n[0]/f.width/l):(l=1,d=n[0]/f.width),{cropArea:{x:Math.round((f.x+i.left)*l),y:Math.round((f.y+i.top)*l),width:Math.round(f.width*l),height:Math.round(f.height*l)},outputScale:d,resolutionScale:l}}const SMe=e=>e.includes("Brush");let qee=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),SMe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function TMe(e,t){const r=t.debugRendererInfo&&e.getExtension("WEBGL_debug_renderer_info");return r?{getUnmaskedRendererWebGL:()=>e.getParameter(r.UNMASKED_RENDERER_WEBGL)}:null}let Oz;function EMe(){return Oz??(Oz=AMe()),Oz}let $Me=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function xMe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function AMe(){var r;const e=new $Me,t=xMe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null,e.unmaskedRenderer=((r=TMe(t,{debugRendererInfo:!0}))==null?void 0:r.getUnmaskedRendererWebGL())??"unknown"),e}function MMe(e){const t=EMe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new V("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new V("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new V("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new V("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function OMe(e){return e&&"nodeType"in e}function RMe(e){return e&&typeof e.render=="function"}const Rz={component:"esri-component"};let hp=class extends Ae{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(Rz.component),r&&r.classList.remove(Rz.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||OMe(t)?(this._set("widget",null),vD(t)):(RMe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};u([h()],hp.prototype,"id",null),u([h()],hp.prototype,"node",null),u([ft("node")],hp.prototype,"castNode",null),u([h({readOnly:!0})],hp.prototype,"widget",void 0),hp=u([M("esri.views.ui.Component")],hp);const ET=hp,Hee="calcite-mode-";function CMe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function IMe(){return CMe().startsWith("dark")}function NMe(){return`${Hee}${IMe()?"dark":"light"}`}function PMe(e){LMe(e),e.classList.add(NMe())}function LMe(e){Array.from(e.classList).forEach(t=>{t.startsWith(Hee)&&e.classList.remove(t)})}const kMe={left:0,top:0,bottom:0,right:0},Wee={bottom:30,top:15,right:15,left:15},Dl="esri-ui",Tn={ui:Dl,corner:`${Dl}-corner`,innerContainer:`${Dl}-inner-container`,manualContainer:`${Dl}-manual-container`,cornerContainer:`${Dl}-corner-container`,topLeft:`${Dl}-top-left`,topRight:`${Dl}-top-right`,bottomLeft:`${Dl}-bottom-left`,bottomRight:`${Dl}-bottom-right`};function DMe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function JS(e){return e===0?"0":`${e}px`}function X3(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function K3(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let Ca=class extends aa.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Fn(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&K3(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&K3(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ze(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Xi),ze(()=>this.padding,this._applyUIPadding,Xi),ze(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},Xi),oY(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(Tn.ui),PMe(t),this._attachContainers(t)),r&&(r.classList.remove(Tn.ui),K3(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){var s;const t=((s=this.view)==null?void 0:s.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:n}=r;return Math.max(t-i-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...Wee,...t}}get width(){var s;const t=((s=this.view)==null?void 0:s.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:n}=r;return Math.max(t-i-n,0)}add(t,r){let i,n,s;if(Array.isArray(t))return void t.forEach(l=>this.add(l,r));const o=X3(t);o&&({index:i,position:r,component:t,key:n}=o),r&&typeof r=="object"&&({index:i,key:n,position:r,internal:s}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,n,s)}remove(t,r){var n,s;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((n=this._componentMap.get(i))==null?void 0:n.key)!==r)return;const o=this._components.indexOf(i),l=i.node.parentNode;return l==null||l.removeChild(i.node),this._componentMap.delete(i),(s=i.widget)==null||s.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const s of t)this.empty(s,r);return}const i=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(s=>{var o;return s==null?!1:!(((o=this._componentMap.get(s))==null?void 0:o.internal)??!1)||r.removeInternal});for(const s of n)this.remove(s)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const n=X3(t)||X3(r);if(n&&(i=n.index,r=n.position,t=n.component||t),r&&!this._isValidPosition(r))return;const s=this.remove(t);s&&this.add(s,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var n;return r.includeInternal||!((n=this._componentMap.get(i))!=null&&n.internal)}).map(({widget:i,node:n})=>i??n)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,n,s){t instanceof ET||(t=new ET({node:t}));const{widget:o}=t;o!=null&&o instanceof Ae&&o.addHandles(vt(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:n,internal:s})}_find(t){return t?t instanceof ET?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??kMe}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Tn.innerContainer,Tn.cornerContainer);const r=document.createElement("div");r.classList.add(Tn.innerContainer,Tn.manualContainer);const i=document.createElement("div");i.classList.add(Tn.topLeft,Tn.corner),t.appendChild(i);const n=document.createElement("div");n.classList.add(Tn.topRight,Tn.corner),t.appendChild(n);const s=document.createElement("div");s.classList.add(Tn.bottomLeft,Tn.corner),t.appendChild(s);const o=document.createElement("div");o.classList.add(Tn.bottomRight,Tn.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const l=fve();this._cornerNameToContainerLookup={"top-left":i,"top-right":n,"bottom-left":s,"bottom-right":o,"top-leading":l?n:i,"top-trailing":l?i:n,"bottom-leading":l?o:s,"bottom-trailing":l?s:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var f,g;const r=t.position??"manual",{component:i,index:n}=t,s=this._positionNameToContainerLookup[r],o=n!=null&&n>-1;if(DMe(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const l=Array.from(s.children);if(n===0){const{firstChild:v}=s;return void(v?(f=v.parentNode)==null?void 0:f.insertBefore(i.node,v):s.appendChild(i.node))}if(n>=l.length)return void s.appendChild(i.node);const d=l[n];(g=d.parentNode)==null||g.insertBefore(i.node,d)}_toPixelPosition(t){return{top:JS(t.top),left:JS(t.left),right:JS(t.right),bottom:JS(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(Lu).filter(n=>{var s;return r.includeInternal||!((s=this._componentMap.get(n))!=null&&s.internal)}).map(({widget:n,node:s})=>n??s)}};u([h()],Ca.prototype,"_locale",void 0),u([h()],Ca.prototype,"container",null),u([h()],Ca.prototype,"height",null),u([h({value:Wee})],Ca.prototype,"padding",null),u([ft("padding")],Ca.prototype,"castPadding",null),u([h()],Ca.prototype,"view",void 0),u([h()],Ca.prototype,"width",null),Ca=u([M("esri.views.ui.UI")],Ca);const jMe=Ca,FMe="randomUUID"in crypto;function Zx(){if(FMe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function dVe(){return`{${Zx().toUpperCase()}}`}function UMe(){return`{${Zx()}}`}function VMe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const zMe={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},GMe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},BMe=e=>({...GMe,...e}),qMe=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},HMe=(e,t)=>e.find(t),Cz=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{const o=i!=null&&i.children?HMe(i.children,l=>l.domNode===n):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},WMe=e=>{let t;const r={...zMe,...e},i=BMe(r),n=i.performanceLogger;let s,o=!0,l=!1;const d=[],f=[],g=(b,S,T)=>{var O;let E;i.eventHandlerInterceptor=(C,I,P,k)=>function(D){let H;n("domEvent",D);const re=qMe(D.currentTarget,E.domNode),K=re.some(fe=>{var ve;return customElements.get((ve=fe==null?void 0:fe.tagName)==null?void 0:ve.toLowerCase())});if(D.eventPhase===Event.CAPTURING_PHASE||!K)re.reverse(),H=Cz(E.getLastRender(),re);else{const fe=D.composedPath(),ve=fe.slice(fe.indexOf(D.currentTarget),fe.indexOf(E.domNode)).reverse();H=Cz(E.getLastRender(),ve,!0)}let ie;return H&&(ie=r.handleInterceptedEvent(t,H,this,D)),n("domEventProcessed",D),ie},(O=r.postProcessProjectionOptions)==null||O.call(r,i);const x=T();E=b(S,x,i),i.eventHandlerInterceptor=void 0,d.push(E),f.push(T),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(E,x)};let v=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let b=0;b<d.length;b++){const S=f[b]();n("rendered",void 0);try{d[b].update(S)}catch(T){console.error(T)}n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(v=r.modifyDoRenderImplementation(v,d,f)),t={renderNow:v,scheduleRender:()=>{s||l||(s=requestAnimationFrame(v))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),l=!0},resume:()=>{l=!1,o=!0,t.scheduleRender()},append:(b,S)=>{g(Sd.append,b,S)},insertBefore:(b,S)=>{g(Sd.insertBefore,b,S)},merge:(b,S)=>{g(Sd.merge,b,S)},replace:(b,S)=>{g(Sd.replace,b,S)},detach:b=>{for(let S=0;S<f.length;S++)if(f[S]===b)return f.splice(S,1),d.splice(S,1)[0];throw new Error("renderFunction was not found")}},t};var ZMe=":",mf=class{resolve(e){}reject(e){}constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};function YMe(e,t){let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r.parentNode instanceof ShadowRoot?r=r.parentNode.host:r=r.parentNode}return!1}function JMe(e,t,r){const{subscribe:i}=XMe(t);return i(n=>{n.some(o=>YMe(e,o.target))&&r()})}var Q3={};function XMe(e){const t=e.join(","),r=Q3[t];if(r!==void 0)return r;const i=new Set,n=new MutationObserver(o=>i.forEach(l=>l(o)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const s={subscribe(o){return i.add(o),()=>{i.delete(o),i.size===0&&(n.disconnect(),Q3[t]=void 0)}}};return Q3[t]=s,s}function KMe(e,t){var i,n;let r=e;for(;r;){const s=(i=r.closest)==null?void 0:i.call(r,t);if(s)return s;const o=(n=r.getRootNode)==null?void 0:n.call(r);if(o===globalThis.document)return null;r=o.host}return null}function QMe(e,t,r){const i=KMe(e,`[${t}]`);return(i==null?void 0:i.getAttribute(t))??r}function dr(e,t,...r){try{return e==null?void 0:e.call(t,...r)}catch(i){console.error(i,e)}}async function oP(e,t,...r){try{const i=e==null?void 0:e.call(t,...r);return i instanceof Promise?await i:i}catch(i){console.error(i,e)}}var eOe=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],tOe=new Set(eOe),b$="en",rOe={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function iOe(e,t,r=""){const i=`${t}/${r}`,n=`${i}${e}.json`;return eR[n]??(eR[n]=Zee(e,i)),await eR[n]}var eR={};async function Zee(e,t){const r=`${t}${e}.json`;try{const i=await fetch(r);if(i.ok)return await i.json()}catch(i){return console.error(i),{}}return e===b$?{}:await Zee(b$,t)}function Yee(e){var r;const t=QMe(e,"lang",((r=globalThis.navigator)==null?void 0:r.language)||b$);return{lang:t,t9nLocale:Jee(t)}}function Jee(e){const[t,r]=e.split("-"),i=t.toLowerCase();let n=i;return r&&(n=`${i}-${r.toUpperCase()}`),n=rOe[n]??n,tOe.has(n)?n:r?Jee(i):b$}function nOe(e,t,r,i){let n;const s=()=>void sOe(e,t(),i).then(o=>{((n==null?void 0:n.lang)!==o.lang||n.t9nLocale!==o.t9nLocale||n.t9nStrings!==o.t9nStrings)&&r(o),n=o}).catch(console.error);return queueMicrotask(s),JMe(e,["lang"],s)}async function sOe(e,t,r=e.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:i,t9nLocale:n}=Yee(e),s=`${t}/${r}/t9n`,l=r===null?{}:await iOe(n,s,"messages.");return{lang:i,t9nLocale:n,t9nStrings:l}}var Xee=e=>e.replace(oOe,(t,r)=>`${r===0?"":"-"}${t.toLowerCase()}`),oOe=/[A-Z]+(?![a-z])|[A-Z]/gu;function aOe(e,t){const r=t/lOe;let i=0;const n=setInterval(()=>{i+=r,i>=t&&(clearInterval(n),e())},r);return n}var lOe=4;function uOe(e){return e!==void 0}function Kee(e){var r,i;let t=e;for(;t=t.parentNode??t.host;)if((r=t==null?void 0:t.constructor)!=null&&r.lumina){const n=t;return(i=n.manager)!=null&&i.loadedCalled||n._offspring.push(e),n._postLoad.promise}return!1}var $T=Object.defineProperty;function cOe(e){const t=e.split(ZMe);return t.length===1?[t[0],Xee(t[0])]:t}var dOe=globalThis.HTMLElement??cOe,dg;dg=class extends dOe{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new mf,this._postLoaded=new mf,this._offspring=[],this._saveInstanceProperties();const t=this.constructor;t._LitConstructor?this._initializeComponent({a:t._LitConstructor}):t._loadPromise.then(this._initializeComponent.bind(this)).catch(r=>{this._postLoaded.reject(r),setTimeout(()=>{throw r})})}static _initializePrototype(){var t,r,i;(t=this._properties)==null||t.forEach(this._bindProp,this),(r=this._asyncMethods)==null||r.forEach(this._bindAsync,this),(i=this._syncMethods)==null||i.forEach(this._bindSync,this)}static _bindProp(t){$T(this.prototype,t,{configurable:!0,enumerable:!0,get(){return this._store[t]},set(r){this._store[t]=r}})}static _bindAsync(t){$T(this.prototype,t,{async value(...r){return this._litElement||await this._postLoaded.promise,await this._litElement[t](...r)},configurable:!0})}static _bindSync(t){$T(this.prototype,t,{value(...r){return this._litElement[t](...r)},configurable:!0})}get manager(){var t;return(t=this._litElement)==null?void 0:t.manager}_saveInstanceProperties(){var i;const t=this.constructor,r=this;(i=t._properties)==null||i.forEach(n=>{Object.hasOwn(this,n)&&(this._store[n]=r[n],delete r[n])})}attributeChangedCallback(t,r,i){var n;(n=this._litElement)==null||n.attributeChangedCallback(t,r,i),this._litElement||this._pendingAttributes.push(t)}connectedCallback(){var t,r;this._litElement?(r=(t=this._litElement).connectedCallback)==null||r.call(t):queueMicrotask(()=>{this._ancestorLoad=Kee(this)})}disconnectedCallback(){var t,r;(r=(t=this._litElement)==null?void 0:t.disconnectedCallback)==null||r.call(t)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(t){var v;const r=this.constructor,i=r._name,n=this._store,s=Object.values(t).find(b=>b.tagName===i),o=`${i}--lazy`;let l=s;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);pOe(l),!r._LitConstructor&&(r._LitConstructor=s,customElements.define(o,s)),s.lazy=this;const f=document.createElement(o);s.lazy=void 0,this._litElement=f,this._store=f,this._pendingAttributes.forEach(b=>{const S=this.getAttribute(b);f.attributeChangedCallback(b,null,S)}),Object.entries(n).forEach(hOe,f);const g=this.isConnected;(g||this._ancestorLoad)&&((v=f.connectedCallback)==null||v.call(f),g||f.disconnectedCallback())}addController(){}requestUpdate(){var t;(t=this._litElement)==null||t.requestUpdate()}},dg.lumina=!0;function hOe([e,t]){this[e]=t}function pOe(e){const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(n,s){r.setAttribute.call(this.el,n,s)},t.removeAttribute=function(n){r.removeAttribute.call(this.el,n)},$T(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))}var Iz={};function fOe(e,t){var r;if(t){const i=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(i,([n,s])=>s.noAccessor?void 0:[n,[(s.readOnly?2048:0)|(s.state?32:16)]]).filter(uOe))}else{const i=e.constructor,n=((r=i.__registerControllers)==null?void 0:r.call(i,e))??void 0;if(i.__registerControllers=void 0,typeof n!="object")throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(n).filter(([s,[o]])=>(o&63)!==0))}}function yOe(e,t=8){return e==null||typeof e=="object"||typeof e=="function"?e:(t&4)!==0?e==="false"?!1:e===""||!!e:(t&2)!==0?Number.parseFloat(e):(t&1)!==0?String(e):e}var mOe=(e,t)=>{var r,i;return(i=(r=e.manager.internals.members)==null?void 0:r[t])==null?void 0:i[0]},f5=Symbol.for("controller"),gOe=e=>typeof e=="object"&&e!==null&&(f5 in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),$b;function Bm(e){$b!==e&&($b=e,queueMicrotask(()=>{$b===e&&($b=void 0)}))}function Yx(e){return $b}var pp=[];function Qee(e){if(e===void 0){pp=[];return}const t=pp.indexOf(e);pp=t===-1?[...pp,e]:pp.slice(0,t+1),queueMicrotask(()=>{pp=[]})}function ete(){return pp}var qm;function vOe(e){qm!==e&&(qm=e,queueMicrotask(()=>{qm===e&&(qm=void 0)}))}function bOe(){const e=qm;return qm=void 0,e}var _Oe=async(e,t)=>{const r=y5(e);if(r===void 0)return e;if(await r.ready,typeof t=="function"){const i=r.watchExports(n=>t(n,i))}return r.exports},wOe=async e=>{const t=y5(e);return await t.ready,t},y5=e=>{const r=Yx().manager.internals.resolveExports(e);if(r!==void 0)return r;if(gOe(e))return e;const i=bOe();if(i!==void 0)return i},aP={readOnly:!1},_$=new WeakMap,tte;tte=f5;var m5=class{constructor(e){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new mf,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[tte]=!0,this.ready=this._ready.promise,this._exports=Pz(this),this._exportWatchers=new Set;const t=e??Yx();this.component=t,this.component.addController(this),this.component.manager===void 0||(Qee(this),queueMicrotask(()=>this.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=this.component;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e._loadCalled&&this.triggerLoad().then(()=>{e.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(e){const t=this._exports;t!==e&&(this._exports=e,this._exportWatchers.forEach(dr),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,t)),this._ready.resolve(e)}setProvisionalExports(e,t=!0){this._exports=t?Pz(e):e,this._exportWatchers.forEach(dr)}watchExports(e){const t=()=>e(this._exports);return this._exportWatchers.add(t),()=>void this._exportWatchers.delete(t)}get use(){return Bm(this.component),_Oe}get useRef(){return Bm(this.component),wOe}get useRefSync(){return Bm(this.component),y5}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this._callbacks.hostConnected.push(e)}onDisconnected(e){this._callbacks.hostDisconnected.push(e)}onLoad(e){this._callbacks.hostLoad.push(e)}onLoaded(e){this._callbacks.hostLoaded.push(e)}onUpdate(e){this._callbacks.hostUpdate.push(e)}onUpdated(e){this._callbacks.hostUpdated.push(e)}onDestroy(e){this._callbacks.hostDestroy.push(e)}onLifecycle(e){this._callbacks.hostLifecycle.push(e),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(e)}triggerConnected(){const e=this;e.hostConnected&&dr(e.hostConnected,e),this._callbacks.hostConnected.forEach(dr),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&dr(e.hostDisconnected,e),this._callbacks.hostDisconnected.forEach(dr),this._lifecycleCleanups.forEach(dr),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const e=this;e.hostLoad&&await oP(e.hostLoad,e),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(oP)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const e=this;e.hostLoaded&&dr(e.hostLoaded,e),this._callbacks.hostLoaded.forEach(dr),this.loadedCalled=!0}triggerUpdate(e){const t=this;t.hostUpdate&&dr(t.hostUpdate,t,e),this._callbacks.hostUpdate.forEach(Nz,e)}triggerUpdated(e){const t=this;t.hostUpdated&&dr(t.hostUpdated,t,e),this._callbacks.hostUpdated.forEach(Nz,e)}triggerDestroy(){const e=this;e.hostDestroy&&dr(e.hostDestroy,e),this._callbacks.hostDestroy.forEach(dr)}triggerLifecycle(){const e=this;e.hostLifecycle&&this._callLifecycle(()=>e.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(e){Bm(this.component);const t=dr(e);(Array.isArray(t)?t:[t]).forEach(i=>{typeof i=="function"?this._lifecycleCleanups.push(i):typeof i=="object"&&typeof i.remove=="function"&&this._lifecycleCleanups.push(i.remove)})}};function Nz(e){dr(e,void 0,this)}var SOe=m5;function Pz(e){if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t=new Proxy(e,{get(r,i,n){if(!(TOe.has(i)&&i in r&&r[i]===t)&&(i in r||i in Promise.prototype||typeof i=="symbol"))return typeof r=="function"?r[i]:Reflect.get(r,i,n)},set:(r,i,n,s)=>Reflect.set(r,i,n,s)});return t}var TOe=new Set(["exports","_exports"]);function EOe(e,t,r){const i=Object.keys(e),n=i.length;Tu===void 0&&queueMicrotask(g5),Tu??(Tu=new Map);let s=Tu.get(e);return s===void 0&&(s={callbacks:[],keyCount:n},Tu.set(e,s)),s.keyCount!==n&&(s.callbacks.forEach(o=>o(i)),s.callbacks=[],s.keyCount=n),s.callbacks.push(o=>{const l=f=>dr(t,null,f),d=o[n];d===void 0?l(void 0):e[d]===r?l(d):l(void 0)}),r}var Tu=void 0;function g5(){Array.from((Tu==null?void 0:Tu.entries())??[]).forEach(([e,{callbacks:t}])=>{const r=Object.keys(e);t.forEach(i=>i(r))}),Tu=void 0}function v5(e,t,r){var i;const n=t,s=e.manager.internals;(i=s.allWatchers)[n]??(i[n]=[]);const o=s.allWatchers[n],l=r,d=(f,g,v)=>dr(l,null,f,g,v);return o.push(d),()=>{const f=o.indexOf(d);f!==-1&&o.splice(f,1)}}var $Oe=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const t=this.component.manager.internals;Object.entries(t.members).forEach(([r,[i]])=>{var n;i&2048&&((n=t.setters)[r]??(n[r]=[]),t.setters[r].push(t.readonlySetter))})},this.trackedValue=lP,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(t,r,i)=>{if(aP.readOnly)return t;throw new Error(`Cannot assign to read-only property "${i}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(t)}"`)},this.component=e}firePropTrackers(e,t){const r=this.keyTrackers;this.trackedValue=lP,this.keyTrackers=[],r.forEach(i=>i(e,t))}getSetProxy(e){const t=this.component,r=t.constructor.prototype;if(this._getSetProxy(r,e,"class"),t.manager.isLit)return;const i=t.el.constructor.prototype;r!==i&&this._getSetProxy(i,e,"html")}_getSetProxy(e,t,r){const i=this.component,n=mOe(i,t);let s;do s=Object.getOwnPropertyDescriptor(e,t);while(!s&&(e=Object.getPrototypeOf(e)));if(!s)return;const o=s.get,l=s.set,d=XS in o,f=XS in l;if(d&&f)return;const g=!d,v=!f,b=g?function(){let E=o.call(this);const x=_$.get(this);if(x===void 0)return E;const O=x.manager.internals;E=O.accessorGetter[t](E,t);const C=O.getters[t]??Lz;for(let I=0;I<C.length;I++)E=C[I](E,t);return E}:o,S=v?function(E){var P;const x=o.call(this),O=_$.get(this);if(O===void 0){l.call(this,E);return}let C=O.manager.isLit?E??void 0:yOe(E,n);const I=O.manager.internals;if(C===x)l.call(this,C);else{const k=I.setters[t]??Lz;for(let D=0;D<k.length&&(C=k[D](C,x,t),C!==x);D++);C=I.accessorSetter[t](C,x,t),l.call(this,C),C!==x&&((P=I.enabledWatchers[t])==null||P.forEach(D=>D(C,x,t)))}I.keyTrackers.length>0&&(I==null||I.firePropTrackers(t,E))}:l;g&&(b[XS]=!0),v&&(S[XS]=!0),Object.defineProperty(e,t,{...s,get:b,set:S})}markExports(e,t){(typeof t=="object"&&t!==null||typeof t=="function")&&this._exports.set(t,e)}resolveExports(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this._exports.get(e)}},Lz=[],XS=Symbol(),lP=Symbol();function xOe(e,t,r){const i=e.manager.internals;return i.trackedValue!==lP&&i.trackedValue!==r&&i.firePropTrackers(void 0,void 0),i.keyTrackers.length===0&&queueMicrotask(()=>i.firePropTrackers(void 0,void 0)),i.trackedValue=r,i.keyTrackers.push((n,s)=>dr(t,void 0,r===s?n:void 0)),r}function rte(e=[Yx(),...ete()],t,r){const i=Array.isArray(e)?e:[e];let n=i.length+1;const s=l=>{n-=1,l!==void 0&&(n=Math.min(n,0)),n===0&&t(l)};i.forEach(l=>EOe(l,d=>s(d===void 0?void 0:{key:d,host:l,isReactive:!1}),r));const o=i.find(l=>"manager"in l&&typeof l.manager=="object"&&l.manager.component===l);return o&&xOe(o,l=>s(l===void 0?void 0:{key:l,host:o,isReactive:!0}),r),r}function AOe(e){aP.readOnly=!0;try{return e()}finally{aP.readOnly=!1}}var MOe=e=>(...t)=>{const r=ete(),i=new e(...t),n=i.exports;Qee(r.at(-1));const s=i.component.manager.internals;s.markExports(i,n),i.watchExports(l=>s.markExports(i,l)),vOe(i);const o=[i.component,...r].reverse();return rte(o,l=>l===void 0?void 0:OOe(i,l,n),n)};function OOe(e,{host:t,key:r,isReactive:i},n){const s=t,o=s[r]!==e.exports,l=s[r]!==n,d=n!==e.exports;if(o&&!l&&d&&(s[r]=e.exports),t===e.component){if(i){const g=e.component.manager.internals;l&&g.markExports(e,s[r]),v5(e.component,r,v=>{v!==e.exports&&g.markExports(e,v)})}e.assignedProperty=i?void 0:r}e.watchExports(()=>{var b;if(s[r]===e.exports)return;const g=e.component.manager;((b=g.internals.setters[r])==null?void 0:b.includes(g.internals.readonlySetter))?AOe(()=>{s[r]=e.exports}):s[r]=e.exports})}var ROe=(e,t)=>new COe(e,t),COe=class extends SOe{constructor(e,t){const r="addController"in e,i=new Set;function n(d){var f;i.add(d),!(f5 in d)&&e.renderRoot&&e.el.isConnected&&((f=d.hostConnected)==null||f.call(d))}function s(d){var f;i.delete(d),(f=d.controllerRemoved)==null||f.call(d)}const o=e;if(o.addController=n,o.removeController=s,!r){const d=t??e.constructor.__forceUpdate;o.requestUpdate=()=>d(e)}super(e),this.internals=new $Oe(this.component),this.destroyed=!1,this._updatePromise=new mf,this._originalLifecycles={},this.isLit=r,this.component.manager=this,fOe(e,r),this._controllers=i,this.exports=void 0,this.hasDestroy=tR in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const l=this.internals;Object.keys(l.members).forEach(d=>{l.accessorGetter[d]=kz,l.accessorSetter[d]=kz,l.getSetProxy(d)}),r?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(e,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(l.enableReadonly),Bm(e),_$.set(e.el,e),_$.set(e,e)}_bindLifecycleMethods(){const e=this.component,t=this.isLit,r=e.el===e;this._originalLifecycles={_connectedCallback:t||r?void 0:e.connectedCallback,_disconnectedCallback:t||r?void 0:e.disconnectedCallback,_load:t?e.load:e.componentWillLoad,_loaded:t?e.loaded:e.componentDidLoad,_willUpdate:t?void 0:e.componentWillUpdate,_updated:t?void 0:e.componentDidUpdate,_destroy:e.destroy};const i=this._connectedCallback.bind(this),n=this._disconnectedCallback.bind(this),s=this._update.bind(this),o=this._updated.bind(this);t?e.constructor.prototype.addController.call(e,{hostConnected:i,hostDisconnected:n,hostUpdate:s,hostUpdated:o}):(e.connectedCallback=i,e.disconnectedCallback=n,e.componentWillLoad=this._load.bind(this),e.componentDidLoad=this._loaded.bind(this),e.componentWillUpdate=s,e.componentDidUpdate=o),this.hasDestroy&&(e.destroy=this.destroy.bind(this))}_connectedCallback(){var t,r;if(this.destroyed){const i=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${tR} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const e=this.internals;e.enabledWatchers=e.allWatchers,g5(),(t=e.enableReadonly)==null||t.call(e),this._controllers.forEach(NOe),(r=this._originalLifecycles._connectedCallback)==null||r.call(this.component)}_disconnectedCallback(){var e;this.destroyed||(this._controllers.forEach(POe),(e=this._originalLifecycles._disconnectedCallback)==null||e.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;await Promise.allSettled(Array.from(this._controllers,LOe)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&v5(this.component,tR,()=>this._setAutoDestroyTimeout())}_loaded(){var e;this._controllers.forEach(kOe),(e=this._originalLifecycles._loaded)==null||e.call(this.component)}_update(){var t;const e=this.component;return this._controllers.forEach(DOe,e.$changes),(t=this._originalLifecycles._willUpdate)==null?void 0:t.call(this.component)}_updated(){var t;const e=this.component;if(this._controllers.forEach(jOe,e.$changes),(t=this._originalLifecycles._updated)==null||t.call(this.component),this.isLit)e.$changes=new Map;else{const r=this._updatePromise;this._updatePromise=new mf,r.resolve(!0)}}async destroy(){var e;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(FOe),this._controllers.clear(),await((e=this._originalLifecycles._destroy)==null?void 0:e.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const e=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=aOe(e,IOe)}}},tR="autoDestroyDisabled",IOe=1e3,kz=e=>e;function NOe(e){"triggerConnected"in e?e.triggerConnected():dr(e.hostConnected,e)}function POe(e){"triggerDisconnected"in e?e.triggerDisconnected():dr(e.hostDisconnected,e)}async function LOe(e){"triggerLoad"in e?await e.triggerLoad():await oP(e.hostLoad,e)}function kOe(e){"triggerLoaded"in e?e.triggerLoaded():dr(e.hostLoaded,e)}function DOe(e){"triggerUpdate"in e?e.triggerUpdate(this):dr(e.hostUpdate,e,this)}function jOe(e){"triggerUpdated"in e?e.triggerUpdated(this):dr(e.hostUpdated,e,this)}function FOe(e){"triggerDestroy"in e?e.triggerDestroy():dr(e.hostDestroy,e)}var UOe=e=>ite(void 0,e),hVe=e=>t=>ite(t,e),VOe=class extends m5{constructor(e,t){super(e);const r=this.exports;try{Bm(this.component);const i=t(this.component,this),n=this.exports!==r;if(i instanceof Promise){n||this.setProvisionalExports(i);const s=i.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await s)}else(!n||i!==void 0)&&(this.exports=i),queueMicrotask(()=>super.catchUpLifecycle())}catch(i){this._ready.reject(i),console.error(i)}}catchUpLifecycle(){}},ite=MOe(VOe),pVe=(e,t)=>new zOe(e,t),zOe=class extends m5{constructor(e,t){super(),this._attributes=e,this._callback=t,this._observer=new MutationObserver(r=>{r.forEach(i=>{e.includes(i.attributeName)&&t.call(this.component,this.component.el.getAttribute(i.attributeName),i.oldValue,i.attributeName)})})}hostConnected(){this._attributes.forEach(e=>{this.component.el.hasAttribute(e)&&this._callback.call(this.component,null,this.component.el.getAttribute(e),e)}),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},fVe=e=>(t={})=>UOe((r,i)=>{const n=Yee(r.el),s={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},o=r;i.onLifecycle(()=>nOe(r.el,()=>e("./assets"),({t9nLocale:d,t9nStrings:f,lang:g})=>{const v={...f,_lang:g,_t9nLocale:d,_loading:!1};i.exports=v;const b=f.componentLabel;typeof b=="string"&&"label"in r&&r.label==null&&(r.label??(r.label=b)),l(o.messageOverrides)},t.name));function l(d){const f=i.exports,g=f._original??f,v=nte(g,d);d&&(v._original=g),i.exports=v}return"messageOverrides"in o&&i.onLifecycle(()=>v5(o,"messageOverrides",l)),t.blocking?(i.setProvisionalExports(s,!1),i.ready):s});function nte(e,t){if(!t)return e;const r={...e};return Object.entries(t).forEach(([i,n])=>{typeof n=="object"?r[i]=nte(e[i],n):r[i]=n??e[i]}),r}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xT=globalThis,b5=xT.ShadowRoot&&(xT.ShadyCSS===void 0||xT.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,_5=Symbol(),Dz=new WeakMap;let ste=class{constructor(t,r,i){if(this._$cssResult$=!0,i!==_5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o;const r=this.t;if(b5&&t===void 0){const i=r!==void 0&&r.length===1;i&&(t=Dz.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&Dz.set(r,t))}return t}toString(){return this.cssText}};const GOe=e=>new ste(typeof e=="string"?e:e+"",void 0,_5),mVe=(e,...t)=>{const r=e.length===1?e[0]:t.reduce((i,n,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[s+1],e[0]);return new ste(r,e,_5)},BOe=(e,t)=>{if(b5)e.adoptedStyleSheets=t.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of t){const i=document.createElement("style"),n=xT.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,e.appendChild(i)}},jz=b5?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(const i of t.cssRules)r+=i.cssText;return GOe(r)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:qOe,defineProperty:HOe,getOwnPropertyDescriptor:WOe,getOwnPropertyNames:ZOe,getOwnPropertySymbols:YOe,getPrototypeOf:JOe}=Object,Cd=globalThis,Fz=Cd.trustedTypes,XOe=Fz?Fz.emptyScript:"",rR=Cd.reactiveElementPolyfillSupport,b_=(e,t)=>e,uP={toAttribute(e,t){switch(t){case Boolean:e=e?XOe:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},ote=(e,t)=>!qOe(e,t),Uz={attribute:!0,type:String,converter:uP,reflect:!1,hasChanged:ote};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Cd.litPropertyMetadata??(Cd.litPropertyMetadata=new WeakMap);let Qy=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,r=Uz){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(t,r),!r.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(t,i,r);n!==void 0&&HOe(this.prototype,t,n)}}static getPropertyDescriptor(t,r,i){const{get:n,set:s}=WOe(this.prototype,t)??{get(){return this[r]},set(o){this[r]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const l=n==null?void 0:n.call(this);s.call(this,o),this.requestUpdate(t,l,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??Uz}static _$Ei(){if(this.hasOwnProperty(b_("elementProperties")))return;const t=JOe(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(b_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b_("properties"))){const r=this.properties,i=[...ZOe(r),...YOe(r)];for(const n of i)this.createProperty(n,r[n])}const t=this[Symbol.metadata];if(t!==null){const r=litPropertyMetadata.get(t);if(r!==void 0)for(const[i,n]of r)this.elementProperties.set(i,n)}this._$Eh=new Map;for(const[r,i]of this.elementProperties){const n=this._$Eu(r,i);n!==void 0&&this._$Eh.set(n,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const r=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const n of i)r.unshift(jz(n))}else t!==void 0&&r.push(jz(t));return r}static _$Eu(t,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(r=>r(this))}addController(t){var r;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)==null||r.call(t))}removeController(t){var r;(r=this._$EO)==null||r.delete(t)}_$E_(){const t=new Map,r=this.constructor.elementProperties;for(const i of r.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return BOe(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostConnected)==null?void 0:i.call(r)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostDisconnected)==null?void 0:i.call(r)})}attributeChangedCallback(t,r,i){this._$AK(t,i)}_$EC(t,r){var s;const i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(n!==void 0&&i.reflect===!0){const o=(((s=i.converter)==null?void 0:s.toAttribute)!==void 0?i.converter:uP).toAttribute(r,i.type);this._$Em=t,o==null?this.removeAttribute(n):this.setAttribute(n,o),this._$Em=null}}_$AK(t,r){var s;const i=this.constructor,n=i._$Eh.get(t);if(n!==void 0&&this._$Em!==n){const o=i.getPropertyOptions(n),l=typeof o.converter=="function"?{fromAttribute:o.converter}:((s=o.converter)==null?void 0:s.fromAttribute)!==void 0?o.converter:uP;this._$Em=n,this[n]=l.fromAttribute(r,o.type),this._$Em=null}}requestUpdate(t,r,i){if(t!==void 0){if(i??(i=this.constructor.getPropertyOptions(t)),!(i.hasChanged??ote)(this[t],r))return;this.P(t,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,r,i){this._$AL.has(t)||this._$AL.set(t,r),i.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(i=this._$EO)==null||i.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(r)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(r)}willUpdate(t){}_$AE(t){var r;(r=this._$EO)==null||r.forEach(i=>{var n;return(n=i.hostUpdated)==null?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EC(r,this[r]))),this._$EU()}updated(t){}firstUpdated(t){}};Qy.elementStyles=[],Qy.shadowRootOptions={mode:"open"},Qy[b_("elementProperties")]=new Map,Qy[b_("finalized")]=new Map,rR==null||rR({ReactiveElement:Qy}),(Cd.reactiveElementVersions??(Cd.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const __=globalThis,w$=__.trustedTypes,Vz=w$?w$.createPolicy("lit-html",{createHTML:e=>e}):void 0,ate="$lit$",md=`lit$${Math.random().toFixed(9).slice(2)}$`,lte="?"+md,KOe=`<${lte}>`,gf=document,ew=()=>gf.createComment(""),tw=e=>e===null||typeof e!="object"&&typeof e!="function",w5=Array.isArray,QOe=e=>w5(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",iR=`[ 	
\f\r]`,Mv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,zz=/-->/g,Gz=/>/g,Uh=RegExp(`>|${iR}(?:([^\\s"'>=/]+)(${iR}*=${iR}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Bz=/'/g,qz=/"/g,ute=/^(?:script|style|textarea|title)$/i,cte=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),vVe=cte(1),bVe=cte(2),Bd=Symbol.for("lit-noChange"),ii=Symbol.for("lit-nothing"),Hz=new WeakMap,Gp=gf.createTreeWalker(gf,129);function dte(e,t){if(!w5(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return Vz!==void 0?Vz.createHTML(t):t}const e3e=(e,t)=>{const r=e.length-1,i=[];let n,s=t===2?"<svg>":t===3?"<math>":"",o=Mv;for(let l=0;l<r;l++){const d=e[l];let f,g,v=-1,b=0;for(;b<d.length&&(o.lastIndex=b,g=o.exec(d),g!==null);)b=o.lastIndex,o===Mv?g[1]==="!--"?o=zz:g[1]!==void 0?o=Gz:g[2]!==void 0?(ute.test(g[2])&&(n=RegExp("</"+g[2],"g")),o=Uh):g[3]!==void 0&&(o=Uh):o===Uh?g[0]===">"?(o=n??Mv,v=-1):g[1]===void 0?v=-2:(v=o.lastIndex-g[2].length,f=g[1],o=g[3]===void 0?Uh:g[3]==='"'?qz:Bz):o===qz||o===Bz?o=Uh:o===zz||o===Gz?o=Mv:(o=Uh,n=void 0);const S=o===Uh&&e[l+1].startsWith("/>")?" ":"";s+=o===Mv?d+KOe:v>=0?(i.push(f),d.slice(0,v)+ate+d.slice(v)+md+S):d+md+(v===-2?l:S)}return[dte(e,s+(e[r]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),i]};let cP=class hte{constructor({strings:t,_$litType$:r},i){let n;this.parts=[];let s=0,o=0;const l=t.length-1,d=this.parts,[f,g]=e3e(t,r);if(this.el=hte.createElement(f,i),Gp.currentNode=this.el.content,r===2||r===3){const v=this.el.content.firstChild;v.replaceWith(...v.childNodes)}for(;(n=Gp.nextNode())!==null&&d.length<l;){if(n.nodeType===1){if(n.hasAttributes())for(const v of n.getAttributeNames())if(v.endsWith(ate)){const b=g[o++],S=n.getAttribute(v).split(md),T=/([.?@])?(.*)/.exec(b);d.push({type:1,index:s,name:T[2],strings:S,ctor:T[1]==="."?r3e:T[1]==="?"?i3e:T[1]==="@"?n3e:Jx}),n.removeAttribute(v)}else v.startsWith(md)&&(d.push({type:6,index:s}),n.removeAttribute(v));if(ute.test(n.tagName)){const v=n.textContent.split(md),b=v.length-1;if(b>0){n.textContent=w$?w$.emptyScript:"";for(let S=0;S<b;S++)n.append(v[S],ew()),Gp.nextNode(),d.push({type:2,index:++s});n.append(v[b],ew())}}}else if(n.nodeType===8)if(n.data===lte)d.push({type:2,index:s});else{let v=-1;for(;(v=n.data.indexOf(md,v+1))!==-1;)d.push({type:7,index:s}),v+=md.length-1}s++}}static createElement(t,r){const i=gf.createElement("template");return i.innerHTML=t,i}};function kg(e,t,r=e,i){var o,l;if(t===Bd)return t;let n=i!==void 0?(o=r._$Co)==null?void 0:o[i]:r._$Cl;const s=tw(t)?void 0:t._$litDirective$;return(n==null?void 0:n.constructor)!==s&&((l=n==null?void 0:n._$AO)==null||l.call(n,!1),s===void 0?n=void 0:(n=new s(e),n._$AT(e,r,i)),i!==void 0?(r._$Co??(r._$Co=[]))[i]=n:r._$Cl=n),n!==void 0&&(t=kg(e,n._$AS(e,t.values),n,i)),t}let t3e=class{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:r},parts:i}=this._$AD,n=((t==null?void 0:t.creationScope)??gf).importNode(r,!0);Gp.currentNode=n;let s=Gp.nextNode(),o=0,l=0,d=i[0];for(;d!==void 0;){if(o===d.index){let f;d.type===2?f=new S5(s,s.nextSibling,this,t):d.type===1?f=new d.ctor(s,d.name,d.strings,this,t):d.type===6&&(f=new s3e(s,this,t)),this._$AV.push(f),d=i[++l]}o!==(d==null?void 0:d.index)&&(s=Gp.nextNode(),o++)}return Gp.currentNode=gf,n}p(t){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,r),r+=i.strings.length-2):i._$AI(t[r])),r++}},S5=class pte{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,r,i,n){this.type=2,this._$AH=ii,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=i,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=kg(this,t,r),tw(t)?t===ii||t==null||t===""?(this._$AH!==ii&&this._$AR(),this._$AH=ii):t!==this._$AH&&t!==Bd&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):QOe(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==ii&&tw(this._$AH)?this._$AA.nextSibling.data=t:this.T(gf.createTextNode(t)),this._$AH=t}$(t){var s;const{values:r,_$litType$:i}=t,n=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=cP.createElement(dte(i.h,i.h[0]),this.options)),i);if(((s=this._$AH)==null?void 0:s._$AD)===n)this._$AH.p(r);else{const o=new t3e(n,this),l=o.u(this.options);o.p(r),this.T(l),this._$AH=o}}_$AC(t){let r=Hz.get(t.strings);return r===void 0&&Hz.set(t.strings,r=new cP(t)),r}k(t){w5(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const s of t)n===r.length?r.push(i=new pte(this.O(ew()),this.O(ew()),this,this.options)):i=r[n],i._$AI(s),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(t=this._$AA.nextSibling,r){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,r);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var r;this._$AM===void 0&&(this._$Cv=t,(r=this._$AP)==null||r.call(this,t))}},Jx=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,r,i,n,s){this.type=1,this._$AH=ii,this._$AN=void 0,this.element=t,this.name=r,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ii}_$AI(t,r=this,i,n){const s=this.strings;let o=!1;if(s===void 0)t=kg(this,t,r,0),o=!tw(t)||t!==this._$AH&&t!==Bd,o&&(this._$AH=t);else{const l=t;let d,f;for(t=s[0],d=0;d<s.length-1;d++)f=kg(this,l[i+d],r,d),f===Bd&&(f=this._$AH[d]),o||(o=!tw(f)||f!==this._$AH[d]),f===ii?t=ii:t!==ii&&(t+=(f??"")+s[d+1]),this._$AH[d]=f}o&&!n&&this.j(t)}j(t){t===ii?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},r3e=class extends Jx{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===ii?void 0:t}},i3e=class extends Jx{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==ii)}},n3e=class extends Jx{constructor(t,r,i,n,s){super(t,r,i,n,s),this.type=5}_$AI(t,r=this){if((t=kg(this,t,r,0)??ii)===Bd)return;const i=this._$AH,n=t===ii&&i!==ii||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,s=t!==ii&&(i===ii||n);n&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,t):this._$AH.handleEvent(t)}},s3e=class{constructor(t,r,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){kg(this,t)}};const nR=__.litHtmlPolyfillSupport;nR==null||nR(cP,S5),(__.litHtmlVersions??(__.litHtmlVersions=[])).push("3.2.1");const o3e=(e,t,r)=>{const i=(r==null?void 0:r.renderBefore)??t;let n=i._$litPart$;if(n===void 0){const s=(r==null?void 0:r.renderBefore)??null;i._$litPart$=n=new S5(t.insertBefore(ew(),s),s,void 0,r??{})}return n._$AI(e),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let sg=class extends Qy{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const t=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=t.firstChild),t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=o3e(r,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Bd}};var WB;sg._$litElement$=!0,sg.finalized=!0,(WB=globalThis.litElementHydrateSupport)==null||WB.call(globalThis,{LitElement:sg});const sR=globalThis.litElementPolyfillSupport;sR==null||sR({LitElement:sg});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fte={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},yte=e=>(...t)=>({_$litDirective$:e,values:t});let mte=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,i){this._$Ct=t,this._$AM=r,this._$Ci=i}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const a3e=yte(class extends mte{constructor(e){var t;if(super(e),e.type!==fte.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var i,n;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in t)t[s]&&!((i=this.nt)!=null&&i.has(s))&&this.st.add(s);return this.render(t)}const r=e.element.classList;for(const s of this.st)s in t||(r.remove(s),this.st.delete(s));for(const s in t){const o=!!t[s];o===this.st.has(s)||(n=this.nt)!=null&&n.has(s)||(o?(r.add(s),this.st.add(s)):(r.remove(s),this.st.delete(s)))}return Bd}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gte="important",l3e=" !"+gte,u3e=yte(class extends mte{constructor(e){var t;if(super(e),e.type!==fte.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,r)=>{const i=e[r];return i==null?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(e,[t]){const{style:r}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const i of this.ft)t[i]==null&&(this.ft.delete(i),i.includes("-")?r.removeProperty(i):r[i]=null);for(const i in t){const n=t[i];if(n!=null){this.ft.add(i);const s=typeof n=="string"&&n.endsWith(l3e);i.includes("-")||s?r.setProperty(i,s?n.slice(0,-11):n,s?gte:""):r[i]=n}}return Bd}});var vte=(e="",t={},r=Yx())=>{const i={emit:n=>{e===""&&g5();const s=new CustomEvent(e,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(s),s}};return e===""&&rte(void 0,n=>{e=n.key},i),i},MVe=vte.bind(null,""),c3e=()=>{},Qp,d3e=(Qp=class extends sg{constructor(){var r,i,n;super(),this.el=this.constructor.lazy??this,this.manager=ROe(this),this._postLoad=((r=this.constructor.lazy)==null?void 0:r._postLoad)??new mf,this._offspring=((i=this.constructor.lazy)==null?void 0:i._offspring)??[],this._postLoaded=((n=this.constructor.lazy)==null?void 0:n._postLoaded)??new mf,this._enableUpdating=this.enableUpdating,this.enableUpdating=c3e;const t=Qp.prototype.shouldUpdate;this.shouldUpdate!==t&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=t)}static finalizeStyles(t){var n;const r=super.finalizeStyles(t),i=this.shadowRootOptions===Iz;return((n=this.runtime)==null?void 0:n.commonStyles)===void 0||i?r:[this.runtime.commonStyles,...r]}static createProperty(t,r){const i=typeof r=="number"?r:Array.isArray(r)?r[0]:0,n=Array.isArray(r)?r[1]:void 0;super.createProperty(t,{attribute:i&1&&typeof t=="string"?Xee(t):!1,reflect:!!(i&2),type:i&4?Boolean:i&8?Number:void 0,state:!!(i&16),readOnly:!!(i&32),noAccessor:!!(i&64),...n})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const t=!this.manager.connectedCalled;super.connectedCallback(),t&&queueMicrotask(()=>this._load().catch(r=>{this._postLoaded.reject(r),setTimeout(()=>{throw r})}))}createRenderRoot(){const t=this.el.shadowRoot,r=this.constructor,i=r.shadowRootOptions,s=t??(i===Iz?this.el:this.el.attachShadow(i));if(Object.defineProperty(this,"shadowRoot",{value:s}),t)return sg.prototype.createRenderRoot.call(this),t;if(this.isConnected){const o=s.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return s}async _load(){const t=this.el._ancestorLoad??Kee(this.el);t&&await t,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const r=this._offspring.filter(i=>{var n;return!((n=i.manager)!=null&&n.loadedCalled)});r.length&&await Promise.allSettled(r.map(async i=>await i.componentOnReady())),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(t){var r;return this.$changes=t,((r=this._originalShouldUpdate)==null?void 0:r.call(this,t))??!0}listen(t,r,i){const n=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(t,n,i),()=>this.el.removeEventListener(t,n,i)))}listenOn(t,r,i,n){const s=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(t.addEventListener(r,s,n),()=>t.removeEventListener(r,s,n)))}async componentOnReady(){return await this._postLoaded.promise,this}},Qp.lumina=!0,Qp);d3e.$createEvent=vte;function h3e(e){let t;const r=n=>{var s;t=new URL(n,((s=globalThis.location)==null?void 0:s.href)||void 0).href},i={...e,getAssetPath(n){var o;const s=new URL(n,t);return s.origin!==((o=globalThis.location)==null?void 0:o.origin)?s.href:s.pathname},setAssetPath:r,customElement(n,s){s.runtime=i,s.tagName=n,customElements.get(n)||customElements.define(n,s)}};return r(e.defaultAssetPath),i}var OVe=e=>typeof e=="object"&&e!=null?a3e(e):e,RVe=e=>typeof e=="object"&&e!=null?u3e(e):e,CVe=ii;function IVe(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}var NVe={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */const p3e="calcite-mode-auto",f3e="calcite-mode-dark",PVe={rtl:"calcite--rtl"},LVe={filter:250,nextTick:0,resize:150,reposition:100};function Wz(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(f3e)||e.contains(p3e)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),n=o=>{s!==o&&i(o),s=o};let s=r();i(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>n(o.matches?"dark":"light")),new MutationObserver(()=>n(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Ru=globalThis.calciteConfig,kVe=(Ru==null?void 0:Ru.focusTrapStack)||[],DVe=(Ru==null?void 0:Ru.logLevel)||"info",Zz="3.0.3",y3e="2025-02-19",m3e="0b0b89f59";function g3e(){if(Ru&&Ru.version)return;console.info(`Using Calcite Components ${Zz} [Date: ${y3e}, Revision: ${m3e}]`);const e=Ru||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:Zz,writable:!1}),globalThis.calciteConfig=e}const v3e=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;function b3e(){v3e()&&(document.readyState==="interactive"?Wz():document.addEventListener("DOMContentLoaded",()=>Wz(),{once:!0})),g3e()}b3e();const _3e=h3e({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.0.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:jVe,getAssetPath:FVe,setAssetPath:w3e}=_3e;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */let bte=!1;const S3e=e=>{bte=!0,w3e(e)};let _te;function T3e(){bte||S3e(cs($r(_te)))}function T5(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}_te="components/assets";const wte=Symbol("widget"),Ste=Symbol("widget-test-data"),E3e=[],$3e={},S$=new WeakMap;function Tte(e,t){let r=t.children;if(r!=null&&r.length)for(let n=0;n<r.length;++n)r[n]=Tte(e,r[n]);else r=E3e;const i=t.vnodeSelector;if(T$(i)){const n=t.properties||$3e,s=n.key||i,o={key:s,afterCreate:x3e,afterUpdate:A3e,afterRemoved:Ete,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function x3e(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){var l;const o=new n(s);o.container=e,S$.set(e,o),(l=o.afterCreate)==null||l.call(o,o,e),i.addHandles(vt(()=>Ete(e))),queueMicrotask(()=>{o[Ste].projector.renderNow()})}function A3e(e,t,r,{widgetProperties:i}){var s;const n=S$.get(e);n&&(n.set(i),(s=n.afterUpdate)==null||s.call(n,n,e))}function Ete(e){var r;const t=S$.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),S$.delete(e))}function T$(e){return typeof e=="function"&&e[wte]}const Yz=new Set;function M3e(e){Yz.add(e),e.finally(()=>Yz.delete(e))}var $te;const O3e="esri.widgets.Widget";let R3e=0;function xte(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?xte(e[i],t[i]):e[i]=t[i]);return e}const C3e=WMe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const l=t==null?void 0:t(i,n,s,o),d=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||d){const f=i[2].toLowerCase()+i.slice(3),g=S=>l==null?void 0:l.call(s,S);s.addEventListener(f,g,d);const v=()=>s.removeEventListener(f,g,d),b=o.afterRemoved;o.afterRemoved=S=>{b==null||b(S),v()}}return l}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let l=`on${s}${o?"capture":""}`;const d=t.properties;(d&&l in d||(l=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,d&&l in d))&&(JJ(),e.scheduleRender(),d[l].call(d.bind||r,i))}});let oR=!1,zr=class extends e0.EsriPromiseMixin(aa.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=C3e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=ix(async()=>{var d;if((d=this._messageBundleProps)!=null&&d.length){const f=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:g,propertyName:v})=>{if(this.destroyed)return;let b=await pJ(g);this.uiStrings&&Object.keys(this.uiStrings)&&(b=xte(U(b),this.uiStrings)),this[v]=b}));if(this.destroyed)return;for(const g of f)g.status==="rejected"&&ae.getLogger(this).error("widget-intl:locale-error",this.declaredClass,g.reason)}await this.loadLocale()}),T3e();const i="esri-widget-uid-"+Zx(),n=this.render.bind(this);this._trackingTarget=new nx(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{var v,b;if(!this._readyForTrueRender||this.destroyed)return null;const d=n()??s(),f=d.properties??(d.properties={});if(f.key??(f.key=i),T$(d.vnodeSelector)){if(!this.visible)return s()}else this.visible?f.styles||(f.styles={}):(f.class="",f.styles={display:"none"}),(v=f.styles).display??(v.display="");let g=0;return(b=d.children)==null||b.forEach(S=>{var T;T$(S.vnodeSelector)||(S.properties??(S.properties={}),(T=S.properties).key??(T.key=`${this.id}--${g++}`))}),Tte(this,d)};this.render=()=>{if(oR)return o();let d=dve(this)??null;if(d)return d;this._trackingTarget.clear(),oR=!0;try{d=ku(this._trackingTarget,o)}catch(f){throw ae.getLogger(this).error(f),f}finally{oR=!1}return d&&hve(this,d),d};const l=this.beforeFirstRender();l?this._resourcesFetch=l.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),M3e(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){var r;const t=this.loadDependencies();return(r=this._messageBundleProps)!=null&&r.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(F8):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Zt(this._trackingTarget),Zt(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,g3(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return vD(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+R3e++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[($te=wte,Ste)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(g3(this),this._projector.scheduleRender())}classes(...t){return pve.apply(this,t)}renderNow(){g3(this),this._projector.renderNow()}_postInitialize(){var r;if(this.destroyed)return;this.scheduleRender(),(r=this._delegatedEventNames)!=null&&r.length&&this.addHandles(ze(()=>this.viewModel,(i,n)=>{n&&this.removeHandles("delegated-events"),i&&rx(i)&&this.addHandles(this._delegatedEventNames.map(s=>_w(i,s,o=>{this.emit(s,o)})),"delegated-events")},Pn)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(F8),this.scheduleRender()};this.addHandles([oY(t),ze(()=>this.uiStrings,t),ao(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var r;this._attached&&(this._projector.detach(this.render),this._attached=!1),(r=t==null?void 0:t.parentNode)==null||r.removeChild(t)}};zr[$te]=!0,zr.vnodeSelector="div",u([h()],zr.prototype,"_readyForTrueRender",void 0),u([h({value:null})],zr.prototype,"container",null),u([ft("container")],zr.prototype,"castContainer",null),u([h()],zr.prototype,"icon",null),u([h()],zr.prototype,"id",null),u([h()],zr.prototype,"label",null),u([h()],zr.prototype,"renderable",null),u([h()],zr.prototype,"uiStrings",void 0),u([h()],zr.prototype,"viewModel",void 0),u([h({value:!0})],zr.prototype,"visible",null),u([h()],zr.prototype,"key",void 0),u([h()],zr.prototype,"children",void 0),u([h()],zr.prototype,"afterCreate",void 0),u([h()],zr.prototype,"afterUpdate",void 0),u([h()],zr.prototype,"afterRemoved",void 0),zr=u([M(O3e)],zr);const Xx=zr,I3e=new Map;function N3e(e){return I3e.get(e)}function Jz(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function P3e(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function Ov(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function L3e(e){return e.type==="bing-maps"}const jl=[];let em=class extends Ae{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ge,this.view=null,this._allLayerViewsChange=r=>{var n;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=(n=this.view)==null?void 0:n.allLayerViews;i&&(this.addHandles(i.map(s=>ze(()=>{var o;return[s.suspended,(o=s.layer)==null?void 0:o.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),r!=null&&r.removed&&r.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([kd(()=>{var r;return(r=this.view)==null?void 0:r.allLayerViews},"change",r=>this._allLayerViewsChange(r),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ao(()=>{var r;return((r=this.view)==null?void 0:r.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,r=t==null?void 0:t.allLayerViews;if(jl.length=0,!t||!r)return void this._clear();r.forEach(n=>{var l,d;if(n.suspended||!((l=n.layer)!=null&&l.attributionVisible))return;const s=n.layer;if(Jz(s,"user"))return void Ov(jl,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const f=this._fetchedAttributionData.get(n);return void(f?Ov(jl,n,this._getDynamicAttribution(f,t,s)):Jz(s)&&Ov(jl,n,s.copyright))}return void this._fetchAttributionData(n)}const o="portalItem"in s?(d=s.portalItem)==null?void 0:d.accessInformation:void 0;Ov(jl,n,o||s.copyright)});const i=r.find(n=>{var s;return((s=n.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&i){const n=N3e(this.view);if(n){const s=n.getAttributionText();for(let o=0;o<s.length;++o)Ov(jl,i,s[o])}}P3e(this.items,jl)&&(this.items.removeAll(),this.items.addMany(jl)),jl.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const r=await fx(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=r.ok?this._createContributionIndex(r.value,L3e(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,r){const i=t.contributors,n={};if(!i)return n;for(let s=0;s<i.length;s++){const o=i[s],l=o.coverageAreas;if(!l)return;for(const d of l){const f=d.bbox,g=d.zoomMin-(r&&d.zoomMin?1:0),v=d.zoomMax-(r&&d.zoomMax?1:0),b=new Ut({xmin:f[1],ymin:f[0],xmax:f[3],ymax:f[2],spatialReference:Ge.WGS84}),S={extent:Ad(b),attribution:o.attribution||"",score:d.score!=null?d.score:100,id:s};for(let T=g;T<=v;T++)n[T]??(n[T]=[]),n[T].push(S)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(t,r,i){var g;const{extent:n,scale:s}=r;let o=((g=i.tileInfo)==null?void 0:g.scaleToZoom(s))??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!n||o==null||o<=-1)return"";const l=t[o],d=dx(n.center.clone().normalize(),Ge.WebMercator),f=new Set;return l?l.filter(v=>{const b=v.id,S=!f.has(b)&&d&&v.extent&&Ew(v.extent,d);return S&&f.add(b),S}).sort((v,b)=>b.score-v.score||v.objectId-b.objectId).map(v=>v.attribution).join(", "):""}};u([h({readOnly:!0,type:ge})],em.prototype,"items",void 0),u([h({readOnly:!0})],em.prototype,"state",null),u([h()],em.prototype,"view",void 0),em=u([M("esri.widgets.Attribution.AttributionViewModel")],em);const Ate=em,el={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function k3e(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:j3e(e[t])}}}function D3e(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function j3e(e){return function(t,...r){D3e(t)?vve(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function Kx(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var F3e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},Mte=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?Mte(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=F3e(n)),t.push(n))}},U3e=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return Mte(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function jn(e,t,...r){return typeof e!="function"||T$(e)?U3e(e,t??null,...r):e(t,...r)}function zVe(...e){return e}const Oy="esri-attribution",Ry={base:Oy,poweredBy:`${Oy}__powered-by`,sources:`${Oy}__sources`,open:`${Oy}--open`,sourcesOpen:`${Oy}__sources--open`,link:`${Oy}__link`};let cn=class extends Xx{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Ate}initialize(){this.addHandles(kd(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Ry.open]:this._isOpen};return jn("div",{bind:this,class:this.classes(Ry.base,el.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return jn("div",{class:Ry.poweredBy},"Powered by"," ",jn("a",{class:Ry.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:n}=this,s={[Ry.sourcesOpen]:t,[el.interactive]:r};return jn("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Ry.sources,s),innerHTML:n,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:n,scrollWidth:s}=t,o=s>n,l=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,l&&(r=!0),this._isOpen){const d=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,d&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};u([h()],cn.prototype,"_isOpen",void 0),u([h()],cn.prototype,"_isInteractive",null),u([h()],cn.prototype,"_attributionTextOverflowed",void 0),u([h()],cn.prototype,"_prevSourceNodeHeight",void 0),u([h({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],cn.prototype,"attributionText",null),u([h()],cn.prototype,"icon",null),u([h()],cn.prototype,"itemDelimiter",void 0),u([h()],cn.prototype,"label",null),u([h(),Kx("esri/widgets/Attribution/t9n/Attribution")],cn.prototype,"messages",void 0),u([h()],cn.prototype,"view",null),u([h({type:Ate})],cn.prototype,"viewModel",void 0),u([k3e()],cn.prototype,"_toggleState",null),cn=u([M("esri.widgets.Attribution")],cn);const V3e=cn;function z3e(){const e=Z("mapview-essential-goto-duration");return e==null?e:e}function G3e(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const B3e=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return rW(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return u([h()],t.prototype,"goToOverride",void 0),u([h()],t.prototype,"view",void 0),t=u([M("esri.widgets.support.GoTo")],t),t};let fp=class extends B3e(Ae){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Xi)}destroy(){this.view=null}get canShowNorth(){return G3e(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:z3e()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?ze(()=>t==null?void 0:t.rotation,this._updateForRotation,Xi):ze(()=>t==null?void 0:t.camera,this._updateForCamera,Xi))}_watchForView(t){this.addHandles(ze(()=>this.view,this._updateRotationWatcher,t))}};u([h({readOnly:!0})],fp.prototype,"canShowNorth",null),u([h({readOnly:!0})],fp.prototype,"orientation",void 0),u([h({readOnly:!0})],fp.prototype,"state",null),u([h()],fp.prototype,"view",void 0),fp=u([M("esri.widgets.Compass.CompassViewModel")],fp);const Ote=fp,Xz="esri-compass",Kz={base:Xz,iconContainer:`${Xz}__icon-container`};let Kl=class extends Xx{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new Ote,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return T5({button:()=>ne(()=>import("./index-Csm_Ojc8.js"),__vite__mapDeps([262,263,264,265,266,267,268,269,270,271,272,273,274,275])),icon:()=>ne(()=>import("./index-DjQ328HM.js"),__vite__mapDeps([266,267,268]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return jn("div",{class:this.classes(Kz.base,el.widget)},jn("calcite-button",{class:el.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},jn("div",{"aria-hidden":"true",class:Kz.iconContainer,title:i.reset},jn("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};u([h()],Kl.prototype,"goToOverride",null),u([h()],Kl.prototype,"icon",null),u([h()],Kl.prototype,"label",null),u([h(),Kx("esri/widgets/Compass/t9n/Compass")],Kl.prototype,"messages",void 0),u([h()],Kl.prototype,"view",null),u([h({type:Ote})],Kl.prototype,"viewModel",void 0),Kl=u([M("esri.widgets.Compass")],Kl);const q3e=Kl,Qz="esri-navigation-toggle",e7={base:Qz,isLayoutHorizontal:`${Qz}--horizontal`};let tm=class extends Ae{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(ao(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.navigation)==null?void 0:r.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var i,n;const t=(n=(i=this.view)==null?void 0:i.navigation)==null?void 0:n.actionMap;if(!t)return;const r=this._navigationMode==="pan";t.dragPrimary=r?"pan":"rotate",t.dragSecondary=r?"rotate":"pan"}};u([h({readOnly:!0})],tm.prototype,"state",null),u([h()],tm.prototype,"_navigationMode",void 0),u([h()],tm.prototype,"view",void 0),tm=u([M("esri.widgets.NavigationToggle.NavigationToggleViewModel")],tm);const Rte=tm;let Ql=class extends Xx{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new Rte,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var n;const i=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan"?this._rotateButton:this._panButton;bve(i),this.toggle()}}loadDependencies(){return T5({button:()=>ne(()=>import("./index-Csm_Ojc8.js"),__vite__mapDeps([262,263,264,265,266,267,268,269,270,271,272,273,274,275]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var n,s;const t=((n=this.viewModel)==null?void 0:n.state)==="disabled",r=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan",i=this.messages.toggle;return jn("div",{class:this.classes(e7.base,el.widget,{[e7.isLayoutHorizontal]:this.layout==="horizontal"})},jn("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:el.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),jn("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:el.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};u([h()],Ql.prototype,"icon",null),u([h()],Ql.prototype,"label",null),u([h({value:"vertical"})],Ql.prototype,"layout",null),u([h(),Kx("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Ql.prototype,"messages",void 0),u([h()],Ql.prototype,"view",null),u([h({type:Rte})],Ql.prototype,"viewModel",void 0),Ql=u([M("esri.widgets.NavigationToggle")],Ql);const H3e=Ql;let yp=class extends Ae{get canZoomIn(){var i,n,s;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(s=(n=this.view)==null?void 0:n.constraints)==null?void 0:s.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var n;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(n=t.constraints)==null?void 0:n.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,n;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((n=this.view)==null?void 0:n.scale)??0}};u([h({readOnly:!0})],yp.prototype,"canZoomIn",null),u([h({readOnly:!0})],yp.prototype,"canZoomOut",null),u([h()],yp.prototype,"view",void 0),u([h()],yp.prototype,"_scale",null),yp=u([M("esri.widgets.Zoom.ZoomConditions2D")],yp);const W3e=yp;let rm=class extends Ae{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};u([h({readOnly:!0})],rm.prototype,"canZoomIn",null),u([h({readOnly:!0})],rm.prototype,"canZoomOut",null),u([h()],rm.prototype,"view",void 0),rm=u([M("esri.widgets.Zoom.ZoomConditions3D")],rm);const Z3e=rm;let Wc=class extends Ae{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new W3e({view:t}):t.type==="3d"&&(this._zoomConditions=new Z3e({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():P_(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():P_(t.goTo({zoomFactor:.5})))}};u([h()],Wc.prototype,"_zoomConditions",void 0),u([h()],Wc.prototype,"canZoomIn",null),u([h()],Wc.prototype,"canZoomOut",null),u([h({readOnly:!0})],Wc.prototype,"state",null),u([h()],Wc.prototype,"view",null),Wc=u([M("esri.widgets.Zoom.ZoomViewModel")],Wc);const Cte=Wc,t7={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let eu=class extends Xx{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new Cte,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return T5({button:()=>ne(()=>import("./index-Csm_Ojc8.js"),__vite__mapDeps([262,263,264,265,266,267,268,269,270,271,272,273,274,275]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[t7.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:n,zoomOut:s}=this.messages;return jn("div",{class:this.classes(t7.base,el.widget,t)},jn("calcite-button",{class:el.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),jn("calcite-button",{class:el.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};u([h()],eu.prototype,"icon",null),u([h()],eu.prototype,"label",null),u([h({value:"vertical"})],eu.prototype,"layout",null),u([h(),Kx("esri/widgets/Zoom/t9n/Zoom")],eu.prototype,"messages",void 0),u([h()],eu.prototype,"view",null),u([h({type:Cte})],eu.prototype,"viewModel",void 0),eu=u([M("esri.widgets.Zoom")],eu);const Y3e=eu;function J3e(e){return(e==null?void 0:e.view)!==void 0}let AT=class extends jMe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const n=this._find(i),s=n==null?void 0:n.widget;J3e(s)&&(s.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([ze(()=>this.components,this._componentsWatcher,Xi),ze(()=>this.view,this._updateViewAwareWidgets,Xi)])}_add(t,r,i,n,s){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,n,s)}_removeComponents(t){t.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new ET({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new V3e({view:r});case"compass":return new q3e({view:r});case"navigation-toggle":return new H3e({view:r});case"zoom":return new Y3e({view:r})}}};u([h()],AT.prototype,"components",void 0),AT=u([M("esri.views.ui.DefaultUI")],AT);const Ite=AT;let MT=class extends Ite{constructor(t){super(t),this.components=["attribution","zoom"]}};u([h()],MT.prototype,"components",void 0),MT=u([M("esri.views.ui.2d.DefaultUI2D")],MT);const Nte=MT;let Pte=class dP{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new V(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new dP(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!s.test(i))throw new V((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(n!=null&&n.match)||!s.test(n))throw new V((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),l=parseInt(n,10);return new dP(o,l,r)}},og=class extends Pte{constructor(t,r){super(t,r,"webmap")}};function aR(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}const Lte=new og(2,33);var hP;let OT=hP=class extends W{constructor(e){super(e),this.color=new De([0,0,0,1])}clone(){return new hP(U({color:this.color}))}};u([h({type:De,json:{write:!0}})],OT.prototype,"color",void 0),OT=hP=u([M("esri.webmap.background.ColorBackground")],OT);const Qx=OT;let kte,Dte,jte,Fte,Ute,Vte,zte;async function X3e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,GridView2D:s,Stage:o}]=await Promise.all([ne(()=>import("./webglDeps-CgGSnfMr.js"),__vite__mapDeps([183,144,17,184,185,186])),ne(()=>import("./mapViewDeps-G1XEDaxQ.js"),__vite__mapDeps([187,109,75,76,16,17,77,78,79,80,74,46,188,83,189,184,144,185,148,124,190,101,191,131,130,87,21,22,81,89,192,84,85,86,193,6,129,183,186,194,96,195,73,19,13,26,25,196,137,138,122,146,197,62,198,88,199,200,82,201,51,93,71,202,203,204,205,140,206,207]))]);Dte=e,jte=t,Fte=r,Ute=i,Vte=n,zte=s,kte=o}let ct=class extends dxe(v0e(Zve(Pve(_2e)))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new U_({getCollections:()=>{var r,i;return[(r=this.basemapView)==null?void 0:r.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new Vx({actionMap:new ZD({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new ge,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new qee,this.type="2d",this.view2dType=null,this.ui=new Nte,this.test={takeScreenshot:async r=>vMe(this._getScreenshotView(r),r)},this.padding={top:0,right:0,bottom:0,left:0},$ge()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Zt(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new $Ae(this.featuresTilingScheme)}get constraintsInfo(){var i,n;const t=(i=this.defaultsFromMap)==null?void 0:i.tileInfo,r=this.spatialReference;return{lods:(n=t==null?void 0:t.spatialReference)!=null&&n.equals(r)?t.lods:null,spatialReference:r}}get initialExtentRequired(){var l;if(!this.stateManager)return!1;const{scale:t,constraints:r,center:i,viewpoint:n,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((l=this.map.initialViewProperties)!=null&&l.viewpoint))&&!s&&(r!=null&&r.effectiveLODs||(o=-1),(!i||t===0&&o===-1)&&((n==null?void 0:n.targetGeometry)==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const r=t.targetGeometry,i=this.spatialReference;return AJ(r.spatialReference,i)}get background(){return aR(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get highlightOptions(){return rMe(this)}set highlightOptions(t){iMe(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var i,n,s,o;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((i=this._magnifierView)!=null&&i.updatingHandles.updating)),r=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(l=>!l.destroyed&&!("layerViews"in l)&&l.updating===!0)||t);if(Z("esri-2d-log-updating")){const l=this.allLayerViews.reduce((d,f)=>({...d,[`${f.layer.id}(${f.layer.type})`]:!f.destroyed&&!("layerViews"in f)&&f.updating}),{});console.log(`Updating MapView: ${r}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(n=this.layerViewManager)==null?void 0:n.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(o=this.graphicsView)==null?void 0:o.updating}
-> allLayerViews: ${JSON.stringify(l)}
-> updatingMagnifier: ${t}
`)}return r}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new oo({rings:[t.map(r=>[r[0],r[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}async hitTest(t,r){return nMe(this,t,r)}async takeScreenshot(t){return gMe(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const r=QK(t)?KK(this,t):t;return this.stateManager.toMap(r)}toScreen(t,r){return this.stateManager.toScreen(t,r)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return aR(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return aR(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return BV.hasLayerViewModule(t)}importLayerView(t){return BV.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(ae.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var f;const r=this.toMap(t),i=await this.hitTest(t),n=this.allLayerViews.toArray().filter(g=>g.clips.every(v=>Pee(this,v,t,r))).reverse(),s=new globalThis.Map(n.map(g=>[g.layer.uid,g])),o=[];let l=0,d=0;for(;l<i.results.length||d<n.length;){const g=i.results.at(l);if(g&&g.type!=="graphic"){++l;continue}const v=s.get((f=(g==null?void 0:g.layer)??(g==null?void 0:g.graphic.layer))==null?void 0:f.uid);if((!g||v)&&d<n.length&&n.at(d)!==v){const b=n.at(d);"fetchPopupFeaturesAtLocation"in b&&o.push({mapPoint:r,layerView:b}),++d}else g&&(o.push({graphic:g.graphic,layerView:v}),++l)}return{hits:o,location:r}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=MMe(this.type);if(Z("safari")&&Z("safari")<9&&(t=new V("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Z("safari")})),t!=null)throw ae.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return X3e()}_getDefaultViewpoint(){var x;const{constraints:t,initialExtent:r,map:i,padding:n,size:s}=this;if(!t)return null;const o=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,l=this.stateManager.getUserStartupOptions(this.size),d=o==null?void 0:o.viewpoint,f=((x=d==null?void 0:d.targetGeometry)==null?void 0:x.extent)??r,g=f==null?void 0:f.center,v=(d==null?void 0:d.rotation)??0,b=(d==null?void 0:d.scale)||f&&Bx(f,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),S=l.center??g,T=l.rotation??v,E=l.scale??b;return S&&E?new ni({targetGeometry:S,scale:E,rotation:T}):null}_startup(){var l;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(l=this.defaultsFromMap.extent)==null?void 0:l.center),this.graphics.owner=this;const r=new kte(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=r,this._magnifierView=new Vte,this._magnifierView.magnifier=this.magnifier,this._gridView=new zte;const i=new Fte({view:this});this._set("labelManager",i);const n=new aAe({view:this});this._set("animationManager",n);const s=new Ute({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",d=>this.fatalError=d.error),ze(()=>this.stationary,d=>r.stationary=d,Pn),ze(()=>this.background,d=>{r.backgroundColor=d==null?void 0:d.color,this._magnifierView.backgroundColor=d==null?void 0:d.color},Pn),ze(()=>this.magnifier,d=>this._magnifierView.magnifier=d,Pn),ze(()=>this.grid,d=>this._gridView.grid=d,Pn),ze(()=>this.renderingOptions,d=>r.renderingOptions=d,Pn),ze(()=>this.highlights.items.map(d=>({name:d.name,options:{fillColor:d.color,haloColor:d.haloColor,fillOpacity:d.fillOpacity,haloOpacity:d.haloOpacity,haloWidth:d.haloWidth,haloBlur:d.haloBlur}})),()=>{r.highlightGradient=eMe(r.highlightGradient,this.highlights.items)},Pn),ze(()=>this.state.id,()=>r.state=this.state,Pn)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(d=>d(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(r=>{this.stage.addChild(r.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new pAe(m0e.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const r=new Dte({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new jte(t)});this._set("graphicsView",r)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var o;const{allLayerViews:r,padding:i,size:n,stage:s}=this;return{allLayerViews:r,backgroundColor:t!=null&&t.ignoreBackground?null:(o=this.background)==null?void 0:o.color,padding:i,size:n,stage:s}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const r of this.allLayerViews)r.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const r of this.allLayerViews)r.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ct.type="2d",u([h({constructOnly:!0})],ct.prototype,"deactivatedWebGLExtensions",void 0),u([h({constructOnly:!0})],ct.prototype,"debugWebGLExtensions",void 0),u([h({readOnly:!0})],ct.prototype,"featuresTilingScheme",void 0),u([h({readOnly:!0})],ct.prototype,"graphicsTileStore",null),u([h()],ct.prototype,"graphicsView",void 0),u([h()],ct.prototype,"constraintsInfo",null),u([h()],ct.prototype,"initialExtentRequired",null),u([h()],ct.prototype,"labelManager",void 0),u([h({type:Vx,nonNullable:!0})],ct.prototype,"navigation",void 0),u([h({constructOnly:!0})],ct.prototype,"renderCanvas",void 0),u([h()],ct.prototype,"renderingOptions",void 0),u([h({constructOnly:!0})],ct.prototype,"supersampleScreenshotsEnabled",void 0),u([h({readOnly:!0})],ct.prototype,"supportsGround",void 0),u([h()],ct.prototype,"defaultsFromMapSettings",null),u([h({readOnly:!0})],ct.prototype,"typeSpecificPreconditionsReady",null),u([h({type:Qx})],ct.prototype,"background",null),u([h()],ct.prototype,"center",null),u([h({type:ge})],ct.prototype,"floors",void 0),u([h()],ct.prototype,"grid",void 0),u([h({type:Rd})],ct.prototype,"highlightOptions",null),u([h()],ct.prototype,"map",void 0),u([h()],ct.prototype,"padding",null),u([h({readOnly:!0})],ct.prototype,"rendering",null),u([h({readOnly:!0})],ct.prototype,"resolution",null),u([h()],ct.prototype,"scale",null),u([h({constructOnly:!0})],ct.prototype,"spatialReferenceLocked",void 0),u([h({readOnly:!0})],ct.prototype,"tileInfo",null),u([h({type:qee,readOnly:!0})],ct.prototype,"timeline",void 0),u([h({readOnly:!0})],ct.prototype,"type",void 0),u([h({readOnly:!0})],ct.prototype,"updating",null),u([h({readOnly:!0})],ct.prototype,"view2dType",void 0),u([h({readOnly:!0})],ct.prototype,"visibleArea",null),u([h()],ct.prototype,"zoom",null),u([h({readOnly:!0})],ct.prototype,"navigating",null),u([h(),ft(e=>e instanceof Ite?e:mw(Nte,e))],ct.prototype,"ui",void 0),ct=u([M("esri.views.View2D")],ct);const K3e=ct;let RT=class extends K3e{constructor(t){super(t),this.view2dType="map"}};u([h({readOnly:!0})],RT.prototype,"view2dType",void 0),RT=u([M("esri.views.MapView")],RT);const Q3e=RT;let eRe=class Gte{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(lC),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new Gte,i=this._originStores[ot.DEFAULTS];i&&i.forEach((n,s)=>{r.set(s,U(n),ot.DEFAULTS)});for(let n=ot.SERVICE;n<lC;n++){const s=this._originStores[n];s&&s.forEach((o,l)=>{t&&t.has(l)||r.set(l,U(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=ot.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=ot.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i==null?void 0:i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||ot.DEFAULTS}forEach(t){this._values.forEach(t)}};const Bte=e=>{let t=class extends e{constructor(...r){super(...r);const i=Vn(this),n=i.store,s=new eRe;i.store=s,MW(i,n,s)}read(r,i){RW(this,r,i)}getAtOrigin(r,i){const n=lR(this),s=bd(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(l=>{o[l]=n.get(l,s)}),o}originOf(r){return SE(this.originIdOf(r))}originIdOf(r){return lR(this).originOf(r)}revert(r,i){const n=lR(this),s=bd(i),o=Vn(this);let l;l=typeof r=="string"?r==="*"?n.keys(s):[r]:r,l.forEach(d=>{o.invalidate(d),n.revert(d,s),o.commit(d)})}};return t=u([M("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function lR(e){return Vn(e).store}let r7=class extends Bte(Ae){};r7=u([M("esri.core.ReadOnlyMultiOriginJSONSupport")],r7);const tRe=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return uR(this).delete(r,bd(i))}write(r,i){return NW(this,r=r||{},i),r}setAtOrigin(r,i,n){Vn(this).setAtOrigin(r,i,bd(n))}removeOrigin(r){const i=uR(this),n=bd(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),ot.USER)}updateOrigin(r,i){const n=uR(this),s=bd(i),o=Xa(this,r);for(let l=s+1;l<lC;++l)n.delete(r,l);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=u([M("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function uR(e){return Vn(e).store}const eA=e=>{let t=class extends tRe(Bte(e)){constructor(...r){super(...r)}};return t=u([M("esri.core.MultiOriginJSONSupport")],t),t};let pP=class extends eA(Ae){};pP=u([M("esri.core.MultiOriginJSONSupport")],pP);async function rRe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Fm(e);const r=Ge.WGS84;return await gD(t,r),Kd(e,r)}function iRe(e,t){if(!qte(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function qte(e,t){var r;return!!((r=e.typeKeywords)!=null&&r.includes(t))}function sze(e){return qte(e,Hte.HOSTED_SERVICE)}function nRe(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function oze(e,t,r){r?iRe(e,t):nRe(e,t)}async function aze(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return rRe(r)}const Hte={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function sRe(e){var d;const{portal:t,isOrgItem:r,itemControl:i}=e,n=(d=t.user)==null?void 0:d.privileges;let s=!n||n.includes("features:user:edit"),o=!!r&&!!(n!=null&&n.includes("features:user:fullEdit"));const l=i==="update"||i==="admin";return l?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:l}}}let Zc=class extends W{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([h({type:String,json:{write:{isRequired:!0}}})],Zc.prototype,"facilityIdField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Zc.prototype,"layerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Zc.prototype,"nameField",void 0),u([h({type:String,json:{write:!0}})],Zc.prototype,"siteIdField",void 0),u([h({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Zc.prototype,"sublayerId",void 0),Zc=u([M("esri.layers.support.FacilityLayerInfo")],Zc);const oRe=Zc;let Do=class extends W{constructor(t){super(t),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};u([h({type:String,json:{write:{isRequired:!0}}})],Do.prototype,"facilityIdField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Do.prototype,"layerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Do.prototype,"levelIdField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Do.prototype,"levelNumberField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Do.prototype,"longNameField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Do.prototype,"shortNameField",void 0),u([h({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Do.prototype,"sublayerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Do.prototype,"verticalOrderField",void 0),Do=u([M("esri.layers.support.LevelLayerInfo")],Do);const aRe=Do;let mp=class extends W{constructor(t){super(t),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};u([h({type:String,json:{write:{isRequired:!0}}})],mp.prototype,"layerId",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],mp.prototype,"nameField",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],mp.prototype,"siteIdField",void 0),u([h({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],mp.prototype,"sublayerId",void 0),mp=u([M("esri.layers.support.SiteLayerInfo")],mp);const lRe=mp;let im=class extends W{constructor(t){super(t),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};u([h({type:aRe,json:{write:{isRequired:!0}}})],im.prototype,"levelLayer",void 0),u([h({type:oRe,json:{write:{isRequired:!0}}})],im.prototype,"facilityLayer",void 0),u([h({type:lRe,json:{write:!0}})],im.prototype,"siteLayer",void 0),im=u([M("esri.support.MapFloorInfo")],im);const uRe=im;var Wa;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Wa||(Wa={}));var fP;let nm=fP=class extends W{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new fP(U({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};u([h({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],nm.prototype,"activeRange",void 0),u([h({type:[Number],json:{write:!0}})],nm.prototype,"currentRangeExtent",void 0),u([h({type:[Number],json:{write:!0}})],nm.prototype,"fullRangeExtent",void 0),nm=fP=u([M("esri.webdoc.RangeInfo")],nm);const E5=nm;var yP;let Ia=yP=class extends W{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new yP(U({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};u([h({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Ia.prototype,"enabled",void 0),u([h({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Ia.prototype,"longNames",void 0),u([h({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Ia.prototype,"minimized",void 0),u([h({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Ia.prototype,"pinnedLevels",void 0),u([h({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Ia.prototype,"site",void 0),u([h({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Ia.prototype,"facility",void 0),u([h({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Ia.prototype,"level",void 0),Ia=yP=u([M("esri.webdoc.widgets.FloorFilter")],Ia);const cRe=Ia;var mP;const KS=new We({slider:"slider",picker:"picker"});let sm=mP=class extends W{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new mP({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};u([h({type:KS.apiValues,nonNullable:!0,json:{type:KS.jsonValues,default:null,read:{reader:KS.read},write:{isRequired:!0,writer:KS.write}}})],sm.prototype,"interactionMode",void 0),u([h({type:at,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],sm.prototype,"numStops",void 0),u([h({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],sm.prototype,"stopInterval",void 0),sm=mP=u([M("esri.webdoc.widgets.Range")],sm);const dRe=sm,$5=Wr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let xb=class extends He.ClonableMixin(W){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return NX(this.value,this.unit,"milliseconds")}};u([Ee($5,{nonNullable:!0})],xb.prototype,"unit",void 0),u([h({type:Number,json:{write:!0},nonNullable:!0})],xb.prototype,"value",void 0),xb=u([M("esri.time.TimeInterval")],xb);const vf=xb;var gP;let Qr=gP=class extends W{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){return e?si.fromArray(e):void 0}writeCurrentTimeExtent(e,t,r){e&&Nr(r,e.toArray(),t)}readFullTimeExtent(e,t){const r=t.properties;if(!r)return;const i=r.endTime!=null?new Date(r.endTime):null,n=r.startTime!=null?new Date(r.startTime):null;return new si({start:n,end:i})}writeFullTimeExtent(e,t){if(!e)return;const r=t.properties=t.properties||{},i=e.end,n=e.start;i&&(r.endTime=i!=null?i.getTime():null),n&&(r.startTime=n!=null?n.getTime():null)}readStopInterval(e,t,r){return e?vf.fromJSON({value:e.interval,unit:e.units},r):null}writeStopInterval(e,t,r,i){if(!e)return;const n=e.toJSON(i);Nr("properties.timeStopInterval",{interval:n.value,units:n.unit},t)}readStops(e){return e!=null&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,r){e!=null&&e.length&&Nr(r,e.map(i=>i.getTime()),t)}clone(){return new gP(U({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};u([h({type:si,json:{type:[[at,Vg]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Qr.prototype,"currentTimeExtent",void 0),u([se("currentTimeExtent")],Qr.prototype,"readCurrentTimeExtent",null),u([le("currentTimeExtent")],Qr.prototype,"writeCurrentTimeExtent",null),u([h({type:si,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Qr.prototype,"fullTimeExtent",void 0),u([se("fullTimeExtent")],Qr.prototype,"readFullTimeExtent",null),u([le("fullTimeExtent")],Qr.prototype,"writeFullTimeExtent",null),u([h({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Qr.prototype,"loop",void 0),u([h({type:at,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var i;const e=!!this.stopInterval,t=!!((i=this.stops)!=null&&i.length),r=!(e||t);return{enabled:r,isRequired:r}}}}})],Qr.prototype,"numStops",void 0),u([h({type:[1,2],nonNullable:!0,json:{type:at,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Qr.prototype,"numThumbs",void 0),u([h({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Qr.prototype,"stopDelay",void 0),u([h({type:vf,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:$5.jsonValues.filter(e=>e!=="esriTimeUnitsUnknown")}},overridePolicy(){var r;const e=this.numStops!=null,t=!!((r=this.stops)!=null&&r.length);return{enabled:!t,isRequired:!(e||t)}}}}})],Qr.prototype,"stopInterval",void 0),u([se("stopInterval")],Qr.prototype,"readStopInterval",null),u([le("stopInterval")],Qr.prototype,"writeStopInterval",null),u([h({type:[Date],json:{type:[at],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Qr.prototype,"stops",void 0),u([se("stops")],Qr.prototype,"readStops",null),u([le("stops")],Qr.prototype,"writeStops",null),Qr=gP=u([M("esri.webdoc.widgets.TimeSlider")],Qr);const hRe=Qr;var vP;let om=vP=class extends W{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new vP(U({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};u([h({type:dRe,json:{write:!0}})],om.prototype,"range",void 0),u([h({type:hRe,json:{write:!0}})],om.prototype,"timeSlider",void 0),u([h({type:cRe,json:{write:!0}})],om.prototype,"floorFilter",void 0),om=vP=u([M("esri.webdoc.Widgets")],om);const pRe=om,fRe={width:600,height:400},QS=1.5;function yRe(e,t){t=t||fRe;let{width:r,height:i}=t;const n=r/i;return n<QS?i=r/QS:n>QS&&(r=i*QS),r>e.width&&(i*=e.width/r,r=e.width),i>e.height&&(r*=e.height/i,i=e.height),{width:Math.round(r),height:Math.round(i)}}function mRe(e,t){return{...Wte(e,t),readResourcePaths:[]}}function pze(e,t,r){const i=oi(e.itemUrl);return{...Wte(e,t),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:i?{rootPath:i.path,writtenUrls:[]}:null,resources:r?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function Wte(e,t){return{origin:t,url:oi(e.itemUrl),portal:e.portal||Ki.getDefault(),portalItem:e}}let gp=class extends W{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(n=>n.toJSON()),r=this.geometries[0],i={};return i.outSR=FE(this.outSpatialReference),i.inSR=FE(r.spatialReference),i.geometries=JSON.stringify({geometryType:xw(r),geometries:t}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};u([h()],gp.prototype,"geometries",void 0),u([h({type:Ge,json:{read:{source:"outSR"}}})],gp.prototype,"outSpatialReference",void 0),u([h()],gp.prototype,"transformation",void 0),u([h()],gp.prototype,"transformForward",void 0),gp=u([M("esri.rest.support.ProjectParameters")],gp);const Zte=gp,gRe=Or(Zte);async function vRe(e,t,r){t=gRe(t);const i=$Q(e),n={...i.query,f:"json",...t.toJSON()},s=t.outSpatialReference,o=xw(t.geometries[0]),l=gTe(n,r);return mt(i.path+"/project",l).then(({data:{geometries:d}})=>xQ(d,o,s))}function bRe(e,t){var r;return t.resourceInfo?Yte(t,t.resourceInfo,{origin:e.origin}):(r=t.portalItem)!=null&&r.id?_Re(e,t,t.portalItem):Promise.resolve()}function Yte(e,t,r){const i={context:{...r,layerContainerType:"operational-layers"}};return e.portalItem&&(i.context.portal=e.portalItem.portal||Ki.getDefault()),ne(()=>import("./layersCreator-Cchii-zJ.js"),__vite__mapDeps([169,170,171,172,173,174])).then(({populateOperationalLayers:n})=>{const s=[],o=t.operationalLayers;o!=null&&o.length&&s.push(n(e.layers,o,i));const l={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},d=t.tables;return d!=null&&d.length&&s.push(n(e.tables,d,l)),Promise.allSettled(s).then(()=>{})})}async function _Re(e,t,r){var o;if(await r.load().catch(l=>{throw new V(`${e.name}:load-portal-item`,"Failed to load portal item",{error:l})}),r.type!==e.itemType)throw new V(`${e.name}:invalid-portal-item`,`Invalid portal item type '${r.type}', expected '${e.itemType}'`,{type:r.type});const i=await r.fetchData();t.resourceInfo=i;const n=mRe(r,e.origin);await wRe(e,t,i,n),t.resourceReferences={portalItem:r,paths:n.readResourcePaths};const s=await TRe(t.initialViewProperties,r,ae.getLogger(t));if(s){const l=((o=t.initialViewProperties)==null?void 0:o.clone())??e.createInitialViewProperties();l.viewpoint=s,t.initialViewProperties=l}}function wRe(e,t,r,i){const n=SRe(e,r);return t.read(n,i),Yte(t,n,i)}function SRe(e,t){const r=e.parseVersion(t.version||"",e.name);return e.currentVersion.validate(r),t.version=`${r.major}.${r.minor}`,t}async function TRe(e,t,r){var s;if((s=e==null?void 0:e.viewpoint)==null?void 0:s.targetGeometry)return null;const n=await ERe(e,t,r);return n?new ni({targetGeometry:n}):null}async function ERe(e,t,r){const i=e==null?void 0:e.spatialReference,n=t==null?void 0:t.extent;if(!i||!n)return null;if(i.isWGS84)return n.clone();if(i.isWebMercator)return Ad(n);const{getGeometryServiceURL:s}=await ne(()=>import("./geometryServiceUtils-Z81LwfSn.js"),[]);try{const o=await s(t),l=new Zte({geometries:[n],outSpatialReference:i});return(await vRe(o,l))[0]}catch(o){r.error("Error projecting item's extent:",o)}return null}function i7(e){return{enabled:!!(e!=null&&e.length)}}var bP;let am=bP=class extends W{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new bP({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([h({type:Boolean,json:{write:!0}})],am.prototype,"exactMatch",void 0),u([h({type:String,json:{write:!0}})],am.prototype,"name",void 0),u([Ee(qD)],am.prototype,"type",void 0),am=bP=u([M("esri.webdoc.applicationProperties.SearchLayerField")],am);const $Re=am;var _P;let lm=_P=class extends W{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new _P(U({field:this.field,id:this.id,subLayer:this.subLayer}))}};u([h({type:$Re,json:{write:{isRequired:!0}}})],lm.prototype,"field",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],lm.prototype,"id",void 0),u([h({type:at,json:{write:!0}})],lm.prototype,"subLayer",void 0),lm=_P=u([M("esri.webdoc.applicationProperties.SearchLayer")],lm);const xRe=lm;var wP;let um=wP=class extends W{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new wP({exactMatch:this.exactMatch,type:this.type,name:this.name})}};u([h({type:Boolean,json:{write:!0}})],um.prototype,"exactMatch",void 0),u([h({type:String,json:{write:!0}})],um.prototype,"name",void 0),u([Ee(qD)],um.prototype,"type",void 0),um=wP=u([M("esri.webdoc.applicationProperties.SearchTableField")],um);const ARe=um;var SP;let Ab=SP=class extends W{constructor(e){super(e),this.field=null,this.id=null}clone(){return new SP(U({field:this.field,id:this.id}))}};u([h({type:ARe,json:{write:{isRequired:!0}}})],Ab.prototype,"field",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],Ab.prototype,"id",void 0),Ab=SP=u([M("esri.webdoc.applicationProperties.SearchTable")],Ab);const MRe=Ab;var TP;const Jte=ge.ofType(xRe),Xte=ge.ofType(MRe);let Na=TP=class extends W{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Jte,this.tables=new Xte}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,r){t[r]=!e}clone(){return new TP(U({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};u([h({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Na.prototype,"addressSearchEnabled",void 0),u([se("addressSearchEnabled")],Na.prototype,"readAddressSearchEnabled",null),u([le("addressSearchEnabled")],Na.prototype,"writeAddressSearchEnabled",null),u([h({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Na.prototype,"enabled",void 0),u([h({type:String,json:{write:!0}})],Na.prototype,"hintText",void 0),u([h({type:Jte,json:{write:{overridePolicy:i7},origins:{"web-scene":{write:{isRequired:!0}}}}})],Na.prototype,"layers",void 0),u([h({type:Xte,json:{read:!0,write:{overridePolicy:i7}}})],Na.prototype,"tables",void 0),Na=TP=u([M("esri.webdoc.applicationProperties.Search")],Na);const ORe=Na;var EP;let CT=EP=class extends W{constructor(e){super(e),this.search=null}clone(){return new EP(U({search:this.search}))}};u([h({type:ORe,json:{write:!0}})],CT.prototype,"search",void 0),CT=EP=u([M("esri.webdoc.applicationProperties.Viewing")],CT);const RRe=CT;var $P;let cm=$P=class extends W{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new $P(U({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};u([h({json:{write:!0}})],cm.prototype,"editing",void 0),u([h({json:{write:!0}})],cm.prototype,"offline",void 0),u([h({type:RRe,json:{write:!0}})],cm.prototype,"viewing",void 0),cm=$P=u([M("esri.webmap.ApplicationProperties")],cm);const CRe=cm;var xP;let Eu=xP=class extends W{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}get isSecureUrl(){return GW(this.url)}get isDataURI(){return Fu(this.url)}clone(){return new xP({url:this.url})}};u([h({type:String,json:{write:{isRequired:!0}}})],Eu.prototype,"url",void 0),u([h()],Eu.prototype,"isSecureUrl",null),u([h()],Eu.prototype,"isDataURI",null),Eu=xP=u([M("esri.webdoc.support.SlideThumbnail")],Eu);const IRe={type:si,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?si.fromArray(e):si.fromJSON(e):null},write:{writer:(e,t,r,i)=>{e&&(e.isEmpty?i!=null&&i.messages&&i.messages.push(new V("invalid-timeExtent","TimeExtent cannot be empty")):t[r]=e.toArray())},target:{timeExtent:{type:[[at,Vg]]}}}}};var AP;let Pa=AP=class extends t0.IdentifiableMixin(W){constructor(e){super(e),this.name=null,this.thumbnail=new Eu,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new Eu({url:e}):Or(Eu,e)}set viewpoint(e){const{targetGeometry:t,scale:r}=e;t!=null&&t.type==="point"&&r==null&&ae.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:r,viewpoint:i}=t;return ni.fromJSON(i||{targetGeometry:r})}writeViewpoint(e,t,r,i){if(!e)return;const{targetGeometry:n}=e;if(n==null||n.type==="extent")n!=null&&(t.extent=n.toJSON()),t[r]=e.toJSON();else{const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";i!=null&&i.messages?i.messages.push(new V("property:unsupported",s)):ae.getLogger(this).error(s)}}clone(){return new AP(U({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};u([h({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Pa.prototype,"name",void 0),u([h({type:Eu,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],Pa.prototype,"thumbnail",void 0),u([ft("thumbnail")],Pa.prototype,"castThumbnail",null),u([h(IRe)],Pa.prototype,"timeExtent",void 0),u([h({type:ni,nonNullable:!0,json:{write:!0}})],Pa.prototype,"viewpoint",null),u([se("viewpoint",["extent","viewpoint"])],Pa.prototype,"readViewpoint",null),u([le("viewpoint")],Pa.prototype,"writeViewpoint",null),Pa=AP=u([M("esri.webmap.Bookmark")],Pa);const NRe=Pa;let tu=class extends He.ClonableMixin(Ae){constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.timeExtent=null,this.timeZone=la,this.viewpoint=null}};u([h({type:Qx})],tu.prototype,"background",void 0),u([h({type:E5})],tu.prototype,"rangeInfo",void 0),u([h({type:Ge})],tu.prototype,"spatialReference",void 0),u([h({type:si})],tu.prototype,"timeExtent",void 0),u([h({nonNullable:!0})],tu.prototype,"timeZone",void 0),u([h({type:ni})],tu.prototype,"viewpoint",void 0),tu=u([M("esri.webmap.InitialViewProperties")],tu);const E$=tu,Kte=ge.ofType(NRe),PRe=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),LRe="ArcGIS Pro",kRe=Hte.JSAPI;let qt=class extends eA(lo.LoadableMixin(e0.EsriPromiseMixin(LX))){constructor(t){super(t),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this.resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Kte,this.floorInfo=null,this.initialViewProperties=new E$,this.portalItem=null,this.sourceVersion=null,this.widgets=null,this._debouncedSaveOperations=ix(async(r,i,n)=>{const{save:s,saveAs:o}=await ne(()=>import("./webdocSaveUtils-CsMCcAV5.js"),__vite__mapDeps([276,277,278,279,280,281,282]));switch(r){case Wa.SAVE:return s(this.context,this,i);case Wa.SAVE_AS:return o(this.context,this,n,i)}}),this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=Zt(this.portalItem)}initialize(){if(this.when().catch(t=>{ae.getLogger(this).error("#load()","Failed to load web map",t)}),this.resourceInfo){let t;try{t=this._validateJSON(this.resourceInfo)}catch(r){return void this.addResolvingPromise(Promise.reject(r))}this.read(t)}}set authoringApp(t){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",t)}writeAuthoringApp(t,r){t&&this._isAuthoringAppSetByUser?r.authoringApp=t:r.authoringApp=kRe}set authoringAppVersion(t){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",t)}writeAuthoringAppVersion(t,r){t&&this._isAuthoringAppVersionSetByUser?r.authoringAppVersion=t:r.authoringAppVersion=JW}readInitialViewProperties(t,r){var o,l;const i=new E$;r.background&&(i.background=Qx.fromJSON(r.background));const n=(o=r.initialState)==null?void 0:o.timeExtent;n&&(i.timeExtent=si.fromArray(n));const s=(l=r.initialState)==null?void 0:l.viewpoint;return s&&(s.rotation&&og.parse(r.version||"","webmap").lessThan(2,20)&&r.authoringApp===LRe&&(s.rotation*=-1),i.viewpoint=ni.fromJSON(s)),r.mapRangeInfo&&(i.rangeInfo=E5.fromJSON(r.mapRangeInfo)),r.spatialReference&&(i.spatialReference=Ge.fromJSON(r.spatialReference)),r.timeZone&&(i.timeZone=r.timeZone),i}writeInitialViewProperties(t,r,i,n){var l;if(!t)return;(l=t.background)!=null&&l.color&&(r.background=t.background.write({},n));const{timeExtent:s,viewpoint:o}=t;if(o||s){const d={};o&&(d.viewpoint=o.write({},n)),s&&(d.timeExtent=s.toArray()),r.initialState=d}t.rangeInfo&&(r.mapRangeInfo=t.rangeInfo.toJSON(n)),t.spatialReference&&(r.spatialReference=t.spatialReference.write({},n)),r.timeZone=t.timeZone}writeLayers(t,r,i,n){r[i]=this._writeLayers(t,n,"operational-layers")}readSourceVersion(t,r){const[i,n]=r.version.split(".");return new og(parseInt(i,10),parseInt(n,10))}writeSourceVersion(t,r,i){r[i]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(t,r,i,n){const s=this._writeLayers(t,n,"tables");s.length&&(r[i]=s)}get thumbnailUrl(){var t;return((t=this.portalItem)==null?void 0:t.thumbnailUrl)||null}set thumbnailUrl(t){t?(this._override("thumbnailUrl",t),this._thumbnailFilename=this._generateCustomThumbnailFilename(t)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(t){return this.addResolvingPromise(bRe(this.context,this)),Promise.resolve(this)}loadAll(){return xx(this,t=>{t(this.ground,this.basemap,this.layers,this.tables)})}read(t,r){r={...r,origin:this.context.origin};const i=this._getAuthoringPropsState();CW(this,t,n=>super.read(t,n),r),this._restoreAuthoringPropsFromState(i)}write(t,r){if(this.loadStatus!=="loaded"){const i=new V("webmap:not-loaded","Web map must be loaded before it can be serialized");throw ae.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),i}return this._removeDanglingLayerRefs(),r={...r,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this},super.write(t,r)}async save(t){return this._debouncedSaveOperations(Wa.SAVE,t)}async saveAs(t,r){return this._debouncedSaveOperations(Wa.SAVE_AS,r,t)}async updateFrom(t,r){const i=this._updateFromInternal(t,r);this._updateFromPromise=i,await i,i===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(t){var i,n,s,o;const r=this.resourceInfo;return this._collectAllLayersJSON([...((i=r==null?void 0:r.baseMap)==null?void 0:i.baseMapLayers)||[],...(r==null?void 0:r.operationalLayers)||[],...((o=(s=(n=this.basemap)==null?void 0:n.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(l=>l.id===t.id)}async updateItemThumbnail(){var t;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((t=this.portalItem)==null?void 0:t.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}getThumbnailState(){let t=this.thumbnailUrl;return t&&(t=this._isOverridden("thumbnailUrl")?t:HW(t,"w","8192")),{thumbnailUrl:t,filename:this._thumbnailFilename}}restoreThumbnailFromState(t){this.thumbnailUrl=t.thumbnailUrl,this._thumbnailFilename=t.filename}_collectAllLayersJSON(t){return t.reduce((r,i)=>(r.push(i),i.layerType==="GroupLayer"&&(r=r.concat(this._collectAllLayersJSON(i.layers||[]))),r),[])}_writeLayers(t,r,i){return r={...r,layerContainerType:i},t.map(n=>pI(n,i==="tables"?null:this.getLayerJSONFromResourceInfo(n),r)).filter(Lu).toArray()}_validateJSON(t){const r=og.parse(t.version||"","webmap");return this.context.currentVersion.validate(r),t.version=`${r.major}.${r.minor}`,t}_removeDanglingLayerRefs(){var o,l;const t=this.applicationProperties,r=(o=t==null?void 0:t.viewing)==null?void 0:o.search,i=d=>this.allLayers.some(f=>f.id===d);if(r!=null&&r.layers&&(r.layers=r.layers.filter(d=>i(d.id))),r!=null&&r.tables&&(r.tables=r.tables.filter(d=>this.tables.some(f=>f.id===d.id))),t){const d=(l=t.editing)==null?void 0:l.locationTracking;d!=null&&d.info&&!i(d.info.layerId)&&(t.editing=null)}const n="presentation"in this?this.presentation:null,s=n==null?void 0:n.slides;s&&s.forEach(d=>{d.visibleLayers&&(d.visibleLayers=d.visibleLayers.filter(f=>i(f.id)))})}async _updateFromInternal(t,r){if(r??(r={}),await yx(()=>t.ready),this._updateInitialViewProperties(t,r),t.map===this)for(const i of t.allLayerViews)"visible"in i&&"visible"in i.layer&&i._isOverridden("visible")&&(i.layer.visible=i.visible),"featureEffect"in i&&"featureEffect"in i.layer&&i._isOverridden("featureEffect")&&(i.layer.featureEffect=i.featureEffect);await this._updateThumbnailUrl(t,r)}_updateInitialViewProperties(t,r){var i,n;if(r.backgroundExcluded||(this.initialViewProperties.background=(i=t.background)==null?void 0:i.clone()),this.initialViewProperties.spatialReference=(n=t.spatialReference)==null?void 0:n.clone(),this.initialViewProperties.timeZone=t.timeZone,r.viewpointExcluded||(this.initialViewProperties.viewpoint=new ni({rotation:t.rotation,scale:r.scalePreserved?t.scale:null,targetGeometry:this._getViewExtent(t)})),!r.widgetsExcluded)for(const s of t.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(t){const r=t.center.clone().normalize(),i=t.extent.clone(),n=i.width/2;return i.xmin=r.x-n,i.xmax=r.x+n,i}async _updateThumbnailUrl(t,r){if(r.thumbnailExcluded)return;const i=yRe(t,r.thumbnailSize),n=await t.takeScreenshot({format:"png",width:i.width,height:i.height});this._setAutoGeneratedThumbnail(n.dataUrl)}_setAutoGeneratedThumbnail(t){this.thumbnailUrl=t,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(t){if(Fu(t)){const r=of(t),i=r==null?void 0:r.mediaType,n=i&&PRe.get(i.toLowerCase())||null,s=`thumbnail${Date.now()}`;return n?`${s}.${n}`:s}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(t){t.isAuthoringAppSetByUser?this.authoringApp=t.authoringApp:this._isAuthoringAppSetByUser=!1,t.isAuthoringAppVersionSetByUser?this.authoringAppVersion=t.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};u([h()],qt.prototype,"_updateFromPromise",void 0),u([h({type:CRe,json:{write:!0}})],qt.prototype,"applicationProperties",void 0),u([h({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],qt.prototype,"authoringApp",null),u([le("authoringApp")],qt.prototype,"writeAuthoringApp",null),u([h({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],qt.prototype,"authoringAppVersion",null),u([le("authoringAppVersion")],qt.prototype,"writeAuthoringAppVersion",null),u([h({type:Kte,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],qt.prototype,"bookmarks",void 0),u([h({type:uRe,json:{name:"mapFloorInfo",write:!0}})],qt.prototype,"floorInfo",void 0),u([h({type:E$,nonNullable:!0,json:{read:{source:["background","initialState.timeExtent","initialState.viewpoint","mapRangeInfo","spatialReference","timeZone"]},write:{ignoreOrigin:!0,target:{background:{type:Qx},"initialState.timeExtent":{type:si},"initialState.viewpoint":{type:ni},mapRangeInfo:{type:E5},spatialReference:{type:Ge},"timeZone:":{type:String}}}}})],qt.prototype,"initialViewProperties",void 0),u([se("initialViewProperties")],qt.prototype,"readInitialViewProperties",null),u([le("initialViewProperties")],qt.prototype,"writeInitialViewProperties",null),u([h({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],qt.prototype,"layers",void 0),u([le("layers")],qt.prototype,"writeLayers",null),u([h({type:Qa})],qt.prototype,"portalItem",void 0),u([h()],qt.prototype,"resourceInfo",void 0),u([h({readOnly:!0,type:og,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],qt.prototype,"sourceVersion",void 0),u([se("sourceVersion")],qt.prototype,"readSourceVersion",null),u([le("sourceVersion")],qt.prototype,"writeSourceVersion",null),u([h({json:{read:!1,write:{ignoreOrigin:!0}}})],qt.prototype,"tables",void 0),u([le("tables")],qt.prototype,"writeTables",null),u([h()],qt.prototype,"thumbnailUrl",null),u([h()],qt.prototype,"updatingFromView",null),u([h({type:pRe,json:{write:!0}})],qt.prototype,"widgets",void 0),qt=u([M("esri.WebDocument2D")],qt);const DRe=qt,sr=(e=>e)(["operational-layers","basemap","ground"]);var MP;let vp=MP=class extends W{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new MP({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};u([h({type:String,json:{write:!0}})],vp.prototype,"expression",void 0),u([h({type:String,json:{write:!0}})],vp.prototype,"name",void 0),u([h({type:["boolean","date","number","string"],json:{write:!0}})],vp.prototype,"returnType",void 0),u([h({type:String,json:{write:!0}})],vp.prototype,"title",void 0),vp=MP=u([M("esri.form.ExpressionInfo")],vp);const jRe=vp;let bp=class extends W{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};u([h({type:String,json:{write:!0}})],bp.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],bp.prototype,"label",void 0),u([h()],bp.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],bp.prototype,"visibilityExpression",void 0),bp=u([M("esri.form.elements.Element")],bp);const qd=bp;let IT=class extends He.ClonableMixin(W){constructor(t){super(t),this.type=null}};u([h()],IT.prototype,"type",void 0),IT=u([M("esri.form.elements.inputs.attachments.Input")],IT);const Hd=IT,tA=["any","capture","upload"];let dm=class extends Hd{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};u([h({type:["audio"],readOnly:!0,json:{write:!0}})],dm.prototype,"type",void 0),u([h({type:tA,json:{write:!0}})],dm.prototype,"inputMethod",void 0),u([h({type:Number,json:{write:!0}})],dm.prototype,"maxDuration",void 0),dm=u([M("esri.form.elements.inputs.attachments.AudioInput")],dm);const n7=dm;let Mb=class extends Hd{constructor(t){super(t),this.type="document",this.maxFileSize=null}};u([h({type:["document"],readOnly:!0,json:{write:!0}})],Mb.prototype,"type",void 0),u([h({type:Number,json:{write:!0}})],Mb.prototype,"maxFileSize",void 0),Mb=u([M("esri.form.elements.inputs.attachments.DocumentInput")],Mb);const s7=Mb;let hm=class extends Hd{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};u([h({type:["image"],readOnly:!0,json:{write:!0}})],hm.prototype,"type",void 0),u([h({type:tA,json:{write:!0}})],hm.prototype,"inputMethod",void 0),u([h({type:Number,json:{write:!0}})],hm.prototype,"maxImageSize",void 0),hm=u([M("esri.form.elements.inputs.attachments.ImageInput")],hm);const o7=hm;let Ob=class extends Hd{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};u([h({type:["signature"],readOnly:!0,json:{write:!0}})],Ob.prototype,"type",void 0),u([h({type:tA,json:{write:!0}})],Ob.prototype,"inputMethod",void 0),Ob=u([M("esri.form.elements.inputs.attachments.SignatureInput")],Ob);const a7=Ob;let pm=class extends Hd{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};u([h({type:["video"],readOnly:!0,json:{write:!0}})],pm.prototype,"type",void 0),u([h({type:tA,json:{write:!0}})],pm.prototype,"inputMethod",void 0),u([h({type:Number,json:{write:!0}})],pm.prototype,"maxDuration",void 0),pm=u([M("esri.form.elements.inputs.attachments.VideoInput")],pm);const l7=pm;function Qte(e){return{nestableTypes:{base:Hd,key:"type",typeMap:{audio:n7,document:s7,image:o7,signature:a7,video:l7}},allTypes:{base:Hd,key:"type",typeMap:{attachment:e,audio:n7,document:s7,image:o7,signature:a7,video:l7}}}}function FRe(e,t,r){return e?e.map(i=>oa(t.nestableTypes,i)):null}function URe(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function VRe(e,t,r){if(!e)return null;const i=t.nestableTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}let Fa=class extends Hd{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return FRe(t,cR)}readInputs(t,r){return URe(r.inputTypes,cR)}writeInputs(t,r){r.inputTypes=VRe(t,cR)}};u([h({type:["attachment"],readOnly:!0,json:{write:!0}})],Fa.prototype,"type",void 0),u([h({type:["any","exact","exactOrNone"],json:{write:!0}})],Fa.prototype,"attachmentAssociationType",void 0),u([h({json:{write:{isRequired:!0}}})],Fa.prototype,"inputTypes",void 0),u([ft("inputTypes")],Fa.prototype,"castInputs",null),u([se("inputTypes")],Fa.prototype,"readInputs",null),u([le("inputTypes")],Fa.prototype,"writeInputs",null),Fa=u([M("esri.form.elements.inputs.attachments.AttachmentInput")],Fa);const cR=Qte(Fa),zRe=Fa;var OP;const GRe=Qte(zRe);let is=OP=class extends qd{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new OP({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};u([h({type:Boolean,json:{write:!0}})],is.prototype,"allowUserRename",void 0),u([h({type:String,json:{write:{isRequired:!0}}})],is.prototype,"attachmentKeyword",void 0),u([h({type:Boolean,json:{write:!0}})],is.prototype,"displayFilename",void 0),u([h({type:String,json:{write:!0}})],is.prototype,"editableExpression",void 0),u([h({type:String,json:{write:!0}})],is.prototype,"filenameExpression",void 0),u([h({types:GRe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],is.prototype,"input",void 0),u([h({type:Number,json:{write:!0}})],is.prototype,"maxAttachmentCount",void 0),u([h({type:Number,json:{write:!0}})],is.prototype,"minAttachmentCount",void 0),u([h({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],is.prototype,"type",void 0),u([h({type:Boolean,json:{write:!0}})],is.prototype,"useOriginalFilename",void 0),is=OP=u([M("esri.form.elements.AttachmentElement")],is);const u7=is;let NT=class extends W{constructor(t){super(t),this.type=null}};u([h()],NT.prototype,"type",void 0),NT=u([M("esri.form.elements.inputs.Input")],NT);const zu=NT;let Rb=class extends zu{constructor(t){super(t),this.maxLength=null,this.minLength=0}};u([h({type:Number,json:{write:!0}})],Rb.prototype,"maxLength",void 0),u([h({type:Number,json:{write:!0}})],Rb.prototype,"minLength",void 0),Rb=u([M("esri.form.elements.inputs.TextInput")],Rb);const x5=Rb;var RP;let PT=RP=class extends x5{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new RP({maxLength:this.maxLength,minLength:this.minLength})}};u([h({type:["barcode-scanner"],json:{read:!1,write:!0}})],PT.prototype,"type",void 0),PT=RP=u([M("esri.form.elements.inputs.BarcodeScannerInput")],PT);const BRe=PT;var CP;let fm=CP=class extends zu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new CP({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};u([h({type:String,json:{write:!0}})],fm.prototype,"noValueOptionLabel",void 0),u([h({type:Boolean,json:{write:!0}})],fm.prototype,"showNoValueOption",void 0),u([h({type:["combo-box"],json:{read:!1,write:!0}})],fm.prototype,"type",void 0),fm=CP=u([M("esri.form.elements.inputs.ComboBoxInput")],fm);const qRe=fm;var IP;function c7(e){return e??null}function d7(e){return e??null}let La=IP=class extends zu{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return c7(t.max)}writeMax(e,t){t.max=d7(e)}readMin(e,t){return c7(t.min)}writeMin(e,t){t.min=d7(e)}clone(){return new IP({max:this.max,min:this.min})}};u([h({type:String,json:{type:String,write:!0}})],La.prototype,"max",void 0),u([se("max")],La.prototype,"readMax",null),u([le("max")],La.prototype,"writeMax",null),u([h({type:String,json:{type:String,write:!0}})],La.prototype,"min",void 0),u([se("min")],La.prototype,"readMin",null),u([le("min")],La.prototype,"writeMin",null),u([h({type:["date-picker"],json:{read:!1,write:!0}})],La.prototype,"type",void 0),La=IP=u([M("esri.form.elements.inputs.DatePickerInput")],La);const HRe=La;var NP;function dR(e){return e??null}function hR(e){return e??null}let An=NP=class extends zu{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return dR(t.max)}writeMax(e,t){t.max=hR(e)}readMin(e,t){return dR(t.min)}writeMin(e,t){t.min=hR(e)}readTimeResolution(e,t){return dR(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=hR(e)}clone(){return new NP({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([h({type:Boolean,json:{write:!0}})],An.prototype,"includeTimeOffset",void 0),u([h({type:String,json:{type:String,write:!0}})],An.prototype,"max",void 0),u([se("max")],An.prototype,"readMax",null),u([le("max")],An.prototype,"writeMax",null),u([h({type:String,json:{type:String,write:!0}})],An.prototype,"min",void 0),u([se("min")],An.prototype,"readMin",null),u([le("min")],An.prototype,"writeMin",null),u([h({type:String,json:{type:String,write:!0}})],An.prototype,"timeResolution",void 0),u([se("timeResolution")],An.prototype,"readTimeResolution",null),u([le("timeResolution")],An.prototype,"writeTimeResolution",null),u([h({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],An.prototype,"type",void 0),An=NP=u([M("esri.form.elements.inputs.DateTimeOffsetPickerInput")],An);const WRe=An;var PP;function h7(e){return e!=null?new Date(e):null}function p7(e){return e?e.getTime():null}let jo=PP=class extends zu{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return h7(t.max)}writeMax(e,t){t.max=p7(e)}readMin(e,t){return h7(t.min)}writeMin(e,t){t.min=p7(e)}clone(){return new PP({includeTime:this.includeTime,max:this.max,min:this.min})}};u([h({type:Boolean,json:{write:!0}})],jo.prototype,"includeTime",void 0),u([h({type:Date,json:{type:Number,write:!0}})],jo.prototype,"max",void 0),u([se("max")],jo.prototype,"readMax",null),u([le("max")],jo.prototype,"writeMax",null),u([h({type:Date,json:{type:Number,write:!0}})],jo.prototype,"min",void 0),u([se("min")],jo.prototype,"readMin",null),u([le("min")],jo.prototype,"writeMin",null),u([h({type:["datetime-picker"],json:{read:!1,write:!0}})],jo.prototype,"type",void 0),jo=PP=u([M("esri.form.elements.inputs.DateTimePickerInput")],jo);const ZRe=jo;var LP;let ym=LP=class extends zu{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new LP({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};u([h({type:String,json:{write:!0}})],ym.prototype,"noValueOptionLabel",void 0),u([h({type:Boolean,json:{write:!0}})],ym.prototype,"showNoValueOption",void 0),u([h({type:["radio-buttons"],json:{read:!1,write:!0}})],ym.prototype,"type",void 0),ym=LP=u([M("esri.form.elements.inputs.RadioButtonsInput")],ym);const YRe=ym;var kP;let mm=kP=class extends zu{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new kP({offValue:this.offValue,onValue:this.onValue})}};u([h({type:[String,Number],json:{write:!0}})],mm.prototype,"offValue",void 0),u([h({type:[String,Number],json:{write:!0}})],mm.prototype,"onValue",void 0),u([h({type:["switch"],json:{read:!1,write:!0}})],mm.prototype,"type",void 0),mm=kP=u([M("esri.form.elements.inputs.SwitchInput")],mm);const JRe=mm;var DP;let LT=DP=class extends x5{constructor(e){super(e),this.type="text-area"}clone(){return new DP({maxLength:this.maxLength,minLength:this.minLength})}};u([h({type:["text-area"],json:{read:!1,write:!0}})],LT.prototype,"type",void 0),LT=DP=u([M("esri.form.elements.inputs.TextAreaInput")],LT);const XRe=LT;var jP;let kT=jP=class extends x5{constructor(e){super(e),this.type="text-box"}clone(){return new jP({maxLength:this.maxLength,minLength:this.minLength})}};u([h({type:["text-box"],json:{read:!1,write:!0}})],kT.prototype,"type",void 0),kT=jP=u([M("esri.form.elements.inputs.TextBoxInput")],kT);const KRe=kT;var FP;function pR(e){return e??null}function fR(e){return e??null}let ns=FP=class extends zu{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return pR(t.max)}writeMax(e,t){t.max=fR(e)}readMin(e,t){return pR(t.min)}writeMin(e,t){t.min=fR(e)}readTimeResolution(e,t){return pR(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=fR(e)}clone(){return new FP({max:this.max,min:this.min,timeResolution:this.timeResolution})}};u([h({type:String,json:{type:String,write:!0}})],ns.prototype,"max",void 0),u([se("max")],ns.prototype,"readMax",null),u([le("max")],ns.prototype,"writeMax",null),u([h({type:String,json:{type:String,write:!0}})],ns.prototype,"min",void 0),u([se("min")],ns.prototype,"readMin",null),u([le("min")],ns.prototype,"writeMin",null),u([h({type:String,json:{type:String,write:!0}})],ns.prototype,"timeResolution",void 0),u([se("timeResolution")],ns.prototype,"readTimeResolution",null),u([le("timeResolution")],ns.prototype,"writeTimeResolution",null),u([h({type:["time-picker"],json:{read:!1,write:!0}})],ns.prototype,"type",void 0),ns=FP=u([M("esri.form.elements.inputs.TimePickerInput")],ns);const QRe=ns,eCe={base:zu,key:"type",typeMap:{"barcode-scanner":BRe,"combo-box":qRe,"date-picker":HRe,"datetime-picker":ZRe,"datetimeoffset-picker":WRe,"radio-buttons":YRe,switch:JRe,"text-area":XRe,"text-box":KRe,"time-picker":QRe}};var UP;let Fs=UP=class extends qd{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new UP({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};u([h({types:qK,json:{read:{reader:Ux},write:!0}})],Fs.prototype,"domain",void 0),u([h({type:Boolean,json:{write:!0}})],Fs.prototype,"editable",void 0),u([h({type:String,json:{write:!0}})],Fs.prototype,"editableExpression",void 0),u([h({type:String,json:{write:!0}})],Fs.prototype,"fieldName",void 0),u([h({type:String,json:{write:!0}})],Fs.prototype,"hint",void 0),u([h({types:eCe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Fs.prototype,"input",void 0),u([h({type:String,json:{write:!0}})],Fs.prototype,"requiredExpression",void 0),u([h({type:String,json:{read:!1,write:!0}})],Fs.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Fs.prototype,"valueExpression",void 0),Fs=UP=u([M("esri.form.elements.FieldElement")],Fs);const f7=Fs;var VP;let ru=VP=class extends qd{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new VP({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:U(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};u([h({type:Number,json:{write:!0}})],ru.prototype,"displayCount",void 0),u([h({type:["list"],json:{write:!0}})],ru.prototype,"displayType",void 0),u([h({type:String,json:{write:!0}})],ru.prototype,"editableExpression",void 0),u([h({type:[ND],json:{write:!0}})],ru.prototype,"orderByFields",void 0),u([h({type:Number,json:{write:!0}})],ru.prototype,"relationshipId",void 0),u([h({type:["relationship"],json:{read:!1,write:!0}})],ru.prototype,"type",void 0),ru=VP=u([M("esri.form.elements.RelationshipElement")],ru);const y7=ru;var zP;let gm=zP=class extends qd{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new zP({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};u([h({type:String,json:{write:!0}})],gm.prototype,"text",void 0),u([h({type:String,json:{write:!0}})],gm.prototype,"textFormat",void 0),u([h({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],gm.prototype,"type",void 0),gm=zP=u([M("esri.form.elements.TextElement")],gm);const m7=gm;let vm=class extends He.ClonableMixin(qd){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};u([h({type:[aK],json:{write:{isRequired:!0}}})],vm.prototype,"associationTypes",void 0),u([h({type:String,json:{write:!0}})],vm.prototype,"editableExpression",void 0),u([h({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],vm.prototype,"type",void 0),vm=u([M("esri.form.elements.UtilityNetworkAssociationsElement")],vm);const g7=vm,tCe=e=>e.type==="field",rCe=e=>e.type==="group",iCe=e=>e.type==="text";function ere(e){return{typesWithGroup:{base:qd,key:"type",typeMap:{attachment:u7,field:f7,group:e,relationship:y7,text:m7,utilityNetworkAssociations:g7}},typesWithoutGroup:{base:qd,key:"type",typeMap:{attachment:u7,field:f7,relationship:y7,text:m7,utilityNetworkAssociations:g7}}}}function tre(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function rre(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function ire(e,t,r=!0){return e?e.map(i=>oa(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var GP;let Ua=GP=class extends qd{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return ire(e,yR,!1)}readElements(e,t){return tre(t.formElements,yR,!1)}writeElements(e,t){t.formElements=rre(e,yR,!1)}clone(){return new GP({description:this.description,elements:U(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};u([h({json:{write:!0}})],Ua.prototype,"elements",void 0),u([ft("elements")],Ua.prototype,"castElements",null),u([se("elements",["formElements"])],Ua.prototype,"readElements",null),u([le("elements")],Ua.prototype,"writeElements",null),u([h({type:["collapsed","expanded"],json:{write:!0}})],Ua.prototype,"initialState",void 0),u([h({type:String,json:{read:!1,write:!0}})],Ua.prototype,"type",void 0),Ua=GP=u([M("esri.form.elements.GroupElement")],Ua);const yR=ere(Ua),nCe=Ua;var BP;const mR=ere(nCe);let Fo=BP=class extends W{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return ire(e,mR)}readElements(e,t){return tre(t.formElements,mR)}writeElements(e,t){t.formElements=rre(e,mR)}clone(){return new BP({description:this.description,expressionInfos:U(this.expressionInfos),elements:U(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:n,expressionInfos:s,title:o}=this;if(w_(r,e,i),w_(r,e,o),!n)return[];const l=sCe(n,s).map(d=>Qi(r,e,d));await Promise.all(l);for(const d of n)nre(r,{fieldsIndex:e,relationships:t},d);return Array.from(r).sort()}};function nre(e,t,r){var n;const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(w_(e,i,r.label),w_(e,i,r.description),r.type){case"field":vn(e,i,r.fieldName);break;case"group":r.elements.forEach(s=>nre(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(o=>o.id===r.relationshipId);s&&vn(e,i,s.keyField)}yf(e,i,(n=r.orderByFields)==null?void 0:n.map(s=>s.field));break;case"text":w_(e,i,r.text)}}function sCe(e,t){if(!t||t.length===0)return[];const r=sre(e),i=[];for(const n of t)r.has(n.name)&&i.push(n.expression);return i}function sre(e){const t=new Set;for(const r of e)if(V8(t,r.visibilityExpression),!iCe(r)){if(rCe(r))$E(t,sre(r.elements));else if(V8(t,r.editableExpression),tCe(r)){const{requiredExpression:i,valueExpression:n}=r;$E(t,[i,n])}}return t}function w_(e,t,r){yf(e,t,RD(r))}u([h({type:String,json:{write:!0}})],Fo.prototype,"description",void 0),u([h({json:{write:!0}})],Fo.prototype,"elements",void 0),u([ft("elements")],Fo.prototype,"castElements",null),u([se("elements",["formElements"])],Fo.prototype,"readElements",null),u([le("elements")],Fo.prototype,"writeElements",null),u([h({type:[jRe],json:{write:!0}})],Fo.prototype,"expressionInfos",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],Fo.prototype,"preserveFieldValuesWhenHidden",void 0),u([h({type:String,json:{write:!0}})],Fo.prototype,"title",void 0),Fo=BP=u([M("esri.form.FormTemplate")],Fo);const oCe=Fo;function v7(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function aCe(e,t,r){if(!e&&!t||!r)return;const i=VE(r);b7(e,r,i),b7(t,r,i)}function b7(e,t,r){if(e)for(const i of e)lCe(i.geometry,t,r)}function lCe(e,t,r){if(!(e!=null&&e.spatialReference)||ai(e.spatialReference,t))return;const i=VE(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)v7(e,e.rings,i);else if("paths"in e)v7(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function _7(e,t,r){if(!(r!=null&&r.features)||!r.hasZ)return;const i=$J(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const n of r.features)i(n.geometry)}var qP;const HP=new We({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let fi=qP=class extends W{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,ol)}writeGeometryType(e,t,r,i){if(e)return void HP.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if((s==null?void 0:s.geometry)!=null)return void HP.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=Du(e);return i&&!r&&t.spatialReference&&(i.spatialReference=Ge.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new qP(this.cloneProperties())}cloneProperties(){return U({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e==null?void 0:e[r];i.geometry=(n==null?void 0:n.toJSON())||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=f=>Math.round((f-i)/t),o=f=>Math.round((n-f)/r),l=this.features,d=this._getQuantizationFunction(this.geometryType,s,o);for(let f=0,g=l.length;f<g;f++)d!=null&&d(l[f].geometry)||(l.splice(f,1),f--,g--);return this.transform=e,this}unquantize(){var b,S;const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,l=T=>T*s+i,d=T=>n-T*o;let f=null,g=null;if(this.hasZ&&((b=r==null?void 0:r.scale)==null?void 0:b[2])!=null){const{translate:[,,T],scale:[,,E]}=r;f=x=>x*E+T}if(this.hasM&&((S=r==null?void 0:r.scale)==null?void 0:S[3])!=null){const{translate:[,,,T],scale:[,,,E]}=r;g=x=>x==null?x:x*E+T}const v=this._getHydrationFunction(e,l,d,f,g);for(const{geometry:T}of t)T!=null&&v&&v(T);return this.transform=null,this}readFeaturesWithClass(e,t,r){var s;const i=Ge.fromJSON(t.spatialReference),n=[];for(let o=0;o<e.length;o++){const l=e[o],d=r.fromJSON(l),f=(s=l.geometry)==null?void 0:s.spatialReference;d.geometry==null||f||(d.geometry.spatialReference=i);const g=l.aggregateGeometries,v=d.aggregateGeometries;if(g&&v!=null)for(const b in v){const S=v[b],T=g[b],E=T==null?void 0:T.spatialReference;S==null||E||(S.spatialReference=i)}n.push(d)}return n}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,l=e.length;o<l;o++){const d=e[o];if(o>0){const f=t(d[0]),g=r(d[1]);f===i&&g===n||(s.push([f-i,g-n]),i=f,n=g)}else i=t(d[0]),n=r(d[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=Yp(i)?i.rings:i.paths,s=[];for(let o=0,l=n.length;o<l;o++){const d=n[o],f=this._quantizePoints(d,t,r);f&&s.push(f)}return s.length>0?(Yp(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n&&n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,n){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),i&&(s.z=i(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=Yp(s)?s.rings:s.paths;let l,d;for(let f=0,g=o.length;f<g;f++){const v=o[f];for(let b=0,S=v.length;b<S;b++){const T=v[b];b>0?(l+=T[0],d+=T[1]):(l=T[0],d=T[1]),T[0]=t(l),T[1]=r(d)}}if(i&&n)for(let f=0,g=o.length;f<g;f++){const v=o[f];for(let b=0,S=v.length;b<S;b++){const T=v[b];T[2]=i(T[2]),T[3]=n(T[3])}}else if(i)for(let f=0,g=o.length;f<g;f++){const v=o[f];for(let b=0,S=v.length;b<S;b++){const T=v[b];T[2]=i(T[2])}}else if(n)for(let f=0,g=o.length;f<g;f++){const v=o[f];for(let b=0,S=v.length;b<S;b++){const T=v[b];T[2]=n(T[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),i&&s.zmax!=null&&s.zmin!=null&&(s.zmax=i(s.zmax),s.zmin=i(s.zmin)),n&&s.mmax!=null&&s.mmin!=null&&(s.mmax=n(s.mmax),s.mmin=n(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let l,d;for(let f=0,g=o.length;f<g;f++){const v=o[f];f>0?(l+=v[0],d+=v[1]):(l=v[0],d=v[1]),v[0]=t(l),v[1]=r(d)}if(i&&n)for(let f=0,g=o.length;f<g;f++){const v=o[f];v[2]=i(v[2]),v[3]=n(v[3])}else if(i)for(let f=0,g=o.length;f<g;f++){const v=o[f];v[2]=i(v[2])}else if(n)for(let f=0,g=o.length;f<g;f++){const v=o[f];v[2]=n(v[2])}}:null}};u([h({type:String,json:{write:!0}})],fi.prototype,"displayFieldName",void 0),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fi.prototype,"exceededTransferLimit",void 0),u([h({type:[ol],json:{write:!0}})],fi.prototype,"features",void 0),u([se("features")],fi.prototype,"readFeatures",null),u([h({type:[HD],json:{write:!0}})],fi.prototype,"fields",void 0),u([h({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:HP.read}}})],fi.prototype,"geometryType",void 0),u([le("geometryType")],fi.prototype,"writeGeometryType",null),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fi.prototype,"hasM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],fi.prototype,"hasZ",void 0),u([h({types:Zg,json:{write:!0}})],fi.prototype,"queryGeometry",void 0),u([se("queryGeometry")],fi.prototype,"readQueryGeometry",null),u([h({type:Ge,json:{write:!0}})],fi.prototype,"spatialReference",void 0),u([le("spatialReference")],fi.prototype,"writeSpatialReference",null),u([h({json:{write:!0}})],fi.prototype,"transform",void 0),fi=qP=u([M("esri.rest.support.FeatureSet")],fi),fi.prototype.toJSON.isDefaultToJSON=!0;const ore=fi;let uCe=0,yu=class extends lo.LoadableMixin(e0.EsriPromiseMixin(ge)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var r;const t=(r=this.layer)==null?void 0:r.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);_7(t,this.layer.spatialReference,i);const n=ore.fromJSON(i);if(!this._requiresClientGraphicMapping())return n;const s=this.layer.objectIdField;for(const o of n.features){const l=o.attributes[s],d=this._idToClientGraphic.get(l);d&&(o.geometry=d.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new V("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return _7(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:Ut.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async queryAttributeBins(t,r={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),r)}async _applyEdits(t){if(!this._connection)throw new V("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const n=[],s=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=g=>"objectId"in g&&g.objectId!=null?g.objectId:"attributes"in g&&g.attributes[r]!=null?g.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const g of t.deleteFeatures){const v=o(g);v!=null&&n.push(v)}const l=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const g of t.updateFeatures)if(s.push(this._serializeFeature(g)),l){const v=o(g);v!=null&&l.set(v,g)}}aCe(i?i.features:null,s,this.layer.spatialReference);const{fullExtent:d,featureEditResults:f}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:s,deletes:n});return this.fullExtent=d,i&&i.finish(f.uidToObjectId),this._updateClientGraphicIds(l,f),this._createEditsResult(f)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:n}of t)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||i.push(n.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(const i of r.updateResults){if(!i.success)continue;const n=t.get(i.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const i of r.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new V("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let n=null;for(let o=0;o<t.length;o++){const l=t[o],d=this._serializeFeature(l);n||l.geometry==null||(n=l.geometry.type),i[o]=d,r.set(`${d.uid}`,l)}const s=this;return{features:i,inferredGeometryType:n,finish(o){const l=s.sourceJSON.objectIdField;for(const d in o){const f=o[d],g=r.get(d);g&&(g.attributes||(g.attributes={}),f===-1?delete g.attributes[l]:g.attributes[l]=f,s._addIdToClientGraphic(g))}}}}_addIdToClientGraphic(t){var n;if(!this._idToClientGraphic)return;const r=this.sourceJSON.objectIdField,i=(n=t.attributes)==null?void 0:n[r];i!=null&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){var t,r;return((t=this.layer)==null?void 0:t.geometryType)??((r=this.sourceJSON)==null?void 0:r.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),n=(uCe++).toString();return i?{uid:n,geometry:i.toJSON(),attributes:r}:{uid:n,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?oo.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await xge("MemorySourceWorker",{strategy:Z("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:n,hasM:s,hasZ:o,timeInfo:l,dateFieldsTimeZone:d}=this.layer,f=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const g=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",T=>{ae.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),T.preventDefault()}));const v={features:g.features,fields:r==null?void 0:r.map(T=>T.toJSON()),geometryType:hU.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:n,spatialReference:f?null:i&&i.toJSON(),timeInfo:(l==null?void 0:l.toJSON())??null,dateFieldsTimeZone:d},b=await this._connection.invoke("load",v,{signal:t});for(const T of b.warnings)ae.getLogger(this.layer).warn("#load()",`${T.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:T});b.featureErrors.length&&ae.getLogger(this.layer).warn("#load()",`Encountered ${b.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:b.featureErrors});const S=b.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(g.inferredGeometryType)&&(S.geometryType=hU.toJSON(g.inferredGeometryType)),this.sourceJSON=S,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),g.finish(b.assignedObjectIds)}};u([Xk({Type:ol,ensureType:Or(ol)})],yu.prototype,"itemType",void 0),u([h()],yu.prototype,"type",void 0),u([h({constructOnly:!0})],yu.prototype,"layer",void 0),u([h({readOnly:!0})],yu.prototype,"_workerGeometryType",null),u([h()],yu.prototype,"sourceJSON",void 0),yu=u([M("esri.layers.graphics.sources.MemorySource")],yu);function cCe(e){return"portalItem"in e}const dCe=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):cCe(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return u([h({type:String})],t.prototype,"apiKey",null),t=u([M("esri.layers.mixins.APIKeyMixin")],t),t},hCe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Pd(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",The(r,ae.getLogger(this)))}};return u([h()],t.prototype,"title",null),u([h({type:String})],t.prototype,"url",null),t=u([M("esri.layers.mixins.ArcGISService")],t),t};function pCe(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function ag(e,t,r,i){var n=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(n,ag.prototype),n.expected=t,n.found=r,n.location=i,n.name="SyntaxError",n}function gR(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function fCe(e,t){var r,i={},n=(t=t!==void 0?t:{}).grammarSource,s={start:d0},o=d0,l="none",d=")",f=",",g="(",v="%",b="px",S="cm",T="mm",E="in",x="pt",O="pc",C="deg",I="rad",P="grad",k="turn",D="#",H=".",re="e",K=/^[ \t\n\r]/,ie=/^[a-z\-]/,fe=/^[0-9a-fA-F]/,ve=/^[+\-]/,$e=/^[0-9]/,_e=or("none"),it=Lr("none",!1),pe=Lr(")",!1),me=Lr(",",!1),ye=or("whitespace"),Ve=_n([" ","	",`
`,"\r"],!1,!1),j=or("function"),ue=Lr("(",!1),Ie=or("identifier"),Le=_n([["a","z"],"-"],!1,!1),we=or("percentage"),et=Lr("%",!1),Be=or("length"),Jt=Lr("px",!1),nt=Lr("cm",!1),bt=Lr("mm",!1),_t=Lr("in",!1),Pr=Lr("pt",!1),Zr=Lr("pc",!1),Gn=or("angle"),dl=Lr("deg",!1),hl=Lr("rad",!1),fo=Lr("grad",!1),Bu=Lr("turn",!1),pl=or("number"),qu=or("color"),Hu=Lr("#",!1),fl=_n([["0","9"],["a","f"],["A","F"]],!1,!1),sh=_n(["+","-"],!1,!1),Bn=_n([["0","9"]],!1,!1),en=Lr(".",!1),Cf=Lr("e",!1),oh=function(){return[]},ah=function(N,Q){return{type:"function",name:N,parameters:Q||[]}},If=function(N,Q){return Q.length>0?EA(N,Q,3):[N]},fA=function(N){return{type:"quantity",value:N.value,unit:N.unit}},Yw=function(N){return{type:"color",colorType:N.type,value:N.value}},yA=function(N){return N},mA=function(){return dh()},lh=function(N){return{value:N,unit:"%"}},tn=function(N){return{value:N,unit:"px"}},gA=function(N){return{value:N,unit:"cm"}},da=function(N){return{value:N,unit:"mm"}},rn=function(N){return{value:N,unit:"in"}},vA=function(N){return{value:N,unit:"pt"}},bA=function(N){return{value:N,unit:"pc"}},_A=function(N){return{value:N,unit:"deg"}},Nf=function(N){return{value:N,unit:"rad"}},Pf=function(N){return{value:N,unit:"grad"}},yl=function(N){return{value:N,unit:"turn"}},Lf=function(N){return{value:N,unit:null}},uh=function(){return{type:"hex",value:dh()}},wA=function(N){return{type:"function",value:N}},Jw=function(){return{type:"named",value:dh()}},Xw=function(){return parseFloat(dh())},X=0|t.peg$currPos,Ct=X,Wu=[{line:1,column:1}],bn=X,ch=t.peg$maxFailExpected||[],Re=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function dh(){return e.substring(Ct,X)}function Lr(N,Q){return{type:"literal",text:N,ignoreCase:Q}}function _n(N,Q,ce){return{type:"class",parts:N,inverted:Q,ignoreCase:ce}}function ui(){return{type:"end"}}function or(N){return{type:"other",description:N}}function ml(N){var Q,ce=Wu[N];if(ce)return ce;if(N>=Wu.length)Q=Wu.length-1;else for(Q=N;!Wu[--Q];);for(ce={line:(ce=Wu[Q]).line,column:ce.column};Q<N;)e.charCodeAt(Q)===10?(ce.line++,ce.column=1):ce.column++,Q++;return Wu[N]=ce,ce}function kf(N,Q,ce){var Ne=ml(N),It=ml(Q);return{source:n,start:{offset:N,line:Ne.line,column:Ne.column},end:{offset:Q,line:It.line,column:It.column}}}function Je(N){X<bn||(X>bn&&(bn=X,ch=[]),ch.push(N))}function SA(N,Q,ce){return new ag(ag.buildMessage(N,Q),N,Q,ce)}function d0(){var N;return(N=hh())===i&&(N=h0()),N}function hh(){var N,Q;return Re++,N=X,Xt(),e.substr(X,4)===l?(Q=l,X+=4):(Q=i,Re===0&&Je(it)),Q!==i?(Xt(),Ct=N,N=oh()):(X=N,N=i),Re--,N===i&&Re===0&&Je(_e),N}function h0(){var N,Q;if(N=[],(Q=yo())!==i)for(;Q!==i;)N.push(Q),Q=yo();else N=i;return N}function yo(){var N,Q,ce,Ne;return N=X,Xt(),(Q=kr())!==i?(Xt(),(ce=Zu())===i&&(ce=null),Xt(),e.charCodeAt(X)===41?(Ne=d,X++):(Ne=i,Re===0&&Je(pe)),Ne!==i?(Xt(),Ct=N,N=ah(Q,ce)):(X=N,N=i)):(X=N,N=i),N}function Zu(){var N,Q,ce,Ne,It,ar,lr,Ti;if(N=X,(Q=gl())!==i){for(ce=[],Ne=X,It=Xt(),e.charCodeAt(X)===44?(ar=f,X++):(ar=i,Re===0&&Je(me)),ar===i&&(ar=null),lr=Xt(),(Ti=gl())!==i?Ne=It=[It,ar,lr,Ti]:(X=Ne,Ne=i);Ne!==i;)ce.push(Ne),Ne=X,It=Xt(),e.charCodeAt(X)===44?(ar=f,X++):(ar=i,Re===0&&Je(me)),ar===i&&(ar=null),lr=Xt(),(Ti=gl())!==i?Ne=It=[It,ar,lr,Ti]:(X=Ne,Ne=i);Ct=N,N=If(Q,ce)}else X=N,N=i;return N}function gl(){var N,Q;return N=X,(Q=Kw())===i&&(Q=vl())===i&&(Q=Yu())===i&&(Q=mo()),Q!==i&&(Ct=N,Q=fA(Q)),(N=Q)===i&&(N=X,(Q=TA())!==i&&(Ct=N,Q=Yw(Q)),N=Q),N}function Xt(){var N,Q;for(Re++,N=[],Q=e.charAt(X),K.test(Q)?X++:(Q=i,Re===0&&Je(Ve));Q!==i;)N.push(Q),Q=e.charAt(X),K.test(Q)?X++:(Q=i,Re===0&&Je(Ve));return Re--,Q=i,Re===0&&Je(ye),N}function kr(){var N,Q,ce;return Re++,N=X,(Q=p0())!==i?(e.charCodeAt(X)===40?(ce=g,X++):(ce=i,Re===0&&Je(ue)),ce!==i?(Ct=N,N=yA(Q)):(X=N,N=i)):(X=N,N=i),Re--,N===i&&(Q=i,Re===0&&Je(j)),N}function p0(){var N,Q,ce;if(Re++,N=X,Q=[],ce=e.charAt(X),ie.test(ce)?X++:(ce=i,Re===0&&Je(Le)),ce!==i)for(;ce!==i;)Q.push(ce),ce=e.charAt(X),ie.test(ce)?X++:(ce=i,Re===0&&Je(Le));else Q=i;return Q!==i&&(Ct=N,Q=mA()),Re--,(N=Q)===i&&(Q=i,Re===0&&Je(Ie)),N}function Kw(){var N,Q,ce;return Re++,N=X,Xt(),(Q=nn())!==i?(e.charCodeAt(X)===37?(ce=v,X++):(ce=i,Re===0&&Je(et)),ce!==i?(Ct=N,N=lh(Q)):(X=N,N=i)):(X=N,N=i),Re--,N===i&&Re===0&&Je(we),N}function vl(){var N,Q,ce;return Re++,N=X,Xt(),(Q=nn())!==i?(e.substr(X,2)===b?(ce=b,X+=2):(ce=i,Re===0&&Je(Jt)),ce!==i?(Ct=N,N=tn(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,Xt(),(Q=nn())!==i?(e.substr(X,2)===S?(ce=S,X+=2):(ce=i,Re===0&&Je(nt)),ce!==i?(Ct=N,N=gA(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,Xt(),(Q=nn())!==i?(e.substr(X,2)===T?(ce=T,X+=2):(ce=i,Re===0&&Je(bt)),ce!==i?(Ct=N,N=da(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,Xt(),(Q=nn())!==i?(e.substr(X,2)===E?(ce=E,X+=2):(ce=i,Re===0&&Je(_t)),ce!==i?(Ct=N,N=rn(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,Xt(),(Q=nn())!==i?(e.substr(X,2)===x?(ce=x,X+=2):(ce=i,Re===0&&Je(Pr)),ce!==i?(Ct=N,N=vA(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,Xt(),(Q=nn())!==i?(e.substr(X,2)===O?(ce=O,X+=2):(ce=i,Re===0&&Je(Zr)),ce!==i?(Ct=N,N=bA(Q)):(X=N,N=i)):(X=N,N=i)))))),Re--,N===i&&Re===0&&Je(Be),N}function Yu(){var N,Q,ce;return Re++,N=X,(Q=nn())!==i?(e.substr(X,3)===C?(ce=C,X+=3):(ce=i,Re===0&&Je(dl)),ce!==i?(Ct=N,N=_A(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,(Q=nn())!==i?(e.substr(X,3)===I?(ce=I,X+=3):(ce=i,Re===0&&Je(hl)),ce!==i?(Ct=N,N=Nf(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,(Q=nn())!==i?(e.substr(X,4)===P?(ce=P,X+=4):(ce=i,Re===0&&Je(fo)),ce!==i?(Ct=N,N=Pf(Q)):(X=N,N=i)):(X=N,N=i),N===i&&(N=X,(Q=nn())!==i?(e.substr(X,4)===k?(ce=k,X+=4):(ce=i,Re===0&&Je(Bu)),ce!==i?(Ct=N,N=yl(Q)):(X=N,N=i)):(X=N,N=i)))),Re--,N===i&&(Q=i,Re===0&&Je(Gn)),N}function mo(){var N,Q;return Re++,N=X,Xt(),(Q=nn())!==i?(Ct=N,N=Lf(Q)):(X=N,N=i),Re--,N===i&&Re===0&&Je(pl),N}function TA(){var N,Q,ce,Ne;if(Re++,N=X,e.charCodeAt(X)===35?(Q=D,X++):(Q=i,Re===0&&Je(Hu)),Q!==i){if(ce=[],Ne=e.charAt(X),fe.test(Ne)?X++:(Ne=i,Re===0&&Je(fl)),Ne!==i)for(;Ne!==i;)ce.push(Ne),Ne=e.charAt(X),fe.test(Ne)?X++:(Ne=i,Re===0&&Je(fl));else ce=i;ce!==i?(Ct=N,N=uh()):(X=N,N=i)}else X=N,N=i;return N===i&&(N=X,(Q=yo())!==i&&(Ct=N,Q=wA(Q)),(N=Q)===i&&(N=X,(Q=p0())!==i&&(Ct=N,Q=Jw()),N=Q)),Re--,N===i&&(Q=i,Re===0&&Je(qu)),N}function nn(){var N,Q,ce,Ne,It,ar,lr,Ti;for(N=X,Q=e.charAt(X),ve.test(Q)?X++:(Q=i,Re===0&&Je(sh)),Q===i&&(Q=null),ce=X,Ne=[],It=e.charAt(X),$e.test(It)?X++:(It=i,Re===0&&Je(Bn));It!==i;)Ne.push(It),It=e.charAt(X),$e.test(It)?X++:(It=i,Re===0&&Je(Bn));if(e.charCodeAt(X)===46?(It=H,X++):(It=i,Re===0&&Je(en)),It!==i){if(ar=[],lr=e.charAt(X),$e.test(lr)?X++:(lr=i,Re===0&&Je(Bn)),lr!==i)for(;lr!==i;)ar.push(lr),lr=e.charAt(X),$e.test(lr)?X++:(lr=i,Re===0&&Je(Bn));else ar=i;ar!==i?ce=Ne=[Ne,It,ar]:(X=ce,ce=i)}else X=ce,ce=i;if(ce===i)if(ce=[],Ne=e.charAt(X),$e.test(Ne)?X++:(Ne=i,Re===0&&Je(Bn)),Ne!==i)for(;Ne!==i;)ce.push(Ne),Ne=e.charAt(X),$e.test(Ne)?X++:(Ne=i,Re===0&&Je(Bn));else ce=i;if(ce!==i){if(Ne=X,e.charCodeAt(X)===101?(It=re,X++):(It=i,Re===0&&Je(Cf)),It!==i){if(ar=e.charAt(X),ve.test(ar)?X++:(ar=i,Re===0&&Je(sh)),ar===i&&(ar=null),lr=[],Ti=e.charAt(X),$e.test(Ti)?X++:(Ti=i,Re===0&&Je(Bn)),Ti!==i)for(;Ti!==i;)lr.push(Ti),Ti=e.charAt(X),$e.test(Ti)?X++:(Ti=i,Re===0&&Je(Bn));else lr=i;lr!==i?Ne=It=[It,ar,lr]:(X=Ne,Ne=i)}else X=Ne,Ne=i;Ne===i&&(Ne=null),Ct=N,N=Xw()}else X=N,N=i;return N}function Qw(N,Q){return N.map(function(ce){return ce[Q]})}function EA(N,Q,ce){return[N].concat(Qw(Q,ce))}if(r=o(),t.peg$library)return{peg$result:r,peg$currPos:X,peg$FAILED:i,peg$maxFailExpected:ch,peg$maxFailPos:bn};if(r!==i&&X===e.length)return r;throw r!==i&&X<e.length&&Je(ui()),SA(ch,bn<e.length?e.charAt(bn):null,bn<e.length?kf(bn,bn+1):kf(bn,bn))}function are(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=w7(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new V("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:w7(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!V_e(t[r].effects,t[r+1].effects))throw new V("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});z_e(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function w7(e){let t;if(!e)return[];try{t=fCe(e)}catch(r){throw new V("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>yCe(r))}function yCe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return mCe(e);case"opacity":return gCe(e);case"hue-rotate":return vCe(e);case"blur":return bCe(e);case"drop-shadow":return _Ce(e);case"bloom":return wCe(e)}}catch(t){throw t.details.filter=e,t}throw new V("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function mCe(e){let t=1;return a0(e.parameters,1),e.parameters.length===1&&(t=Wo(e.parameters[0])),new mI(e.name,t)}function gCe(e){let t=1;return a0(e.parameters,1),e.parameters.length===1&&(t=Wo(e.parameters[0])),new OX(t)}function vCe(e){let t=0;return a0(e.parameters,1),e.parameters.length===1&&(t=ACe(e.parameters[0])),new AX(t)}function bCe(e){let t=0;return a0(e.parameters,1),e.parameters.length===1&&(t=O5(e.parameters[0]),qw(t,e.parameters[0])),new SX(t)}function _Ce(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new V("effect:type-error","Accepts only one color",{});r=MCe(i)}else{const n=O5(i);if(Object.isFrozen(t))throw new V("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&qw(n,i)}if(t.length<2||t.length>3)throw new V("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new $X(t[0],t[1],t[2]||0,r||lre("black"))}function wCe(e){let t=1,r=0,i=0;return a0(e.parameters,3),e.parameters[0]&&(t=Wo(e.parameters[0])),e.parameters[1]&&(r=O5(e.parameters[1]),qw(r,e.parameters[1])),e.parameters[2]&&(i=Wo(e.parameters[2])),new _X(t,r,i)}function a0(e,t){if(e.length>t)throw new V("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function rA(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in M5)return"<length>";if(e.unit in A5)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function qw(e,t){if(e<0)throw new V("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function SCe(e){if(e.type!=="quantity"||e.unit!==null)throw new V("effect:type-error",`Expected <double>, Actual: ${rA(e)}`,{term:e})}function TCe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new V("effect:type-error",`Expected <double> or <percentage>, Actual: ${rA(e)}`,{term:e})}pCe(ag,Error),ag.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,i=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){i=e[r].text.split(/\r\n|\n|\r/g);break}var n=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,o=this.location.source+":"+s.line+":"+s.column;if(i){var l=this.location.end,d=gR("",s.line.toString().length," "),f=i[n.line-1],g=(n.line===l.line?l.column:f.length+1)-n.column||1;t+=`
 --> `+o+`
`+d+` |
`+s.line+" | "+f+`
`+d+" | "+gR("",n.column-1," ")+gR("",g,"^")}else t+=`
 at `+o}return t},ag.buildMessage=function(e,t){var r={literal:function(f){return'"'+n(f.text)+'"'},class:function(f){var g=f.parts.map(function(v){return Array.isArray(v)?s(v[0])+"-"+s(v[1]):s(v)});return"["+(f.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};function i(f){return f.charCodeAt(0).toString(16).toUpperCase()}function n(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+i(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+i(g)})}function s(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+i(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+i(g)})}function o(f){return r[f.type](f)}function l(f){var g,v,b=f.map(o);if(b.sort(),b.length>0){for(g=1,v=1;g<b.length;g++)b[g-1]!==b[g]&&(b[v]=b[g],v++);b.length=v}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function d(f){return f?'"'+n(f)+'"':"end of input"}return"Expected "+l(e)+" but "+d(t)+" found."};const A5={deg:1,grad:.9,rad:180/Math.PI,turn:360};function ECe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&A5[e.unit]!=null))throw new V("effect:type-error",`Expected <angle>, Actual: ${rA(e)}`,{term:e})}const M5={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function $Ce(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&M5[e.unit]!=null))throw new V("effect:type-error",`Expected <length>, Actual: ${rA(e)}`,{term:e})}function Wo(e){TCe(e);const t=e.value;return qw(t,e),e.unit==="%"?.01*t:t}function xCe(e){return SCe(e),qw(e.value,e),e.value}function ACe(e){return ECe(e),e.value*A5[e.unit]||0}function O5(e){return $Ce(e),e.value*M5[e.unit]||0}function MCe(e){switch(e.colorType){case"hex":return Rbe(e.value);case"named":return lre(e.value);case"function":return CCe(e.value)}}function lre(e){if(!cX(e))throw new V("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Obe(e)}const OCe=/^rgba?/i,RCe=/^hsla?/i;function CCe(e){if(a0(e.parameters,4),OCe.test(e.name))return[Wo(e.parameters[0]),Wo(e.parameters[1]),Wo(e.parameters[2]),e.parameters[3]?Wo(e.parameters[3]):1];if(RCe.test(e.name))return dX(xCe(e.parameters[0]),Wo(e.parameters[1]),Wo(e.parameters[2]),e.parameters[3]?Wo(e.parameters[3]):1);throw new V("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function rw(e,t,r){var i;try{return NCe(e)}catch(n){(i=r==null?void 0:r.messages)==null||i.push(n)}return null}function iw(e,t,r,i){try{const n=ICe(e);Nr(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function ICe(e){const t=are(e);return t?G_e(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function NCe(e){if(!e||e.length===0)return null;if(PCe(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:S7(r.value)});return t}return S7(e)}function PCe(e){const t=e[0];return!!t&&"scale"in t}function S7(e){if(!(e!=null&&e.length))return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[Fl(r,"amount")];break;case"blur":i=[Fl(r,"radius","pt")];break;case"hue-rotate":i=[Fl(r,"angle","deg")];break;case"drop-shadow":i=[Fl(r,"xoffset","pt"),Fl(r,"yoffset","pt"),Fl(r,"blurRadius","pt"),LCe(r,"color")];break;case"bloom":i=[Fl(r,"strength"),Fl(r,"radius","pt"),Fl(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;are(n),t.push(n)}return t.join(" ")}function Fl(e,t,r){if(e[t]==null)throw new V("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function LCe(e,t){if(e[t]==null)throw new V("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const kCe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:sr}},"portal-item":{read:!0,write:{layerContainerTypes:sr}}}}},T7={read:{reader:rw},write:{allowNull:!0,writer:iw,layerContainerTypes:sr}},DCe={json:{read:!1,write:!1,origins:{"web-map":T7,"portal-item":T7}}},jCe=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return u([h(kCe)],t.prototype,"blendMode",void 0),u([h(DCe)],t.prototype,"effect",void 0),t=u([M("esri.layers.mixins.BlendLayer")],t),t},FCe=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return u([h({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=u([M("esri.layers.mixins.CustomParametersMixin")],t),t},ure=96;function Oze(e,t){const r=e.extent,i=e.width,n=co(r==null?void 0:r.spatialReference);return r&&i?r.width/i*n*mZ*ure:0}function Rze(e,t){return e/(co(t)*mZ*ure)}function Cze(e,t,r){return UCe(e,t)&&VCe(e,r)}function UCe(e,t){return t===0||ea(e,t)||e<t}function VCe(e,t){return t===0||ea(e,t)||e>t}function zCe(e,t){return ea(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const E7={write:{overridePolicy:(e,t,r)=>({enabled:!r||r.filterMode==="scale"})}};let Yc=class extends He.ClonableMixin(W){constructor(t){super(t),this.id=Zx(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};u([h({type:String,json:{write:!0}})],Yc.prototype,"id",void 0),u([h({type:Number,json:E7})],Yc.prototype,"maxScale",void 0),u([h({type:Number,json:E7})],Yc.prototype,"minScale",void 0),u([h({type:String,json:{write:!0}})],Yc.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],Yc.prototype,"where",void 0),Yc=u([M("esri.layers.support.DisplayFilter")],Yc);const cre=Yc;function GCe(e,t){return{...t,filterMode:e.mode}}function Nze(e,t){return dre(e,t).next().value??null}function Pze(e,t,r){const i=BCe(e);if(i&&(EW(t,i[0])||mC(r,i[1])))return"";const n=Array.from(dre(e,t,r)),s=qCe(n,t,r)?"1=1":n.map(o=>o.where||"1=1").reduce((o,l)=>swe(o,l),"");return s&&s!=="1=1"?s:""}function BCe(e){if(hre(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:r,maxScale:i}of e.filters)t[0]=Math.max(t[0],nw(r)),t[1]=Math.min(t[1],$$(i));return t}function*dre(e,t,r){if(hre(e)==="manual"){const i=e.filters.find(n=>n.id===e.activeFilterId);i&&(yield i)}else{typeof t=="object"&&(t=t.scale);for(const i of e.filters)HCe(i.minScale,i.maxScale,t,r)&&(yield i)}}function qCe(e,t,r){var s,o;if(e.length===0)return!0;const i=nw((s=e.at(0))==null?void 0:s.minScale),n=$$((o=e.at(-1))==null?void 0:o.maxScale);if(mC(i,t)||EW(n,r))return!0;for(let l=0;l<e.length-1;l++){const d=e[l],f=e[l+1];if(mC(nw(f.minScale),$$(d.maxScale)))return!0}return!1}function HCe(e,t,r,i){return e=nw(e),r=nw(r),t=$$(t),!(!ea(r,e)&&(i??r)>e)&&!Sde(t,r)&&(i===void 0||!ea(i,e))}function hre(e){return"mode"in e?e.mode:e.filterMode}function nw(e){return e||Number.POSITIVE_INFINITY}function $$(e){return e||0}let _p=class extends He.ClonableMixin(W){constructor(t){super(t),this.activeFilterId=null,this.filters=new(ge.ofType(cre)),this.mode="manual"}writeFilters(t,r,i,n){const s=t.toArray();this.mode==="scale"&&s.sort((o,l)=>{const d=zCe(l.minScale,o.minScale),f=o.maxScale-l.maxScale;return d===0?f:d}),r[i]=s.map(o=>o.toJSON(n))}write(t,r){return super.write(t,GCe(this,r))}};u([h({type:String,json:{write:{overridePolicy:(e,t,r)=>({enabled:r.filterMode==="manual",isRequired:!0})}}})],_p.prototype,"activeFilterId",void 0),u([h({type:ge.ofType(cre),nonNullable:!0,json:{write:!0}})],_p.prototype,"filters",void 0),u([le("filters")],_p.prototype,"writeFilters",null),u([h({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],_p.prototype,"mode",void 0),_p=u([M("esri.layers.support.DisplayFilterInfo")],_p);const WCe=_p,ZCe=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return u([h(YCe)],t.prototype,"displayFilterEnabled",void 0),u([h(JCe)],t.prototype,"displayFilterInfo",void 0),t=u([M("esri.layers.mixins.DisplayFilteredLayer")],t),t},YCe={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:sr,writer(e,t,r){Nr(r,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},JCe={type:WCe,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:sr},origins:{"web-scene":{write:!1,read:!1}}}},WP=UMe(),pre=new Map,fre=new Map;async function kze(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let n=pre.get(i);if(!n){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");n=(await mt(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return n===t}async function $7(e,t,r=!1){var s,o,l;if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=(s=fre.get(i))==null?void 0:s.entries();if(n){for(const[d,f]of n)if(f.name===t){const g=!((o=f.stack)!=null&&o.hasForwardEdits());if(!g&&r){const[{deleteForwardEdits:v},{default:b}]=await Promise.all([ne(()=>import("./deleteForwardEdits-DE1Hmc29.js"),[]),ne(()=>import("./DeleteForwardEditsParameters-BjVg72_q.js"),[])]),S=await v(i,d,new b({sessionId:WP,moment:f.moment}));return S.success&&((l=f.stack)==null||l.clearForwardEdits()),S.success}return g}}return!0}function DT(e,t){var n;if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=(n=fre.get(r))==null?void 0:n.entries();if(i){for(const[s,o]of i)if(o.name===t)return o.lockType==="edit"}return!1}const R5=new aa.EventEmitter;function yre(e){return R5.on("apply-edits",new WeakRef(e))}function mre(e){return R5.on("update-moment",new WeakRef(e))}function x7(e,t,r=null,i=!1){const n=gs();return i=t==null||i,R5.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:n.promise}),n}const gre=Symbol();function Dze(e){return e!=null&&typeof e=="object"&&gre in e}function Rv(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function S_(e,t,r){const i=new URL(e).host,n=pre.get(i),s=o=>!o||o===n;return s(t)&&s(r)||t===r}const XCe=e=>{var t;let r=class extends e{constructor(...i){super(...i),this[t]=!0,this._applyEditsHandler=n=>{const{serviceUrl:s,layerId:o,gdbVersion:l,mayReceiveServiceEdits:d,result:f}=n,g=s===this.url,v=o!=null&&this.layerId!=null&&o===this.layerId,b=Rv(this),S=Rv(this)&&S_(s,l,this.gdbVersion);if(!g||b&&!S||!v&&!d)return;const T=f.then(E=>{var C;if(this.lastEditsEventDate=new Date,v&&(E.addedFeatures.length||E.updatedFeatures.length||E.deletedFeatures.length||E.addedAttachments.length||E.updatedAttachments.length||E.deletedAttachments.length))return this.emit("edits",U(E)),E;const x=(C=E.editedFeatures)==null?void 0:C.find(({layerId:I})=>I===this.layerId);if(x){const{adds:I,updates:P,deletes:k}=x.editedFeatures,D={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:I?I.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],deletedFeatures:k?k.map(({attributes:H})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],updatedFeatures:P?P.map(({current:{attributes:H}})=>({objectId:this.objectIdField&&H[this.objectIdField],globalId:this.globalIdField&&H[this.globalIdField]})):[],editedFeatures:U(E.editedFeatures),exceededTransferLimit:!1,historicMoment:U(E.historicMoment)};return this.emit("edits",D),D}const O={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:U(E.editedFeatures),exceededTransferLimit:!1,historicMoment:U(E.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,l,O.historicMoment)&&this.emit("edits",O),O}).then(E=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,l,E.historicMoment)&&(this.historicMoment=E.historicMoment),E));this.emit("apply-edits",{result:T})},this._updateMomentHandler=n=>{const{serviceUrl:s,gdbVersion:o,moment:l}=n,d=s===this.url,f=Rv(this),g=Rv(this)&&S_(s,o,this.gdbVersion),v=Rv(this)&&!S_(s,this.gdbVersion,null);d&&f&&g&&v&&"historicMoment"in this&&this.historicMoment!==l&&(this.historicMoment=l)},this.when().then(()=>{this.addHandles(yre(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(mre(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(i,n,s){return"historicMoment"in this&&this.historicMoment!==s&&DT(i,n)}};return t=gre,u([h()],r.prototype,"lastEditsEventDate",void 0),r=u([M("esri.layers.mixins.EditBusLayer")],r),r};var ZP;const vR=new We({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),bR=new We({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ka=ZP=class extends W{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:l}=this;return new al({geometry:U(r),objectIds:U(s),spatialRelationship:i,timeExtent:U(n),where:t,units:o,distance:l,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new ZP({geometry:U(t),objectIds:U(n),spatialRelationship:r,timeExtent:U(i),where:e,units:s,distance:o})}};u([h({type:String,json:{write:!0}})],ka.prototype,"where",void 0),u([h({types:Zg,json:{write:!0}})],ka.prototype,"geometry",void 0),u([h({type:vR.apiValues,json:{name:"spatialRel",read:{reader:vR.read},write:{allowNull:!1,writer:vR.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],ka.prototype,"spatialRelationship",void 0),u([h({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ka.prototype,"distance",void 0),u([h({type:[Number],json:{write:!0}})],ka.prototype,"objectIds",void 0),u([h({type:bR.apiValues,json:{read:bR.read,write:{writer:bR.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ka.prototype,"units",void 0),u([h({type:si,json:{write:!0}})],ka.prototype,"timeExtent",void 0),ka=ZP=u([M("esri.layers.support.FeatureFilter")],ka);const KCe=ka;var YP;const A7={read:{reader:rw},write:{writer:iw,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},M7={read:{reader:rw},write:{writer:iw,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},O7={name:"showExcludedLabels",default:!0};let wp=YP=class extends W{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var i,n;const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const s=Object.keys(r.filter);if(s.length>1||s[0]!=="where")return(i=t.messages)==null||i.push(new V("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return(n=t.messages)==null||n.push(new V("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new YP({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};u([h({type:KCe,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e==null?void 0:e.write({},i);n&&Object.keys(n).length!==0?Nr(r,n,t):Nr(r,null,t)}}}})],wp.prototype,"filter",void 0),u([h({json:{read:rw,write:{writer:iw,allowNull:!0},origins:{"web-map":A7,"portal-item":A7}}})],wp.prototype,"includedEffect",void 0),u([h({json:{read:rw,write:{writer:iw,allowNull:!0},origins:{"web-map":M7,"portal-item":M7}}})],wp.prototype,"excludedEffect",void 0),u([h({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":O7,"portal-item":O7}}})],wp.prototype,"excludedLabelsVisible",void 0),wp=YP=u([M("esri.layers.support.FeatureEffect")],wp);const QCe=wp,R7={write:{allowNull:!0}},eIe={type:QCe,json:{origins:{"web-map":R7,"portal-item":R7}}},tIe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return u([h(eIe)],t.prototype,"featureEffect",void 0),t=u([M("esri.layers.mixins.FeatureEffectLayer")],t),t};var JP;let Cb=JP=class extends W{constructor(e){super(e)}async collectRequiredFields(e,t){return Qi(e,t,this.expression)}clone(){return new JP({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};u([h({type:String,json:{write:{isRequired:!0}}})],Cb.prototype,"expression",void 0),u([h({type:String,json:{write:!0}})],Cb.prototype,"title",void 0),Cb=JP=u([M("esri.symbols.support.FeatureExpressionInfo")],Cb);const C7=Cb,iA={unknown:1,inches:Ar(1,"meters","inches"),feet:Ar(1,"meters","feet"),"us-feet":Ar(1,"meters","us-feet"),yards:Ar(1,"meters","yards"),miles:Ar(1,"meters","miles"),"nautical-miles":Ar(1,"meters","nautical-miles"),millimeters:Ar(1,"meters","millimeters"),centimeters:Ar(1,"meters","centimeters"),decimeters:Ar(1,"meters","decimeters"),meters:Ar(1,"meters","meters"),kilometers:Ar(1,"meters","kilometers"),"decimal-degrees":1/hpe(1,"meters",gr.radius)};function jze(e){return!!e&&iA[e]!=null}function Fze(e){return 1/(iA[e]||1)}function rIe(){const e=Object.keys(iA);return gH(e,"decimal-degrees"),e.sort(),e}const iIe=rIe();var XP;const e2=Wr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),I7=new We({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let iu=XP=class extends W{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new XP({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&$ce(this.featureExpressionInfo,e.featureExpressionInfo)}};u([h({type:C7,json:{write:!0}})],iu.prototype,"featureExpressionInfo",void 0),u([se("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],iu.prototype,"readFeatureExpressionInfo",null),u([le("featureExpressionInfo",{featureExpressionInfo:{type:C7},"featureExpression.value":{type:[0]}})],iu.prototype,"writeFeatureExpressionInfo",null),u([h({type:e2.apiValues,nonNullable:!0,json:{type:e2.jsonValues,read:e2.read,write:{writer:e2.write,isRequired:!0}}})],iu.prototype,"mode",null),u([h({type:Number,json:{write:!0}})],iu.prototype,"offset",void 0),u([h({type:iIe,json:{type:String,read:I7.read,write:I7.write}})],iu.prototype,"unit",null),iu=XP=u([M("esri.symbols.support.ElevationInfo")],iu);const nIe=iu;let bm=class extends W{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};u([h({type:String,json:{write:!0}})],bm.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],bm.prototype,"label",void 0),u([h()],bm.prototype,"type",void 0),bm=u([M("esri.tables.elements.AttributeTableElement")],bm);const Dg=bm;var KP;let Ib=KP=class extends Dg{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new KP({description:this.description,displayType:this.displayType,label:this.label})}};u([h({type:["auto"],json:{write:!0}})],Ib.prototype,"displayType",void 0),u([h({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Ib.prototype,"type",void 0),Ib=KP=u([M("esri.tables.elements.AttributeTableAttachmentElement")],Ib);const N7=Ib;var QP;let Nb=QP=class extends Dg{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new QP({description:this.description,fieldName:this.fieldName,label:this.label})}};u([h({type:String,json:{write:!0}})],Nb.prototype,"fieldName",void 0),u([h({type:String,json:{read:!1,write:!0}})],Nb.prototype,"type",void 0),Nb=QP=u([M("esri.tables.elements.AttributeTableFieldElement")],Nb);const P7=Nb;var eL;let Pb=eL=class extends Dg{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new eL({description:this.description,label:this.label,relationshipId:this.relationshipId})}};u([h({type:Number,json:{write:!0}})],Pb.prototype,"relationshipId",void 0),u([h({type:["relationship"],json:{read:!1,write:!0}})],Pb.prototype,"type",void 0),Pb=eL=u([M("esri.tables.elements.AttributeTableRelationshipElement")],Pb);const L7=Pb;function vre(e){return{typesWithGroup:{base:Dg,key:"type",typeMap:{attachment:N7,field:P7,group:e,relationship:L7}},typesWithoutGroup:{base:Dg,key:"type",typeMap:{attachment:N7,field:P7,relationship:L7}}}}function bre(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function _re(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function wre(e,t,r=!0){return e?e.map(i=>oa(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var tL;let mu=tL=class extends Dg{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return wre(e,_R,!1)}readElements(e,t){return bre(t.attributeTableElements,_R,!1)}writeElements(e,t){t.attributeTableElements=_re(e,_R,!1)}clone(){return new tL({description:this.description,elements:U(this.elements),label:this.label})}};u([h({json:{write:!0}})],mu.prototype,"elements",void 0),u([ft("elements")],mu.prototype,"castElements",null),u([se("elements",["attributeTableElements"])],mu.prototype,"readElements",null),u([le("elements")],mu.prototype,"writeElements",null),u([h({type:String,json:{read:!1,write:!0}})],mu.prototype,"type",void 0),mu=tL=u([M("esri.tables.elements.AttributeTableGroupElement")],mu);const _R=vre(mu),sIe=mu;var rL;const wR=vre(sIe);let Jc=rL=class extends W{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return wre(e,wR)}readElements(e,t){return bre(t.attributeTableElements,wR)}writeElements(e,t){t.attributeTableElements=_re(e,wR)}clone(){return new rL({elements:U(this.elements),orderByFields:this.orderByFields})}};u([h({json:{write:!0}})],Jc.prototype,"elements",void 0),u([ft("elements")],Jc.prototype,"castElements",null),u([se("elements",["attributeTableElements"])],Jc.prototype,"readElements",null),u([le("elements")],Jc.prototype,"writeElements",null),u([h({type:[Object],json:{write:!0}})],Jc.prototype,"orderByFields",void 0),Jc=rL=u([M("esri.tables.AttributeTableTemplate")],Jc);const oIe=Jc,aIe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:sr}}},nA={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},sA={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:sr}}},lIe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:af}}},uIe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:sr}}},cIe={value:null,type:nIe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:sr}}};function Vze(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Sre={write:{enabled:!0,layerContainerTypes:sr},read:!0},iL={type:Number,json:{origins:{"web-document":Sre,"portal-item":{write:{layerContainerTypes:sr}}}}},dIe={...iL,json:{...iL.json,origins:{"web-document":{...Sre,write:{enabled:!0,layerContainerTypes:sr,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>{var i;return r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(i=t.layerDefinition)!=null&&i.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?q_(t.layerDefinition.drawingInfo.transparency):void 0:q_(t.drawingInfo.transparency)}}}},zze={type:Ut,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=Ut.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Ge.fromJSON(t.spatialReference)),r}}}},read:!1}},hIe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},pIe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:sr}}},fIe={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:sr}}},Tre={json:{write:{ignoreOrigin:!0,layerContainerTypes:sr},origins:{"web-map":{read:!1,write:!1}}}},yIe={type:oIe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let nu=class extends He.ClonableMixin(W){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};u([h()],nu.prototype,"creatorField",void 0),u([h()],nu.prototype,"creationDateField",void 0),u([h()],nu.prototype,"editorField",void 0),u([h()],nu.prototype,"editDateField",void 0),u([h()],nu.prototype,"realm",void 0),u([h(YE("dateFieldsTimeReference",!0))],nu.prototype,"timeZone",void 0),nu=u([M("esri.layers.support.EditFieldsInfo")],nu);const mIe=nu;let Va=class extends He.ClonableMixin(W){constructor(t){super(t)}};u([h({constructOnly:!0,json:{write:!0}})],Va.prototype,"name",void 0),u([h({constructOnly:!0,json:{write:!0}})],Va.prototype,"fields",void 0),u([h({constructOnly:!0,json:{write:!0}})],Va.prototype,"isAscending",void 0),u([h({constructOnly:!0,json:{write:!0}})],Va.prototype,"indexType",void 0),u([h({constructOnly:!0,json:{write:!0}})],Va.prototype,"isUnique",void 0),u([h({constructOnly:!0,json:{write:!0}})],Va.prototype,"description",void 0),Va=u([M("esri.layers.support.FeatureIndex")],Va);async function Ere(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=$re(e));const i=gIe(e),n=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!n||!o.exceededTransferLimit)break;t.start+=i}return s}function gIe(e){return $re(e)*vIe(e)}function vIe(e){return e.capabilities.query.maxRecordCount||2e3}function $re(e){return e.capabilities.query.supportsMaxRecordCountFactor?al.MAX_MAX_RECORD_COUNT_FACTOR:1}var nL;let Lb=nL=class extends W{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new nL({minValue:this.minValue,maxValue:this.maxValue})}};u([h({type:Number,json:{write:!0}})],Lb.prototype,"minValue",void 0),u([h({type:Number,json:{write:!0}})],Lb.prototype,"maxValue",void 0),Lb=nL=u([M("esri.renderers.support.AuthoringInfoClassBreakInfo")],Lb);var sL;let pd=sL=class extends W{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new sL({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:U(this.classBreakInfos)})}};u([h({type:String,json:{write:!0}})],pd.prototype,"field",void 0),u([h({type:String,json:{write:!0}})],pd.prototype,"normalizationField",void 0),u([h({type:String,json:{write:!0}})],pd.prototype,"label",void 0),u([h({type:[Lb],json:{write:!0}})],pd.prototype,"classBreakInfos",void 0),pd=sL=u([M("esri.renderers.support.AuthoringInfoFieldInfo")],pd);var oL;let _m=oL=class extends W{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new oL({label:this.label,value:this.value,size:this.size})}};u([h({type:String,json:{write:!0}})],_m.prototype,"label",void 0),u([h({type:Number,json:{write:!0}})],_m.prototype,"size",void 0),u([h({type:Number,json:{write:!0}})],_m.prototype,"value",void 0),_m=oL=u([M("esri.renderers.support.AuthoringInfoSizeStop")],_m);const bIe=_m;var aL;const t2=new We({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),r2=new We({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),k7={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},D7=["high-to-low","above-and-below","centered-on","extremes"],j7=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],F7=["seconds","minutes","hours","days","months","years"],_Ie=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let yi=aL=class extends W{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new aL({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:U(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};u([h({types:k7,json:{write:!0}})],yi.prototype,"endTime",void 0),u([ft("endTime")],yi.prototype,"castEndTime",null),u([h({type:String,json:{write:!0}})],yi.prototype,"field",void 0),u([h({type:Number,json:{write:!0}})],yi.prototype,"maxSliderValue",void 0),u([h({type:Number,json:{write:!0}})],yi.prototype,"minSliderValue",void 0),u([h({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],yi.prototype,"normalizationField",null),u([h({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],yi.prototype,"referenceSizeScale",null),u([h({type:_Ie,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],yi.prototype,"referenceSizeSymbolStyle",null),u([h({types:k7,json:{write:!0}})],yi.prototype,"startTime",void 0),u([ft("startTime")],yi.prototype,"castStartTime",null),u([h({type:[bIe],json:{origins:{"web-scene":{write:!1}},write:!0}})],yi.prototype,"sizeStops",null),u([h({type:t2.apiValues,value:null,json:{type:t2.jsonValues,read:t2.read,write:t2.write}})],yi.prototype,"style",null),u([h({type:j7,value:null,json:{type:j7,origins:{"web-scene":{type:D7,write:{writer:(e,t)=>{D7.includes(e)&&(t.theme=e)}}}},write:!0}})],yi.prototype,"theme",null),u([h({type:r2.apiValues,json:{type:r2.jsonValues,read:r2.read,write:r2.write}})],yi.prototype,"type",void 0),u([h({type:F7,json:{type:F7,write:!0}})],yi.prototype,"units",void 0),yi=aL=u([M("esri.renderers.support.AuthoringInfoVisualVariable")],yi);const wIe=yi;let jT=class extends W{constructor(t){super(t),this.type=null}};u([h({readOnly:!0,json:{read:!1,write:!0}})],jT.prototype,"type",void 0),jT=u([M("esri.rest.support.ColorRamp")],jT);const C5=jT;var lL;let Sp=lL=class extends C5{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new lL({fromColor:U(this.fromColor),toColor:U(this.toColor),algorithm:this.algorithm})}};u([Ee({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Sp.prototype,"algorithm",void 0),u([h({type:De,json:{type:[at],write:!0}})],Sp.prototype,"fromColor",void 0),u([h({type:De,json:{type:[at],write:!0}})],Sp.prototype,"toColor",void 0),u([h({type:["algorithmic"]})],Sp.prototype,"type",void 0),Sp=lL=u([M("esri.rest.support.AlgorithmicColorRamp")],Sp);const I5=Sp;var uL;let kb=uL=class extends C5{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new uL({colorRamps:U(this.colorRamps)})}};u([h({type:[I5],json:{write:!0}})],kb.prototype,"colorRamps",void 0),u([h({type:["multipart"]})],kb.prototype,"type",void 0),kb=uL=u([M("esri.rest.support.MultipartColorRamp")],kb);const xre=kb,SIe={key:"type",base:C5,typeMap:{algorithmic:I5,multipart:xre}};function TIe(e){return e!=null&&e.type?e.type==="algorithmic"?I5.fromJSON(e):e.type==="multipart"?xre.fromJSON(e):null:null}var cL;const Vh=new We({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),i2=new We({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),U7=new We({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),V7=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],EIe=["high-to-low","above-and-below","above","below"],$Ie=["flow-line","wave-front"],xIe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let yr=cL=class extends W{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?TIe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new cL({classificationMethod:this.classificationMethod,colorRamp:U(this.colorRamp),fadeRatio:U(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:U(this.field1),field2:U(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};u([h({type:Vh.apiValues,value:null,json:{type:Vh.jsonValues,read:Vh.read,write:Vh.write,origins:{"web-document":{default:"manual",type:Vh.jsonValues,read:Vh.read,write:Vh.write}}}})],yr.prototype,"classificationMethod",null),u([h({types:SIe,json:{write:!0}})],yr.prototype,"colorRamp",void 0),u([se("colorRamp")],yr.prototype,"readColorRamp",null),u([h({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"fadeRatio",void 0),u([h({type:[String],value:null,json:{write:!0}})],yr.prototype,"fields",null),u([h({type:pd,value:null,json:{write:!0}})],yr.prototype,"field1",null),u([h({type:pd,value:null,json:{write:!0}})],yr.prototype,"field2",null),u([h({type:$Ie,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"flowTheme",null),u([h({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],yr.prototype,"focus",null),u([h({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],yr.prototype,"isAutoGenerated",void 0),u([h({type:Number,value:null,json:{type:at,write:!0}})],yr.prototype,"numClasses",null),u([h({type:V7,json:{type:V7,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],yr.prototype,"lengthUnit",void 0),u([h({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"maxSliderValue",void 0),u([h({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"minSliderValue",void 0),u([h({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],yr.prototype,"statistics",null),u([h({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],yr.prototype,"standardDeviationInterval",null),u([h({type:i2.apiValues,value:null,json:{type:i2.jsonValues,read:i2.read,write:i2.write,origins:{"web-scene":{type:U7.jsonValues,write:{writer:U7.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],yr.prototype,"type",null),u([h({type:[wIe],json:{write:!0}})],yr.prototype,"visualVariables",void 0),u([h({type:xIe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"univariateSymbolStyle",null),u([h({type:EIe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],yr.prototype,"univariateTheme",null),yr=cL=u([M("esri.renderers.support.AuthoringInfo")],yr);const N5=yr,SR=new We({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Db=class extends W{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};u([h({type:N5,json:{write:!0}})],Db.prototype,"authoringInfo",void 0),u([h({type:SR.apiValues,readOnly:!0,json:{type:SR.jsonValues,read:!1,write:{writer:SR.write,ignoreOrigin:!0,isRequired:!0}}})],Db.prototype,"type",void 0),Db=u([M("esri.renderers.Renderer")],Db);const Gu=Db;let jb=class extends He.ClonableMixin(W){constructor(){super(...arguments),this.showLegend=null,this.title=null}};u([h({type:Boolean,json:{write:!0}})],jb.prototype,"showLegend",void 0),u([h({type:String,json:{write:!0}})],jb.prototype,"title",void 0),jb=u([M("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],jb);const Are=jb,TR=new We({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Uo=class extends W{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(ae.getLogger(this).error(".field: field must be a string value"),null):yw(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};u([h()],Uo.prototype,"index",void 0),u([h({type:TR.apiValues,readOnly:!0,json:{read:TR.read,write:{writer:TR.write,isRequired:!0}}})],Uo.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Uo.prototype,"field",void 0),u([ft("field")],Uo.prototype,"castField",null),u([h({type:String,json:{write:!0}})],Uo.prototype,"valueExpression",void 0),u([h({type:String,json:{write:!0}})],Uo.prototype,"valueExpressionTitle",void 0),u([h({readOnly:!0})],Uo.prototype,"arcadeRequired",null),u([h({type:Are,json:{write:!0}})],Uo.prototype,"legendOptions",void 0),Uo=u([M("esri.renderers.visualVariables.VisualVariable")],Uo);const l0=Uo;var dL;let Tp=dL=class extends W{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new dL({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};u([h({type:De,json:{type:[at],write:{isRequired:!0}}})],Tp.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],Tp.prototype,"label",void 0),u([h({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Tp.prototype,"value",void 0),u([le("value")],Tp.prototype,"writeValue",null),Tp=dL=u([M("esri.renderers.visualVariables.support.ColorStop")],Tp);const AIe=Tp;var hL;let Ep=hL=class extends l0{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new hL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([h({readOnly:!0})],Ep.prototype,"cache",null),u([h({type:["color"],json:{type:["colorInfo"]}})],Ep.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Ep.prototype,"normalizationField",void 0),u([h({type:[AIe],json:{write:!0}})],Ep.prototype,"stops",null),Ep=hL=u([M("esri.renderers.visualVariables.ColorVariable")],Ep);const Mre=Ep;var pL;let Xc=pL=class extends W{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return q_(t.transparency)}writeOpacity(e,t,r){t[r]=Mx(e)}clone(){return new pL({label:this.label,opacity:this.opacity,value:this.value})}};u([h({type:String,json:{write:!0}})],Xc.prototype,"label",void 0),u([h({type:Number,json:{type:at,write:{target:"transparency",isRequired:!0}}})],Xc.prototype,"opacity",void 0),u([se("opacity",["transparency"])],Xc.prototype,"readOpacity",null),u([le("opacity")],Xc.prototype,"writeOpacity",null),u([h({type:Number,json:{write:{isRequired:!0}}})],Xc.prototype,"value",void 0),Xc=pL=u([M("esri.renderers.visualVariables.support.OpacityStop")],Xc);const MIe=Xc;var fL;let $p=fL=class extends l0{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){var e;return new fL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};u([h({readOnly:!0})],$p.prototype,"cache",null),u([h({type:["opacity"],json:{type:["transparencyInfo"]}})],$p.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],$p.prototype,"normalizationField",void 0),u([h({type:[MIe],json:{write:!0}})],$p.prototype,"stops",null),$p=fL=u([M("esri.renderers.visualVariables.OpacityVariable")],$p);const P5=$p;var yL;let xp=yL=class extends l0{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new yL({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};u([h({readOnly:!0})],xp.prototype,"cache",null),u([h({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],xp.prototype,"axis",void 0),u([h({type:["rotation"],json:{type:["rotationInfo"]}})],xp.prototype,"type",void 0),u([h({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],xp.prototype,"rotationType",void 0),xp=yL=u([M("esri.renderers.visualVariables.RotationVariable")],xp);const Ore=xp;function OIe(e){return pt(e)}var mL;let Kc=mL=class extends W{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new mL({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};u([h({type:String,json:{write:!0}})],Kc.prototype,"label",void 0),u([h({type:Number,cast:pt,json:{write:{isRequired:!0}}})],Kc.prototype,"size",void 0),u([h({type:Number,json:{write:{isRequired:!0}}})],Kc.prototype,"value",void 0),u([h({type:Boolean,json:{write:!1}})],Kc.prototype,"useMinValue",void 0),u([h({type:Boolean,json:{write:!1}})],Kc.prototype,"useMaxValue",void 0),Kc=mL=u([M("esri.renderers.visualVariables.support.SizeStop")],Kc);const FT=Kc;let UT=class extends Are{constructor(){super(...arguments),this.customValues=null}};u([h({type:[Number],json:{write:!0}})],UT.prototype,"customValues",void 0),UT=u([M("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],UT);const RIe=UT;var Cu,ri;function Hm(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function sw(e){return e!=null&&!isNaN(e)&&isFinite(e)}function Rre(e){return e.valueExpression?Cu.Expression:e.field&&typeof e.field=="string"?Cu.Field:Cu.Unknown}function CIe(e,t){const r=t||Rre(e),i=e.valueUnit||"unknown";return r===Cu.Unknown?ri.Constant:e.stops?ri.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?ri.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?ri.Proportional:ri.Additive:ri.Identity:ri.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Cu||(Cu={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(ri||(ri={}));const Cre=()=>ae.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),oA=e=>Cre().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),aA=()=>Cre().error("Use of arcade expressions requires an arcade context"),z7=new ol,VT=Math.PI,Ire=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Nre(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(T=>T.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void oA("ColorVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let l=n?t:null;const d=i.field,{ipData:f,hasExpression:g}=i.cache;let v=i.cache.compiledFunc;if(!d&&!g){const T=i.stops;return T&&T[0]&&T[0].color}if(typeof l!="number")if(g){if((r==null?void 0:r.arcade)==null)return void aA();const T={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},E=r.arcade.arcadeUtils,x=E.getViewInfo(T),O=E.createExecContext(s,x,r.timeZone);if(!v){const C=E.createSyntaxTree(i.valueExpression);v=E.createFunction(C),i.cache.compiledFunc=v}l=E.executeFunction(v,O)}else o&&(l=o[d]);const b=i.normalizationField,S=o!=null&&b!=null?parseFloat(o[b]):void 0;if(l!=null&&(!b||n||!isNaN(S)&&S!==0)){isNaN(S)||n||(l/=S);const T=L5(l,f);if(T){const E=T[0],x=T[1],O=E===x?i.stops[E].color:De.blendColors(i.stops[E].color,i.stops[x].color,T[2],r!=null?r.color:void 0);return new De(O)}}}function Pre(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(T=>T.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void oA("OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s==null?void 0:s.attributes;let l=n?t:null;const d=i.field,{ipData:f,hasExpression:g}=i.cache;let v=i.cache.compiledFunc;if(!d&&!g){const T=i.stops;return T&&T[0]&&T[0].opacity}if(typeof l!="number")if(g){if((r==null?void 0:r.arcade)==null)return void aA();const T={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},E=r.arcade.arcadeUtils,x=E.getViewInfo(T),O=E.createExecContext(s,x,r.timeZone);if(!v){const C=E.createSyntaxTree(i.valueExpression);v=E.createFunction(C),i.cache.compiledFunc=v}l=E.executeFunction(v,O)}else o&&(l=o[d]);const b=i.normalizationField,S=o!=null&&b!=null?parseFloat(o[b]):void 0;if(l!=null&&(!b||n||!isNaN(S)&&S!==0)){isNaN(S)||n||(l/=S);const T=L5(l,f);if(T){const E=T[0],x=T[1];if(E===x)return i.stops[E].opacity;{const O=i.stops[E].opacity;return O+(i.stops[x].opacity-O)*T[2]}}}}function Lre(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(S=>S.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void oA("RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,l=typeof t=="number"?null:t,d=l==null?void 0:l.attributes,f=i.field,{hasExpression:g}=i.cache;let v=i.cache.compiledFunc,b=0;if(!f&&!g)return b;if(g){if((r==null?void 0:r.arcade)==null)return void aA();const S={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},T=r.arcade.arcadeUtils,E=T.getViewInfo(S),x=T.createExecContext(l,E,r.timeZone);if(!v){const O=T.createSyntaxTree(i.valueExpression);v=T.createFunction(O),i.cache.compiledFunc=v}b=T.executeFunction(v,x)}else d&&(b=d[f]||0);return b=typeof b!="number"||isNaN(b)?null:s+o*b,b}function IIe(e,t,r){const i=typeof t=="number",n=i?null:t,s=n==null?void 0:n.attributes;let o=i?t:null;const{isScaleDriven:l}=e.cache;let d=e.cache.compiledFunc;if(l){const g=r!=null?r.scale:void 0,v=r!=null?r.view:void 0;o=g==null||v==="3d"?NIe(e):g}else if(!i)switch(e.inputValueType){case Cu.Expression:{if((r==null?void 0:r.arcade)==null)return void aA();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},v=r.arcade.arcadeUtils,b=v.getViewInfo(g),S=v.createExecContext(n,b,r.timeZone);if(!d){const T=v.createSyntaxTree(e.valueExpression);d=v.createFunction(T),e.cache.compiledFunc=d}o=v.executeFunction(d,S);break}case Cu.Field:s&&(o=s[e.field]);break;case Cu.Unknown:o=null}if(!sw(o))return null;if(i||!e.normalizationField)return o;const f=s?parseFloat(s[e.normalizationField]):null;return sw(f)&&f!==0?o/f:null}function NIe(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function lA(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void oA("SizeVariable");const n=Dre(IIe(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function Un(e,t,r){return e==null?null:Hm(e)?lA(e,t,r):sw(e)?e:null}function kre(e,t,r){return sw(r)&&e>r?r:sw(t)&&e<t?t:e}function PIe(e,t,r,i){return e+((Un(t.minSize,r,i)||t.minDataValue)??0)}function LIe(e,t,r){const i=e.stops;let n=(i==null?void 0:i.length)&&i[0].size;return n==null&&(n=e.minSize),Un(n,t,r)}function kIe(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=Un(t.minSize,r,i),o=Un(t.maxSize,r,i),l=i!=null?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&l){const d=l==="circle",f=d?VT*(s/2)**2:s*s,g=f+n*((d?VT*(o/2)**2:o*o)-f);return d?2*Math.sqrt(g/VT):Math.sqrt(g)}return s+n*(o-s)}function DIe(e,t,r,i){const n=i!=null?i.shape:void 0,s=e/t.minDataValue,o=Un(t.minSize,r,i),l=Un(t.maxSize,r,i);let d=null;return d=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,kre(d,o,l)}function jIe(e,t,r,i,n){var d,f,g;const[s,o,l]=L5(e,n);if(s===o)return Un((d=t.stops)==null?void 0:d[s].size,r,i);{const v=Un((f=t.stops)==null?void 0:f[s].size,r,i);return v+(Un((g=t.stops)==null?void 0:g[o].size,r,i)-v)*l}}function FIe(e,t,r,i){const n=((i==null?void 0:i.resolution)??1)*iA[t.valueUnit],s=Un(t.minSize,r,i),o=Un(t.maxSize,r,i),{valueRepresentation:l}=t;let d=null;return d=l==="area"?2*Math.sqrt(e/VT)/n:l==="radius"||l==="distance"?2*e/n:e/n,kre(d,s,o)}function Dre(e,t,r,i,n){switch(t.transformationType){case ri.Additive:return PIe(e,t,r,i);case ri.Constant:return LIe(t,r,i);case ri.ClampedLinear:return kIe(e,t,r,i);case ri.Proportional:return DIe(e,t,r,i);case ri.Stops:return jIe(e,t,r,i,n);case ri.RealWorldSize:return FIe(e,t,r,i);case ri.Identity:return e;case ri.Unknown:return null}}function UIe(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=Un(e.minSize,z7,n),o=Un(e.maxSize,z7,n);if(s!=null||o!=null){if(s>o){const l=o;o=s,s=l}return{minSize:s,maxSize:o}}}function VIe(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],l=[];for(const d of e.visualVariables)switch(d.type){case"color":n.push(d);break;case"opacity":s.push(d);break;case"rotation":l.push(d);break;case"size":o.push(d)}return n.forEach(d=>{const f=Nre(d,t,r);i.push({variable:d,value:f})}),s.forEach(d=>{const f=Pre(d,t,r);i.push({variable:d,value:f})}),l.forEach(d=>{const f=Lre(d,t,r);i.push({variable:d,value:f})}),o.forEach(d=>{const f=lA(d,t,r);i.push({variable:d,value:f})}),i.filter(d=>d.value!=null)}function L5(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function zIe(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":lA(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}const Jze=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:zIe,getColor:Nre,getOpacity:Pre,getRotationAngle:Lre,getSize:lA,getSizeForValue:Dre,getSizeFromNumberOrVariable:Un,getSizeRangeAtScale:UIe,getVisualVariableValues:VIe,viewScaleRE:Ire},Symbol.toStringTag,{value:"Module"}));var gL;const n2=new We({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),vL=new We({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function G7(e){if(e!=null)return typeof e=="string"||typeof e=="number"?OIe(e):e.type==="size"?Hm(e)?e:(delete(e={...e}).type,new xt(e)):void 0}function B7(e,t,r){if(typeof e!="object")return e;const i=new xt;return i.read(e,r),i}let xt=gL=class extends l0{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&Ire.test(this.valueExpression)}}set index(e){Hm(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Hm(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return Rre(this)}set maxDataValue(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return G7(e)}readMaxSize(e,t,r){return B7(e,t,r)}set minDataValue(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(ae.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return G7(e)}readMinSize(e,t,r){return B7(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(ae.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return CIe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i!=null&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new V("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?vL.read(e):null}clone(){var e,t;return new gL({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Hm(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Hm(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(r=>r.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===ri.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===ri.Stops){const e=this.stops;if(!e)return this;const t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};u([h({readOnly:!0})],xt.prototype,"cache",null),u([h({type:n2.apiValues,json:{type:n2.jsonValues,origins:{"web-map":{read:!1}},read:n2.read,write:n2.write}})],xt.prototype,"axis",void 0),u([h()],xt.prototype,"index",null),u([h({type:String,readOnly:!0})],xt.prototype,"inputValueType",null),u([h({type:RIe,json:{write:!0}})],xt.prototype,"legendOptions",void 0),u([h({type:Number,value:null,json:{write:!0}})],xt.prototype,"maxDataValue",null),u([h({type:Number,value:null,json:{write:!0}})],xt.prototype,"maxSize",null),u([ft("maxSize")],xt.prototype,"castMaxSize",null),u([se("maxSize")],xt.prototype,"readMaxSize",null),u([h({type:Number,value:null,json:{write:!0}})],xt.prototype,"minDataValue",null),u([h({type:Number,value:null,json:{write:!0}})],xt.prototype,"minSize",null),u([ft("minSize")],xt.prototype,"castMinSize",null),u([se("minSize")],xt.prototype,"readMinSize",null),u([h({type:String,json:{write:!0}})],xt.prototype,"normalizationField",void 0),u([h({readOnly:!0})],xt.prototype,"arcadeRequired",null),u([h({type:String})],xt.prototype,"scaleBy",void 0),u([h({type:[FT],value:null,json:{write:!0}})],xt.prototype,"stops",null),u([h({type:["outline"],json:{write:!0}})],xt.prototype,"target",void 0),u([h({type:String,readOnly:!0})],xt.prototype,"transformationType",null),u([h({type:["size"],json:{type:["sizeInfo"]}})],xt.prototype,"type",void 0),u([h({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],xt.prototype,"useSymbolValue",void 0),u([h({type:String,json:{write:!0}})],xt.prototype,"valueExpression",void 0),u([se("valueExpression",["valueExpression","expression"])],xt.prototype,"readValueExpression",null),u([le("web-scene","valueExpression")],xt.prototype,"writeValueExpressionWebScene",null),u([h({type:["radius","diameter","area","width","distance"],json:{write:!0}})],xt.prototype,"valueRepresentation",void 0),u([h({type:vL.apiValues,json:{write:vL.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],xt.prototype,"valueUnit",void 0),u([se("valueUnit")],xt.prototype,"readValueUnit",null),xt=gL=u([M("esri.renderers.visualVariables.SizeVariable")],xt);const uA=xt,GIe={color:Mre,size:uA,opacity:P5,rotation:Ore},BIe=new We({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),qIe=/^\[([^\]]+)\]$/i;let zT=class extends Ae{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(r=>!!r),t==null?void 0:t.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,i)=>{let n=null;return n=r.target===i.target?0:r.target?1:-1,n});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:n,rotationType:s}=r,o=n==null?void 0:n.match(qIe),l=o==null?void 0:o[1];if(l&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:l})),t)return t.map(d=>{const f=BIe.read(d.type),g=GIe[f];g||(ae.getLogger(this).warn(`Unknown variable type: ${f}`),i!=null&&i.messages&&i.messages.push(new no("visual-variable:unsupported",`visualVariable of type '${f}' is not supported`,{definition:d,context:i})));const v=new g;return v.read(d,i),v})}writeVariables(t,r){const i=[];for(const n of t){const s=n.toJSON(r);s&&i.push(s)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};u([h()],zT.prototype,"visualVariables",null),zT=u([M("esri.renderers.visualVariables.VisualVariableFactory")],zT);const HIe=zT,WIe={base:l0,key:"type",typeMap:{opacity:P5,color:Mre,rotation:Ore,size:uA}},u0=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new HIe}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){var r;return((r=this.visualVariables)==null?void 0:r.some(({arcadeRequired:i})=>i))??!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){var n;return((n=this.visualVariables)==null?void 0:n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)))??[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&vn(r,i,s.field),s.normalizationField&&vn(r,i,s.normalizationField),s.valueExpression&&(ZIe(s.valueExpression,r,i)||await Qi(r,i,s.valueExpression)))}};return u([h({types:[WIe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),u([se("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),u([le("visualVariables")],t.prototype,"writeVisualVariables",null),t=u([M("esri.renderers.mixins.VisualVariablesMixin")],t),t};function ZIe(e,t,r){const i=_we(e);return i!=null&&(vn(t,r,i),!0)}const k5=[252,146,31,255],YIe=[153,153,153,255],JIe={type:"esriSMS",style:"esriSMSCircle",size:6,color:k5,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},XIe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:k5},KIe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},QIe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},eNe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},tNe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},rNe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},x$=cl.fromJSON(JIe),D5=bs.fromJSON(XIe),jre=Rf.fromJSON(KIe),iNe=s0.fromJSON(QIe);function Kze(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return x$;case"polyline":return D5;case"polygon":case"extent":return jre}return null}const Qze=cl.fromJSON(eNe),e7e=bs.fromJSON(tNe),t7e=Rf.fromJSON(rNe),nNe=$u.fromSimpleMarkerSymbol(x$),sNe=Of.fromSimpleLineSymbol(D5),oNe=ih.fromSimpleFillSymbol(jre),aNe=new Uw({symbolLayers:new ge([new Mf({material:{color:k5},edges:new uK({size:uo(1),color:new De(YIe)})})])}),lNe=new Of({symbolLayers:new ge([new i0({material:{color:new De([0,0,0])},size:uo(1)})])}),uNe=new ih({symbolLayers:new ge([new Mf({outline:{color:new De([0,0,0]),size:uo(1)}})])});function r7e(e){if(e==null)return null;switch(e.type){case"mesh":return aNe;case"point":case"multipoint":return nNe;case"polyline":return sNe;case"polygon":case"extent":return oNe}return null}const q7="#useCIMFallbackSymbology()",Cy={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function cNe(e,t=Cy){var d,f,g,v;if(!e)return{symbol:null};const{retainId:r=Cy.retainId,ignoreDrivers:i=Cy.ignoreDrivers,hasLabelingContext:n=Cy.hasLabelingContext,retainCIM:s=Cy.retainCIM,cimFallbackEnabled:o=Cy.cimFallbackEnabled}=t;let l=null;if(FK(e)||e instanceof zd)l=e.clone();else if(e.type==="cim"){const b=(f=(d=e.data)==null?void 0:d.symbol)==null?void 0:f.type;switch(b){case"CIMPointSymbol":l=s?e.clone():$u.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(l=lNe.clone(),(g=t==null?void 0:t.logWarning)==null||g.call(t,q7,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(l=uNe.clone(),(v=t==null?void 0:t.logWarning)==null||v.call(t,q7,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!l)return{error:new V("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${b||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof bs)l=Of.fromSimpleLineSymbol(e);else if(e instanceof cl)l=$u.fromSimpleMarkerSymbol(e);else if(e instanceof Vw)l=$u.fromPictureMarkerSymbol(e);else if(e instanceof Rf)l=t.geometryType&&t.geometryType==="mesh"?Uw.fromSimpleFillSymbol(e):ih.fromSimpleFillSymbol(e);else{if(!(e instanceof s0))return{error:new V("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};l=n?Dx.fromTextSymbol(e):$u.fromTextSymbol(e)}return r&&l&&l.type!=="cim"&&(l.id=e.id),!i||l.type==="cim"||l instanceof zd||l.symbolLayers.forEach(b=>b.ignoreDrivers=!0),{symbol:l}}function A$(e,t,r,i){const n=Fre(e,{},{context:i,isLabelSymbol:!1});n!=null&&(t[r]=n)}function H7(e,t,r,i){const n=Fre(e,{},{context:i,isLabelSymbol:!0});n!=null&&(t[r]=n)}function W7(e){return FK(e)||e instanceof zd}function dNe(e){return(e==null?void 0:e.type)==="polygon-3d"||(e==null?void 0:e.type)==="line-3d"}function Fre(e,t,r){var l;if(e==null)return null;const{context:i,isLabelSymbol:n}=r,s=i==null?void 0:i.origin,o=i==null?void 0:i.messages;if(s==="web-scene"&&!W7(e)){const d=cNe(e,{retainCIM:!0,hasLabelingContext:n});return d.symbol!=null?d.symbol.write(t,i):(o==null||o.push(new V("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:d.error})),null)}return hI(i==null?void 0:i.layer)&&dNe(e)?(o==null||o.push(new V("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(l=i==null?void 0:i.layer)==null?void 0:l.declaredClass}'.`,{symbol:e,context:i})),null):(s==="web-map"||s==="portal-item"&&!hI(i==null?void 0:i.layer))&&W7(e)?(o==null||o.push(new V("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function i7e(e,t){return pSe(e,null,t)}const cA={types:UK,json:{write:{writer:A$},origins:{"web-scene":{types:rV,write:{writer:A$},read:{reader:zg({types:rV})}}}}},j5=fk({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},cA),F5={types:{base:Pi,key:"type",typeMap:{"simple-fill":Td.typeMap["simple-fill"],"picture-fill":Td.typeMap["picture-fill"],"polygon-3d":Td.typeMap["polygon-3d"],cim:Td.typeMap.cim}},json:{write:{writer:A$},origins:{"web-scene":{type:ih,write:{writer:A$}}}}},GT={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var bL;let Ap=bL=class extends u0(Gu){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new bL({description:this.description,label:this.label,symbol:U(this.symbol),visualVariables:U(this.visualVariables),authoringInfo:U(this.authoringInfo)})}};u([h({type:String,json:{write:!0}})],Ap.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],Ap.prototype,"label",void 0),u([h(j5)],Ap.prototype,"symbol",void 0),u([Ee({simple:"simple"})],Ap.prototype,"type",void 0),Ap=bL=u([M("esri.renderers.SimpleRenderer")],Ap);const Iu=Ap,hNe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function _L(e){return e instanceof Ae}function Z7(e){return e instanceof ge?Object.keys(e.items):_L(e)?Vn(e).keys():e?Object.keys(e):[]}function s2(e,t){return e instanceof ge?e.items[t]:e[t]}function pNe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function T_(e){return e?e.declaredClass:null}function Ure(e,t){var v;const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=Z7(e),n=Z7(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||pNe(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(b=>!i.includes(b)),o=i.filter(b=>!n.includes(b)),l=i.filter(b=>n.includes(b)&&s2(e,b)!==s2(t,b)).concat(s,o).sort(),d=T_(e);if(d&&hNe.has(d)&&l.length)return{type:"complete",oldValue:e,newValue:t};let f;const g=_L(e)&&_L(t);for(const b of l){const S=s2(e,b),T=s2(t,b);let E;if((g||typeof S!="function"&&typeof T!="function")&&S!==T&&(S!=null||T!=null)){if(r&&r[b]&&typeof r[b]=="function")E=(v=r[b])==null?void 0:v.call(r,S,T);else if(S instanceof Date&&T instanceof Date){if(S.getTime()===T.getTime())continue;E={type:"complete",oldValue:S,newValue:T}}else E=typeof S=="object"&&typeof T=="object"&&T_(S)===T_(T)?Ure(S,T):{type:"complete",oldValue:S,newValue:T};E!=null&&(f!=null?f.diff[b]=E:f={type:"partial",diff:{[b]:E}})}}return f}function n7e(e,t){return fNe(e,t)}function fNe(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function s7e(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function yNe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&T_(e)!==T_(t)?{type:"complete",oldValue:e,newValue:t}:Ure(e,t)}function o2(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const r of t.added)if(!o2(r))return!1;for(const r of t.removed)if(!o2(r))return!1;for(const r of t.changed)if(!o2(r))return!1;return!0}case"partial":for(const t in e.diff)if(!o2(e.diff[t]))return!1;return!0}}var wL;const mNe=Wr()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Fb=wL=class extends He.ClonableMixin(W){static from(e){return mw(wL,e)}constructor(e){super(e),this.title=null,this.order=null}};u([h({type:String,json:{write:!0}})],Fb.prototype,"title",void 0),u([Ee(mNe)],Fb.prototype,"order",void 0),Fb=wL=u([M("esri.renderers.support.RendererLegendOptions")],Fb);const U5=Fb;let wm=class extends He.ClonableMixin(W){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};u([h(GT)],wm.prototype,"value",void 0),u([h(GT)],wm.prototype,"value2",void 0),u([h(GT)],wm.prototype,"value3",void 0),wm=u([M("esri.renderers.support.UniqueValue")],wm);const lg=wm;let Qc=class extends He.ClonableMixin(W){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(i=>new lg({value:i})):r==="object"?t[0]instanceof lg?t:t.map(i=>new lg(i)):null}};u([h({type:String,json:{write:!0}})],Qc.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],Qc.prototype,"label",void 0),u([h(cA)],Qc.prototype,"symbol",void 0),u([h({type:[lg],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new lg({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const n=[i.value,i.value2,i.value3].filter(Lu).map(s=>s.toString());r.push(n)}t.values=r}}}})],Qc.prototype,"values",void 0),u([ft("values")],Qc.prototype,"castValues",null),Qc=u([M("esri.renderers.support.UniqueValueClass")],Qc);const Vre=Qc;let Ub=class extends He.ClonableMixin(W){constructor(t){super(t),this.heading=null,this.classes=null}};u([h({type:String,json:{write:!0}})],Ub.prototype,"heading",void 0),u([h({type:[Vre],json:{write:{isRequired:!0}}})],Ub.prototype,"classes",void 0),Ub=u([M("esri.renderers.support.UniqueValueGroup")],Ub);const SL=Ub;var TL;let Mp=TL=class extends W{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new TL({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};u([h({type:String,json:{write:!0}})],Mp.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],Mp.prototype,"label",void 0),u([h(j5)],Mp.prototype,"symbol",void 0),u([h(GT)],Mp.prototype,"value",void 0),Mp=TL=u([M("esri.renderers.support.UniqueValueInfo")],Mp);const E_=Mp,Y7=new Map;async function gNe(e,t){try{return{data:(await wNe(e,t)).data,baseUrl:che(e),styleUrl:e}}catch(r){return Ga(r),null}}function vNe(e,t,r){var d;const i=t.portal!=null?t.portal:Ki.getDefault();let n;const s=`${i.url} - ${(d=i.user)==null?void 0:d.username} - ${e}`,o=Y7.get(s);if(o)return o;const l=bNe(e,i,r).then(f=>(n=f,f.fetchData())).then(f=>({data:f,baseUrl:n.itemUrl??"",styleName:e}));return Y7.set(s,l),l}function bNe(e,t,r){return t.load(r).then(()=>{const i=new Yo({disableExtraQuery:!0,query:`owner:${J7} AND type:${X7} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{var o;let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const l of i)if(((o=l.typeKeywords)==null?void 0:o.some(f=>f.toLowerCase()===s))&&l.type===X7&&l.owner===J7){n=l;break}}if(!n)throw new V("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function _Ne(e,t,r){return(e==null?void 0:e.styleUrl)!=null?gNe(e.styleUrl,r):(e==null?void 0:e.styleName)!=null?vNe(e.styleName,t,r):Promise.reject(new V("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function u7e(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function c7e(e,t){for(const r of t)switch(r){case"cim":if(e.cimRef)return{format:r,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const i=ER(e,"gltf_basisu");if(i)return{format:r,url:i};break}case"web-gltf":{const i=ER(e,"gltf");if(i)return{format:r,url:i};break}case"web":{const i=ER(e,"gltf");if(i)return{format:"web-gltf",url:i};if(e.webRef)return{format:r,url:encodeURI(e.webRef)};break}}}function ER(e,t){var r,i;if(!Z("enable-feature:force-wosr"))return(i=(r=e.formatInfos)==null?void 0:r.find(n=>n.type===t))==null?void 0:i.href}function wNe(e,t){const r={responseType:"json",query:{f:"json"},...t};return mt(ta(e),r)}const J7="esri_en",X7="Style",d7e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Vb;const zre="esri.renderers.UniqueValueRenderer",Ac=()=>ae.getLogger(zre),K7="uvInfos-watcher",Q7="uvGroups-watcher",SNe=",",TNe=Or(E_);function ENe(e){const{field1:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueInfos:s,valueExpression:o}=e,l=!(!t||!r);return[{classes:(s??[]).map(d=>{var O;const{symbol:f,label:g,value:v,description:b}=d,[S,T,E]=l?((O=v==null?void 0:v.toString())==null?void 0:O.split(n||""))||[]:[v],x=[];return(t||o)&&x.push(S),r&&x.push(T),i&&x.push(E),{symbol:f,label:g,values:[x],description:b}})}]}function Iy(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let tr=Vb=class extends u0(Gu){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(l=>l.value===r[s].value);o?yNe(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:yw(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i!=null&&i.messages?i.messages.push(new V("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ac().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||Ki.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=Hg(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Tw(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?Ac().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Ac().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var i;if(this.styleOrigin)return void Ac().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?TNe(e):new E_({value:e,symbol:VK(t)}),(i=this.uniqueValueInfos)==null||i.push(r),this._valueInfoMap[Iy(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Ac().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[Iy(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await Vd()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Ac().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return(r==null?void 0:r.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(r==null?void 0:r.arcade)==null){const n=await Vd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return(i==null?void 0:i.symbol)||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){var i;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=(i=this.uniqueValueInfos)==null?void 0:i.reduce((n,s)=>n+s.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Vb({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:U(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:U(this.visualVariables),legendOptions:U(this.legendOptions),authoringInfo:U(this.authoringInfo),backgroundFillSymbol:U(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=U(this.uniqueValueInfos),r=U(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(U(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map(i=>i.collectRequiredFields(e,t)),Qi(e,t,this.valueExpression)];vn(e,t,this.field),vn(e,t,this.field2),vn(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return _Ne(this.styleOrigin,{portal:this.portal}).then(e=>{var r;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const n=new zd({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const s=new E_({value:i.name,symbol:n});t.push(s),this._valueInfoMap[Iy(i.name)]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((r=this.uniqueValueInfos)!=null&&r.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",SNe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Iy(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(K7);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(ze(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,n)=>{i!==n&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,K7)}}_watchUniqueValueGroups(){this.removeHandles(Q7);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(ze(()=>({classes:r.classes}),(i,n)=>{i!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])t.push(ze(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(n,s)=>{n!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,Q7)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!t||!r);for(const d of s)for(const f of d.classes??[]){const{symbol:g,label:v,values:b,description:S}=f;for(const T of b??[]){const{value:E,value2:x,value3:O}=T,C=[E];r&&C.push(x),i&&C.push(O);const I=l?C.join(n||""):C[0]??void 0;e.push(new E_({symbol:g,label:v,value:I,description:S}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:n,uniqueValueInfos:s}=this;if(!t&&!i||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),l=s.map(f=>{var O;const{symbol:g,label:v,value:b,description:S}=f,[T,E,x]=o?((O=b==null?void 0:b.toString())==null?void 0:O.split(n||""))||[]:[b];return new Vre({symbol:g,label:v,description:S,values:[new lg({value:T,value2:E,value3:x})]})}),d=[new SL({classes:l})];e&&Object.freeze(d),this._set("uniqueValueGroups",d),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{};let l=this._cache.compiledFunc;const d=s.arcadeUtils;if(!l){const g=d.createSyntaxTree(this.valueExpression);l=d.createFunction(g),this._cache.compiledFunc=l}const f=d.executeFunction(l,d.createExecContext(e,d.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._valueInfoMap[Iy(f)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[Iy(i)]}static fromPortalStyle(e,t){const r=new Vb(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",(t==null?void 0:t.portal)||Ki.getDefault());const i=r.populateFromStyle();return i.catch(n=>{Ac().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new Vb(t==null?void 0:t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{Ac().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};u([h({readOnly:!0})],tr.prototype,"_cache",null),u([Ee({uniqueValue:"unique-value"})],tr.prototype,"type",void 0),u([h(F5)],tr.prototype,"backgroundFillSymbol",void 0),u([h({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],tr.prototype,"field",null),u([ft("field")],tr.prototype,"castField",null),u([le("field")],tr.prototype,"writeField",null),u([h({type:String,value:null,json:{write:!0}})],tr.prototype,"field2",null),u([h({type:String,value:null,json:{write:!0}})],tr.prototype,"field3",null),u([h({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],tr.prototype,"orderByClassesEnabled",void 0),u([h({type:String,value:null,json:{write:!0}})],tr.prototype,"valueExpression",null),u([h({type:String,json:{write:!0}})],tr.prototype,"valueExpressionTitle",void 0),u([h({type:U5,json:{write:!0}})],tr.prototype,"legendOptions",void 0),u([h({type:String,json:{write:!0}})],tr.prototype,"defaultLabel",void 0),u([h(fk({...cA},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],tr.prototype,"defaultSymbol",null),u([h({type:String,value:null,json:{write:!0}})],tr.prototype,"fieldDelimiter",null),u([h({type:Ki,readOnly:!0})],tr.prototype,"portal",void 0),u([se("portal",["styleName"])],tr.prototype,"readPortal",null),u([h({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],tr.prototype,"styleOrigin",void 0),u([se("styleOrigin",["styleName","styleUrl"])],tr.prototype,"readStyleOrigin",null),u([le("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],tr.prototype,"writeStyleOrigin",null),u([h({type:[SL],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||ENe(t)).map(i=>SL.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],tr.prototype,"uniqueValueGroups",null),u([h({type:[E_],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],tr.prototype,"uniqueValueInfos",null),tr=Vb=u([M(zre)],tr);const V5=tr;var EL;let ei=EL=class extends W{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new EL(U({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};u([h({type:[String],json:{write:!0}})],ei.prototype,"attachmentTypes",void 0),u([h({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],ei.prototype,"attachmentsWhere",void 0),u([h({type:Boolean,json:{write:!0}})],ei.prototype,"cacheHint",void 0),u([h({type:[String],json:{write:!0}})],ei.prototype,"keywords",void 0),u([h({type:[String],json:{write:!0}})],ei.prototype,"globalIds",void 0),u([h({json:{write:!0}})],ei.prototype,"name",void 0),u([h({type:Number,json:{read:{source:"resultRecordCount"}}})],ei.prototype,"num",void 0),u([h({type:[Number],json:{write:!0}})],ei.prototype,"objectIds",void 0),u([h({type:[String],json:{write:!0}})],ei.prototype,"orderByFields",void 0),u([h({type:Boolean,json:{default:!1,write:!0}})],ei.prototype,"returnMetadata",void 0),u([h({type:[Number],json:{write:!0}})],ei.prototype,"size",void 0),u([h({type:Number,json:{read:{source:"resultOffset"}}})],ei.prototype,"start",void 0),u([le("start"),le("num")],ei.prototype,"writeStart",null),u([h({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ei.prototype,"where",void 0),ei=EL=u([M("esri.rest.support.AttachmentQuery")],ei),ei.from=Or(ei);const $Ne=ei,Gre=Wr()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),eG="percent-of-total",tG="field",h7e=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const i=!!this.normalizationField,n=this.normalizationTotal!=null;return i||n?(r=i&&tG||n&&eG||null,i&&n&&ae.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==tG&&r!==eG||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return u([h({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),u([h({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),u([h({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),u([h({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),u([Ee(Gre,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=u([M("esri.rest.support.NormalizationBinParametersMixin")],t),t};var $L;let ur=$L=class extends W{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new $L(U({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};u([h({type:Boolean,json:{write:!0}})],ur.prototype,"cacheHint",void 0),u([h({type:Ho,json:{write:!0}})],ur.prototype,"dynamicDataSource",void 0),u([h({type:String,json:{write:!0}})],ur.prototype,"gdbVersion",void 0),u([h({type:Number,json:{write:!0}})],ur.prototype,"geometryPrecision",void 0),u([h({type:Date})],ur.prototype,"historicMoment",void 0),u([le("historicMoment")],ur.prototype,"_writeHistoricMoment",null),u([h({type:Number,json:{write:!0}})],ur.prototype,"maxAllowableOffset",void 0),u([h({json:{write:!0}})],ur.prototype,"objectIds",void 0),u([h({type:[String],json:{write:!0}})],ur.prototype,"orderByFields",void 0),u([h({type:[String],json:{write:!0}})],ur.prototype,"outFields",void 0),u([h({type:Ge,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ur.prototype,"outSpatialReference",void 0),u([h({json:{write:!0}})],ur.prototype,"relationshipId",void 0),u([h({type:Number,json:{read:{source:"resultOffset"}}})],ur.prototype,"start",void 0),u([le("start"),le("num")],ur.prototype,"writeStart",null),u([h({type:Number,json:{read:{source:"resultRecordCount"}}})],ur.prototype,"num",void 0),u([h({json:{write:!0}})],ur.prototype,"returnGeometry",void 0),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ur.prototype,"returnM",void 0),u([h({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ur.prototype,"returnZ",void 0),u([h({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ur.prototype,"where",void 0),ur=$L=u([M("esri.rest.support.RelationshipQuery")],ur),ur.from=Or(ur);const z5=ur,p7e=Object.freeze(Object.defineProperty({__proto__:null,default:z5},Symbol.toStringTag,{value:"Module"})),xL=new We({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function xNe(e,t,r,i){const n=await nh(e);if(await G5(e,t,i),!n.addAttachment)throw new V(i,"Layer source does not support addAttachment capability");return n.addAttachment(t,r)}function G5(e,t,r){var s,o;const{attributes:i}=t,{objectIdField:n}=e;return(o=(s=e.capabilities)==null?void 0:s.data)!=null&&o.supportsAttachment?t?i?n&&i[n]?Promise.resolve():Promise.reject(new V(r,`feature is missing the identifying attribute ${n}`)):Promise.reject(new V(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new V(r,"A feature is required to add/delete/update attachments")):Promise.reject(new V(r,"this layer doesn't support attachments"))}async function ANe(e,t,r,i,n){const s=await nh(e);if(await G5(e,t,n),!s.updateAttachment)throw new V(n,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,i)}async function MNe(e,t,r){const{applyEdits:i}=await ne(()=>import("./editingSupport-CIkjNP0b.js"),[]),n=await e.load();let s=r;return n.type==="feature"&&n.infoFor3D&&t.deleteFeatures!=null&&n.globalIdField!=null&&(s={...s,globalIdToObjectId:await JNe(n,t.deleteFeatures,n.globalIdField)}),i(n,n.source,t,r)}async function ONe(e,t,r){const{uploadAssets:i}=await ne(()=>import("./editingSupport-CIkjNP0b.js"),[]),n=await e.load();return i(n,n.source,t,r)}async function RNe(e,t,r,i){const n=await nh(e);if(await G5(e,t,i),!n.deleteAttachments)throw new V(i,"Layer source does not support deleteAttachments capability");return n.deleteAttachments(t,r)}async function CNe(e,t,r){const i=(await e.load({signal:t==null?void 0:t.signal})).source;if(!i.fetchRecomputedExtents)throw new V(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function INe(e,t,r,i){var S,T,E,x;t=$Ne.from(t),await e.load();const n=e.source,s=e.capabilities;if(!((S=s==null?void 0:s.data)!=null&&S.supportsAttachment))throw new V(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:l,globalIds:d,num:f,size:g,start:v,where:b}=t;if(!((T=s==null?void 0:s.operations)!=null&&T.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(d==null?void 0:d.length)>0||(g==null?void 0:g.length)>0||f||v||b))throw new V(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(l!=null&&l.length||d!=null&&d.length||b))throw new V(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!n.queryAttachments)throw new V(i,"Layer source does not support queryAttachments capability",t);return!((E=s==null?void 0:s.attachment)!=null&&E.supportsOrderByFields)&&((x=t.orderByFields)!=null&&x.length)&&((t=t.clone()).orderByFields=null),n.queryAttachments(t)}async function NNe(e,t,r,i){const n=await nh(e);if(!n.queryObjectIds)throw new V(i,"Layer source does not support queryObjectIds capability");return n.queryObjectIds(al.from(t)??e.createQuery(),r)}async function PNe(e,t,r,i){const n=await nh(e);if(!n.queryFeatureCount)throw new V(i,"Layer source does not support queryFeatureCount capability");return n.queryFeatureCount(al.from(t)??e.createQuery(),r)}async function LNe(e,t,r,i){const n=await nh(e);if(!n.queryExtent)throw new V(i,"Layer source does not support queryExtent capability");return n.queryExtent(al.from(t)??e.createQuery(),r)}async function kNe(e,t,r,i){const n=await nh(e);if(!n.queryRelatedFeatures)throw new V(i,"Layer source does not support queryRelatedFeatures capability");return n.queryRelatedFeatures(z5.from(t),r)}async function DNe(e,t,r,i){const n=await nh(e);if(!n.queryRelatedFeaturesCount)throw new V(i,"Layer source does not support queryRelatedFeaturesCount capability");return n.queryRelatedFeaturesCount(z5.from(t),r)}async function jNe(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await DX(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function FNe(e){var o,l;const t=new al,r=(o=e.capabilities)==null?void 0:o.data,i=(l=e.capabilities)==null?void 0:l.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:n,timeExtent:s}=e;return t.timeExtent=n!=null&&s!=null?s.offset(-n.value,n.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function Bre(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function qre(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function UNe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function VNe(e,t,r,i){var d,f;const n=r==null?void 0:r.feature,s=!!((d=e.subtypes)!=null&&d.length);if(s&&!(r!=null&&r.excludeImpliedDomains)){const g=GNe(e,t);if(g)return g}const o=s&&zNe(e,n);if(o){const g=(f=o==null?void 0:o.domains)==null?void 0:f[t];return(g==null?void 0:g.type)==="inherited"?i:g}const l=Zre(e.types,e.typeIdField,n);if(l){const g=l.domains&&l.domains[t];if(g&&(g==null?void 0:g.type)!=="inherited")return g}if(i)return i;if(!(r!=null&&r.excludeImpliedDomains)){const g=BNe(e,t);if(g)return g}return null}function zNe(e,t){const{subtypes:r,subtypeField:i}=e;if(!(t!=null&&t.attributes)||!(r!=null&&r.length)||!i)return null;const n=t.attributes[i];return n==null?null:r.find(s=>s.code===n)}function GNe(e,t){var o,l;const{fieldsIndex:r,subtypeField:i}=e,{name:n,type:s}=r.get(t)??{};if(!n)return null;if((i&&((o=r.get(i))==null?void 0:o.name))===n&&((l=e.subtypes)!=null&&l.length)){const d=e.subtypes.map(f=>new Vp({code:Hre(f.code,s),name:f.name}));if(d!=null&&d.length)return new Fx({codedValues:d})}return null}function BNe(e,t){var s,o;const{fieldsIndex:r}=e,{name:i,type:n}=r.get(t)??{};if(!i)return null;if(("typeIdField"in e?(s=r.get(e.typeIdField))==null?void 0:s.name:null)===i&&"types"in e&&((o=e.types)!=null&&o.length)){const l=e.types.map(d=>new Vp({code:Hre(d.id,n),name:d.name}));return new Fx({codedValues:l})}return null}function Hre(e,t){return t?eK({type:t})&&typeof e=="number"?`${e}`:e1e({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function nh(e){return(await e.load()).source}async function f7e(e,t){if(!Ze)return;const r=Ze.findCredential(e);if(r)return r.userId;let i;try{const n=await ED(e,t);n&&(i=await Ze.checkSignInStatus(`${n}/sharing`))}catch{}return i?i.userId:null}async function Wre(e,t){if(!Ze||Ze.findCredential(e))return;let r;try{const i=await ED(e,t);i&&(r=await Ze.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await Ze.getCredential(e,{signal:i})}catch{}}async function qNe(e,t,r){var n;const i=(n=e.parsedUrl)==null?void 0:n.path;i&&e.authenticationTriggerEvent===t&&await Wre(i,r)}async function y7e(e){var r;const t=(r=e.parsedUrl)==null?void 0:r.path;t&&HNe(e)&&await Wre(t)}function HNe(e){return WNe(e)&&("serviceDefinitionExpression"in e&&M$(e.serviceDefinitionExpression)||"definitionExpression"in e&&M$(e.definitionExpression))}function WNe(e){var t;return!(!lX(e)||!((t=e.capabilities)!=null&&t.query.supportsCurrentUser))}function M$(e){return!!(e!=null&&e.toLowerCase().includes("current_user"))}function ZNe(e){return!BT(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const $R=zg({types:UK});function B5(e,t){var r;if(e.defaultSymbol)return(r=e.types)!=null&&r.length?new V5({defaultSymbol:$R(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:$R(i.symbol,i,t)}))}):new Iu({symbol:$R(e.defaultSymbol,e,t)})}function YNe(e){var i,n,s;let t=(i=e.sourceJSON)==null?void 0:i.cacheMaxAge;if(!t)return!1;const r=(s=(n=e.editingInfo)==null?void 0:n.lastEditDate)==null?void 0:s.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function JNe(e,t,r){if(t==null)return null;const i=[],{objectIdField:n}=e;if(t.forEach(f=>{let g=null;if("attributes"in f){const{attributes:v}=f;g={globalId:v[r],objectId:v[n]!=null&&v[n]!==-1?v[n]:null}}else g={globalId:f.globalId,objectId:f.objectId!=null&&f.objectId!==-1?f.objectId:null};g.globalId!=null&&(g.objectId!=null&&g.objectId!==-1||i.push(g.globalId))}),i.length===0)return null;const s=e.createQuery();s.where=i.map(f=>`${r}='${f}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[n,r],s.cacheHint=!1;const o=await Rfe(Ere(e,s));if(!o.ok)return null;const l=new Map,d=o.value.features;for(const f of d){const g=f.attributes[r],v=f.attributes[n];g!=null&&v!=null&&v!==-1&&l.set(VMe(g),v)}return l}function Zre(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find(n=>{const{id:s}=n;return s!=null&&s.toString()===i.toString()})??null}function BT(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||XNe(e)}function XNe(e){var t,r;return!!((r=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&r.toLowerCase().split(",").map(i=>i.trim()).includes("map"))}function KNe(e,t,r){const i=t==null?void 0:t.queryAttributeBins;if(!i)throw new V(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!i.supportsAutoInterval)throw new V(r,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!rG(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new V(r,"Layer source does not support normalization binning");break;case"date":if(!i.supportsDate)throw new V(r,"Layer source does not support date binning");if(e.binParameters.snapToData&&!i.supportsSnapToData)throw new V(r,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!i.supportsReturnFullIntervalBin)throw new V(r,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!i.supportsFixedBoundaries)throw new V(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!i.supportsFixedInterval)throw new V(r,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!i.supportsNormalization||!rG(e.binParameters.normalizationType,i.supportedNormalizationTypes)))throw new V(r,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!i.supportsStackBy)throw new V(r,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!i.supportsSplitBy)throw new V(r,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!i.supportsFirstDayOfWeek)throw new V(r,"Layer source does not support firstDayOfWeek binning");const n=i==null?void 0:i.supportedStatistics;if(e.outStatistics&&n){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const l=s.get(o);if(l&&!n[l])throw new V(r,`Layer source does not support ${o} statistic type`)}}}function rG(e,t){return e!=null&&!!(t!=null&&t[Gre.toJSON(e)])}let Sm=class extends He.ClonableMixin(W){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};u([h({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Sm.prototype,"shapeAreaField",void 0),u([h({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Sm.prototype,"shapeLengthField",void 0),u([h({type:String,json:{read:e=>bpe.read(e)||_pe.read(e)}})],Sm.prototype,"units",void 0),Sm=u([M("esri.layers.support.GeometryFieldsInfo")],Sm);const QNe=Sm;var AL;let Tm=AL=class extends W{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new ge}clone(){return new AL({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};u([h({type:String,json:{write:{isRequired:!0}}})],Tm.prototype,"floorField",void 0),u([h({json:{read:!1,write:!1}})],Tm.prototype,"viewAllMode",void 0),u([h({json:{read:!1,write:!1}})],Tm.prototype,"viewAllLevelIds",void 0),Tm=AL=u([M("esri.layers.support.LayerFloorInfo")],Tm);const ePe=Tm,iG=new We({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),nG=new We({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ss=class extends He.ClonableMixin(W){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};u([h({json:{read:iG.read,write:iG.write}})],ss.prototype,"cardinality",void 0),u([h({json:{name:"catalogID"}})],ss.prototype,"catalogId",void 0),u([h({json:{read:!0,write:!0}})],ss.prototype,"composite",void 0),u([h({json:{read:!0,write:!0}})],ss.prototype,"id",void 0),u([h({json:{read:!0,write:!0}})],ss.prototype,"keyField",void 0),u([h({json:{read:!0,write:!0}})],ss.prototype,"keyFieldInRelationshipTable",void 0),u([h({json:{read:!0,write:!0}})],ss.prototype,"name",void 0),u([h({json:{read:!0,write:!0}})],ss.prototype,"relatedTableId",void 0),u([h({json:{read:!0,write:!0}})],ss.prototype,"relationshipTableId",void 0),u([h({json:{read:nG.read,write:nG.write}})],ss.prototype,"role",void 0),ss=u([M("esri.layers.support.Relationship")],ss);const tPe=ss,rPe=[["binary","application/octet-stream","bin",""]];function v7e(e,t){return Kre(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function b7e(e,t){if(!e)return!1;const r=iPe(t,e.supportedFormats??[]);return r!=null&&e.editFormats.includes(r)}function Yre(e,t){return H5(aPe(e,t))}function Jre(e,t){return H5(Kre(e,t))}function _7e(e,t){return Qre(oPe(e,t))}function iPe(e,t){return Jre(e.name,t)??Yre(e.type,t)}function dA(e,t,r){return Yre(e,r)??Jre(t,r)}function Xre({supportedFormats:e}){return dA("model/gltf-binary","glb",e)}function w7e(e){const t=Xre(e);return t!=null&&e.editFormats.includes(t)}function nPe({supportedFormats:e}){return dA("model/gltf+json","gltf",e)}function sPe(e){if(!e)return null;const t=Xre(e),r=nPe(e);let i=null;for(const n of e.queryFormats){if(n===t)return n;n===r&&(i=n)}return i}function S7e({supportedFormats:e}){return dA("application/esri3do-SR_world","wld",e)}function T7e({supportedFormats:e}){return dA("application/esri3do-SR_prj","prj",e)}function q5(e){return[...rPe,...e]}function oPe(e,t){return q5(t).find(r=>H5(r)===e)}function aPe(e,t){const r=e.toLowerCase();return q5(t).find(i=>Qre(i)===r)}function Kre(e,t){const r=e.toLowerCase();return q5(t).find(i=>lPe(i).some(n=>r.endsWith(n)))}function H5(e){return e==null?void 0:e[0]}function Qre(e){return e==null?void 0:e[1].toLowerCase()}function lPe(e){return(e==null?void 0:e[2].split(",").map(t=>t.toLowerCase()))??[]}function E7e(e){var t;return(t=e.tables)==null?void 0:t.find(r=>r.role==="assetMaps")}function Te(e,t,r){return!!eie(e,t,r)}function zb(e,t,r){return eie(e,t,r)}function eie(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const uPe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function cPe(e){var r;const t=(r=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:r.map(i=>i.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Hw(e,t){var i;const r=(i=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:i.map(n=>n.toLowerCase());return!!(r!=null&&r.includes(t.toLowerCase()))}function dPe(e){var r;const t=(r=e==null?void 0:e.supportedStatisticTypes)==null?void 0:r.map(i=>i.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function hPe(e){var r;const t=(r=e==null?void 0:e.supportedNormalizationTypes)==null?void 0:r.map(i=>i.toLowerCase());return{field:!!(t!=null&&t.includes("field")),log:!!(t!=null&&t.includes("log")),naturalLog:!!(t!=null&&t.includes("naturallog")),percentOfTotal:!!(t!=null&&t.includes("percentoftotal")),squareRoot:!!(t!=null&&t.includes("squareroot"))}}function tie(e,t){return{analytics:pPe(e),attachment:fPe(e),data:yPe(e),metadata:mPe(e),operations:gPe(e.capabilities,e,t),query:vPe(e,t),queryAttributeBins:wPe(e),queryRelated:bPe(e),queryTopFeatures:_Pe(e),editing:SPe(e)}}function pPe(e){return{supportsCacheHint:Hw(e.advancedQueryCapabilities,"queryAnalytics")}}function fPe(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Hw(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:Te(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:Te(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=uPe[i.name];n&&(r[n]=!!i.isEnabled)}),r}function yPe(e){return{isVersioned:Te(e,"isDataVersioned",!1),isBranchVersioned:Te(e,"isDataBranchVersioned",!1),supportsAttachment:Te(e,"hasAttachments",!1),supportsM:Te(e,"hasM",!1),supportsZ:Te(e,"hasZ",!1)}}function mPe(e){return{supportsAdvancedFieldProperties:Te(e,"supportsFieldDescriptionProperty",!1)}}function gPe(e,t,r){const i=e?e.toLowerCase().split(",").map(b=>b.trim()):[],n=r?Pd(r):null,s=i.includes(n!=null&&n.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let l=o&&i.includes("create"),d=o&&i.includes("delete"),f=o&&i.includes("update");const g=i.includes("changetracking"),v=t.advancedQueryCapabilities;return o&&!(l||d||f)&&(l=d=f=!0),{supportsCalculate:Te(t,"supportsCalculate",!1),supportsTruncate:Te(t,"supportsTruncate",!1),supportsValidateSql:Te(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:d,supportsEditing:o,supportsChangeTracking:g,supportsQuery:s,supportsQueryAnalytics:Te(v,"supportsQueryAnalytic",!1),supportsQueryAttachments:Te(v,"supportsQueryAttachments",!1),supportsQueryBins:Te(v,"supportsQueryBins",!1),supportsQueryTopFeatures:Te(v,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Te(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:f,supportsExceedsLimitStatistics:Te(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Te(t,"supportsAsyncConvert3D",!1)}}function vPe(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=e.currentVersion,o=t==null?void 0:t.includes("MapServer"),l=!o||s>=Z("mapserver-pbf-version-support"),d=IE(t),f=new Set((e.supportedQueryFormats??"").split(",").map(g=>g.toLowerCase().trim()));return{maxRecordCount:zb(e,"maxRecordCount",void 0),maxRecordCountFactor:zb(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:zb(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:cPe(r),supportsCacheHint:Te(r,"supportsQueryWithCacheHint",!1)||Hw(r,"query"),supportsCentroid:Te(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:d,supportsCurrentUser:Te(r,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:Te(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Te(r,"supportsDisjointSpatialRel",!1),supportsDistance:Te(r,"supportsQueryWithDistance",!1),supportsDistinct:Te(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Te(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:l&&f.has("pbf"),supportsFullTextSearch:Te(r,"supportsFullTextSearch",!1),supportsGeometryProperties:Te(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:Te(r,"supportsHavingClause",!1),supportsHistoricMoment:Te(n,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Te(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Te(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Te(r,"supportsPagination",!1),supportsPercentileStatistics:Te(r,"supportsPercentileStatistics",!1),supportsQuantization:Te(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Te(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Te(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:Te(i,"allowOthersToQuery",!0),supportsQueryGeometry:Te(e,"supportsReturningQueryGeometry",!1),supportsResultType:Te(r,"supportsQueryWithResultType",!1),supportsReturnMesh:!!sPe(e.infoFor3D),supportsSpatialAggregationStatistics:Te(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Te(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Te(e,"useStandardizedQueries",!1),supportsStatistics:Te(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:Te(r,"supportsTopFeaturesQuery",!1),supportsTrueCurve:Te(r,"supportsTrueCurve",!1),tileMaxRecordCount:zb(e,"tileMaxRecordCount",void 0)}}function bPe(e){const t=e.advancedQueryCapabilities,r=Te(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Te(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:Hw(t,"queryRelated")}}function _Pe(e){return{supportsCacheHint:Hw(e.advancedQueryCapabilities,"queryTopFilter")}}function wPe(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:Te(t,"supportsDateBin",!1),supportsFixedInterval:Te(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:Te(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Te(t,"supportsFixedBoundariesBin",!1),supportsStackBy:Te(t,"supportsStackBy",!1),supportsSplitBy:Te(t,"supportsSplitBy",!1),supportsSnapToData:Te(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:Te(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:Te(t,"supportsFirstDayOfWeek",!1),supportsNormalization:Te(t,"supportsNormalization",!1),supportedStatistics:dPe(t),supportedNormalizationTypes:hPe(t)}}function SPe(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Te(e,"allowGeometryUpdates",!0),supportsGlobalId:Te(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Te(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Te(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Te(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Te(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Te(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Te(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Te(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Te(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Te(r,"supportsAsyncApplyEdits",!1),zDefault:zb(e,"zDefault",void 0)}}function $7e(e){var t;return{operations:{supportsAppend:Te(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:Te(e,"supportsExportClip",!1),supportsExportFrameset:Te(e,"supportsExportFrameset",!1),supportsMensuration:Te(e,"supportsMensuration",!1),supportsUpdate:Te(e,"supportsUpdate",!1)}}}let su=class extends He.ClonableMixin(W){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=Ux(t[i]);return r}writeDomains(t,r){var n;if(!t)return;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};u([h({type:Number,json:{write:!0}})],su.prototype,"code",void 0),u([h({type:Object,json:{write:!0}})],su.prototype,"defaultValues",void 0),u([h({json:{write:!0}})],su.prototype,"domains",void 0),u([se("domains")],su.prototype,"readDomains",null),u([le("domains")],su.prototype,"writeDomains",null),u([h({type:String,json:{write:!0}})],su.prototype,"name",void 0),su=u([M("esri.layers.support.Subtype")],su);const TPe=su,EPe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ge.ofType(Va)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ge.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(r){return this.fieldsIndex.get(r)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:n,operations:s,editing:o}=r;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(M$(this.serviceDefinitionExpression)||M$(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(YNe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i!=null&&i.creatorField||i!=null&&i.editorField)&&(r!=null&&r.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(r,i){return tie(i,this.url)}readEditingInfo(r,i){const{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=U(r),{operations:n,editing:s}=i;return BT(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=s.supportsGeometryUpdate=!0),i)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(r,i){return Bre(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||BT(this))return!1;const{operations:i,editing:n}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:n}=r;return BT(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return qre(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const i=Ehe({layer:this,url:r,nonStandardUrlAllowed:!0,logger:ae.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,n,s){$he(this,r,null,i,s)}readVersion(r,i){return UNe(i)}};return u([h({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),u([h({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),u([h({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),u([se("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),u([h(YE("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),u([h({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),u([h({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),u([h({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),u([h({readOnly:!0,type:mIe})],t.prototype,"editFieldsInfo",void 0),u([h({readOnly:!0})],t.prototype,"editingInfo",void 0),u([se("editingInfo")],t.prototype,"readEditingInfo",null),u([h({readOnly:!0})],t.prototype,"effectiveCapabilities",null),u([h()],t.prototype,"effectiveEditingEnabled",null),u([h((()=>{const r=U(cIe),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),u([h()],t.prototype,"fieldsIndex",void 0),u([h({type:ePe,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:sr}}})],t.prototype,"floorInfo",void 0),u([h({type:Ut,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),u([h()],t.prototype,"gdbVersion",void 0),u([h({readOnly:!0,type:QNe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),u([h({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:xL.read}}}})],t.prototype,"geometryType",void 0),u([h({type:String})],t.prototype,"globalIdField",void 0),u([se("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),u([h({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),u([h({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),u([h({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),u([h({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),u([h({readOnly:!0,type:Nw})],t.prototype,"heightModelInfo",void 0),u([h({type:Date})],t.prototype,"historicMoment",void 0),u([h({type:ge.ofType(Va),readOnly:!0})],t.prototype,"indexes",void 0),u([h({readOnly:!0})],t.prototype,"isTable",void 0),u([se("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),u([h({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),u([h(fIe)],t.prototype,"maxScale",void 0),u([se("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),u([h(pIe)],t.prototype,"minScale",void 0),u([se("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),u([h({type:String})],t.prototype,"objectIdField",void 0),u([se("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),u([h(YE("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),u([h({type:[tPe],readOnly:!0})],t.prototype,"relationships",void 0),u([h({type:Boolean})],t.prototype,"returnM",void 0),u([h({type:Boolean})],t.prototype,"returnZ",void 0),u([h({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),u([h({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),u([se("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),u([h({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),u([h()],t.prototype,"sourceJSON",void 0),u([h({type:Ge,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),u([h({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),u([h({type:[TPe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),u([h({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),u([h(lIe)],t.prototype,"url",null),u([le("url")],t.prototype,"writeUrl",null),u([h({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),u([se("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=u([M("esri.layers.mixins.FeatureLayerBase")],t),t};let Em=class extends He.ClonableMixin(W){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};u([h({type:String,json:{write:!0}})],Em.prototype,"expression",void 0),u([h({type:String,json:{write:!0}})],Em.prototype,"title",void 0),u([h({type:String,json:{write:!0}})],Em.prototype,"returnType",void 0),Em=u([M("esri.layers.support.ExpressionInfo")],Em);const W5=Em;var ML;let ou=ML=class extends W{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new ML({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:U(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};u([h({type:Boolean,json:{write:!0}})],ou.prototype,"isAutoGenerated",void 0),u([h({type:String,json:{write:!0}})],ou.prototype,"name",void 0),u([h({type:String,json:{write:!0}})],ou.prototype,"alias",void 0),u([h({type:String,json:{write:!0}})],ou.prototype,"onStatisticField",void 0),u([h({type:W5,json:{write:!0}})],ou.prototype,"onStatisticExpression",void 0),u([h({type:String,json:{write:!0}})],ou.prototype,"statisticType",void 0),ou=ML=u([M("esri.layers.support.AggregateField")],ou);const Wd=ou;let Id=class extends W{constructor(){super(...arguments),this.type=null}};u([h({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Id.prototype,"type",void 0),Id=u([M("esri.layers.support.FeatureReduction")],Id);const Z5="__begin__",Y5="__end__",$Pe=new RegExp(Z5,"ig"),xPe=new RegExp(Y5,"ig"),sG=new RegExp("^"+Z5,"i"),oG=new RegExp(Y5+"$","i"),O$='"',APe=O$+" + ",MPe=" + "+O$;function OPe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function RPe(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function J5(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=OPe(e.labelExpression),t.type="conventional"),t}function CPe(e){const t=J5(e);switch(t.type){case"conventional":return OL(t.expression);case"arcade":return t.expression}return null}function IPe(e){const t=J5(e);switch(t.type){case"conventional":return PPe(t.expression);case"arcade":return rie(t.expression)}return null}function OL(e){let t;return e?(t=K$(e,r=>Z5+'$feature["'+r+'"]'+Y5),t=sG.test(t)?t.replace(sG,""):O$+t,t=oG.test(t)?t.replace(oG,""):t+O$,t=t.replaceAll($Pe,APe).replaceAll(xPe,MPe)):t='""',t}const NPe=/^\s*\{([^}]+)\}\s*$/i;function PPe(e){const t=e==null?void 0:e.match(NPe);return(t==null?void 0:t[1].trim())||null}const LPe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,kPe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,DPe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function rie(e){if(!e)return null;let t=LPe.exec(e)||kPe.exec(e);return t?t[1]||t[3]:(t=DPe.exec(e),t?t[2]:null)}var RL;let ed=RL=class extends W{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?OL(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=OL(this.value)),e!=null&&(t[r]=e)}clone(){return new RL({expression:this.expression,title:this.title,value:this.value})}};u([h({type:String,json:{write:{writerEnsuresNonNull:!0}}})],ed.prototype,"expression",void 0),u([se("expression",["expression","value"])],ed.prototype,"readExpression",null),u([le("expression")],ed.prototype,"writeExpression",null),u([h({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ed.prototype,"title",void 0),u([h({json:{read:!1,write:!1}})],ed.prototype,"value",void 0),ed=RL=u([M("esri.layers.support.LabelExpressionInfo")],ed);const iie=ed;var CL;const a2=new We({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function l2(e,t,r){return{enabled:!hI(r==null?void 0:r.layer)}}function nie(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function jPe(e){return(e==null?void 0:e.type)==="map-image"}function sie(e){var t,r;return!!jPe(e)&&!!((r=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&r.supportsArcadeExpressionForLabeling)}function FPe(e){return nie(e)||sie(e==null?void 0:e.layer)}let Er=CL=class extends W{static evaluateWhere(e,t){const r=(i,n,s)=>{switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=iNe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=RPe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=rie(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&nie(i))e=new iie({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return J5(this)}getLabelExpressionArcade(){return CPe(this)}getLabelExpressionSingleField(){return IPe(this)}hash(){return JSON.stringify(this)}clone(){return new CL({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:U(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:U(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};u([h({type:String,json:{write:!0}})],Er.prototype,"name",void 0),u([h({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:l2}}}}})],Er.prototype,"allowOverrun",void 0),u([h({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:l2}}}}})],Er.prototype,"deconflictionStrategy",void 0),u([h({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&(r==null?void 0:r.origin)==="service"&&sie(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Er.prototype,"labelExpression",void 0),u([se("labelExpression")],Er.prototype,"readLabelExpression",null),u([le("labelExpression")],Er.prototype,"writeLabelExpression",null),u([h({type:iie,json:{write:{overridePolicy:(e,t,r)=>FPe(r)?{allowNull:!0}:{enabled:!1}}}})],Er.prototype,"labelExpressionInfo",void 0),u([le("labelExpressionInfo")],Er.prototype,"writeLabelExpressionInfo",null),u([h({type:a2.apiValues,json:{type:a2.jsonValues,read:a2.read,write:a2.write}})],Er.prototype,"labelPlacement",void 0),u([h({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Er.prototype,"labelPosition",void 0),u([h({type:Number})],Er.prototype,"maxScale",void 0),u([le("maxScale")],Er.prototype,"writeMaxScale",null),u([h({type:Number})],Er.prototype,"minScale",void 0),u([le("minScale")],Er.prototype,"writeMinScale",null),u([h({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:l2}}}}})],Er.prototype,"repeatLabel",void 0),u([h({type:Number,cast:pt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:l2}}}}})],Er.prototype,"repeatLabelDistance",void 0),u([h({types:fSe,json:{origins:{"web-scene":{types:ySe,write:H7,default:null}},write:H7,default:null}})],Er.prototype,"symbol",void 0),u([h({type:Boolean,json:{write:!0}})],Er.prototype,"useCodedValues",void 0),u([h({type:String,json:{write:!0}})],Er.prototype,"where",void 0),Er=CL=u([M("esri.layers.support.LabelClass")],Er);const Ww=Er;var IL;let td=IL=class extends W{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new IL({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};u([h({type:String,json:{write:!0}})],td.prototype,"description",void 0),u([h({type:String,json:{write:!0}})],td.prototype,"label",void 0),u([h({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],td.prototype,"minValue",void 0),u([h({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],td.prototype,"maxValue",void 0),u([h(j5)],td.prototype,"symbol",void 0),td=IL=u([M("esri.renderers.support.ClassBreakInfo")],td);const R$=td;var NL;const oie="log",qT="percent-of-total",HT="field",u2=new We({esriNormalizeByLog:oie,esriNormalizeByPercentOfTotal:qT,esriNormalizeByField:HT}),UPe=Or(R$);let Gr=NL=class extends u0(Gu){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new R$;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(ae.getLogger(this).error(".field: field must be a string value"),null):yw(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&HT||r&&qT||null,t&&r&&ae.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==HT&&e!==qT||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new R$({minValue:e,maxValue:t,symbol:VK(r)}):UPe(U(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&ae.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(r={...r,arcade:await Vd()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void ae.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const n=await Vd(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new NL({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:U(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:U(this.visualVariables),legendOptions:U(this.legendOptions),authoringInfo:U(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.symbols.map(i=>i.collectRequiredFields(e,t)),Qi(e,t,this.valueExpression)];vn(e,t,this.field),vn(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s,timeZone:o}=t??{},{valueExpression:l}=this;let d=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const f=s.arcadeUtils;if(!d){const v=f.createSyntaxTree(l);d=f.createFunction(v),this._compiledValueExpression.compiledFunction=d}this._compiledValueExpression.valueExpression=l;const g=f.executeFunction(d,f.createExecContext(e,f.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),o));return this._getBreakIndexfromInfos(g)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===oie)n=Math.log(n)*Math.LOG10E;else if(i!==qT||s==null||isNaN(s)){if(i===HT&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};u([h(F5)],Gr.prototype,"backgroundFillSymbol",void 0),u([h({type:[R$],json:{write:{isRequired:!0}}})],Gr.prototype,"classBreakInfos",void 0),u([se("classBreakInfos")],Gr.prototype,"readClassBreakInfos",null),u([le("classBreakInfos")],Gr.prototype,"writeClassBreakInfos",null),u([h({type:String,json:{write:!0}})],Gr.prototype,"defaultLabel",void 0),u([h(cA)],Gr.prototype,"defaultSymbol",void 0),u([h({type:String,json:{write:!0}})],Gr.prototype,"field",void 0),u([ft("field")],Gr.prototype,"castField",null),u([h({type:Boolean})],Gr.prototype,"isMaxInclusive",void 0),u([h({type:U5,json:{write:!0}})],Gr.prototype,"legendOptions",void 0),u([h({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Gr.prototype,"minValue",null),u([h({type:String,json:{write:!0}})],Gr.prototype,"normalizationField",void 0),u([h({type:Number,json:{write:!0}})],Gr.prototype,"normalizationTotal",void 0),u([h({type:u2.apiValues,value:null,json:{type:u2.jsonValues,read:u2.read,write:u2.write}})],Gr.prototype,"normalizationType",null),u([Ee({classBreaks:"class-breaks"})],Gr.prototype,"type",void 0),u([h({type:String,json:{write:!0}})],Gr.prototype,"valueExpression",void 0),u([h({type:String,json:{write:!0}})],Gr.prototype,"valueExpressionTitle",void 0),Gr=NL=u([M("esri.renderers.ClassBreaksRenderer")],Gr);const aie=Gr,PL=-3,VPe=PL-1;var gu;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(gu||(gu={}));let zPe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Hp,this._users=new Hp}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){const i=this._db.get(t.id+r);return(i==null?void 0:i.size)??0}put(t,r,i,n,s){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,gu.ALL)),n>this._maxSize)return void this._notifyRemove(r,i,n,gu.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${r}`),void this._notifyRemove(r,i,0,gu.ALL);const l=1+Math.max(s,VPe)-PL;this._db.set(r,new GPe(i,n,l)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,r,i,n){r=t.id+r;const s=this._db.get(r);if(s&&s.entry===i){for(this._size-=s.size,t.size-=s.size;n>this._maxSize;){const o=this._notifyRemove(r,i,n,gu.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);n=o}s.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i==null?void 0:i.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,l)=>{const d=o.lifetime;i[d]=(i[d]||0)+o.size,this._users.forAll(f=>{const{id:g,name:v}=f;if(l.startsWith(g)){const b=r[v]||0;r[v]=b+o.size}})});const n={};this._users.forAll(o=>{const l=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const d=r[l]||0;r[l]=d,n[l]=Math.round(100*o.hitRate)+"%"}else n[l]="0%"});const s=Object.keys(r);s.sort((o,l)=>r[l]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const l=i[o];l&&(t["Priority "+(o+PL-1)]=Math.round(l/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((i,n)=>{n.startsWith(r)&&(this._size-=i.size,this._db.delete(n),this._notifyRemove(n,i.entry,i.size,gu.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,t.size,gu.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,n){let s;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const l=o[1](r,n,i);return typeof l=="number"&&(s=l),!0}return!1}),s}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const r=t??this;if(r.maxSize<0||r.size<=r.maxSize)return;const i=t==null?void 0:t.id;let n=!0;for(;n;){n=!1;for(const[s,o]of this._db)if(o.lifetime===0&&(!i||s.startsWith(i))){if(this._purgeItem(s,o,t),r.size<=.9*r.maxSize)return;n||(n=this._db.has(s))}}for(const[s,o]of this._db)if((!i||s.startsWith(i))&&(this._purgeItem(s,o,t),r.size<=.9*r.maxSize))return}_purgeItem(t,r,i=this._users.find(n=>t.startsWith(n.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const n=this._notifyRemove(t,r.entry,r.size,gu.SOME);n!=null&&n>0&&(this._size+=n,i&&(i.size+=n),r.lives=r.lifetime,r.size=n,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},GPe=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}},BPe=class{constructor(t,r){this._storage=new zPe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};function qPe(e){return"timeZone"in e}function HPe(e){return"timeZone"in e}function WPe(e){return"dateFieldsTimeZone"in e}const ZPe=new Map;let lie=class WT{static fromJSON(t){return new WT(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new WT(t.fields??[],lG(t))}static fromLayerJSON(t){return new WT(t.fields??[],lG(t))}constructor(t=[],r){var n;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const o=s==null?void 0:s.name,l=aG(o);if(o&&l){const d=Lp(o);this._fieldsMap.set(o,s),this._fieldsMap.set(d,s),this._normalizedFieldsMap.set(l,s),i.push(`${d}:${s.type}:${(n=this._timeZoneByFieldName)==null?void 0:n.get(o)}`),t1e(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):QX(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),Z9(s)||Y9(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)Z9(t)||Y9(t)||t.nullable||Bwe(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(Lp(t))??this._normalizedFieldsMap.get(aG(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(ae.getLogger("esri.layers.support.FieldsIndex").errorOnce(new V("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),jd):uie.has(r.type)?ff:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===ff?Zo.instance:r===jd?wi.utcInstance:fw(ZPe,r,()=>zn.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return r1e(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var r;return((r=this.get(t))==null?void 0:r.name)??void 0}toJSON(){return{fields:this.fields.map(t=>W.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Lp(e){return e.trim().toLowerCase()}function aG(e){var t;return((t=Rwe(e))==null?void 0:t.toLowerCase())??""}const uie=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function lG(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:n}=e,s=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l=WPe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?B2(e.dateFieldsTimeReference):null,d=n?qPe(n)?n.timeZone??l:n.dateFieldsTimeReference?B2(n.dateFieldsTimeReference):l??jd:null,f=i?HPe(i)?i.timeZone??l:i.timeReference?B2(i.timeReference):l:null,g=new Map([[Lp((n==null?void 0:n.creationDateField)??""),d],[Lp((n==null?void 0:n.editDateField)??""),d],[Lp(s),f],[Lp(o),f]]);for(const{name:v,type:b}of e.fields)if(uie.has(b))t.set(v,ff);else if(b!=="date"&&b!=="esriFieldTypeDate")t.set(v,null);else if(r)t.set(v,ff);else{const S=g.get(Lp(v??""))??l;t.set(v,S)}return t}var uG,cG,dG,hG,pG,fG,yG,mG,gG,vG,LL,kL,bG,_G,wG,SG,TG,EG,$G,xG,AG,MG,OG,RG,CG,IG,NG,PG,LG,kG,DG,jG,FG,UG,VG,zG,GG,BG,qG,HG,WG,ZG,YG,JG,XG,KG,QG,eB,tB,rB,iB,nB,sB,oB,aB,C$,lB,uB,cB,dB,hB,pB,fB;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(uG||(uG={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(cG||(cG={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(dG||(dG={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(hG||(hG={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(pG||(pG={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(fG||(fG={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(yG||(yG={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(mG||(mG={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(gG||(gG={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(vG||(vG={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(LL||(LL={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(kL||(kL={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(bG||(bG={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(_G||(_G={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(wG||(wG={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(SG||(SG={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(TG||(TG={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(EG||(EG={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}($G||($G={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(xG||(xG={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(AG||(AG={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(MG||(MG={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(OG||(OG={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(RG||(RG={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(CG||(CG={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(IG||(IG={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(NG||(NG={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(PG||(PG={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(LG||(LG={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(kG||(kG={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(DG||(DG={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(jG||(jG={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(FG||(FG={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"}(UG||(UG={})),function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"}(VG||(VG={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(zG||(zG={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(GG||(GG={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(BG||(BG={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(qG||(qG={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(HG||(HG={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(WG||(WG={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(ZG||(ZG={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(YG||(YG={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(JG||(JG={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(XG||(XG={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(KG||(KG={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(QG||(QG={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(eB||(eB={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(tB||(tB={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(rB||(rB={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(iB||(iB={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(nB||(nB={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(sB||(sB={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(oB||(oB={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(aB||(aB={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(C$||(C$={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(lB||(lB={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(uB||(uB={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(cB||(cB={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(dB||(dB={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(hB||(hB={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(pB||(pB={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(fB||(fB={}));const YPe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},DL={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:C$.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:C$.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:LL.Loop,repeatdelay:0,easing:kL.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function JPe(e){return typeof e=="function"}function I7e(e,t,r,i){return JPe(e)?e(t,r,i):e}function N7e(e){return[e.r,e.g,e.b,e.a]}const XPe=` /-,
`;function yB(e){let t=e.length;for(;t--;)if(!XPe.includes(e.charAt(t)))return!1;return!0}function P7e(e,t){const r=[];let i=0,n=-1;do if(n=e.indexOf("[",i),n>=i){if(n>i){const s=e.slice(i,n);r.push([s,null,yB(s)])}if(i=n+1,n=e.indexOf("]",i),n>=i){if(n>i){const s=t[e.slice(i,n)];s&&r.push([null,s,!1])}i=n+1}}while(n!==-1);if(i<e.length){const s=e.slice(i);r.push([s,null,yB(s)])}return r}function L7e(e,t,r,i){let n="",s=null;for(const o of t){const[l,d,f]=o;if(l)f?s=l:(s&&(n+=s,s=null),n+=l);else{let g=d;r!=null&&(g=cie(d,r));const v=e.attributes[g];v&&(s&&(n+=s,s=null),n+=v)}}return KPe(n,i)}function KPe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function k7e(e,t,r,i,n,s,o=!0){const l=t/n,d=r/s,f=Math.ceil(l/2),g=Math.ceil(d/2);for(let v=0;v<s;v++)for(let b=0;b<n;b++){const S=4*(b+(o?s-v-1:v)*n);let T=0,E=0,x=0,O=0,C=0,I=0,P=0;const k=(v+.5)*d;for(let D=Math.floor(v*d);D<(v+1)*d;D++){const H=Math.abs(k-(D+.5))/g,re=(b+.5)*l,K=H*H;for(let ie=Math.floor(b*l);ie<(b+1)*l;ie++){let fe=Math.abs(re-(ie+.5))/f;const ve=Math.sqrt(K+fe*fe);ve>=-1&&ve<=1&&(T=2*ve*ve*ve-3*ve*ve+1,T>0&&(fe=4*(ie+D*t),P+=T*e[fe+3],x+=T,e[fe+3]<255&&(T=T*e[fe+3]/250),O+=T*e[fe],C+=T*e[fe+1],I+=T*e[fe+2],E+=T))}}i[S]=O/E,i[S+1]=C/E,i[S+2]=I/E,i[S+3]=P/x}}function QPe(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function D7e(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function j7e(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function F7e(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function U7e(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function eLe(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const V7e=(e,t=0)=>e==null||isNaN(e)?t:e,z7e=(e,t)=>e??t,G7e=(e,t)=>e??t,B7e=e=>e.tintColor?QPe(e.tintColor):[255,255,255,1],q7e=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function H7e(){return ne(()=>import("./geometryEngineJSON-Bvf5zUh7.js").then(e=>e.g),__vite__mapDeps([11,12,3,13]))}function W7e(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Z7e(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Y7e(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function J7e(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function mB(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=mB(t);if(r!=null)return r}break;case"CIMTextSymbol":return mB(e.symbol);case"CIMSolidFill":return e.color}return null}function gB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=gB(r);if(i!=null)return i}break}case"CIMTextSymbol":return gB(e.symbol);case"CIMSolidStroke":return e.color}}function vB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=vB(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return vB(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function X7e(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function K7e(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Q7e(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const eGe=e=>e.includes("data:image/svg+xml");function tGe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function X5(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function rGe(e,t,r,i,n,s,o=!0){const{infos:l}=s;let d=1,f=0,g=0,v=0,b=1;for(const{absoluteAnchorPoint:E,offsetX:x,offsetY:O,rotation:C,size:I,frameHeight:P,rotateClockWise:k,scaleSymbolsProportionally:D}of l)b=E?1:d,g=_B(x,O,f,b,g),v=bB(x,O,f,b,v),P&&(D||o)&&(d*=I/P),f=wB(C,k,f);const S=_B(i,n,f,b,g),T=bB(i,n,f,b,v);return{size:e*d,rotation:wB(t,r,f),offsetX:S,offsetY:T}}function tLe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>tLe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function rLe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...YPe[t]];const r=DL[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function iLe(e){return e.split(" ").map(t=>Number(t))}function nLe(e){return typeof e=="string"?iLe(e):e}function iGe(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=nLe(e.dashTemplate)),e}function jL(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return jL(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return jL(r.symbol)}}return"Normal"}function nGe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??DL.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&eLe(r.markerPlacement)){const i=r.size??DL.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function cie(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function sGe(e){return e.map(t=>({...t,propertyName:X5(t.propertyName)}))}function oGe(e){const t={};for(const r in e){const i=e[r];t[X5(r)]=i}return t}function bB(e,t,r,i,n){const s=r*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*e+o*t)*i+n}return t*i+n}function _B(e,t,r,i,n){const s=r*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*i+n:e*i+n}function wB(e,t,r){return t?r-e:r+e}function aGe(e,t,r){const i=r==="Color"||r==="TintColor"||r==="ToColor",n=r==="Rotation"||r==="Angle"||r==="ToRotation";let s=t[X5(r)];if(s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180)),s==null&&(s=rLe(t.type,r.toLowerCase()),s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:n&&(s*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const l=o[r];l==null||(typeof l=="string"||typeof l=="number"||Array.isArray(l)?(s=l,s!=null&&(i?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:n&&(s*=Math.PI/180))):(s={valueExpressionInfo:l,defaultValue:s},s!=null&&(i?s={type:"Process",op:"ArcadeColor",value:s}:n&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return s}function lGe(e,t){return Math.max(Math.min((e??t)/100,1),0)}const SB="esri.renderers.support.DictionaryLoader",sLe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let die=class{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new BPe(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){var v;let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(b){if(Ni(b))return this._dictionaryPromise=null,null}const n=(v=this._dictionaryVersion)==null?void 0:v.greaterEqual(4,0),s={};if(this.fieldMap)for(const b of this._symbolFields){const S=cie(this.fieldMap[b],this._fieldIndex);if(S){const T=t.attributes[S];s[b]=n?T:T!=null?""+t.attributes[S]:""}else s[b]=""}let o=null;try{o=i==null?void 0:i(s,r)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const l=o.split(";"),d=[],f=[];for(let b=0;b<l.length;b++){const S=l[b];if(S){if(S.includes("po:")){const T=S.slice(3).split("|");if(T.length===3){const E=T[0],x=T[1];let O=T[2];const C="countrylabel";if(E===C&&x==="TextString"){if(this.fieldMap!=null){let I=this.fieldMap[C];I==null&&(I=C,this.fieldMap[I]=I),t.attributes[I]=O}continue}if(x==="DashTemplate")O=O.split(" ").map(I=>Number(I));else if(x==="Color"){const I=new De(O).toRgba();O=[I[0],I[1],I[2],255*I[3]]}else O=Number(O);f.push({primitiveName:E,propertyName:x,value:O,defaultValue:null})}}else if(S.includes("|")){for(const T of S.split("|"))if(this._itemNames.has(T)){d.push(T);break}}else if(this._itemNames.has(S))d.push(S);else if(b===0){d.length=0;let T="Invalid_P";t.geometry!=null&&(Yp(t.geometry)?T="Invalid_A":Jk(t.geometry)&&(T="Invalid_L")),d.push(T);break}}}const g=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,d,f,g,r)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void ae.getLogger(SB).error("no valid URL!");const r=mt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:i}]=await Promise.all([r,Vd()]);if(!i)throw this._dictionaryPromise=null,new V("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:s,expression:o,itemsNames:l}=i,d=o;let f=!1;s&&(this._dictionaryVersion=Pte.parse(s),f=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(l),this._symbolFields=n.symbol;const g={};if(this.config){const S=this.config;for(const T in S)g[T]=S[T]}if(n.configuration)for(const S of n.configuration)g.hasOwnProperty(S.name)||(g[S.name]=S.value);const v=[];if(t!=null&&t.fields&&this.fieldMap)for(const S in this.fieldMap){const T=this.fieldMap[S],E=t.fields.filter(x=>x.name.toLowerCase()===(T==null?void 0:T.toLowerCase()));E.length>0&&v.push({...E[0],type:f?E[0].type:"esriFieldTypeString"})}v.length>0&&(this._fieldIndex=new lie(v));const b=Awe(d,t!=null?t.spatialReference:null,v,g).then(S=>{const T={scale:0};return(E,x)=>{if(S==null)return null;const O=S.repurposeFeature({geometry:null,attributes:E});return T.scale=x!=null?x.scale??void 0:void 0,S.evaluate({$feature:O,$view:T},S.services)}}).catch(S=>(ae.getLogger(SB).error("Creating dictionary expression failed:",S),null));return this._dictionaryPromise=b,b}async _cimPartsToCIMSymbol(t,r,i,n,s){const o=new Array(r.length);for(let f=0;f<r.length;f++)o[f]=this._getSymbolPart(r[f],s);let l=await Promise.all(o);const d=this.fieldMap;if(d&&l.length>0){const{OverrideHelper:f}=await ne(()=>import("./OverrideHelper-DzGsjn-D.js").then(g=>g.O),__vite__mapDeps([193,109,6]));l=U(l);for(const g of l)f.applyDictionaryTextOverrides(g,t,d,this._fieldIndex,jL(g))}return new th({data:oLe(l,i,n)})}async _getSymbolPart(t,r){const i=this._symbolCache.get(t);if(i)return i;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),s=mt(n,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,s),s.finally(()=>this._ongoingRequests.delete(t));try{const o=await s;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function oLe(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const n of e){const s=n;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);i.symbolLayers.unshift(...s.symbolLayers)}}return r&&(i.callout=sLe),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var FL;let Vo=FL=class extends u0(Gu){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new die(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new FL({config:U(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:U(this.fieldMap),url:U(this.url),visualVariables:U(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Qi(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};u([h({type:die})],Vo.prototype,"_loader",null),u([h({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Vo.prototype,"config",void 0),u([h({type:Object,json:{write:!0}})],Vo.prototype,"fieldMap",void 0),u([h({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Vo.prototype,"scaleExpression",void 0),u([le("scaleExpression")],Vo.prototype,"writeData",null),u([h({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Vo.prototype,"scaleExpressionTitle",void 0),u([h({type:String,json:{write:!0}})],Vo.prototype,"url",void 0),u([le("visualVariables")],Vo.prototype,"writeVisualVariables",null),Vo=FL=u([M("esri.renderers.DictionaryRenderer")],Vo);const aLe=Vo;var UL;let au=UL=class extends W{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(ae.getLogger(this).error(".field: field must be a string value"),null):yw(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new UL({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([h({type:De,json:{type:[Number],write:!0}})],au.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],au.prototype,"field",void 0),u([ft("field")],au.prototype,"castField",null),u([h({type:String,json:{write:!0}})],au.prototype,"label",void 0),u([h({type:String,json:{write:!0}})],au.prototype,"valueExpression",void 0),u([h({type:String,json:{write:!0}})],au.prototype,"valueExpressionTitle",void 0),au=UL=u([M("esri.renderers.support.AttributeColorInfo")],au);const hie=au;var VL;let ZT=VL=class extends W{constructor(){super(...arguments),this.unit=null}clone(){return new VL({unit:this.unit})}};u([h({type:String,json:{write:!0}})],ZT.prototype,"unit",void 0),ZT=VL=u([M("esri.renderers.support.DotDensityLegendOptions")],ZT);const lLe=ZT;var zL;let Mn=zL=class extends u0(Gu){constructor(e){super(e),this.attributes=null,this.backgroundColor=new De([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new bs,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Rf({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,r)=>t+r.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new zL({attributes:U(this.attributes),backgroundColor:U(this.backgroundColor),dotBlendingEnabled:U(this.dotBlendingEnabled),dotShape:U(this.dotShape),dotSize:U(this.dotSize),dotValue:U(this.dotValue),legendOptions:U(this.legendOptions),outline:U(this.outline),referenceScale:U(this.referenceScale),seed:U(this.seed),visualVariables:U(this.visualVariables),authoringInfo:U(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(r=>r.field||r.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await Qi(e,t,r.valueExpression),r.field&&e.add(r.field)}};u([h({type:[hie],json:{write:!0}})],Mn.prototype,"attributes",void 0),u([h({type:De,json:{write:!0}})],Mn.prototype,"backgroundColor",void 0),u([h({type:Boolean,json:{write:!0}})],Mn.prototype,"dotBlendingEnabled",void 0),u([h({type:String,json:{write:!1}})],Mn.prototype,"dotShape",void 0),u([h({type:Number,json:{write:!0}})],Mn.prototype,"dotSize",void 0),u([h({type:lLe,json:{write:!0}})],Mn.prototype,"legendOptions",void 0),u([h({type:bs,json:{default:null,write:!0}})],Mn.prototype,"outline",void 0),u([h({type:Number,json:{write:!0}})],Mn.prototype,"dotValue",void 0),u([h({type:Number,json:{write:!0}})],Mn.prototype,"referenceScale",void 0),u([h({type:Number,json:{write:!0}})],Mn.prototype,"seed",void 0),u([Ee({dotDensity:"dot-density"})],Mn.prototype,"type",void 0),Mn=zL=u([M("esri.renderers.DotDensityRenderer")],Mn);const uLe=Mn;var GL;let Gb=GL=class extends W{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new GL({color:this.color&&this.color.clone(),ratio:this.ratio})}};u([h({type:De,json:{type:[at],default:null,write:{isRequired:!0}}})],Gb.prototype,"color",void 0),u([h({type:Number,json:{write:{isRequired:!0}}})],Gb.prototype,"ratio",void 0),Gb=GL=u([M("esri.renderers.support.HeatmapColorStop")],Gb);const YT=Gb;let $m=class extends He.ClonableMixin(W){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};u([h({type:String,json:{write:!0}})],$m.prototype,"minLabel",void 0),u([h({type:String,json:{write:!0}})],$m.prototype,"maxLabel",void 0),u([h({type:String,json:{write:!0}})],$m.prototype,"title",void 0),$m=u([M("esri.renderers.support.HeatmapLegendOptions")],$m);function cLe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function dLe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function hLe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function pLe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function pie(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function fie(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function yie(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function fLe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function yLe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function mLe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function gLe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function vLe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function bLe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function _Le(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function mie(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function gie(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function vie(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function bie(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function wLe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function SLe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function TLe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function ELe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function _ie(e,t,r,i){const n=t[0],s=t[1],o=t[2],l=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=l+i*(r[3]-l),e}function $Le(e,t=1){const r=Rx;let i,n,s,o,l,d;do i=2*r()-1,n=2*r()-1,l=i*i+n*n;while(l>=1);do s=2*r()-1,o=2*r()-1,d=s*s+o*o;while(d>=1);const f=Math.sqrt((1-l)/d);return e[0]=t*i,e[1]=t*n,e[2]=t*s*f,e[3]=t*o*f,e}function xLe(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function ALe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],l=r[1],d=r[2],f=r[3],g=f*i+l*s-d*n,v=f*n+d*i-o*s,b=f*s+o*n-l*i,S=-o*i-l*n-d*s;return e[0]=g*f+S*-o+v*-d-b*-l,e[1]=v*f+S*-l+b*-o-g*-d,e[2]=b*f+S*-d+g*-l-v*-o,e[3]=t[3],e}function MLe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function OLe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function RLe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],l=t[1],d=t[2],f=t[3],g=gn();return Math.abs(r-o)<=g*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=g*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-d)<=g*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(s-f)<=g*Math.max(1,Math.abs(s),Math.abs(f))}const CLe=pie,ILe=fie,NLe=yie,PLe=mie,LLe=gie,kLe=vie,DLe=bie;Object.freeze(Object.defineProperty({__proto__:null,add:pLe,ceil:fLe,copy:cLe,copyVec3:dLe,dist:PLe,distance:mie,div:NLe,divide:yie,dot:ELe,equals:RLe,exactEquals:OLe,floor:yLe,inverse:SLe,len:kLe,length:vie,lerp:_ie,max:gLe,min:mLe,mul:ILe,multiply:fie,negate:wLe,normalize:TLe,random:$Le,round:vLe,scale:bLe,scaleAndAdd:_Le,set:hLe,sqrDist:LLe,sqrLen:DLe,squaredDistance:gie,squaredLength:bie,str:MLe,sub:CLe,subtract:pie,transformMat4:xLe,transformQuat:ALe},Symbol.toStringTag,{value:"Module"}));function hA(){return[0,0,0,0]}function jLe(e){return[e[0],e[1],e[2],e[3]]}function c0(e,t,r,i){return[e,t,r,i]}function FLe(e,t,r,i){return[e,t,r,i]}function ULe(e,t=hA()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function VLe(e,t){return new Float64Array(e,t,4)}function wie(){return hA()}function Sie(){return c0(1,1,1,1)}function Tie(){return c0(1,0,0,0)}function Eie(){return c0(0,1,0,0)}function $ie(){return c0(0,0,1,0)}function xie(){return c0(0,0,0,1)}const zLe=wie(),GLe=Sie(),BLe=Tie(),qLe=Eie(),HLe=$ie(),WLe=xie();Object.freeze(Object.defineProperty({__proto__:null,ONES:GLe,UNIT_W:WLe,UNIT_X:BLe,UNIT_Y:qLe,UNIT_Z:HLe,ZEROS:zLe,clone:jLe,create:hA,createView:VLe,freeze:FLe,fromArray:ULe,fromValues:c0,ones:Sie,unitW:xie,unitX:Tie,unitY:Eie,unitZ:$ie,zeros:wie},Symbol.toStringTag,{value:"Module"}));const K5=2.4;function ZLe(e){return uo(e*K5)}function YLe(e){return Dbe(e)/K5}function JLe(e,t,r,i){let{color:n,ratio:s}=t,{color:o,ratio:l}=r;l===s&&(l===1?s-=1e-6:l+=1e-6);const d=so((i-s)/(l-s),0,1);_ie(e,n.toArray(),o.toArray(),d)}function dGe(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:l})=>l>=0&&l<=1).sort((l,d)=>l.ratio-d.ratio).map(({color:l,ratio:d})=>({color:l,ratio:Math.max(d,.001)})),e.length<1)return r;let i=e[0],n=e[0],s=1;const o=hA();for(let l=0;l<512;l++){const d=(l+.5)/512;for(;d>n.ratio&&s<e.length;)i=n,n=e[s++];JLe(o,i,n,d),r.set(o,4*l)}return r}function hGe(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function pGe(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var BL;function TB(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...l}=e;return l}}return e}let mi=BL=class extends Gu{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new YT({ratio:0,color:new De("rgba(255, 140, 0, 0)")}),new YT({ratio:.75,color:new De("rgba(255, 140, 0, 1)")}),new YT({ratio:.9,color:new De("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return TB(e)}get blurRadius(){return YLe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",ZLe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(K5**2*this.blurRadius**4)}read(e,t){e=TB(e),super.read(e,t)}getSymbol(){return new cl}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&vn(e,t,r),i&&typeof i=="string"&&await Qi(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new BL({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:U(this.colorStops),field:this.field,legendOptions:U(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};u([h({type:N5,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"authoringInfo",void 0),u([h({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],mi.prototype,"blurRadius",null),u([h({type:[YT],json:{write:{isRequired:!0}}})],mi.prototype,"colorStops",void 0),u([h({type:String,json:{write:!0}})],mi.prototype,"field",void 0),u([h({type:$m,json:{write:!0}})],mi.prototype,"legendOptions",void 0),u([h({type:Number,json:{write:!0}})],mi.prototype,"maxDensity",void 0),u([h({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],mi.prototype,"maxPixelIntensity",null),u([h({type:Number,json:{write:!0}})],mi.prototype,"minDensity",void 0),u([h({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],mi.prototype,"minPixelIntensity",null),u([h({type:Number,cast:pt,json:{write:!0}})],mi.prototype,"radius",void 0),u([h({type:Number,range:{min:0},json:{default:0,write:!0}})],mi.prototype,"referenceScale",void 0),u([Ee({heatmap:"heatmap"})],mi.prototype,"type",void 0),u([h({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],mi.prototype,"valueExpression",void 0),u([h({type:String})],mi.prototype,"valueExpressionTitle",void 0),u([h({readOnly:!0})],mi.prototype,"_pixelIntensityToDensity",null),mi=BL=u([M("esri.renderers.HeatmapRenderer")],mi);const Aie=mi;let kp=class extends He.ClonableMixin(W){constructor(){super(...arguments),this.color=new De([0,0,0,0]),this.label=null,this.threshold=0}};u([h({type:De,json:{write:!0}})],kp.prototype,"color",void 0),u([h({type:String,json:{write:!0}})],kp.prototype,"label",void 0),u([h({type:Number,range:{min:0,max:1},json:{write:!0}})],kp.prototype,"threshold",void 0),kp=u([M("esri.renderers.support.OthersCategory")],kp);const XLe={base:l0,key:"type",typeMap:{size:uA,opacity:P5}};let On=class extends u0(He.ClonableMixin(Gu)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new De([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new kp,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new cl({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Lu)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((r,i)=>r+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await Qi(t,r,i.valueExpression),i.field&&t.add(i.field)}};u([h({type:[hie],json:{write:!0}})],On.prototype,"attributes",void 0),u([h(F5)],On.prototype,"backgroundFillSymbol",void 0),u([h({type:De,json:{write:!0}})],On.prototype,"defaultColor",void 0),u([h({type:String,json:{write:!0}})],On.prototype,"defaultLabel",void 0),u([h({type:Number,range:{min:0,max:1},json:{write:!0}})],On.prototype,"holePercentage",void 0),u([h({type:kp,json:{write:!0}})],On.prototype,"othersCategory",void 0),u([h({type:U5,json:{write:!0}})],On.prototype,"legendOptions",void 0),u([h({type:bs,json:{default:null,write:!0}})],On.prototype,"outline",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],On.prototype,"size",void 0),u([Ee({pieChart:"pie-chart"})],On.prototype,"type",void 0),u([h({types:[XLe]})],On.prototype,"visualVariables",void 0),On=u([M("esri.renderers.PieChartRenderer")],On);const KLe=On,Zw={key:"type",base:Gu,typeMap:{heatmap:Aie,simple:Iu,"unique-value":V5,"class-breaks":aie,"dot-density":uLe,dictionary:aLe,"pie-chart":KLe},errorContext:"renderer"},QLe={key:"type",base:Gu,typeMap:{simple:Iu,"unique-value":V5,"class-breaks":aie,heatmap:Aie},errorContext:"renderer",validate:eke};function eke(e){switch(e.type){case"simple":return tke(e);case"unique-value":return rke(e);case"class-breaks":return ike(e);case"heatmap":return e}}function tke(e){if(e.symbol)return e;ae.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function rke(e){const t=e.uniqueValueInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||ae.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=r),e}function ike(e){const t=e.classBreakInfos,r=t==null?void 0:t.filter(({symbol:i,label:n},s)=>(i||ae.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${n}) without a symbol from web scene.`),!!i));return(r==null?void 0:r.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=r),e}function mGe(e,t){return ow(e,null,t)}const nke=zg({types:Zw});function ow(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r!=null&&r.messages&&r.messages.push(new no("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):nke(e,t,r):null}var qL;let Bi=qL=class extends Id{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=pt("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Nr(r,i,t)}readRenderer(e,t,r){var n;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return i?ow(i,t,r)??void 0:B5(t,r)}clone(){return new qL({fields:U(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:U(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:U(this.popupTemplate),renderer:U(this.renderer),binType:U(this.binType),size:this.size})}};u([Ee({binning:"binning"})],Bi.prototype,"type",void 0),u([Ee({geohash:"geohash",square:"square"}),h({type:["geohash","square"]})],Bi.prototype,"binType",void 0),u([h({type:Number,json:{write:!0}})],Bi.prototype,"fixedBinLevel",void 0),u([h({type:[Ww],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Bi.prototype,"labelingInfo",void 0),u([h(sA)],Bi.prototype,"labelsVisible",void 0),u([h({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Bi.prototype,"maxScale",void 0),u([h(nA)],Bi.prototype,"popupEnabled",void 0),u([h({type:r0,json:{name:"popupInfo",write:!0}})],Bi.prototype,"popupTemplate",void 0),u([h({cast:e=>e==="auto"?e:pn(pt(e))})],Bi.prototype,"size",void 0),u([h({type:[Wd],json:{write:!0}})],Bi.prototype,"fields",void 0),u([le("fields")],Bi.prototype,"writeFields",null),u([h({types:Zw,json:{write:{target:"drawingInfo.renderer"}}})],Bi.prototype,"renderer",void 0),u([se("renderer",["drawingInfo.renderer"])],Bi.prototype,"readRenderer",null),Bi=qL=u([M("esri.layers.support.FeatureReductionBinning")],Bi);const Mie=Bi;var HL;function EB(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let Br=HL=class extends W{constructor(e){super(e),this.type="cluster",this.clusterRadius=pt("80px"),this.clusterMinSize=pt("12px"),this.clusterMaxSize=pt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;return(s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated?null:i?EB(i)?null:ow(i,t,r)??void 0:B5(t,r)}readSymbol(e,t,r){var n,s;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if((s=i==null?void 0:i.authoringInfo)!=null&&s.isAutoGenerated)return null;if(i&&EB(i)){const o=ow(i,t,r);return o==null?void 0:o.symbol}return null}writeSymbol(e,t,r,i){var s,o;const n=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||n){const l=new Iu({symbol:e});t.drawingInfo={renderer:l.write({},i)}}}writeFields(e,t,r){const i=e.filter(n=>n.statisticType!=="avg_angle").map(n=>n.toJSON());Nr(r,i,t)}readFields(e,t,r){return e.filter(i=>!i.isAutoGenerated).map(i=>Wd.fromJSON(i))}clone(){return new HL({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:U(this.labelingInfo),labelsVisible:this.labelsVisible,fields:U(this.fields),maxScale:this.maxScale,renderer:U(this.renderer),symbol:U(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:U(this.popupTemplate)})}};u([h({type:["cluster"],readOnly:!0,json:{write:!0}})],Br.prototype,"type",void 0),u([h({cast:e=>e==="auto"?e:pn(pt(e)),json:{write:!0}})],Br.prototype,"clusterRadius",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],Br.prototype,"clusterMinSize",void 0),u([h({type:Number,cast:pt,json:{write:!0}})],Br.prototype,"clusterMaxSize",void 0),u([h({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Br.prototype,"maxScale",void 0),u([h(nA)],Br.prototype,"popupEnabled",void 0),u([h({type:r0,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Br.prototype,"popupTemplate",void 0),u([h({types:Zw,json:{write:{target:"drawingInfo.renderer"}}})],Br.prototype,"renderer",void 0),u([se("renderer",["drawingInfo.renderer"])],Br.prototype,"readRenderer",null),u([h({types:hSe})],Br.prototype,"symbol",void 0),u([se("symbol",["drawingInfo.renderer"])],Br.prototype,"readSymbol",null),u([le("symbol")],Br.prototype,"writeSymbol",null),u([h({type:[Ww],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Br.prototype,"labelingInfo",void 0),u([h(sA)],Br.prototype,"labelsVisible",void 0),u([h({type:[Wd],json:{write:!0}})],Br.prototype,"fields",void 0),u([le("fields")],Br.prototype,"writeFields",null),u([se("fields")],Br.prototype,"readFields",null),Br=HL=u([M("esri.layers.support.FeatureReductionCluster")],Br);const Oie=Br;var WL;let JT=WL=class extends Id{constructor(e){super(e),this.type="selection"}clone(){return new WL}};u([h({type:["selection"]})],JT.prototype,"type",void 0),JT=WL=u([M("esri.layers.support.FeatureReductionSelection")],JT);const $B=JT,xB={key:"type",base:Id,typeMap:{cluster:Oie,binning:Mie}},ske={types:{key:"type",base:Id,typeMap:{selection:$B,cluster:Oie,binning:Mie}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:xB},"portal-item":{types:xB},"web-scene":{types:{key:"type",base:Id,typeMap:{selection:$B}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:sr}}}}},Ny={Base64:0,Hex:1,String:2,Raw:3},ug=8,Rie=(1<<ug)-1;function Ed(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function oke(e){const t=[];for(let r=0,i=e.length*ug;r<i;r+=ug)t[r>>5]|=(e.charCodeAt(r/ug)&Rie)<<r%32;return t}function ake(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=ug)t.push(String.fromCharCode(e[r>>5]>>>r%32&Rie));return t.join("")}function lke(e){const t="0123456789abcdef",r=[];for(let i=0,n=4*e.length;i<n;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function uke(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let n=0,s=4*e.length;n<s;n+=3){const o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255;for(let l=0;l<4;l++)8*n+6*l>32*e.length?i.push(t):i.push(r.charAt(o>>6*(3-l)&63))}return i.join("")}function cke(e,t){return e<<t|e>>>32-t}function pA(e,t,r,i,n,s){return Ed(cke(Ed(Ed(t,e),Ed(i,s)),n),r)}function Di(e,t,r,i,n,s,o){return pA(t&r|~t&i,e,t,n,s,o)}function ji(e,t,r,i,n,s,o){return pA(t&i|r&~i,e,t,n,s,o)}function Fi(e,t,r,i,n,s,o){return pA(t^r^i,e,t,n,s,o)}function Ui(e,t,r,i,n,s,o){return pA(r^(t|~i),e,t,n,s,o)}function dke(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,n=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const l=r,d=i,f=n,g=s;r=Di(r,i,n,s,e[o],7,-680876936),s=Di(s,r,i,n,e[o+1],12,-389564586),n=Di(n,s,r,i,e[o+2],17,606105819),i=Di(i,n,s,r,e[o+3],22,-1044525330),r=Di(r,i,n,s,e[o+4],7,-176418897),s=Di(s,r,i,n,e[o+5],12,1200080426),n=Di(n,s,r,i,e[o+6],17,-1473231341),i=Di(i,n,s,r,e[o+7],22,-45705983),r=Di(r,i,n,s,e[o+8],7,1770035416),s=Di(s,r,i,n,e[o+9],12,-1958414417),n=Di(n,s,r,i,e[o+10],17,-42063),i=Di(i,n,s,r,e[o+11],22,-1990404162),r=Di(r,i,n,s,e[o+12],7,1804603682),s=Di(s,r,i,n,e[o+13],12,-40341101),n=Di(n,s,r,i,e[o+14],17,-1502002290),i=Di(i,n,s,r,e[o+15],22,1236535329),r=ji(r,i,n,s,e[o+1],5,-165796510),s=ji(s,r,i,n,e[o+6],9,-1069501632),n=ji(n,s,r,i,e[o+11],14,643717713),i=ji(i,n,s,r,e[o],20,-373897302),r=ji(r,i,n,s,e[o+5],5,-701558691),s=ji(s,r,i,n,e[o+10],9,38016083),n=ji(n,s,r,i,e[o+15],14,-660478335),i=ji(i,n,s,r,e[o+4],20,-405537848),r=ji(r,i,n,s,e[o+9],5,568446438),s=ji(s,r,i,n,e[o+14],9,-1019803690),n=ji(n,s,r,i,e[o+3],14,-187363961),i=ji(i,n,s,r,e[o+8],20,1163531501),r=ji(r,i,n,s,e[o+13],5,-1444681467),s=ji(s,r,i,n,e[o+2],9,-51403784),n=ji(n,s,r,i,e[o+7],14,1735328473),i=ji(i,n,s,r,e[o+12],20,-1926607734),r=Fi(r,i,n,s,e[o+5],4,-378558),s=Fi(s,r,i,n,e[o+8],11,-2022574463),n=Fi(n,s,r,i,e[o+11],16,1839030562),i=Fi(i,n,s,r,e[o+14],23,-35309556),r=Fi(r,i,n,s,e[o+1],4,-1530992060),s=Fi(s,r,i,n,e[o+4],11,1272893353),n=Fi(n,s,r,i,e[o+7],16,-155497632),i=Fi(i,n,s,r,e[o+10],23,-1094730640),r=Fi(r,i,n,s,e[o+13],4,681279174),s=Fi(s,r,i,n,e[o],11,-358537222),n=Fi(n,s,r,i,e[o+3],16,-722521979),i=Fi(i,n,s,r,e[o+6],23,76029189),r=Fi(r,i,n,s,e[o+9],4,-640364487),s=Fi(s,r,i,n,e[o+12],11,-421815835),n=Fi(n,s,r,i,e[o+15],16,530742520),i=Fi(i,n,s,r,e[o+2],23,-995338651),r=Ui(r,i,n,s,e[o],6,-198630844),s=Ui(s,r,i,n,e[o+7],10,1126891415),n=Ui(n,s,r,i,e[o+14],15,-1416354905),i=Ui(i,n,s,r,e[o+5],21,-57434055),r=Ui(r,i,n,s,e[o+12],6,1700485571),s=Ui(s,r,i,n,e[o+3],10,-1894986606),n=Ui(n,s,r,i,e[o+10],15,-1051523),i=Ui(i,n,s,r,e[o+1],21,-2054922799),r=Ui(r,i,n,s,e[o+8],6,1873313359),s=Ui(s,r,i,n,e[o+15],10,-30611744),n=Ui(n,s,r,i,e[o+6],15,-1560198380),i=Ui(i,n,s,r,e[o+13],21,1309151649),r=Ui(r,i,n,s,e[o+4],6,-145523070),s=Ui(s,r,i,n,e[o+11],10,-1120210379),n=Ui(n,s,r,i,e[o+2],15,718787259),i=Ui(i,n,s,r,e[o+9],21,-343485551),r=Ed(r,l),i=Ed(i,d),n=Ed(n,f),s=Ed(s,g)}return[r,i,n,s]}function Cie(e,t=Ny.Hex){const r=t||Ny.Base64,i=dke(oke(e),e.length*ug);switch(r){case Ny.Raw:return i;case Ny.Hex:return lke(i);case Ny.String:return ake(i);case Ny.Base64:return uke(i)}}const hke=()=>ae.getLogger("esri.views.2d.layers.support.clusterUtils");Z.add("esri-cluster-arcade-enabled",!0);const pke=Z("esri-cluster-arcade-enabled"),fke=new Set(["simple-line","simple-fill","picture-fill"]);function AB(e,t){let r=t.clone();if(!yke(r))return r;if(t.symbols.some(i=>fke.has(i.type))&&(r=new Iu({symbol:new cl})),r.authoringInfo||(r.authoringInfo=new N5),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(n=>n.valueExpression!=="$view.scale");i.forEach(n=>{n.type==="rotation"?n.field?n.field=zh(e,n.field,"avg_angle","number"):n.valueExpression&&(n.field=Cv(e,n.valueExpression,"avg_angle","number"),n.valueExpression=null):n.normalizationField?(n.field=zh(e,n.field,"avg_norm","number",n.normalizationField),n.normalizationField=null):n.field?n.field=zh(e,n.field,"avg","number"):n.valueExpression&&(n.field=Cv(e,n.valueExpression,"avg","number"),n.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=zh(e,i.field,"sum","number"):i.valueExpression&&(i.field=Cv(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=zh(e,r.field,"mode","string"):r.valueExpression&&(r.field=Cv(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=zh(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=zh(e,r.field,"avg","number"):r.valueExpression&&(r.field=Cv(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const yke=e=>{const t=r=>hke().error(new V("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!pke){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function mke(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,n="field",s=t.toLowerCase()+",norm:"+n+","+i.toLowerCase();return"cluster_avg_"+Cie(s)}}}function Cv(e,t,r,i){const n=Cie(t),s=r==="mode"?`cluster_type_${n}`:r==="sum"?`cluster_sum_${n}`:`cluster_avg_${n}`;return e.some(o=>o.name===s)||e.push(new Wd({name:s,isAutoGenerated:!0,onStatisticExpression:new W5({expression:t,returnType:i}),statisticType:r})),s}function zh(e,t,r,i,n){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=mke(r,t,n);return e.some(o=>o.name===s)||(r==="avg_norm"?e.push(new Wd({name:s,isAutoGenerated:!0,onStatisticExpression:new W5({expression:`$feature.${t} / $feature.${n}`,returnType:i}),statisticType:"avg"})):e.push(new Wd({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}const gke=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(ze(()=>this.renderer,()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}},il))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,n){const s=r.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new uA({field:"cluster_count",stops:[new FT({value:1}),new FT({useMinValue:!0,size:i}),new FT({useMaxValue:!0,size:n})]}))),s}_normalizeFeatureReduction(r){var v;if((r==null?void 0:r.type)!=="cluster")return r;const i=r.clone(),n=[new Wd({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(i.fields??[]).filter(b=>!b.isAutoGenerated),o=r.renderer&&!((v=r.renderer.authoringInfo)!=null&&v.isAutoGenerated),{clusterMinSize:l,clusterMaxSize:d}=i;if(o){i.fields=[...n,...s];const b=this._withClusterVariable(i.renderer,l,d);return i.effectiveFeatureRenderer=b,i.effectiveClusterRenderer=b,i}if(r.symbol){if(i.fields=[...n,...s],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const b=AB(n,this.renderer),S=this._withClusterVariable(b,l,d),T="visualVariables"in S&&S.visualVariables?S.visualVariables:[],E=new Iu({symbol:r.symbol,visualVariables:T});return i.fields=[...n,...s],i.effectiveFeatureRenderer=S,i.effectiveClusterRenderer=E,i}if(!this.renderer)return r;const f=AB(n,this.renderer);i.fields=[...n,...s],i.renderer=f;const g=this._withClusterVariable(f,l,d);return i.effectiveFeatureRenderer=g,i.effectiveClusterRenderer=g,i}};return u([h(ske)],t.prototype,"featureReduction",null),t=u([M("esri.layers.mixins.FeatureReductionLayer")],t),t},MB={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},OB={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},RB={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},vke={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":MB,"web-map/basemap":OB,"web-map/tables":RB,"link-chart/operational-layers":{...MB,LinkChartLayer:!0},"link-chart/basemap":OB,"link-chart/tables":RB,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},bke=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,n){var s;return((s=n==null?void 0:n.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:r}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&Pde(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n){r&&(i[n]=r)}writeTitle(r,i){i.title=r??"Layer"}readVisibilityTimeExtent(r){return r?si.fromArray(r):null}writeVisibilityTimeExtent(r,i,n,s){r&&s.layerContainerType!=="tables"&&(r.isEmpty?s!=null&&s.messages&&s.messages.push(new V("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[n]=r.toArray())}read(r,i){i&&(i.layer=this),CW(this,r,n=>super.read(r,n),i)}write(r,i){var o,l;if(!this.persistenceEnabled&&!(i!=null&&i.ignorePersistenceEnabled))return null;if(i!=null&&i.origin){const d=`${i.origin}/${i.layerContainerType||"operational-layers"}`,f=vke[d];let g=!!(f!=null&&f[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&d==="web-scene/operational-layers"&&(g=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&d==="web-map/operational-layers"&&(g=!1),!g)return(o=i.messages)==null||o.push(new V("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${d}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter(d=>d instanceof V&&d.name==="web-document-write:property-required").length;return ax(n==null?void 0:n.url)?((l=i==null?void 0:i.messages)==null||l.push(new V("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return u([h({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),u([se("id",["id"])],t.prototype,"readId",null),u([h(Tre)],t.prototype,"listMode",void 0),u([le("listMode")],t.prototype,"writeListMode",null),u([h({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:sr,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),u([le("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),u([h(iL)],t.prototype,"opacity",void 0),u([h({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),u([h({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),u([le("title"),le(["web-scene"],"title")],t.prototype,"writeTitle",null),u([h({type:si,json:{origins:{"web-scene":{write:{layerContainerTypes:sr}}}}})],t.prototype,"visibilityTimeExtent",void 0),u([se("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),u([le(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[at,Vg]]}})],t.prototype,"writeVisibilityTimeExtent",null),u([h({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:sr}}})],t.prototype,"visible",void 0),t=u([M("esri.layers.mixins.OperationalLayer")],t),t};var ZL;const c2=new We({asc:"ascending",desc:"descending"});let xm=ZL=class extends W{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new ZL({field:this.field,valueExpression:this.valueExpression,order:this.order})}};u([h({type:String,json:{write:!0}})],xm.prototype,"field",void 0),u([h({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],xm.prototype,"valueExpression",void 0),u([h({type:c2.apiValues,json:{type:c2.jsonValues,read:c2.read,write:c2.write}})],xm.prototype,"order",void 0),xm=ZL=u([M("esri.layers.support.OrderByInfo")],xm);const Iie=xm;function _ke(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new Iie;return n.read(i,r),[n]}function wke(e,t,r,i){const n=e.find(s=>!!s.field);n&&Nr(r,[n.toJSON()],t)}const Ske={type:[Iie],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:_ke},write:{writer:wke}}},Tke=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return u([h(Ske)],t.prototype,"orderBy",void 0),t=u([M("esri.layers.mixins.OrderedLayer")],t),t},Eke=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Zt(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new Qa({id:i.itemId,portal:n==null?void 0:n.portal})}writePortalItem(r,i){r!=null&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){var n;if((n=this.portalItem)!=null&&n.id)try{const{load:s}=await ne(()=>import("./layersLoader-bhMteads.js"),__vite__mapDeps([283,171,170,172]));return hr(i),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap,populateGroupLayer:r.populateGroupLayer},i)}catch(s){throw Ni(s)||ae.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(Ga(i),!0)))}async setUserPrivileges(r,i){if(!Mt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:n,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",n),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(n){Ga(n)}}async _fetchUserPrivileges(r,i){let n=this.portalItem;if(!r||!n||!n.loaded||n.sourceUrl)return this._fetchFallbackUserPrivileges(i);const s=!(Ze!=null&&Ze.findCredential(this.url)),o=r===n.id;if(o&&n.portal.user)return this._getUserPrivileges(n,s);let l,d;if(o)l=n.portal.url;else try{l=await ED(this.url,i)}catch(b){Ga(b)}if(!l||!rhe(l,n.portal.url))return this._fetchFallbackUserPrivileges(i);try{const b=i!=null?i.signal:null;d=await(Ze==null?void 0:Ze.getCredential(`${l}/sharing`,{prompt:!1,signal:b}))}catch(b){Ga(b)}const f=!0,g=!1,v=!1;if(!d)return{features:{edit:f,fullEdit:g},content:{updateItem:v}};try{if(o?await n.reload():(n=new Qa({id:r,portal:{url:l}}),await n.load(i)),n.portal.user)return this._getUserPrivileges(n,s)}catch(b){Ga(b)}return{features:{edit:f,fullEdit:g},content:{updateItem:v}}}_getUserPrivileges(r,i){const n=sRe(r);return i&&(n.features.edit=!0),n}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(n){Ga(n)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?Ze==null?void 0:Ze.findCredential(this.url):null;if(!i)return!0;const n=d2.credential===i?d2.user:await this._fetchEditingUser(r);return d2.credential=i,d2.user=n,(n==null?void 0:n.privileges)==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){var g,v;const i=(v=(g=this.portalItem)==null?void 0:g.portal)==null?void 0:v.user;if(i)return i;const n=Ze==null?void 0:Ze.findServerInfo(this.url??"");if(!(n!=null&&n.owningSystemUrl))return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=Ki.getDefault();if(o&&o.loaded&&ta(o.restUrl)===ta(s))return o.user;const l=`${s}/community/self`,d=r!=null?r.signal:null,f=await fx(mt(l,{authMode:"no-prompt",query:{f:"json"},signal:d}));return f.ok?TD.fromJSON(f.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){var o;const n=i==null?void 0:i.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||Ki.getDefault());return n&&s&&!VW(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new V("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return u([h({type:Qa})],t.prototype,"portalItem",null),u([se("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),u([le("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),u([h({clonable:!1})],t.prototype,"resourceReferences",void 0),u([h({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),u([h({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),u([h({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=u([M("esri.layers.mixins.PortalLayer")],t),t},d2={credential:null,user:null};let Bb=class extends Ae{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};u([h()],Bb.prototype,"updating",void 0),u([h()],Bb.prototype,"status",void 0),Bb=u([M("esri.layers.support.PublishingInfo")],Bb);const $ke=Bb,xke=Symbol(),Ake=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const n=new $ke;return this._checkPublishingStatus(n),n}_checkPublishingStatus(i){let o=0;const l=async f=>{let g;i.updating=!0;try{g=await this.fetchPublishingStatus()}catch{g="unavailable"}g!=="published"&&g!=="unavailable"||(i.status==="publishing"&&this.refresh(),d.remove()),i.status=g,i.updating=!1,d.removed||(o=setTimeout(l,f,f+125))},d={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>d.remove()),l(250),this.addHandles(d)}};return t=xke,u([h({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=u([M("esri.layers.mixins.PublishableLayer")],r),r},$d=new ge,$_=new WeakMap;function Mke(e){Rke(e)&&$d.push(new WeakRef(e))}function Oke(e){const t=$d.find(r=>r.deref()===e);t&&$d.remove(t)}function Rke(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Nie(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Nie(t,e%t):0}let xR=0,h2=0;function Cke(){const e=Date.now();let t=!1;for(const r of $d){const i=r.deref();i?i.refreshInterval&&e-($_.get(i)??0)+5>=6e4*i.refreshInterval&&($_.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=$d.length-1;r>=0;r--)$d.at(r).deref()||$d.removeAt(r)}mW(()=>{const e=Date.now();let t=0;for(const r of $d){const i=r.deref();i&&(t=Nie(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?$_.get(i)||$_.set(i,e):$_.delete(i))}if(t!==h2){if(h2=t,clearInterval(xR),h2===0)return void(xR=0);xR=setInterval(Cke,h2)}},il);const CB=.1,Ike=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=ix(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Mke(this)},()=>{})}destroy(){Oke(this)}castRefreshInterval(r){return r>=CB?r:r<=0?0:CB}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){P_(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{ae.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}get test(){}};return u([h({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:sr}}}}})],t.prototype,"refreshInterval",void 0),u([ft("refreshInterval")],t.prototype,"castRefreshInterval",null),u([h({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),u([h({readOnly:!0})],t.prototype,"refreshParameters",null),t=u([M("esri.layers.mixins.RefreshableLayer")],t),t},Nke=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&Pke(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return u([h({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),u([h({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),u([h({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=u([M("esri.layers.mixins.ScaleRangeLayer")],t),t};function Pke(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}function IB(e,t){return vf.fromJSON({value:e,unit:t})}let Oi=class extends He.ClonableMixin(W){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?si.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){(t==null?void 0:t.start)!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?IB(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?IB(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=(t==null?void 0:t.toJSON().value)??null,r.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};u([h({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Oi.prototype,"cumulative",void 0),u([h({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Oi.prototype,"endField",void 0),u([h({type:si,json:{write:{enabled:!0,allowNull:!0}}})],Oi.prototype,"fullTimeExtent",void 0),u([se("fullTimeExtent",["timeExtent"])],Oi.prototype,"readFullTimeExtent",null),u([le("fullTimeExtent")],Oi.prototype,"writeFullTimeExtent",null),u([h({type:Boolean,json:{write:!0}})],Oi.prototype,"hasLiveData",void 0),u([h({type:vf,json:{write:{enabled:!0,allowNull:!0}}})],Oi.prototype,"interval",void 0),u([se("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Oi.prototype,"readInterval",null),u([le("interval")],Oi.prototype,"writeInterval",null),u([h({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Oi.prototype,"startField",void 0),u([h(YE("timeReference",!0))],Oi.prototype,"timeZone",void 0),u([h({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Oi.prototype,"trackIdField",void 0),u([h({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Oi.prototype,"useTime",void 0),u([h({type:[Date],json:{read:!1}})],Oi.prototype,"stops",void 0),Oi=u([M("esri.layers.support.TimeInfo")],Oi);const Pie=Oi,Lke={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:sr}}},kke=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=$5.fromJSON(n.timeOffsetUnits);return s&&o?new vf({value:s,unit:o}):null}set timeInfo(r){qX(r,this.fieldsIndex),this._set("timeInfo",r)}};return u([h({type:si,json:{write:!1}})],t.prototype,"timeExtent",void 0),u([h({type:vf})],t.prototype,"timeOffset",void 0),u([se("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),u([h({value:null,type:Pie,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),u([h(Lke)],t.prototype,"useViewTime",void 0),t=u([M("esri.layers.mixins.TemporalLayer")],t),t};let Op=class extends He.ClonableMixin(W){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};u([h({type:[Ww],json:{write:!0}})],Op.prototype,"labelingInfo",void 0),u([h(sA)],Op.prototype,"labelsVisible",void 0),u([h({types:Zw,json:{write:!0}})],Op.prototype,"renderer",void 0),u([h({type:Boolean,json:{write:!0}})],Op.prototype,"visible",void 0),Op=u([M("esri.layers.support.TrackPartInfo")],Op);const cg=Op;let Rn=class extends He.ClonableMixin(W){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new cg({renderer:new Iu({symbol:x$.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new cg({renderer:new Iu({symbol:x$.clone()})}),this.trackLines=new cg({renderer:new Iu({symbol:D5.clone()})}),this.timeField="startTimeField"}writeFields(t,r,i){const n=t.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Nr(i,n,r)}};u([h({type:Boolean,json:{write:!0}})],Rn.prototype,"enabled",void 0),u([h({type:[Wd],json:{write:!0}})],Rn.prototype,"fields",void 0),u([le("fields")],Rn.prototype,"writeFields",null),u([h({type:cg,json:{write:!0}})],Rn.prototype,"latestObservations",void 0),u([h({type:vf,json:{write:!0}})],Rn.prototype,"maxDisplayDuration",void 0),u([h({type:Number,json:{write:!0}})],Rn.prototype,"maxDisplayObservationsPerTrack",void 0),u([h(nA)],Rn.prototype,"popupEnabled",void 0),u([h({type:r0,json:{name:"popupInfo",write:!0}})],Rn.prototype,"popupTemplate",void 0),u([h({type:cg,json:{write:!0}})],Rn.prototype,"previousObservations",void 0),u([h({type:cg,json:{write:!0}})],Rn.prototype,"trackLines",void 0),u([h({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Rn.prototype,"timeField",void 0),Rn=u([M("esri.layers.support.TrackInfo")],Rn);const Dke=Rn,jke=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return u([h({type:Dke})],t.prototype,"trackInfo",void 0),t=u([M("esri.layers.mixins.TrackableLayer")],t),t},NB=new We({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let rd=class extends He.ClonableMixin(W){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};u([h({json:{write:!0}})],rd.prototype,"name",void 0),u([h({json:{write:!0}})],rd.prototype,"description",void 0),u([h({json:{read:NB.read,write:NB.write}})],rd.prototype,"drawingTool",void 0),u([h({json:{write:!0}})],rd.prototype,"prototype",void 0),u([h({json:{write:!0}})],rd.prototype,"thumbnail",void 0),rd=u([M("esri.layers.support.FeatureTemplate")],rd);const Q5=rd;let lu=class extends He.ClonableMixin(W){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=Ux(t[i]);return r}writeDomains(t,r){var n;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=(n=t[s])==null?void 0:n.toJSON());r.domains=i}};u([h({json:{write:!0}})],lu.prototype,"id",void 0),u([h({json:{write:!0}})],lu.prototype,"name",void 0),u([h({json:{write:!0}})],lu.prototype,"domains",void 0),u([se("domains")],lu.prototype,"readDomains",null),u([le("domains")],lu.prototype,"writeDomains",null),u([h({type:[Q5],json:{write:!0}})],lu.prototype,"templates",void 0),lu=u([M("esri.layers.support.FeatureType")],lu);const Lie=lu;function Fke(){return{fields:{type:[HD],value:null,set:function(e){if(e&&Z("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(i=>`'${i.name}'`).join(", ");ae.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return lie.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const r of e)((t=this.fieldsIndex)==null?void 0:t.has(r))||ae.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${r} found in outFields`,{layer:this,outFields:e});return Ix(this.fieldsIndex,e)}}}}const AR=()=>ae.getLogger("esri.layers.support.labelingInfo"),Uke=/\[([^[\]]+)\]/gi;function MR(e,t,r){return e?e.map(i=>{var s;const n=new Ww;if(n.read(i,r),n.labelExpression){const o=t.fields||((s=t.layerDefinition)==null?void 0:s.fields)||this.fields;n.labelExpression=n.labelExpression.replaceAll(Uke,(l,d)=>`[${Vke(d,o)}]`)}return n}):null}function Vke(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}const zke={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function TGe(e,t){const r=[];for(const i of e){const n=i.labelPlacement,s=zke[t];if(!i.symbol)return AR().warn("No ILabelClass symbol specified."),[];if(!s)return AR().error(new V("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(n))r.push(i);else{const o=s[0];n&&AR().warn(`Found invalid label placement type ${n} for ${t}. Defaulting to ${o}`);const l=i.clone();l.labelPlacement=o,r.push(l)}}return r}const Gke="relationships/",Bke="expression/";let dn=class extends Ae{constructor(t){super(t),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||Mw(()=>Vd()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??ne(()=>import("./featureUtils-B202xmHY.js"),__vite__mapDeps([157,7])).then(t=>this._featureUtils=t)}get calculatedExpressions(){var r;const t=new ge;if(!this.expressionsUsedInTitle.length)return t;if(!((r=this._arcadeTask)!=null&&r.value)){for(const i of this.expressionsUsedInTitle??[])t.push({name:i.name,invalid:!0});return t}for(const i of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(i.expression,["$layer","$map","$datastore"]);if(n.isAsync){t.push({name:i.name,invalid:!0});break}t.push({name:i.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{t.push({name:i.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var r,i,n;let t=((r=this.effectivePopupTemplate)==null?void 0:r.title)??"";return typeof t!="string"?[]:(t=t.toLowerCase(),((n=(i=this.effectivePopupTemplate)==null?void 0:i.expressionInfos)==null?void 0:n.filter(s=>t.includes(`{expression/${s.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(t=>t.invalid===!0)}get requiredFields(){var i,n;const t=new Set;if((i=this._arcadeTask)!=null&&i.value&&!this.hasBadExpressions)for(const s of((n=this.calculatedExpressions)==null?void 0:n.toArray())??[])try{const o=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const l of o){const d=l.split("."),f=this.fieldsIndex.get(d.at(-1)??"");f&&t.add(f.name)}}catch{}const r=this._extractFieldNames(this.workingTitle);for(const s of r){const o=this.fieldsIndex.get(s);o&&t.add(o.name)}return t}get titleFromDisplayField(){var r,i;let t="";return this.displayField&&(t=((r=this.fieldsIndex.get(this.displayField))==null?void 0:r.name)??""),t||(t=((i=this.fieldsIndex.get(this.objectIdField))==null?void 0:i.name)??""),t?`{${t}}`:""}get workingTitle(){const t=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return t===""||t==null||this.hasBadExpressions||typeof t!="string"?this.titleFromDisplayField:t}async getTitle(t,r,i){var n;try{const{attributes:s}=r,o=(i==null?void 0:i.timeZone)??"system",[{substituteFieldsInLinksAndAttributes:l}]=await Promise.all([this.featureUtilsPromise,(n=this._arcadeTask)==null?void 0:n.promise]);if(i.fetchMissingFields&&(r=await this._checkAndReQueryGraphic(t,r)),this.workingTitle&&this.fieldInfoMap){const d=this._createFormattedAttributes(t,r,o).global;return l({attributes:s,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:d,layer:t,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(t,r){const i=r.getObjectId();if(i==null)return r;if(!c1e(this.requiredFields,r)){const n=t.createQuery();n.where="1=1",n.outFields=[...this.requiredFields],n.objectIds=[i];const s=await t.queryFeatures(n);if((s==null?void 0:s.features.length)===1)return s.features[0]}return r}_createFieldInfoMap(t){const r=new Map;if(!t)return r;for(const i of t){if(!i.fieldName)continue;const n=this.fieldsIndex.get(i.fieldName),s=(n==null?void 0:n.name)??i.fieldName;i.fieldName=s,r.set(s.toLowerCase(),i)}return r}_createFormattedAttributes(t,r,i="system"){var l,d;const n=((l=this.effectivePopupTemplate)==null?void 0:l.fieldInfos)??[],s={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((d=this._arcadeTask)!=null&&d.value)){const f=this._arcadeTask.value.Feature.createFromGraphicLikeObject(r.geometry,r.attributes,t,null);for(const g of this.calculatedExpressions)try{s[`expression/${g.name}`]=g.func({vars:{$feature:f}})}catch{}}const o={...r.attributes,...s};return{global:this._featureUtils.formatAttributes({fieldInfos:n,attributes:o,graphic:r,timeZone:i,layer:t,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(t){return RD(t).filter(r=>!(r.indexOf(Gke)===0||r.indexOf(Bke)===0))}};u([h({readOnly:!0})],dn.prototype,"_arcadeTask",null),u([h()],dn.prototype,"_featureUtils",void 0),u([h({readOnly:!0})],dn.prototype,"featureUtilsPromise",null),u([h({readOnly:!0})],dn.prototype,"calculatedExpressions",null),u([h()],dn.prototype,"displayField",void 0),u([h()],dn.prototype,"effectivePopupTemplate",void 0),u([h()],dn.prototype,"expressionsUsedInTitle",null),u([h()],dn.prototype,"fieldsIndex",void 0),u([h()],dn.prototype,"fieldInfoMap",null),u([h()],dn.prototype,"fields",void 0),u([h()],dn.prototype,"objectIdField",void 0),u([h()],dn.prototype,"requiredFields",null),dn=u([M("esri.layers.support.TitleCreator")],dn);const qke=dn,Am=[];function Hke(e,t){if(IE(e.url??""))return!0;const{wkid:r}=t;for(const i of Am){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}Am.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Am.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Am.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Am.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Am.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function Wke(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await fx(i.populateFromStyle());if(hr(r),n.ok===!1){const s=n.error;t!=null&&t.messages&&t.messages.push(new no("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function Zke({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=Kke({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const l=tDe({titleBase:n,fields:r,displayField:e}),d=eDe();return new r0({title:l,content:d,fieldInfos:o})}function $Ge(e){var f;const{title:t,graphic:r}=e??{},{attributes:i,sourceLayer:n}=r??{},s=n&&"displayField"in n?n.displayField:null,o=s?i==null?void 0:i[s]:null,l=o!=null?JSON.stringify(o):null,d=(f=r==null?void 0:r.getObjectId())==null?void 0:f.toString();return t||l||d||""}const Yke=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):Gwe(e,t);function Jke({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const i=e;return t&&(e=e.filter(n=>!t.includes(n.type))),e===i&&(e=e.slice()),r!==!0&&e.sort(Xke),e}function Xke(e,t){return e.type==="oid"?-1:t.type==="oid"?1:PB(e)?-1:PB(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function Kke(e,t){const r=t==null?void 0:t.visibleFieldNames;return Jke({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||rDe,sortDisabled:t==null?void 0:t.sortDisabled}).map(i=>new CD({fieldName:i.name,isEditable:zwe(i,e),label:i.alias,format:Qke(i),visible:Yke(i,{...e,visibleFieldNames:r})}))}function Qke(e){switch(e.type){case"small-integer":case"integer":case"single":return new eT({digitSeparator:!0,places:0});case"double":return new eT({digitSeparator:!0,places:2});case"string":return h1e(e.name)?new eT({digitSeparator:!0,places:0}):void 0;default:return}}function eDe(){return[new Pg,new Ng]}function tDe(e){const t=Nwe(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function PB(e){var r;return(e.name&&e.name.toLowerCase())==="name"?!0:((r=e.alias)==null?void 0:r.toLowerCase())==="name"}const rDe=["geometry","blob","raster","guid","xml"],Ai="FeatureLayer";function p2(e,t){return new V("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function LB(e){return e&&e instanceof ge}const OR=Fke();function RR(e,t,r){const i=!!(r!=null&&r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let xe=class extends EPe(gke(tIe(Ake(XCe(ZCe(jCe(Tke(kke(jke(Nke(Ike(hCe(bke(Eke(eA(FCe(dCe(He.ClonableMixin(MD))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ge.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=ix(async(t,r,i)=>{const{save:n,saveAs:s}=await ne(()=>import("./featureLayerUtils-D6afCrky.js"),__vite__mapDeps([284,277,278,285,282,171]));switch(t){case Wa.SAVE:return n(this,r);case Wa.SAVE_AS:return s(this,i,r)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var i;const t=e!=null?e.signal:null;if((i=this.portalItem)!=null&&i.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(Ga).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(t);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new V("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>qNe(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return Zt(e),new qke({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,tie(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return ZNe(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&Nr(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return Bre(t.layerDefinition||t)}readObjectIdField(e,t){return qre(t.layerDefinition||t)}get parsedUrl(){const e=oi(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Sg(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Sg(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){H9(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){var n;t=t.layerDefinition||t;const i=(n=t.drawingInfo)==null?void 0:n.renderer;if(i){const s=ow(i,t,r)??void 0;return s||ae.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),s}return B5(t,r)}set source(e){const t=this._get("source");t!==e&&(LB(t)&&this._resetMemorySource(t),LB(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof ge?new yu({layer:this,items:e}):e:null}readSource(e,t){const r=ore.fromJSON(t.featureSet);return new yu({layer:this,items:(r==null?void 0:r.features)??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e=e==null?void 0:e.map(s=>Q5.fromJSON(s)),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){var n,s,o;const r=((n=t.layerDefinition)==null?void 0:n.name)??t.name,i=t.title||((s=t.layerDefinition)==null?void 0:s.title);if(r){const l=(o=this.portalItem)==null?void 0:o.title;if(this.sublayerTitleMode==="item-title")return this.url?She(this.url,r):r;let d=r;if(!d&&this.url){const f=Pd(this.url);f!=null&&(d=f.title)}return d?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==d&&(d=l+" - "+d),Dk(d)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){var r;return t.title||((r=t.layerDefinition)==null?void 0:r.name)}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r==null?void 0:r.creatorField,n=r==null?void 0:r.editorField;return e==null?void 0:e.map(s=>(s=Lie.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s))}readVisible(e,t){var r;return((r=t.layerDefinition)==null?void 0:r.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const r=await xNe(this,e,t,Ai);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const i=await ANe(this,e,t,r,Ai);return this.lastEditsEventDate=new Date,i}async applyEdits(e,t){return MNe(this,e,t)}async uploadAssets(e,t){return ONe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Zke(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await lW(ne(()=>import("./FeatureLayerSource-BdBeUIzC.js"),__vite__mapDeps([286,49,56,287,288,52,99,51,100,289,290,35,27,291,292,63,61,62,17,16,22,160,21])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=FNe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=nwe(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await RNe(this,e,t,Ai);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return CNe(this,e,Ai)}getFeatureTitle(e,t={timeZone:"system",fetchMissingFields:!1}){return this._titleCreator.getTitle(this,e,t)}getFeatureType(e){return Zre(this.types,this.typeIdField,e)}getFieldDomain(e,t){var r;return VNe(this,e,t,((r=this.getField(e))==null?void 0:r.domain)??null)}async queryAttachments(e,t){return INe(this,e,t,Ai)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(al.from(e)??r.createQuery(),t);if(i!=null&&i.features)for(const n of i.features)n.layer=n.sourceLayer=r;return i}async queryObjectIds(e,t){return(await NNe(this,e,t,Ai)).filter(z9)}async queryFeatureCount(e,t){return PNe(this,e,t,Ai)}async queryExtent(e,t){return LNe(this,e,t,Ai)}async queryRelatedFeatures(e,t){return kNe(this,e,t,Ai)}async queryRelatedFeaturesCount(e,t){return DNe(this,e,t,Ai)}async queryTopFeatures(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!((o=i==null?void 0:i.query)!=null&&o.supportsTopFeaturesQuery))throw new V(Ai,"Layer source does not support queryTopFeatures capability");const n=await ne(()=>import("./TopFeaturesQuery-yUmRto5S.js"),[]),s=await r.queryTopFeatures(n.default.from(e),t);if(s!=null&&s.features)for(const l of s.features)l.layer=l.sourceLayer=this;return s}async queryAttributeBins(e,t){var o;const{source:r,capabilities:i}=await this.load();if(!r.queryAttributeBins||!((o=i==null?void 0:i.operations)!=null&&o.supportsQueryBins))throw new V(Ai,"Layer source does not support queryAttributeBins capability");KNe(e,i,Ai);const n=await ne(()=>import("./AttributeBinsQuery-C17wyF6T.js"),__vite__mapDeps([222,19,13,29])),s=await r.queryAttributeBins(n.default.from(e),t);if(s.features)for(const l of s.features)l.layer=l.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!(i!=null&&i.query.supportsTopFeaturesQuery))throw new V(Ai,"Layer source does not support queryTopObjectIds capability");const n=await ne(()=>import("./TopFeaturesQuery-yUmRto5S.js"),[]);return(await r.queryTopObjectIds(n.default.from(e),t)).filter(z9)}async queryTopFeaturesExtent(e,t){var s;const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!((s=i==null?void 0:i.query)!=null&&s.supportsTopFeaturesQuery))throw new V(Ai,"Layer source does not support queryTopExtents capability");const n=await ne(()=>import("./TopFeaturesQuery-yUmRto5S.js"),[]);return r.queryTopExtents(n.default.from(e),t)}async queryTopFeatureCount(e,t){var s;const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!((s=i==null?void 0:i.query)!=null&&s.supportsTopFeaturesQuery))throw new V(Ai,"Layer source does not support queryFeatureCount capability");const n=await ne(()=>import("./TopFeaturesQuery-yUmRto5S.js"),[]);return r.queryTopCount(n.default.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:n}=t;if(this.dynamicDataSource)return n==null||n.push(p2(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return n==null||n.push(p2(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return n==null||n.push(p2(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return n==null||n.push(p2(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new V(Ai,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||Hke(this,e))}async save(e){return this._debouncedSaveOperations(Wa.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Wa.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){var n;let i=(n=e.layerDefinition)==null?void 0:n.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&(r==null?void 0:r.origin)==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){var n,s;if(!e){const o=(s=(n=this.capabilities)==null?void 0:n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";Nr("layerDefinition.capabilities",o,t),r&&!(i!=null&&i.writeLayerSchema)&&(t.capabilities=o)}}_fetchFirstValidLayerId(e){return mt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),H9(this.renderer,this.fieldsIndex),qX(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),Wke(this,{origin:"service"})}async hasDataChanged(){return jNe(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,r;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(r=this.fields)!=null&&r.some(i=>i.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{var n;const i=(n=r.prototype)==null?void 0:n.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new V("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new V("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};u([h({clonable:!1,readOnly:!0})],xe.prototype,"_titleCreator",null),u([h(yIe)],xe.prototype,"attributeTableTemplate",void 0),u([se("service","capabilities")],xe.prototype,"readCapabilities",null),u([h({json:{origins:{"web-scene":{write:!1}},write:!0}})],xe.prototype,"charts",void 0),u([h({readOnly:!0})],xe.prototype,"createQueryVersion",null),u([h({json:{read:{source:"layerDefinition.copyrightText"}}})],xe.prototype,"copyright",void 0),u([h({json:{read:{source:"layerDefinition.displayField"}}})],xe.prototype,"displayField",void 0),u([h({types:Td,readOnly:!0})],xe.prototype,"defaultSymbol",void 0),u([h({type:Ho})],xe.prototype,"dynamicDataSource",void 0),u([h({type:Boolean})],xe.prototype,"editingEnabled",null),u([se(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],xe.prototype,"readEditingEnabled",null),u([se("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],xe.prototype,"readEditingEnabledFromWebMap",null),u([le(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],xe.prototype,"writeEditingEnabled",null),u([le("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],xe.prototype,"writeEditingEnabledToWebMap",null),u([h({readOnly:!0})],xe.prototype,"effectiveEditingEnabled",null),u([h({clonable:!1,readOnly:!0})],xe.prototype,"featureTitleFields",null),u([h({...OR.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:RR}}}}})],xe.prototype,"fields",void 0),u([h(OR.fieldsIndex)],xe.prototype,"fieldsIndex",void 0),u([h({type:oCe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],xe.prototype,"formTemplate",void 0),u([h({json:{read:{source:"layerDefinition.extent"}}})],xe.prototype,"fullExtent",void 0),u([h({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:RR,writer(e,t,r){const i=e?xL.toJSON(e):null;i&&Nr(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:xL.read}}})],xe.prototype,"geometryType",void 0),u([h({json:{read:{source:"layerDefinition.hasM"}}})],xe.prototype,"hasM",void 0),u([h({json:{read:{source:"layerDefinition.hasZ"}}})],xe.prototype,"hasZ",void 0),u([h(hIe)],xe.prototype,"id",void 0),u([h({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],xe.prototype,"infoFor3D",void 0),u([h({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],xe.prototype,"isTable",void 0),u([se("service","isTable",["type","geometryType"]),se("isTable",["layerDefinition.type","layerDefinition.geometryType"])],xe.prototype,"readIsTable",null),u([le("web-map","isTable")],xe.prototype,"writeIsTable",null),u([h(sA)],xe.prototype,"labelsVisible",void 0),u([h({type:[Ww],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:MR,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:MR,write:{enabled:!0,layerContainerTypes:sr}}},name:"layerDefinition.drawingInfo.labelingInfo",read:MR,write:!0}})],xe.prototype,"labelingInfo",void 0),u([h((()=>{const e=U(dIe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){Nr(i,Mx(t),r)}}},e})())],xe.prototype,"opacity",void 0),u([h(uIe)],xe.prototype,"legendEnabled",void 0),u([h({type:["show","hide"],json:(()=>{const e=U(Tre.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],xe.prototype,"listMode",void 0),u([se("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],xe.prototype,"readGlobalIdField",null),u([h({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:RR}}}}})],xe.prototype,"objectIdField",void 0),u([se("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],xe.prototype,"readObjectIdField",null),u([h({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:sr}}})],xe.prototype,"operationalLayerType",void 0),u([h(OR.outFields)],xe.prototype,"outFields",void 0),u([h({readOnly:!0})],xe.prototype,"parsedUrl",null),u([h({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],xe.prototype,"path",void 0),u([h(nA)],xe.prototype,"popupEnabled",void 0),u([h({type:r0,json:{name:"popupInfo",write:!0}})],xe.prototype,"popupTemplate",void 0),u([h({readOnly:!0})],xe.prototype,"defaultPopupTemplate",null),u([h({types:Zw,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:QLe,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:sr,overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r==null?void 0:r.writeLayerSchema})}}})],xe.prototype,"renderer",null),u([se("service","renderer",["drawingInfo.renderer","defaultSymbol"]),se("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],xe.prototype,"readRenderer",null),u([h()],xe.prototype,"resourceInfo",void 0),u([h((()=>{const e=U(aIe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],xe.prototype,"screenSizePerspectiveEnabled",void 0),u([h({clonable:!1})],xe.prototype,"source",null),u([ft("source")],xe.prototype,"castSource",null),u([se("portal-item","source",["featureSet"]),se("web-map","source",["featureSet"])],xe.prototype,"readSource",null),u([h({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],xe.prototype,"spatialReference",void 0),u([h({type:Number})],xe.prototype,"subtypeCode",void 0),u([h({type:[Q5]})],xe.prototype,"templates",void 0),u([se("templates",["editFieldsInfo","creatorField","editorField","templates"])],xe.prototype,"readTemplates",null),u([h({type:Pie})],xe.prototype,"timeInfo",void 0),u([h()],xe.prototype,"title",void 0),u([se("service","title",["name"]),se("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],xe.prototype,"readTitle",null),u([se("web-map","title",["layerDefinition.name","title"])],xe.prototype,"readTitleFromWebMap",null),u([h({type:String})],xe.prototype,"sublayerTitleMode",void 0),u([h({json:{read:!1}})],xe.prototype,"type",void 0),u([h({type:String})],xe.prototype,"typeIdField",void 0),u([se("service","typeIdField"),se("typeIdField",["layerDefinition.typeIdField"])],xe.prototype,"readTypeIdField",null),u([h({type:[Lie]})],xe.prototype,"types",void 0),u([se("service","types",["types"]),se("types",["layerDefinition.types"])],xe.prototype,"readTypes",null),u([h({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],xe.prototype,"visible",void 0),u([se("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],xe.prototype,"readVisible",null),xe=u([M("esri.layers.FeatureLayer")],xe);const e4=xe,xGe=Object.freeze(Object.defineProperty({__proto__:null,default:e4},Symbol.toStringTag,{value:"Module"}));let uu=class extends W{constructor(t){super(t),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.exceededTransferLimit=null,this.serviceEdits=null,this.discoveredSubnetworks=null}};u([h({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?e.getTime():null}}}})],uu.prototype,"moment",void 0),u([h({type:Boolean,json:{write:!0}})],uu.prototype,"fullUpdate",void 0),u([h({type:Boolean,json:{write:!0}})],uu.prototype,"validateErrorsCreated",void 0),u([h({type:Boolean,json:{write:!0}})],uu.prototype,"exceededTransferLimit",void 0),u([h({type:[Object],json:{write:!0}})],uu.prototype,"serviceEdits",void 0),u([h({type:[Object],json:{write:!0}})],uu.prototype,"discoveredSubnetworks",void 0),uu=u([M("esri.rest.networks.support.ValidateNetworkTopologyResult")],uu);const iDe=uu,nDe=Wr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let id=class extends iDe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const r={...t,query:{f:"json"}},{data:i}=await mt(this.statusUrl,r);return this.read(i),this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null}),this}async waitForJobCompletion(t={}){const{interval:r=1e3,statusCallback:i}=t;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(kt()),this.checkJobStatus().then(l=>{const{status:d}=l;switch(this.status=d,d){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":i&&i(this)}},l=>{this._clearTimer(),s(l)})},r);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([h()],id.prototype,"editsResolver",void 0),u([h({type:String,json:{write:!0}})],id.prototype,"statusUrl",void 0),u([Ee(nDe)],id.prototype,"status",void 0),u([h({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],id.prototype,"submissionTime",void 0),u([h({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],id.prototype,"lastUpdatedTime",void 0),id=u([M("esri.networks.support.TopologyValidationJobInfo")],id);const sDe=id;async function kB(e,t){if(e==="Utility Network Layer"){const{default:r}=await ne(()=>Promise.resolve().then(()=>SDe),void 0);return new r({layerUrl:t})}return null}async function oDe(e){var o;let t="portalItem"in e?e:{portalItem:e};!t.portalItem||t.portalItem instanceof Qa||(t={...t,portalItem:new Qa(t.portalItem)});const r=t.portalItem;if(await r.load(),r.type!=="Feature Service")throw new V("portal:unknown-item-type","Unknown item type '${type}'",{type:r.type});const i=r.url,n=await mt(i,{responseType:"json",query:{f:"json"}}),s="Network Layer";if((o=n.data.type)!=null&&o.includes(s))return kB(n.data.type,i);if(n.data.layers){const l=n.data.layers.find(d=>d.type.includes(s));if(l){const d=`${i}/${l.id}`;return kB(l.type,d)}}return null}let Ir=class extends eA(lo){static fromPortalItem(e){return oDe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null,this.gdbVersion=null,this.historicMoment=null,this._sourceIdByLayerId=new Map,this._layerIdBySourceId=new Map,this._applyEditsHandler=t=>{const{serviceUrl:r,gdbVersion:i,result:n}=t,s=r===this.featureServiceUrl,o=S_(r,i,this.gdbVersion);s&&o&&n.then(l=>{DT(r,i)&&(this.historicMoment=l.historicMoment)})},this._updateMomentHandler=t=>{const{serviceUrl:r,gdbVersion:i,moment:n}=t,s=r===this.featureServiceUrl,o=S_(r,i,this.gdbVersion);s&&o&&(this.historicMoment=n)},this.when().then(()=>{this.addHandles([yre(this._applyEditsHandler),mre(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(e=>{Ni(e)||ae.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return oi(this.layerUrl)}get featureServiceUrl(){return Pd(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return Pd(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(!this.dataElement)return null;const t=this._layerIdBySourceId.get(e);if(t!=null)return t;const r=this.dataElement.domainNetworks,i=this._traverseNetworkSources(r,this._layerIdBySourceId,"sourceId","layerId",e);return i>=0?i:null}getSourceIdByLayerId(e){if(!this.dataElement)return null;const t=this._sourceIdByLayerId.get(e);if(t!=null)return t;const r=this.dataElement.domainNetworks,i=this._traverseNetworkSources(r,this._sourceIdByLayerId,"layerId","sourceId",e);return i>=0?i:null}getObjectIdsFromElements(e){const t=[],r=new Map;for(const n of e){const s=this.getLayerIdBySourceId(n.networkSourceId);if(s==null)continue;let o=r.get(s);o===void 0&&(o=[]),o.push(n.objectId),r.set(s,o)}const i=this.featureServiceUrl;return r.forEach((n,s)=>t.push({layerUrl:`${i}/${s}`,objectIds:n})),t}async queryNamedTraceConfigurations(e,t){var o;const[{queryNamedTraceConfigurations:r},{default:i}]=await Promise.all([ne(()=>import("./queryNamedTraceConfigurations-BF2_vpgX.js"),[]),ne(()=>import("./QueryNamedTraceConfigurationsParameters-e-mszWfX.js"),[])]),n=this.networkServiceUrl,s=i.from(e);return(o=await r(n,s,{...t}))==null?void 0:o.namedTraceConfigurations}async validateTopology(e,t){var f,g,v;if(!e.validateArea)throw new V("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const[{validateNetworkTopology:r},{default:i}]=await Promise.all([ne(()=>import("./validateNetworkTopology-BlWfVgHY.js"),[]),ne(()=>import("./ValidateNetworkTopologyParameters-BF-YNThM.js"),[])]),n=i.from(e);DT(this.featureServiceUrl,this.gdbVersion||null)?(n.sessionID=WP,await $7(this.featureServiceUrl,this.gdbVersion,!0)):n.sessionID=null,n.gdbVersion=this.gdbVersion;const s=this.networkServiceUrl,o=this.featureServiceUrl,l=x7(o,null,this.gdbVersion,!0),d=await r(s,n,{...t});if(d!=null&&d.serviceEdits){const b=[];for(const S of d.serviceEdits){const{editedFeatures:T}=S,E=T!=null&&T.spatialReference?new Ge(T.spatialReference):null;b.push({layerId:S.layerId,editedFeatures:{adds:((f=T==null?void 0:T.adds)==null?void 0:f.map(x=>f2(x,E)))||[],updates:((g=T==null?void 0:T.updates)==null?void 0:g.map(x=>({original:f2(x[0],E),current:f2(x[1],E)})))||[],deletes:((v=T==null?void 0:T.deletes)==null?void 0:v.map(x=>f2(x,E)))||[],spatialReference:E}})}l.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:b,exceededTransferLimit:!1,historicMoment:d.moment})}return d}async submitTopologyValidationJob(e,t){let r=null;if(!e.validateArea)throw new V("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!this.gdbVersion){const f=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");r=(await mt(f,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}const[{submitValidateNetworkTopologyJob:i},{default:n}]=await Promise.all([ne(()=>import("./validateNetworkTopology-BlWfVgHY.js"),[]),ne(()=>import("./ValidateNetworkTopologyParameters-BF-YNThM.js"),[])]),s=n.from(e);DT(this.featureServiceUrl,this.gdbVersion||null)?(s.sessionID=WP,await $7(this.featureServiceUrl,this.gdbVersion,!0)):s.sessionID=null,s.gdbVersion=this.gdbVersion||r;const o=this.networkServiceUrl,l=this.featureServiceUrl?x7(this.featureServiceUrl,null,this.gdbVersion,!0):void 0,d=await i(o,s,{...t});return new sDe({statusUrl:d,editsResolver:l})}getSourceTypeById(e){if(!this.dataElement)return null;for(const t of this.dataElement.domainNetworks)for(const r of[t.edgeSources??[],t.junctionSources??[]])for(const i of r)if(i.sourceId===e)return r===t.edgeSources?"edge":"junction";return null}_traverseNetworkSources(e,t,r,i,n){for(const s of e)for(const o of[s.edgeSources??[],s.junctionSources??[]])for(const l of o)if(l[r]===n)return t.set(n,l[i]),l[i];return-1}async _fetchLayerMetaData(e,t){const r=await mt(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=r.data,this.read(r.data,{origin:"service"})}async _fetchDataElement(e,t,r){if(this.dataElement)return;const i=await mt(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...r}).then(n=>{var s;return(s=n.data.layerDataElements)==null?void 0:s[0]});i&&this.read(i,{origin:"service"})}};function f2(e,t){return new ol({attributes:e.attributes,geometry:Du({...e.geometry,spatialReference:t})})}u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Ir.prototype,"id",void 0),u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Ir.prototype,"title",void 0),u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Ir.prototype,"layerUrl",void 0),u([h({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Ir.prototype,"dataElement",void 0),u([h({type:Ut,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Ir.prototype,"fullExtent",void 0),u([h({type:Ge,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Ir.prototype,"spatialReference",void 0),u([h({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Ir.prototype,"type",void 0),u([h({readOnly:!0})],Ir.prototype,"datasetName",null),u([h({readOnly:!0})],Ir.prototype,"owner",null),u([h({readOnly:!0})],Ir.prototype,"schemaGeneration",null),u([h({readOnly:!0})],Ir.prototype,"parsedUrl",null),u([h({readOnly:!0})],Ir.prototype,"featureServiceUrl",null),u([h({readOnly:!0})],Ir.prototype,"networkServiceUrl",null),u([h({readOnly:!0})],Ir.prototype,"layerId",null),u([h()],Ir.prototype,"sourceJSON",void 0),u([h({readOnly:!0})],Ir.prototype,"networkSystemLayers",null),u([h()],Ir.prototype,"gdbVersion",void 0),u([h({type:Date})],Ir.prototype,"historicMoment",void 0),Ir=u([M("esri.networks.Network")],Ir);const aDe=Ir;var In;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTContainment=2]="RTContainment",e[e.RTAttachment=3]="RTAttachment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(In||(In={}));const y2=new We({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),OGe=new We({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),lDe={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6},RGe=new We({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let nd=class extends W.JSONSupportMixin(lo){constructor(t){super(t),this.rulesCategorized={attachment:[],containment:[],connectivity:[]},this.request=mt}initialize(){}async load(t){const r=this.rulesLayer.load(t).then(()=>this._initializeRulesTable());return this.addResolvingPromise(r),this}getFeaturesCanAssociateWithClause(t,r,i){return this._getWhereClauseForCompatibleFeatures(t,r,i)}getFeaturesCanAssociateWith(t,r,i){return this._getFeatureSourceLayerId(t)==null?[]:r.filter(n=>this.canAssociateFeatures(t,n,i))}canAssociateFeatures(t,r,i){const[n,s]=this._getFeatureAssetCodes(t),o=this._getFeatureSourceLayerId(t),[l,d]=this._getFeatureAssetCodes(r),f=this._getFeatureSourceLayerId(r);return o!=null&&f!=null&&i.some(g=>{const{type:v,direction:b}=g;return this._getRulesForAssociationType(v).some(S=>{const T=this._getRuleFieldValuesForAssociation(S,v,b);return T==null?void 0:T.some(E=>o===(E==null?void 0:E.ruleLayerIdForSource)&&n===(E==null?void 0:E.ruleAssetGroupCodeForSource)&&s===(E==null?void 0:E.ruleAssetTypeCodeForSource)&&f===(E==null?void 0:E.ruleLayerIdForTarget)&&l===(E==null?void 0:E.ruleAssetGroupCodeForTarget)&&d===(E==null?void 0:E.ruleAssetTypeCodeForTarget))})})}getLayersCanAssociateWith(t,r,i){return this._getFeatureSourceLayerId(t)==null?[]:r.filter(n=>this.canAssociateFeatureToLayer(t,n,i))}canAssociateFeatureToLayer(t,r,i){const n=Hs(r)?r.parent:r;if(!n)return!1;const s=n.layerId,o=Hs(r)?r.subtypeCode:null,[l,d]=this._getFeatureAssetCodes(t),f=this._getFeatureSourceLayerId(t);return f!=null&&i.some(g=>{const{type:v,direction:b}=g;return this._getRulesForAssociationType(v).some(S=>{const T=this._getRuleFieldValuesForAssociation(S,v,b);return T==null?void 0:T.some(E=>f===(E==null?void 0:E.ruleLayerIdForSource)&&l===(E==null?void 0:E.ruleAssetGroupCodeForSource)&&d===(E==null?void 0:E.ruleAssetTypeCodeForSource)&&s===(E==null?void 0:E.ruleLayerIdForTarget)&&(o==null||o===(E==null?void 0:E.ruleAssetGroupCodeForTarget)))})})}getFeatureSQL(t,r){var f,g;const i=t.layerId.toString(),n=(f=t.fieldsIndex)==null?void 0:f.normalizeFieldName("assetGroup"),s=(g=t.fieldsIndex)==null?void 0:g.normalizeFieldName("assetType"),o=n?r.attributes[n]:null,l=s?r.attributes[s]:null,d=this.rulesHash[i];if(d){const v=d.assetGroupHash[o];if(v)return v.assetTypeHash[l]||null}return null}async _initializeRulesTable(){var n,s,o,l,d,f,g,v,b,S,T;const t={};let r;(function(E){E[E.from=0]="from",E[E.to=1]="to",E[E.via=2]="via"})(r||(r={}));const i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const E of this.rules){if(E.ruleType===In.RTAttachment){this.rulesCategorized.attachment.push(E);continue}if(E.ruleType===In.RTContainment){this.rulesCategorized.containment.push(E);continue}if(E.ruleType===In.RTJunctionJunctionConnectivity){this.rulesCategorized.connectivity.push(E);continue}this.rulesCategorized.connectivity.push(E);let x=[[r.from,r.to],[r.to,r.from]];E.ruleType===In.RTEdgeJunctionEdgeConnectivity&&(x=[[r.from,r.via],[r.via,r.from],[r.to,r.via],[r.via,r.to]]);for(const O of x){const C=O.shift(),I=O.shift();let P=!1;switch(E.ruleType){case In.RTEdgeJunctionEdgeConnectivity:P=C===r.from||C===r.to;break;case In.RTJunctionEdgeConnectivity:P=C===r.to}const k=i[C],D=((n=E[k.networkSourceId])==null?void 0:n.layerId.toString())??"",H=(o=(s=E[k.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:o.toString(),re=E[k.assetTypeId],K=(l=re==null?void 0:re.assetTypeCode)==null?void 0:l.toString(),ie=i[I],fe=((d=E[ie.networkSourceId])==null?void 0:d.layerId.toString())??"",ve=(g=(f=E[ie.assetGroupId])==null?void 0:f.assetGroupCode)==null?void 0:g.toString(),$e=E[ie.assetTypeId],_e=(v=$e==null?void 0:$e.assetTypeCode)==null?void 0:v.toString(),it=t[D]??{assetGroupHash:{}};if(!(H&&K&&ve&&_e))continue;const pe=it.assetGroupHash[H]??{assetTypeHash:{}},me=pe.assetTypeHash[K]??{};if(me[fe]=me[fe]??{},P){me[D]=me[D]??{};const Ve=`(assetgroup = ${H} AND assettype = ${K})`;($e==null?void 0:$e.connectivityPolicy)==="esriNECPEndVertex"?me[D].endVertex=(b=me[D])!=null&&b.endVertex?`${me[D].endVertex}`:`${Ve}`:me[D].anyVertex=me[D].anyVertex?`${me[D].anyVertex}`:`${Ve}`}const ye=`(assetgroup = ${ve} AND assettype = ${_e})`;($e==null?void 0:$e.connectivityPolicy)==="esriNECPEndVertex"?me[fe].endVertex=(S=me[fe])!=null&&S.endVertex?`${me[fe].endVertex} OR ${ye}`:`${ye}`:me[fe].anyVertex=(T=me[fe])!=null&&T.anyVertex?`${me[fe].anyVertex} OR ${ye}`:`${ye}`,pe.assetTypeHash[K]=me,it.assetGroupHash[H]=pe,t[D]=it}}this._set("rulesHash",t)}_getRuleFieldValuesForAssociation(t,r,i="from"){var n,s,o,l,d,f,g,v,b,S,T,E,x,O,C,I,P,k,D,H,re,K,ie,fe,ve,$e,_e,it,pe,me,ye,Ve,j,ue,Ie,Le,we,et,Be,Jt,nt,bt,_t,Pr,Zr,Gn,dl,hl,fo,Bu,pl,qu,Hu,fl,sh,Bn,en,Cf,oh,ah;switch(r){case"attachment":case"containment":return i==="from"?[{ruleLayerIdForSource:(n=t.fromNetworkSource)==null?void 0:n.layerId,ruleAssetGroupCodeForSource:(s=t.fromAssetGroup)==null?void 0:s.assetGroupCode,ruleAssetTypeCodeForSource:(o=t.fromAssetType)==null?void 0:o.assetTypeCode,ruleLayerIdForTarget:(l=t.toNetworkSource)==null?void 0:l.layerId,ruleAssetGroupCodeForTarget:(d=t.toAssetGroup)==null?void 0:d.assetGroupCode,ruleAssetTypeCodeForTarget:(f=t.toAssetType)==null?void 0:f.assetTypeCode}]:[{ruleLayerIdForSource:(g=t.toNetworkSource)==null?void 0:g.layerId,ruleAssetGroupCodeForSource:(v=t.toAssetGroup)==null?void 0:v.assetGroupCode,ruleAssetTypeCodeForSource:(b=t.toAssetType)==null?void 0:b.assetTypeCode,ruleLayerIdForTarget:(S=t.fromNetworkSource)==null?void 0:S.layerId,ruleAssetGroupCodeForTarget:(T=t.fromAssetGroup)==null?void 0:T.assetGroupCode,ruleAssetTypeCodeForTarget:(E=t.fromAssetType)==null?void 0:E.assetTypeCode}];case"connectivity":case"junction-junction-connectivity":return[{ruleLayerIdForSource:(x=t.fromNetworkSource)==null?void 0:x.layerId,ruleAssetGroupCodeForSource:(O=t.fromAssetGroup)==null?void 0:O.assetGroupCode,ruleAssetTypeCodeForSource:(C=t.fromAssetType)==null?void 0:C.assetTypeCode,ruleLayerIdForTarget:(I=t.toNetworkSource)==null?void 0:I.layerId,ruleAssetGroupCodeForTarget:(P=t.toAssetGroup)==null?void 0:P.assetGroupCode,ruleAssetTypeCodeForTarget:(k=t.toAssetType)==null?void 0:k.assetTypeCode},{ruleLayerIdForSource:(D=t.toNetworkSource)==null?void 0:D.layerId,ruleAssetGroupCodeForSource:(H=t.toAssetGroup)==null?void 0:H.assetGroupCode,ruleAssetTypeCodeForSource:(re=t.toAssetType)==null?void 0:re.assetTypeCode,ruleLayerIdForTarget:(K=t.fromNetworkSource)==null?void 0:K.layerId,ruleAssetGroupCodeForTarget:(ie=t.fromAssetGroup)==null?void 0:ie.assetGroupCode,ruleAssetTypeCodeForTarget:(fe=t.fromAssetType)==null?void 0:fe.assetTypeCode}];case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return t.ruleType===In.RTEdgeJunctionEdgeConnectivity?[{ruleLayerIdForSource:(ve=t.fromNetworkSource)==null?void 0:ve.layerId,ruleAssetGroupCodeForSource:($e=t.fromAssetGroup)==null?void 0:$e.assetGroupCode,ruleAssetTypeCodeForSource:(_e=t.fromAssetType)==null?void 0:_e.assetTypeCode,ruleLayerIdForTarget:(it=t.viaNetworkSource)==null?void 0:it.layerId,ruleAssetGroupCodeForTarget:(pe=t.viaAssetGroup)==null?void 0:pe.assetGroupCode,ruleAssetTypeCodeForTarget:(me=t.viaAssetType)==null?void 0:me.assetTypeCode},{ruleLayerIdForSource:(ye=t.viaNetworkSource)==null?void 0:ye.layerId,ruleAssetGroupCodeForSource:(Ve=t.viaAssetGroup)==null?void 0:Ve.assetGroupCode,ruleAssetTypeCodeForSource:(j=t.viaAssetType)==null?void 0:j.assetTypeCode,ruleLayerIdForTarget:(ue=t.fromNetworkSource)==null?void 0:ue.layerId,ruleAssetGroupCodeForTarget:(Ie=t.fromAssetGroup)==null?void 0:Ie.assetGroupCode,ruleAssetTypeCodeForTarget:(Le=t.fromAssetType)==null?void 0:Le.assetTypeCode},{ruleLayerIdForSource:(we=t.toNetworkSource)==null?void 0:we.layerId,ruleAssetGroupCodeForSource:(et=t.toAssetGroup)==null?void 0:et.assetGroupCode,ruleAssetTypeCodeForSource:(Be=t.toAssetType)==null?void 0:Be.assetTypeCode,ruleLayerIdForTarget:(Jt=t.viaNetworkSource)==null?void 0:Jt.layerId,ruleAssetGroupCodeForTarget:(nt=t.viaAssetGroup)==null?void 0:nt.assetGroupCode,ruleAssetTypeCodeForTarget:(bt=t.viaAssetType)==null?void 0:bt.assetTypeCode},{ruleLayerIdForSource:(_t=t.viaNetworkSource)==null?void 0:_t.layerId,ruleAssetGroupCodeForSource:(Pr=t.viaAssetGroup)==null?void 0:Pr.assetGroupCode,ruleAssetTypeCodeForSource:(Zr=t.viaAssetType)==null?void 0:Zr.assetTypeCode,ruleLayerIdForTarget:(Gn=t.toNetworkSource)==null?void 0:Gn.layerId,ruleAssetGroupCodeForTarget:(dl=t.toAssetGroup)==null?void 0:dl.assetGroupCode,ruleAssetTypeCodeForTarget:(hl=t.toAssetType)==null?void 0:hl.assetTypeCode}]:[{ruleLayerIdForSource:(fo=t.fromNetworkSource)==null?void 0:fo.layerId,ruleAssetGroupCodeForSource:(Bu=t.fromAssetGroup)==null?void 0:Bu.assetGroupCode,ruleAssetTypeCodeForSource:(pl=t.fromAssetType)==null?void 0:pl.assetTypeCode,ruleLayerIdForTarget:(qu=t.toNetworkSource)==null?void 0:qu.layerId,ruleAssetGroupCodeForTarget:(Hu=t.toAssetGroup)==null?void 0:Hu.assetGroupCode,ruleAssetTypeCodeForTarget:(fl=t.toAssetType)==null?void 0:fl.assetTypeCode},{ruleLayerIdForSource:(sh=t.toNetworkSource)==null?void 0:sh.layerId,ruleAssetGroupCodeForSource:(Bn=t.toAssetGroup)==null?void 0:Bn.assetGroupCode,ruleAssetTypeCodeForSource:(en=t.toAssetType)==null?void 0:en.assetTypeCode,ruleLayerIdForTarget:(Cf=t.fromNetworkSource)==null?void 0:Cf.layerId,ruleAssetGroupCodeForTarget:(oh=t.fromAssetGroup)==null?void 0:oh.assetGroupCode,ruleAssetTypeCodeForTarget:(ah=t.fromAssetType)==null?void 0:ah.assetTypeCode}];default:return[]}}_getWhereClauseForCompatibleFeatures(t,r,i){const n=new Map,[s,o]=this._getAssetFieldNames(t.sourceLayer),[l,d]=this._getFeatureAssetCodes(t),f=this._getFeatureSourceLayerId(t),g=Hs(r)?r.parent:r,v=Hs(r)?r.subtypeCode:null;i.forEach(S=>{const{type:T,direction:E}=S;this._getRulesForAssociationType(T).forEach(x=>{this._getRuleFieldValuesForAssociation(x,T,E).forEach(O=>{if(O.ruleAssetGroupCodeForTarget!=null&&O.ruleAssetTypeCodeForTarget!=null&&f===(O==null?void 0:O.ruleLayerIdForSource)&&l===(O==null?void 0:O.ruleAssetGroupCodeForSource)&&d===(O==null?void 0:O.ruleAssetTypeCodeForSource)&&g.layerId===(O==null?void 0:O.ruleLayerIdForTarget)&&(v==null||v===(O==null?void 0:O.ruleAssetGroupCodeForTarget))){const C=n.get(O.ruleAssetGroupCodeForTarget)??new Set;C.add(O.ruleAssetTypeCodeForTarget),n.set(O.ruleAssetGroupCodeForTarget,C)}})})});let b=[];return this._mergeAssetCodes(n).forEach((S,T)=>b.push(`${s} IN (${T}) AND ${o} IN (${Array.from(S).sort().join(", ")})`)),b.length>1&&(b=b.map(S=>`(${S})`)),b.join(" OR ")}_getRulesForAssociationType(t){const{rulesCategorized:r}=this;switch(t){case"attachment":return r.attachment;case"containment":return r.containment;case"connectivity":case"junction-junction-connectivity":return r.connectivity.filter(i=>i.ruleType===In.RTJunctionJunctionConnectivity);case"junction-edge-from-connectivity":case"junction-edge-midspan-connectivity":case"junction-edge-to-connectivity":return r.connectivity.filter(i=>i.ruleType===In.RTJunctionEdgeConnectivity||i.ruleType===In.RTEdgeJunctionEdgeConnectivity);default:return[]}}_getFeatureSourceLayerId(t){var n;const{sourceLayer:r}=t;let i;return fbe(r)?i=r.layerId:Hs(r)&&(i=(n=r.parent)==null?void 0:n.layerId),i??null}_getAssetFieldNames(t){return!t||!("fieldsIndex"in t)?[null,null]:[t.fieldsIndex.normalizeFieldName("assetGroup")??null,t.fieldsIndex.normalizeFieldName("assetType")??null]}_getFeatureAssetCodes(t){const[r,i]=this._getAssetFieldNames(t.sourceLayer);return[r?t.attributes[r]:null,i?t.attributes[i]:null]}_areSetsEqual(t,r){if(t.size!==r.size)return!1;for(const i of t)if(!r.has(i))return!1;return!0}_mergeAssetCodes(t){const r=new Map,i=new Set;for(const[n,s]of t){const o=new Set([n]);for(const[d,f]of t)n!==d&&!i.has(d)&&this._areSetsEqual(s,f)&&(o.add(d),i.add(d));const l=Array.from(o).sort().join(", ");r.set(l,s)}return r}};u([h({constructOnly:!0})],nd.prototype,"rulesLayer",void 0),u([h({constructOnly:!0})],nd.prototype,"rules",void 0),u([h({readOnly:!0})],nd.prototype,"rulesHash",void 0),u([h()],nd.prototype,"rulesCategorized",void 0),u([h({constructOnly:!0})],nd.prototype,"request",void 0),nd=u([M("esri.networks.RulesTable")],nd);const uDe=nd;let Us=class extends W{constructor(t){super(t),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};u([h({type:[Object],json:{write:!0}})],Us.prototype,"conditionBarriers",void 0),u([h({type:[Object],json:{write:!0}})],Us.prototype,"outputConditions",void 0),u([h({type:[Object],json:{write:!0}})],Us.prototype,"functions",void 0),u([h({type:[Object],json:{write:!0}})],Us.prototype,"functionBarriers",void 0),u([h({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Us.prototype,"traversabilityScope",void 0),u([h({type:String,json:{write:!0}})],Us.prototype,"shortestPathNetworkAttributeName",void 0),u([h({type:Boolean,json:{write:!0}})],Us.prototype,"includeBarriers",void 0),u([h({type:Boolean,json:{write:!0}})],Us.prototype,"validateConsistency",void 0),u([h({type:Boolean,json:{write:!0}})],Us.prototype,"ignoreBarriersAtStartingPoints",void 0),Us=u([M("esri.networks.support.TraceConfiguration")],Us);const t4=Us;let cr=class extends t4{constructor(t){super(t),this.filterBarriers=[],this.arcadeExpressionBarrier=null,this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.allowIndeterminateFlow=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.diagramTemplateName=null,this.tierName=null,this.validateLocatability=null}};u([h({type:[Object],json:{write:!0}})],cr.prototype,"filterBarriers",void 0),u([h({type:String,json:{write:!0}})],cr.prototype,"arcadeExpressionBarrier",void 0),u([h({type:String,json:{write:!0}})],cr.prototype,"domainNetworkName",void 0),u([h({type:String,json:{write:!0}})],cr.prototype,"filterBitsetNetworkAttributeName",void 0),u([h({type:[Object],json:{write:!0}})],cr.prototype,"filterFunctionBarriers",void 0),u([h({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],cr.prototype,"filterScope",void 0),u([h({type:Boolean,json:{write:!0}})],cr.prototype,"includeContainers",void 0),u([h({type:Boolean,json:{write:!0}})],cr.prototype,"includeContent",void 0),u([h({type:Boolean,json:{write:!0}})],cr.prototype,"includeIsolated",void 0),u([h({type:Boolean,json:{write:!0}})],cr.prototype,"includeStructures",void 0),u([h({type:Boolean,json:{write:!0}})],cr.prototype,"allowIndeterminateFlow",void 0),u([h({type:Boolean,json:{write:!0}})],cr.prototype,"includeUpToFirstSpatialContainer",void 0),u([h({type:Object,json:{write:!0}})],cr.prototype,"nearestNeighbor",void 0),u([h({type:[Object],json:{write:!0}})],cr.prototype,"outputFilterCategories",void 0),u([h({type:[Object],json:{write:!0}})],cr.prototype,"outputFilters",void 0),u([h({type:[Object],json:{write:!0}})],cr.prototype,"propagators",void 0),u([h({type:String,json:{write:!0}})],cr.prototype,"subnetworkName",void 0),u([h({type:String,json:{write:!0}})],cr.prototype,"targetTierName",void 0),u([h({type:String,json:{write:!0}})],cr.prototype,"diagramTemplateName",void 0),u([h({type:String,json:{write:!0}})],cr.prototype,"tierName",void 0),u([h({type:Boolean,json:{write:!0}})],cr.prototype,"validateLocatability",void 0),cr=u([M("esri.networks.support.UNTraceConfiguration")],cr);const cDe=cr;let Cn=class extends pP{constructor(t){super(t),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(t,r){return t.tierName!==void 0?cDe.fromJSON(t):t4.fromJSON(t)}};u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],Cn.prototype,"globalId",void 0),u([h({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],Cn.prototype,"title",void 0),u([h({type:t4,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Cn.prototype,"traceConfiguration",void 0),u([se("service","traceConfiguration")],Cn.prototype,"readTraceConfiguration",null),u([h({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Cn.prototype,"creationDate",void 0),u([h({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Cn.prototype,"creator",void 0),u([h({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],Cn.prototype,"description",void 0),u([h({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],Cn.prototype,"minStartingPoints",void 0),u([h({json:{origins:{service:{read:!0,write:!0}},read:!1}})],Cn.prototype,"resultTypes",void 0),u([h({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],Cn.prototype,"tags",void 0),u([h({type:y2.apiValues,json:{type:y2.jsonValues,origins:{service:{read:y2.read,write:y2.write}},read:!1}})],Cn.prototype,"traceType",void 0),Cn=u([M("esri.networks.support.NamedTraceConfiguration")],Cn);const dDe=Cn;function hDe(e){var S,T,E,x,O,C,I,P,k,D,H;const t=e==null?void 0:e.fieldsIndex,r="fromnetworksourceid",i="fromglobalid",n="fromterminalid",s="tonetworksourceid",o="toglobalid",l="toterminalid",d="status",f="associationtype",g="iscontentvisible",v="percentalong",b="globalid";return{fromNetworkSourceId:((S=t==null?void 0:t.get(r))==null?void 0:S.name)??r,fromGlobalId:((T=t==null?void 0:t.get(i))==null?void 0:T.name)??i,fromTerminalId:((E=t==null?void 0:t.get(n))==null?void 0:E.name)??n,toNetworkSourceId:((x=t==null?void 0:t.get(s))==null?void 0:x.name)??s,toGlobalId:((O=t==null?void 0:t.get(o))==null?void 0:O.name)??o,toTerminalId:((C=t==null?void 0:t.get(l))==null?void 0:C.name)??l,status:((I=t==null?void 0:t.get(d))==null?void 0:I.name)??d,associationType:((P=t==null?void 0:t.get(f))==null?void 0:P.name)??f,isContentVisible:((k=t==null?void 0:t.get(g))==null?void 0:k.name)??g,percentAlong:((D=t==null?void 0:t.get(v))==null?void 0:D.name)??v,globalId:((H=t==null?void 0:t.get((e==null?void 0:e.globalIdField)??b))==null?void 0:H.name)??b}}function LGe(e,t){if(t.type!=="feature"&&t.type!=="subtype-group")return[];if(!t.url)return[];const r="utilityNetworks"in e.map?e.map.utilityNetworks??[]:[];for(const i of r)if(i.isUtilityLayer(t)){const n=t.fieldsIndex.get("assetgroup"),s=t.fieldsIndex.get("assettype");return[n==null?void 0:n.name,s==null?void 0:s.name].filter(o=>o!=null)}return[]}let Vs=class extends Ae{constructor(t){super(t),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null,this.associationsTable=null,this.associationsTableId=null,this.associationsTableUrl=null}destroy(){var t;(t=this.associationsTable)==null||t.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const{associationsTableUrl:t}=this;if(!t)throw new V("utility-network-system-layers:missing-associations-table-url","Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new e4({url:t})}return await this.associationsTable.load(),this.associationsTable}};u([h({constructOnly:!0})],Vs.prototype,"rulesTableId",void 0),u([h({constructOnly:!0})],Vs.prototype,"rulesTableUrl",void 0),u([h({constructOnly:!0})],Vs.prototype,"subnetworksTableId",void 0),u([h({constructOnly:!0})],Vs.prototype,"subnetworksTableUrl",void 0),u([h({constructOnly:!0})],Vs.prototype,"dirtyAreasLayerId",void 0),u([h({constructOnly:!0})],Vs.prototype,"dirtyAreasLayerUrl",void 0),u([h()],Vs.prototype,"associationsTable",void 0),u([h({constructOnly:!0})],Vs.prototype,"associationsTableId",void 0),u([h({constructOnly:!0})],Vs.prototype,"associationsTableUrl",void 0),Vs=u([M("esri.networks.support.NetworkSystemLayers")],Vs);const pDe=Vs;let Mm=class extends W{constructor(t){super(t),this.id=null,this.name=null}};u([h({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],Mm.prototype,"id",void 0),u([h({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],Mm.prototype,"name",void 0),u([h({type:Boolean,json:{write:!0}})],Mm.prototype,"isUpstreamTerminal",void 0),Mm=u([M("esri.networks.support.Terminal")],Mm);const fDe=Mm,m2=new We({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let sd=class extends W{constructor(t){super(t),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};u([h({type:String,json:{write:!0}})],sd.prototype,"defaultConfiguration",void 0),u([h({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],sd.prototype,"id",void 0),u([h({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],sd.prototype,"name",void 0),u([h({type:[fDe],json:{write:!0}})],sd.prototype,"terminals",void 0),u([h({type:m2.apiValues,json:{type:m2.jsonValues,read:m2.read,write:m2.write}})],sd.prototype,"traversabilityModel",void 0),sd=u([M("esri.networks.support.TerminalConfiguration")],sd);const DB=sd;let Om=class extends W{constructor(t){super(t),this.line=null,this.multipoint=null,this.polygon=null}};u([h({type:Qs,json:{write:!0},readOnly:!0})],Om.prototype,"line",void 0),u([h({type:$w,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],Om.prototype,"multipoint",void 0),u([h({type:oo,json:{write:!0},readOnly:!0})],Om.prototype,"polygon",void 0),Om=u([M("esri.rest.networks.support.AggregatedGeometry")],Om);const yDe=Om;let Rm=class extends W{constructor(t){super(t),this.functionType=null,this.networkAttributeName=null,this.result=null}};u([h({type:["add","subtract","average","count","min","max"],json:{write:!0},readOnly:!0})],Rm.prototype,"functionType",void 0),u([h({type:String,json:{write:!0},readOnly:!0})],Rm.prototype,"networkAttributeName",void 0),u([h({type:Number,json:{write:!0},readOnly:!0})],Rm.prototype,"result",void 0),Rm=u([M("esri.rest.networks.support.FunctionResult")],Rm);const mDe=Rm;let zo=class extends W{constructor(e){super(e),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};u([h({type:Number,json:{write:!0}})],zo.prototype,"assetGroupCode",void 0),u([h({type:Number,json:{write:!0}})],zo.prototype,"assetTypeCode",void 0),u([h({type:String,json:{write:!0}})],zo.prototype,"globalId",void 0),u([h({type:Number,json:{write:!0}})],zo.prototype,"networkSourceId",void 0),u([h({type:Number,json:{write:!0}})],zo.prototype,"objectId",void 0),u([h({type:Number,json:{write:!0}})],zo.prototype,"positionFrom",void 0),u([h({type:Number,json:{write:!0}})],zo.prototype,"positionTo",void 0),u([h({type:Number,json:{write:!0}})],zo.prototype,"terminalId",void 0),zo=u([M("esri.rest.networks.support.NetworkElement")],zo);const gDe=zo;let cu=class extends W{constructor(t){super(t),this.aggregatedGeometry=null,this.elements=null,this.globalFunctionResults=null,this.kFeaturesForKNNFound=!1,this.startingPointsIgnored=!1,this.warnings=null}};u([h({type:yDe,json:{write:!0},readOnly:!0})],cu.prototype,"aggregatedGeometry",void 0),u([h({type:[gDe],json:{write:!0},readOnly:!0})],cu.prototype,"elements",void 0),u([h({type:[mDe],json:{write:!0},readOnly:!0})],cu.prototype,"globalFunctionResults",void 0),u([h({type:Boolean,json:{write:!0},readOnly:!0})],cu.prototype,"kFeaturesForKNNFound",void 0),u([h({type:Boolean,json:{write:!0},readOnly:!0})],cu.prototype,"startingPointsIgnored",void 0),u([h({type:[String],json:{write:!0},readOnly:!0})],cu.prototype,"warnings",void 0),cu=u([M("esri.rest.networks.support.TraceResult")],cu);const vDe=cu,bDe=Wr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Rp=class extends vDe{constructor(t){super(t),this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(t){const r={...t,query:{f:"json"}},{data:i}=await mt(this.statusUrl,r),n=i.traceResults?{...i.traceResults,...i}:i;return this.read(n),this}async waitForJobCompletion(t={}){const{interval:r=1e3,statusCallback:i}=t;return new Promise((n,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(kt()),this.checkJobStatus().then(l=>{const{status:d}=l;switch(this.status=d,d){case"job-succeeded":this._clearTimer(),n(this);break;case"job-waiting":case"job-executing":i&&i(this)}},l=>{this._clearTimer(),s(l)})},r);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};u([h({type:String,json:{write:!0}})],Rp.prototype,"statusUrl",void 0),u([Ee(bDe)],Rp.prototype,"status",void 0),u([h({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.submissionTime=e?e.getTime():null}}}})],Rp.prototype,"submissionTime",void 0),u([h({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.lastUpdatedTime=e?e.getTime():null}}}})],Rp.prototype,"lastUpdatedTime",void 0),Rp=u([M("esri.networks.support.TraceJobInfo")],Rp);const _De=Rp;let du=class extends aDe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility",this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,t,r,i,n,s,o,l;return new pDe({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(t=this.sourceJSON)==null?void 0:t.systemLayers.rulesTableId}`:null,subnetworksTableId:(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(n=this.sourceJSON)==null?void 0:n.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:(o=this.sourceJSON)==null?void 0:o.systemLayers.associationsTableId,associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(l=this.sourceJSON)==null?void 0:l.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(t=>DB.fromJSON(t)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(t=>t.domainNetworkName))||[]}get _utilityLayerList(){var t,r;const e=new Set;return(r=(t=this.dataElement)==null?void 0:t.domainNetworks)==null||r.map(i=>{var n,s;(n=i==null?void 0:i.edgeSources)==null||n.map(({layerId:o,sourceId:l})=>{this._layerIdBySourceId.set(l,o),this._sourceIdByLayerId.set(o,l),e.add(o)}),(s=i==null?void 0:i.junctionSources)==null||s.map(({layerId:o,sourceId:l})=>{this._layerIdBySourceId.set(l,o),this._sourceIdByLayerId.set(o,l),e.add(o)})}),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var d,f,g,v;let t=null,r=null;const i=e.layer;let n=null;if((i==null?void 0:i.type)==="feature"){if(n=i.layerId,n===null)return null}else if((i==null?void 0:i.type)!=="subtype-sublayer"||(n=((d=i==null?void 0:i.parent)==null?void 0:d.layerId)??null,n===null))return null;const s=e.attributes;if(s==null)return null;for(const b of Object.keys(s))b.toUpperCase()==="ASSETGROUP"&&(t=e.getAttribute(b)),b.toUpperCase()==="ASSETTYPE"&&(r=e.getAttribute(b));if(!this.dataElement)return null;let o=null;const l=this.dataElement.domainNetworks;for(const b of l){const S=(f=b.junctionSources)==null?void 0:f.find(T=>T.layerId===n);if(S){const T=(g=S.assetGroups)==null?void 0:g.find(E=>E.assetGroupCode===t);if(T){const E=(v=T.assetTypes)==null?void 0:v.find(x=>x.assetTypeCode===r);if(E!=null&&E.isTerminalConfigurationSupported){o=E.terminalConfigurationId;break}}}}if(o!=null){const b=this.dataElement.terminalConfigurations,S=b==null?void 0:b.find(T=>T.terminalConfigurationId===o);return S?DB.fromJSON(S):null}return null}getTierNames(e){var r;const t=(r=this.dataElement)==null?void 0:r.domainNetworks.find(i=>i.domainNetworkName===e);return(t==null?void 0:t.tiers.map(i=>i.name))||[]}async getRulesTable(){return this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable()),await this._sharedRulesTable}getTerminalById(e){if(!this.dataElement||e==null)return null;const t=this._terminalById.get(e);return t??(this.terminalConfigurations.forEach(r=>{r.terminals.forEach(i=>{this._terminalById.set(i.id,i)})}),this._terminalById.get(e))}isUtilityLayer(e){var t,r;return"layerId"in e?this._utilityLayerList.has(e==null?void 0:e.layerId)&&(((t=e.url)==null?void 0:t.startsWith(this.featureServiceUrl))??!1):!(e.type!=="subtype-sublayer"||!e.parent)&&this._utilityLayerList.has(e.parent.layerId)&&(((r=e.parent.url)==null?void 0:r.startsWith(this.featureServiceUrl))??!1)}async queryAssociations(e,t){const[{queryAssociations:r},{default:i}]=await Promise.all([ne(()=>import("./queryAssociations-DKjpSX3_.js"),__vite__mapDeps([293,294])),ne(()=>import("./QueryAssociationsParameters-BSHH5JD5.js"),[])]),n=i.from(e);return n.gdbVersion=this.gdbVersion,n.moment=this.historicMoment,(await r(this.networkServiceUrl,n,t)).associations}async synthesizeAssociationGeometries(e){const[{synthesizeAssociationGeometries:t},{default:r}]=await Promise.all([ne(()=>import("./synthesizeAssociationGeometries-Ym-1Z6lS.js"),__vite__mapDeps([295,294])),ne(()=>import("./SynthesizeAssociationGeometriesParameters-Ce8qMQTW.js"),[])]),i=r.from(e);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,t(this.networkServiceUrl,i)}async trace(e){const[{trace:t},{default:r}]=await Promise.all([ne(()=>import("./trace-D0GyrpWq.js"),[]),ne(()=>import("./TraceParameters-BmSUBM3b.js"),[])]),i=r.from(e);return i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment,t(this.networkServiceUrl,i)}async submitTraceJob(e){const[{submitTraceJob:t},{default:r}]=await Promise.all([ne(()=>import("./trace-D0GyrpWq.js"),[]),ne(()=>import("./TraceParameters-BmSUBM3b.js"),[])]),i=r.from(e);i.gdbVersion=this.gdbVersion,i.moment=this.historicMoment;const n=await t(this.networkServiceUrl,i);return new _De({statusUrl:n})}async canAddAssociation(e){const t=await this.getRulesTable();if(!t)return!1;await t.load();const r=(d,f)=>d?d.terminalId===1?!(f!=null&&f.terminalId)||(f==null?void 0:f.terminalId)===d.terminalId:d.terminalId===(f==null?void 0:f.terminalId):!(f!=null&&f.terminalId),i=d=>({fromRuleElement:{networkSource:d.fromNetworkSource,assetGroup:d.fromAssetGroup,assetType:d.fromAssetType,terminal:d.fromTerminal},viaRuleElement:d.viaNetworkSource?{networkSource:d.viaNetworkSource,assetGroup:d.viaAssetGroup,assetType:d.viaAssetType,terminal:d.viaTerminal}:void 0,toRuleElement:{networkSource:d.toNetworkSource,assetGroup:d.toAssetGroup,assetType:d.toAssetType,terminal:d.toTerminal}}),n=(d,f,g=!0)=>{var v,b,S;return((v=d.networkSource)==null?void 0:v.sourceId)===f.networkSourceId&&((b=d.assetGroup)==null?void 0:b.assetGroupCode)===f.assetGroupCode&&((S=d.assetType)==null?void 0:S.assetTypeCode)===f.assetTypeCode&&(!g||r(d.terminal,f))},s=(d,f)=>{const{fromRuleElement:g,toRuleElement:v}=i(d);return n(g,f.fromNetworkElement,!1)&&n(v,f.toNetworkElement,!1)},o=(d,f)=>{const{fromRuleElement:g,toRuleElement:v}=i(d);return n(g,f.fromNetworkElement)&&n(v,f.toNetworkElement)||n(g,f.toNetworkElement)&&n(v,f.fromNetworkElement)},l=(d,f)=>{const{fromRuleElement:g,toRuleElement:v,viaRuleElement:b}=i(d);return n(g,f.fromNetworkElement)&&n(b,f.toNetworkElement)||n(g,f.toNetworkElement)&&n(b,f.fromNetworkElement)||n(b,f.fromNetworkElement)&&n(v,f.toNetworkElement)||n(b,f.toNetworkElement)&&n(v,f.fromNetworkElement)};return e.associationType==="containment"?t.rulesCategorized.containment.some(d=>s(d,e)):e.associationType==="attachment"?t.rulesCategorized.attachment.some(d=>s(d,e)):t.rulesCategorized.connectivity.some(d=>d.ruleType===In.RTEdgeJunctionEdgeConnectivity?l(d,e):o(d,e))}generateAddAssociations(e){const{associationsTable:t}=this.networkSystemLayers,{fromNetworkSourceId:r,fromGlobalId:i,fromTerminalId:n,toNetworkSourceId:s,toGlobalId:o,toTerminalId:l,associationType:d,isContentVisible:f,percentAlong:g,globalId:v}=hDe(t);return{addFeatures:e.map(b=>{var S,T,E,x,O,C;return new ol({attributes:{[r]:(S=b.fromNetworkElement)==null?void 0:S.networkSourceId,[i]:(T=b.fromNetworkElement)==null?void 0:T.globalId,[n]:(E=b.fromNetworkElement)==null?void 0:E.terminalId,[s]:(x=b.toNetworkElement)==null?void 0:x.networkSourceId,[o]:(O=b.toNetworkElement)==null?void 0:O.globalId,[l]:(C=b.toNetworkElement)==null?void 0:C.terminalId,[d]:lDe[b.associationType],[f]:b.isContentVisible==null?void 0:b.isContentVisible?1:0,[g]:b.percentAlong,[v]:b.globalId}})}),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:(t==null?void 0:t.globalIdField)??"globalid",objectIdField:(t==null?void 0:t.objectIdField)??"objectid"}}}generateDeleteAssociations(e){const{associationsTable:t,associationsTableId:r}=this.networkSystemLayers;return{deleteFeatures:e.map(i=>({globalId:i.globalId})),id:r,identifierFields:{globalIdField:(t==null?void 0:t.globalIdField)??"globalid",objectIdField:(t==null?void 0:t.objectIdField)??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(e){var i;if(((i=this.sharedNamedTraceConfigurations)==null?void 0:i.length)===0)return;const t=this.sharedNamedTraceConfigurations.map(n=>n.globalId),r=await this.queryNamedTraceConfigurations({globalIds:t},e);for(const n of this.sharedNamedTraceConfigurations){const s=r==null?void 0:r.find(o=>o.globalId===n.globalId);if(s){const o=s.write({},{origin:"service"});n.read(o,{origin:"service"})}}}async _createRulesTable(){var s;const e=this.networkSystemLayers.rulesTableUrl,t=new e4({url:e});await t.load();const r=(s=this.dataElement)==null?void 0:s.domainNetworks;if(!r)return null;const i=r.flatMap(o=>[...o.edgeSources||[],...o.junctionSources||[]]),n=(await wDe(t)).map(o=>this._hydrateRuleInfo(t,i,o));return new uDe({rulesLayer:t,rules:n})}_hydrateRuleInfo(e,t,r){const i=e.fieldsIndex,n=i.get("RULETYPE"),s=i.get("CREATIONDATE"),o=i.get("FROMNETWORKSOURCEID"),l=i.get("FROMASSETGROUP"),d=i.get("FROMASSETTYPE"),f=i.get("FROMTERMINALID"),g=i.get("TONETWORKSOURCEID"),v=i.get("TOASSETGROUP"),b=i.get("TOASSETTYPE"),S=i.get("TOTERMINALID"),T=i.get("VIANETWORKSOURCEID"),E=i.get("VIAASSETGROUP"),x=i.get("VIAASSETTYPE"),O=i.get("VIATERMINALID"),C=r.attributes[n.name],I=new Date(r.attributes[s.name]),P=[{networkSourceId:r.attributes[o.name],assetGroupId:r.attributes[l.name],assetTypeId:r.attributes[d.name],terminalId:r.attributes[f.name]},{networkSourceId:r.attributes[g.name],assetGroupId:r.attributes[v.name],assetTypeId:r.attributes[b.name],terminalId:r.attributes[S.name]},{networkSourceId:r.attributes[T.name],assetGroupId:r.attributes[E.name],assetTypeId:r.attributes[x.name],terminalId:r.attributes[O.name]}];let k;(function(H){H[H.from=0]="from",H[H.to=1]="to",H[H.via=2]="via"})(k||(k={}));const D={ruleType:C,creationDate:I};for(const H of[k.from,k.to,k.via]){if(C!==In.RTEdgeJunctionEdgeConnectivity&&H===k.via)continue;const re=P[H],K=t.find(_e=>_e.sourceId===re.networkSourceId),ie=K==null?void 0:K.assetGroups.find(_e=>_e.assetGroupCode===re.assetGroupId),fe=ie==null?void 0:ie.assetTypes.find(_e=>_e.assetTypeCode===re.assetTypeId),ve=this._getTerminal(fe,re);let $e="";switch(H){case k.from:$e="from";break;case k.to:$e="to";break;case k.via:$e="via"}D[`${$e}NetworkSource`]=K,D[`${$e}AssetGroup`]=ie,D[`${$e}AssetType`]=fe,D[`${$e}Terminal`]=ve==null?void 0:ve.toJSON()}return D}_getTerminal(e,t){var n,s;const r=e==null?void 0:e.terminalConfigurationId,i=(n=this.terminalConfigurations)==null?void 0:n.find(o=>o.id===r);return((s=i==null?void 0:i.terminals)==null?void 0:s.find(o=>o.id===t.terminalId))??null}};async function wDe(e){const t=new al({where:"1=1",outFields:["*"]});return(await Ere(e,t)).features}u([h({type:[dDe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],du.prototype,"sharedNamedTraceConfigurations",void 0),u([h({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],du.prototype,"type",void 0),u([h({readOnly:!0})],du.prototype,"serviceTerritoryFeatureLayerId",null),u([h({readOnly:!0})],du.prototype,"networkSystemLayers",null),u([h({readOnly:!0})],du.prototype,"terminalConfigurations",null),u([h({readOnly:!0})],du.prototype,"domainNetworkNames",null),du=u([M("esri.networks.UtilityNetwork")],du);const kie=du,SDe=Object.freeze(Object.defineProperty({__proto__:null,default:kie},Symbol.toStringTag,{value:"Module"}));let Cm=class extends He.ClonableMixin(W){constructor(t){super(t),this.expression=null,this.returnType="string",this.title=null}};u([h({type:String,json:{write:{isRequired:!0}}})],Cm.prototype,"expression",void 0),u([h({type:["number","string"],json:{write:!0}})],Cm.prototype,"returnType",void 0),u([h({type:String,json:{write:!0}})],Cm.prototype,"title",void 0),Cm=u([M("esri.webdoc.geotriggersInfo.ExpressionInfo")],Cm);const Die=Cm,g2=new We({deviceLocation:"device-location"});let qb=class extends He.ClonableMixin(W){constructor(t){super(t),this.filterExpression=null,this.type="device-location"}};u([h({type:Die,json:{write:!0}})],qb.prototype,"filterExpression",void 0),u([h({type:g2.apiValues,readOnly:!0,json:{type:g2.jsonValues,read:g2.read,write:g2.write}})],qb.prototype,"type",void 0),qb=u([M("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],qb);const TDe=qb;let Hb=class extends He.ClonableMixin(W){constructor(t){super(t),this.geometry=null,this.where=null}};u([h({types:Zg,json:{read:Du,write:!0}})],Hb.prototype,"geometry",void 0),u([h({type:String,json:{write:!0}})],Hb.prototype,"where",void 0),Hb=u([M("esri.webdoc.geotriggersInfo.FeatureFilter")],Hb);const EDe=Hb;let Im=class extends He.ClonableMixin(W){constructor(t){super(t),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};u([h({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],Im.prototype,"layerId",void 0),u([h({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],Im.prototype,"layerUrl",void 0),u([Ee({featureLayer:"feature-layer"},{readOnly:!0})],Im.prototype,"type",void 0),Im=u([M("esri.webdoc.geotriggersInfo.FeatureLayerSource")],Im);const $De=Im;let Cp=class extends He.ClonableMixin(W){constructor(t){super(t),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};u([h({type:$De,json:{write:{isRequired:!0}}})],Cp.prototype,"fenceSource",void 0),u([h({type:EDe,json:{write:!0}})],Cp.prototype,"filter",void 0),u([h({type:Number,json:{write:!0}})],Cp.prototype,"bufferDistance",void 0),u([Ee({features:"features"},{readOnly:!0})],Cp.prototype,"type",void 0),Cp=u([M("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Cp);const xDe=Cp;let XT=class extends He.ClonableMixin(W){constructor(t){super(t),this.type="fence"}};u([Ee({fence:"fence"},{readOnly:!0})],XT.prototype,"type",void 0),XT=u([M("esri.webdoc.geotriggersInfo.Geotrigger")],XT);const jie=XT;let Wb=class extends He.ClonableMixin(W){constructor(t){super(t),this.expressionInfo=null,this.requestedActions=null}};u([h({type:Die,json:{write:!0}})],Wb.prototype,"expressionInfo",void 0),u([h({type:[String],json:{write:!0}})],Wb.prototype,"requestedActions",void 0),Wb=u([M("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],Wb);const ADe=Wb,MDe=new We({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),ODe=new We({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),v2=new We({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let Go=class extends jie{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};u([Ee(MDe)],Go.prototype,"enterExitRule",void 0),u([h({type:TDe,json:{write:{isRequired:!0}}})],Go.prototype,"feed",void 0),u([Ee(ODe)],Go.prototype,"feedAccuracyMode",void 0),u([h({type:v2.apiValues,json:{type:v2.jsonValues,read:v2.read,write:{writer:v2.write,isRequired:!0}}})],Go.prototype,"fenceNotificationRule",void 0),u([h({type:xDe,json:{write:{isRequired:!0}}})],Go.prototype,"fenceParameters",void 0),u([h({type:String,json:{write:!0}})],Go.prototype,"name",void 0),u([h({type:ADe,json:{write:!0}})],Go.prototype,"notificationOptions",void 0),u([Ee({fence:"fence"},{readOnly:!0})],Go.prototype,"type",void 0),Go=u([M("esri.webdoc.geotriggersInfo.FenceGeotrigger")],Go);const RDe=Go,CDe={base:jie,key:"type",typeMap:{fence:RDe}};let KT=class extends He.ClonableMixin(W){constructor(e){super(e),this.geotriggers=null}};u([h({types:[CDe],json:{write:{isRequired:!0}}})],KT.prototype,"geotriggers",void 0),KT=u([M("esri.webdoc.GeotriggersInfo")],KT);const IDe=KT;let Nm=class extends He.ClonableMixin(W){constructor(e){super(e),this.portalItem=null}readPortalItem(e,t,r){const{itemId:i}=t;if(i)return new Qa({id:i,portal:r==null?void 0:r.portal})}writePortalItem(e,t){e!=null&&e.id&&(t.itemId=e.id)}};u([h({type:Qa,json:{write:{isRequired:!0}}})],Nm.prototype,"portalItem",void 0),u([se("portalItem",["itemId"])],Nm.prototype,"readPortalItem",null),u([le("portalItem",{itemId:{type:String}})],Nm.prototype,"writePortalItem",null),Nm=u([M("esri.webdoc.ips.PositioningService")],Nm);const NDe=Nm;let QT=class extends He.ClonableMixin(W){constructor(e){super(e),this.positioningService=null}};u([h({type:NDe,json:{write:{isRequired:!0}}})],QT.prototype,"positioningService",void 0),QT=u([M("esri.webdoc.IPSInfo")],QT);const PDe=QT,LDe={currentVersion:Lte,createInitialViewProperties:()=>new E$,parseVersion:og.parse,itemType:"Web Map",name:"webmap",origin:"web-map"},kDe=ge.ofType(kie);let od=class extends DRe{constructor(e){super(e),this.geotriggersInfo=null,this.ipsInfo=null,this.presentation=null,this.utilityNetworks=null}destroy(){if(this.utilityNetworks){const e=this.utilityNetworks.removeAll();for(const t of e)t.destroy();this.utilityNetworks.destroy()}}get context(){return LDe}loadAll(){return xx(this,e=>{var t,r;e(this.ground,this.basemap,this.layers,this.tables,(r=(t=this.ipsInfo)==null?void 0:t.positioningService)==null?void 0:r.portalItem)})}static fromJSON(e){if(e)return new this({resourceInfo:e});throw new V("webmap:empty-resource","Expected a JSON resource but got nothing")}};od.VERSION=Lte,u([h({type:IDe,json:{write:!0}})],od.prototype,"geotriggersInfo",void 0),u([h({type:PDe,json:{write:!0,name:"mapIPSInfo"}})],od.prototype,"ipsInfo",void 0),u([h({json:{write:!0}})],od.prototype,"presentation",void 0),u([h({type:kDe,json:{read:!0,write:!0}})],od.prototype,"utilityNetworks",void 0),od=u([M("esri.WebMap")],od);const DDe=od,jDe=tk.div`
  width: 100%;
  height: 90vh;
`,FDe=pH(()=>{const e=Dn.useRef(null),t=Dn.useRef(null);return Dn.useEffect(()=>{const r=new DDe({portalItem:{id:"e691172598f04ea8881cd2a4adaa45ba"}}),i=new Q3e({container:e.current,map:r});return i.when(()=>{t.current=r.layers.getItemAt(0)}),()=>i.destroy()},[]),Dn.useEffect(()=>{t.current&&(t.current.visible=Xb.layerVisible)},[Xb.layerVisible]),_u.jsx(jDe,{ref:e})}),UDe=tk.button`
  background: ${e=>e.active?"green":"red"};
  color: white;
  padding: 10px 15px;
  border: none;
  cursor: pointer;
  border-radius: 5px;
  margin: 10px;
`,VDe=pH(()=>_u.jsx(UDe,{active:Xb.layerVisible,onClick:()=>Xb.toggleLayer(),children:Xb.layerVisible?"Hide Layer":"Show Layer"}));function zDe(){return _u.jsxs(_u.Fragment,{children:[_u.jsx(rae,{}),_u.jsx(VDe,{}),_u.jsx(FDe,{})]})}eoe.createRoot(document.getElementById("root")).render(_u.jsx(Js.StrictMode,{children:_u.jsx(zDe,{})}));export{Zt as $,pAe as A,zUe as B,Ki as C,rt as D,Hte as E,BUe as F,iVe as G,vt as H,oi as I,eQ as J,Ni as K,CFe as L,Gd as M,U8 as N,ae as O,mt as P,ze as Q,Xi as R,Qa as S,rhe as T,ore as U,ge as V,r0 as W,mGe as X,Iu as Y,ao as Z,ne as _,ai as a,so as a$,ol as a0,Lu as a1,Mee as a2,Oe as a3,Q_ as a4,ti as a5,y$ as a6,nP as a7,J2e as a8,Wt as a9,tz as aA,JZ as aB,Yp as aC,Jk as aD,YZ as aE,Q9 as aF,i8e as aG,uje as aH,rW as aI,gT as aJ,Ig as aK,BE as aL,nr as aM,ro as aN,_k as aO,gs as aP,kt as aQ,Sw as aR,ll as aS,Wg as aT,Ar as aU,eFe as aV,Kje as aW,Qje as aX,rl as aY,Qs as aZ,oo as a_,cz as aa,ja as ab,sz as ac,ez as ad,ju as ae,nX as af,bz as ag,rVe as ah,g$ as ai,kd as aj,LL as ak,j5e as al,U_ as am,Pn as an,bue as ao,De as ap,c0 as aq,r5e as ar,U as as,mH as at,ZZ as au,w9e as av,MAe as aw,nz as ax,iz as ay,rz as az,nRe as b,kC as b$,sVe as b0,OH as b1,mn as b2,US as b3,Eje as b4,EQ as b5,yn as b6,zp as b7,qpe as b8,Z as b9,mbe as bA,c1e as bB,r1e as bC,Vd as bD,D7e as bE,F7e as bF,j7e as bG,eLe as bH,QPe as bI,HD as bJ,Pe as bK,DS as bL,qje as bM,Bje as bN,Gje as bO,t1e as bP,f6e as bQ,y6e as bR,jd as bS,al as bT,$de as bU,k4e as bV,j4e as bW,D4e as bX,F4e as bY,U4e as bZ,V4e as b_,cG as ba,uG as bb,Tf as bc,Zp as bd,cs as be,Zx as bf,k5e as bg,hr as bh,wk as bi,Sg as bj,w4e as bk,OGe as bl,gDe as bm,se as bn,$w as bo,Qe as bp,K$ as bq,X$ as br,Wje as bs,dD as bt,Aw as bu,Fe as bv,Vje as bw,zje as bx,h1e as by,Hje as bz,Fm as c,pD as c$,c6e as c0,Ix as c1,ot as c2,He as c3,tge as c4,We as c5,Ee as c6,Du as c7,Zg as c8,RSe as c9,Wr as cA,Hp as cB,KR as cC,YDe as cD,gAe as cE,fH as cF,jCe as cG,Nke as cH,MD as cI,nIe as cJ,U9 as cK,OFe as cL,Pd as cM,Ga as cN,aze as cO,oze as cP,Z$ as cQ,h8 as cR,T$e as cS,iPe as cT,dA as cU,JIe as cV,XIe as cW,KIe as cX,Jd as cY,Mge as cZ,Qg as c_,OSe as ca,si as cb,Or as cc,$r as cd,Kd as ce,Xd as cf,Ud as cg,nl as ch,co as ci,AC as cj,ir as ck,jE as cl,xC as cm,OC as cn,OJ as co,YO as cp,Ze as cq,Mt as cr,Lw as cs,JI as ct,xje as cu,F6e as cv,s8e as cw,Ae as cx,nwe as cy,Cze as cz,Zte as d,Dbe as d$,p_e as d0,mX as d1,A_e as d2,Dze as d3,x7 as d4,ATe as d5,vbe as d6,dVe as d7,of as d8,w7e as d9,Pge as dA,w$e as dB,iDe as dC,RGe as dD,d3e as dE,pVe as dF,NVe as dG,v3e as dH,OVe as dI,vVe as dJ,CVe as dK,mVe as dL,jVe as dM,fVe as dN,FVe as dO,m0e as dP,xge as dQ,gH as dR,BPe as dS,whe as dT,b4e as dU,mRe as dV,Wke as dW,Xhe as dX,pGe as dY,D9 as dZ,hGe as d_,m6e as da,uf as db,gn as dc,hLe as dd,OLe as de,uee as df,TLe as dg,u$e as dh,C$e as di,QN as dj,bie as dk,bLe as dl,_ie as dm,vie as dn,RLe as dp,ELe as dq,cLe as dr,pLe as ds,Rx as dt,YEe as du,TW as dv,sx as dw,h_e as dx,Ige as dy,Nge as dz,qte as e,J$ as e$,ww as e0,aa as e1,r8e as e2,Sje as e3,Fn as e4,l5e as e5,X5e as e6,SH as e7,epe as e8,ux as e9,dx as eA,ree as eB,lee as eC,XEe as eD,see as eE,aee as eF,dk as eG,hk as eH,z9 as eI,no as eJ,Ece as eK,T5e as eL,GW as eM,wg as eN,Nk as eO,x4e as eP,Sfe as eQ,tee as eR,eh as eS,y$e as eT,n_e as eU,JEe as eV,oee as eW,$$e as eX,t4e as eY,GE as eZ,Y$ as e_,cx as ea,Uk as eb,Vk as ec,Qhe as ed,Iw as ee,B_ as ef,gD as eg,IFe as eh,fZ as ei,lie as ej,qD as ek,Bwe as el,p6e as em,Mw as en,xw as eo,Rwe as ep,QX as eq,i1e as er,v6e as es,ds as et,g6e as eu,eK as ev,i4e as ew,oZ as ex,jk as ey,Hhe as ez,Ax as f,SE as f$,Hg as f0,che as f1,wNe as f2,u7e as f3,i7e as f4,FK as f5,y_ as f6,dN as f7,_Ne as f8,c7e as f9,bs as fA,Pi as fB,cl as fC,Vw as fD,Rf as fE,lIe as fF,hCe as fG,FCe as fH,dCe as fI,r$e as fJ,i$e as fK,x$e as fL,cIe as fM,zH as fN,$4e as fO,ex as fP,Tw as fQ,D_ as fR,bd as fS,fs as fT,ghe as fU,ax as fV,Lk as fW,vhe as fX,Cie as fY,g4e as fZ,il as f_,d7e as fa,yte as fb,mte as fc,ii as fd,bVe as fe,MVe as ff,qDe as fg,H6e as fh,a8e as fi,N_ as fj,e4 as fk,$g as fl,Xp as fm,ix as fn,Uue as fo,Od as fp,b5e as fq,B4e as fr,Fze as fs,t0 as ft,Ike as fu,bke as fv,Eke as fw,eA as fx,hIe as fy,uIe as fz,Ge as g,wH as g$,fw as g0,kke as g1,Oze as g2,FE as g3,xx as g4,Hke as g5,YE as g6,at as g7,s0 as g8,hje as g9,J_ as gA,mr as gB,yQ as gC,th as gD,uo as gE,ZG as gF,BG as gG,Q4e as gH,Mg as gI,AJ as gJ,QD as gK,Rze as gL,_$e as gM,lW as gN,Gce as gO,gue as gP,tGe as gQ,cDe as gR,y2 as gS,gw as gT,P_ as gU,KCe as gV,tP as gW,m$ as gX,Ay as gY,vH as gZ,_H as g_,n0e as ga,ife as gb,Tje as gc,Nr as gd,cU as ge,ud as gf,k_ as gg,IE as gh,ft as gi,_7e as gj,y4e as gk,E4e as gl,_7 as gm,I4e as gn,HDe as go,WDe as gp,N4e as gq,uwe as gr,Pw as gs,YFe as gt,Uu as gu,JFe as gv,ZFe as gw,XFe as gx,Ad as gy,IVe as gz,M4e as h,Yhe as h$,QDe as h0,$5e as h1,q9e as h2,iGe as h3,oGe as h4,sGe as h5,Q7e as h6,r6e as h7,P7e as h8,L7e as h9,Y2 as hA,z4e as hB,S4e as hC,lo as hD,qNe as hE,aCe as hF,$7 as hG,DT as hH,kze as hI,WP as hJ,uW as hK,E7e as hL,dDe as hM,m$e as hN,Y4e as hO,cEe as hP,n4e as hQ,JTe as hR,rU as hS,hZ as hT,pZ as hU,gr as hV,r4e as hW,Xbe as hX,yX as hY,a$e as hZ,gX as h_,X5 as ha,$Te as hb,eje as hc,p9e as hd,DL as he,K5e as hf,$9e as hg,L2 as hh,QC as hi,jm as hj,hx as hk,Aje as hl,Ef as hm,e8e as hn,z6e as ho,pje as hp,Sce as hq,_8e as hr,hs,Cje as ht,Cge as hu,E3 as hv,Gg as hw,_w as hx,Si as hy,u0e as hz,iRe as i,j1e as i$,Dge as i0,B as i1,r_e as i2,kge as i3,Cx as i4,$J as i5,ZDe as i6,C2 as i7,n5e as i8,g$e as i9,Ww as iA,iL as iB,nA as iC,QLe as iD,Zw as iE,aIe as iF,Q5 as iG,twe as iH,Q_e as iI,W_e as iJ,Wa as iK,pI as iL,Vn as iM,u5e as iN,hU as iO,Lie as iP,dhe as iQ,tl as iR,ta as iS,ow as iT,B5 as iU,fIe as iV,pIe as iW,dIe as iX,VE as iY,L6e as iZ,P6e as i_,o$e as ia,ppe as ib,spe as ic,TZ as id,LVe as ie,y0e as ig,Nw as ih,She as ii,Dk as ij,Ehe as ik,$he as il,af as im,Tke as io,ZCe as ip,gke as iq,tIe as ir,jke as is,H9 as it,qX as iu,Zke as iv,yIe as iw,Fke as ix,sA as iy,MR as iz,W as j,gi as j$,CZ as j0,z5 as j1,Kze as j2,FFe as j3,u$ as j4,PFe as j5,ybe as j6,fbe as j7,Pje as j8,lz as j9,eEe as jA,UQ as jB,BDe as jC,v_ as jD,rP as jE,PQ as jF,AD as jG,fte as jH,x5e as jI,Kce as jJ,ms as jK,Rge as jL,Age as jM,e$e as jN,R$e as jO,I$e as jP,lEe as jQ,hA as jR,xLe as jS,TJ as jT,Jhe as jU,ipe as jV,l$ as jW,t$e as jX,iee as jY,JE as jZ,d$e as j_,bg as ja,Mk as jb,JW as jc,QV as jd,LAe as je,iP as jf,G9e as jg,az as jh,Ys as ji,Aee as jj,fu as jk,wT as jl,Y8e as jm,VQ as jn,n5 as jo,qN as jp,Lg as jq,rEe as jr,zQ as js,Ez as jt,Ph as ju,wi as jv,m5e as jw,cje as jx,vi as jy,KTe as jz,mw as k,Bk as k$,Iie as k0,Aue as k1,oCe as k2,EPe as k3,XCe as k4,MNe as k5,Zre as k6,jNe as k7,LW as k8,VW as k9,ANe as kA,RNe as kB,CNe as kC,zNe as kD,INe as kE,NNe as kF,PNe as kG,LNe as kH,kNe as kI,DNe as kJ,Pie as kK,$7e as kL,$ce as kM,pn as kN,MJ as kO,A4e as kP,Pde as kQ,o5e as kR,a5e as kS,s5e as kT,nhe as kU,Fu as kV,fx as kW,Oa as kX,Nje as kY,ije as kZ,RZ as k_,p0e as ka,Pte as kb,sze as kc,tie as kd,yk as ke,qy as kf,$Ne as kg,TGe as kh,ePe as ki,_ke as kj,tPe as kk,Ho as kl,zg as km,aie as kn,V5 as ko,Gu as kp,qke as kq,FNe as kr,GNe as ks,jre as kt,D5 as ku,x$ as kv,oIe as kw,sr as kx,ZNe as ky,xNe as kz,h as l,nVe as l$,Lpe as l0,are as l1,V_e as l2,z_e as l3,KV as l4,o9e as l5,s9e as l6,n9e as l7,i9e as l8,l9e as l9,Ipe as lA,Fpe as lB,Ew as lC,X4e as lD,iEe as lE,F8 as lF,e9e as lG,Rfe as lH,bje as lI,Tk as lJ,q5e as lK,B5e as lL,VMe as lM,nde as lN,ide as lO,yje as lP,ULe as lQ,KDe as lR,Xx as lS,T5 as lT,jn as lU,Kx as lV,zVe as lW,el as lX,$Ge as lY,pt as lZ,C4e as l_,a9e as la,r9e as lb,t9e as lc,sPe as ld,nfe as le,sfe as lf,TE as lg,wde as lh,A as li,The as lj,jD as lk,V6e as ll,j6e as lm,qce as ln,F5e as lo,T7e as lp,S7e as lq,Xre as lr,Yre as ls,AEe as lt,MEe as lu,nee as lv,X2e as lw,yf as lx,oz as ly,B9e as lz,pP as m,sSe as m$,A2 as m0,NMe as m1,bve as m2,_ue as m3,m4e as m4,Gde as m5,ox as m6,T4e as m7,HZ as m8,Ype as m9,Qze as mA,BQ as mB,NAe as mC,Rd as mD,eMe as mE,rMe as mF,iMe as mG,e0 as mH,w1e as mI,vf as mJ,VNe as mK,i6e as mL,JNe as mM,b7e as mN,v7e as mO,$B as mP,Id as mQ,q_ as mR,Lke as mS,s_e as mT,Jbe as mU,Kbe as mV,Lv as mW,$u as mX,xK as mY,GD as mZ,n0 as m_,oje as ma,mK as mb,JQ as mc,O4e as md,zx as me,l4e as mf,a4e as mg,fQ as mh,hQ as mi,A2e as mj,O2e as mk,h7e as ml,XV as mm,Jpe as mn,tEe as mo,ea as mp,qk as mq,Hk as mr,f$ as ms,PZ as mt,m9e as mu,f9e as mv,y9e as mw,AAe as mx,e7e as my,t7e as mz,vRe as n,JCe as n$,PEe as n0,x9e as n1,p5e as n2,wQ as n3,jQ as n4,X_ as n5,Ba as n6,YD as n7,GN as n8,uQ as n9,Qbe as nA,e_e as nB,QTe as nC,Bw as nD,P2e as nE,Q5e as nF,v4e as nG,aW as nH,D6e as nI,k6e as nJ,Ck as nK,f_e as nL,d_e as nM,l$e as nN,c_e as nO,z1e as nP,Lve as nQ,K2e as nR,U5 as nS,AIe as nT,Uje as nU,R4e as nV,DX as nW,iie as nX,Dd as nY,kCe as nZ,YCe as n_,Gw as na,t6e as nb,kVe as nc,hVe as nd,bH as ne,BW as nf,f4e as ng,yZ as nh,Z8 as ni,XW as nj,EMe as nk,Td as nl,e6e as nm,xf as nn,Zo as no,Swe as np,s4e as nq,c0e as nr,rje as ns,tje as nt,kw as nu,Dw as nv,jw as nw,jLe as nx,GLe as ny,t_e as nz,pze as o,VTe as o$,DCe as o0,eIe as o1,ske as o2,Ske as o3,Ny as o4,uz as o5,TMe as o6,z9e as o7,PAe as o8,fz as o9,xre as oA,E_ as oB,K_ as oC,SEe as oD,yNe as oE,fNe as oF,Vp as oG,Fx as oH,hD as oI,D5e as oJ,HK as oK,t5e as oL,NQ as oM,w8e as oN,S8e as oO,T8e as oP,Xa as oQ,h9e as oR,_z as oS,XUe as oT,z3e as oU,ni as oV,qx as oW,IQ as oX,LQ as oY,ITe as oZ,J8e as o_,pz as oa,nEe as ob,Sv as oc,fn as od,m_e as oe,M_e as of,ng as og,D2e as oh,gie as oi,LFe as oj,__e as ok,FLe as ol,zLe as om,Vze as on,rbe as oo,cK as op,zze as oq,u0 as or,N5 as os,TIe as ot,SIe as ou,uA as ov,Ore as ow,zIe as ox,Lre as oy,R$ as oz,Ut as p,IC as p$,X8e as p0,Ek as p1,L2e as p2,Q2e as p3,aR as p4,zFe as p5,c$ as p6,E$e as p7,qbe as p8,VFe as p9,j2e as pA,F2e as pB,sje as pC,rTe as pD,_Q as pE,$z as pF,Nee as pG,C9e as pH,I9e as pI,N9e as pJ,P9e as pK,v9e as pL,_9e as pM,b9e as pN,tMe as pO,hpe as pP,Ou as pQ,pTe as pR,JD as pS,Wpe as pT,nje as pU,G4e as pV,Y_ as pW,mW as pX,MV as pY,E2e as pZ,$2e as p_,Uw as pa,Mf as pb,RFe as pc,g5e as pd,mje as pe,o8e as pf,Qd as pg,KFe as ph,OPe as pi,la as pj,ff as pk,L9e as pl,$ee as pm,K4e as pn,C$ as po,rGe as pp,D9e as pq,k9e as pr,YUe as ps,JUe as pt,dG as pu,tTe as pv,Gx as pw,$Z as px,q4e as py,Z2e as pz,le as q,KUe as q$,Zje as q0,H4e as q1,L4e as q2,P4e as q3,dpe as q4,pve as q5,tQ as q6,ede as q7,Qce as q8,fve as q9,n6e as qA,aGe as qB,kL as qC,z7e as qD,nGe as qE,N7e as qF,B7e as qG,V7e as qH,rLe as qI,G7e as qJ,vB as qK,mB as qL,gB as qM,J7e as qN,Y7e as qO,K7e as qP,X7e as qQ,E9e as qR,tLe as qS,A9e as qT,XD as qU,nLe as qV,T9e as qW,k7e as qX,zAe as qY,S9e as qZ,Sz as q_,PMe as qa,NFe as qb,UE as qc,tVe as qd,ri as qe,iA as qf,dGe as qg,ZUe as qh,pG as qi,QCe as qj,LGe as qk,Nze as ql,f7e as qm,h6e as qn,s6e as qo,l6e as qp,o6e as qq,u6e as qr,a6e as qs,d6e as qt,vn as qu,swe as qv,WFe as qw,eVe as qx,y7e as qy,y8 as qz,u as r,b_e as r$,QUe as r0,M9e as r1,O9e as r2,j9e as r3,F9e as r4,u9e as r5,U9e as r6,V9e as r7,xAe as r8,RAe as r9,lje as rA,d8e as rB,YTe as rC,U7e as rD,eGe as rE,dje as rF,lGe as rG,gje as rH,Z7e as rI,W7e as rJ,cB as rK,EG as rL,hB as rM,uB as rN,kG as rO,gG as rP,mG as rQ,yG as rR,TG as rS,kx as rT,q7e as rU,H7e as rV,wje as rW,j8e as rX,pQ as rY,bJ as rZ,pW as r_,g9e as ra,qee as rb,_g as rc,R9e as rd,_4e as re,sEe as rf,_pe as rg,bpe as rh,W4e as ri,Cue as rj,IG as rk,AG as rl,zpe as rm,MG as rn,qG as ro,OG as rp,$je as rq,LG as rr,QG as rs,eB as rt,tB as ru,afe as rv,aje as rw,Bpe as rx,jC as ry,rB as rz,V as s,W6e as s$,Uge as s0,G2e as s1,p1e as s2,oFe as s3,aFe as s4,CD as s5,YT as s6,m1e as s7,IMe as s8,H_ as s9,c9e as sA,YAe as sB,Q9e as sC,WUe as sD,lwe as sE,vJ as sF,uEe as sG,Mhe as sH,K6e as sI,Q6e as sJ,R_e as sK,O_e as sL,O$e as sM,DVe as sN,RVe as sO,Bd as sP,PVe as sQ,jze as sR,f2e as sS,q8e as sT,VIe as sU,Cy as sV,cNe as sW,c8e as sX,n8e as sY,q6e as sZ,Y6e as s_,Z_ as sa,Pg as sb,y1e as sc,c5e as sd,Hs as se,T1e as sf,E1e as sg,LD as sh,x9 as si,B3e as sj,q8 as sk,Dje as sl,SAe as sm,mZ as sn,_je as so,Pze as sp,Gfe as sq,s7e as sr,n7e as ss,JV as st,K9e as su,X9e as sv,J9e as sw,KAe as sx,Iee as sy,d9e as sz,M as t,d5e as t0,m8e as t1,y8e as t2,i5e as t3,G6e as t4,fje as t5,t8e as t6,Bve as t7,NEe as t8,YQ as t9,pJ as tA,jFe as tB,J6e as tC,DFe as tD,dV as tE,kFe as tF,vje as tG,cV as tH,yD as tI,LH as tJ,v5e as tK,X6e as tL,a_e as tM,i_e as tN,uV as tO,y_e as tP,tFe as tQ,iFe as tR,oVe as tS,Jze as tT,p7e as tU,xGe as tV,h5e as ta,o2 as tb,y9 as tc,Dx as td,r7e as te,zd as tf,PL as tg,XDe as th,mue as ti,JDe as tj,B6e as tk,H9e as tl,n$e as tm,Z6e as tn,Wbe as to,U6e as tp,I7e as tq,Vm as tr,l8e as ts,U1e as tt,H2e as tu,e4e as tv,C2e as tw,F1e as tx,U5e as ty,oY as tz,$Q as u,gTe as v,yx as w,vTe as x,vDe as y,m_ as z};
